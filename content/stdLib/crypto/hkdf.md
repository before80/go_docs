+++
title = "hkdf"
date = 2025-04-01T13:15:20+08:00
type = "docs"
description = ""
isCJKLanguage = true
draft = false

+++
> 原文：[https://pkg.go.dev/crypto/hkdf@go1.24.2](https://pkg.go.dev/crypto/hkdf@go1.24.2)

> 注意
>
> ​	从go1.24.0开始才可以使用该包。

## Overview 

Package hkdf implements the HMAC-based Extract-and-Expand Key Derivation Function (HKDF) as defined in [RFC 5869](https://rfc-editor.org/rfc/rfc5869.html).

HKDF is a cryptographic key derivation function (KDF) with the goal of expanding limited input keying material into one or more cryptographically strong secret keys.

### Example(Usage)

Usage example that expands one master secret into three other cryptographically secure keys.

```go
package main

import (
	"bytes"
	"crypto/hkdf"
	"crypto/rand"
	"crypto/sha256"
	"fmt"
)

func main() {
	// Underlying hash function for HMAC.
	hash := sha256.New
	keyLen := hash().Size()

	// Cryptographically secure master secret.
	secret := []byte{0x00, 0x01, 0x02, 0x03} // i.e. NOT this.

	// Non-secret salt, optional (can be nil).
	// Recommended: hash-length random value.
	salt := make([]byte, hash().Size())
	if _, err := rand.Read(salt); err != nil {
		panic(err)
	}

	// Non-secret context info, optional (can be nil).
	info := "hkdf example"

	// Generate three 128-bit derived keys.
	var keys [][]byte
	for i := 0; i < 3; i++ {
		key, err := hkdf.Key(hash, secret, salt, info, keyLen)
		if err != nil {
			panic(err)
		}
		keys = append(keys, key)
	}

	for i := range keys {
		fmt.Printf("Key #%d: %v\n", i+1, !bytes.Equal(keys[i], make([]byte, 16)))
	}

}
Output:

Key #1: true
Key #2: true
Key #3: true
```



## 常量

This section is empty.

## 变量

This section is empty.

## 函数

### func Expand

```go
func Expand[H hash.Hash](h func() H, pseudorandomKey []byte, info string, keyLength int) ([]byte, error)
```

Expand derives a key from the given hash, key, and optional context info, returning a []byte of length keyLength that can be used as cryptographic key. The extraction step is skipped.

The key should have been generated by [Extract](https://pkg.go.dev/crypto/hkdf@go1.24.2#Extract), or be a uniformly random or pseudorandom cryptographically strong key. See [RFC 5869, Section 3.3](https://rfc-editor.org/rfc/rfc5869.html#section-3.3). Most common scenarios will want to use [Key](https://pkg.go.dev/crypto/hkdf@go1.24.2#Key) instead.

### func Extract

```go
func Extract[H hash.Hash](h func() H, secret, salt []byte) ([]byte, error)
```

Extract generates a pseudorandom key for use with [Expand](https://pkg.go.dev/crypto/hkdf@go1.24.2#Expand) from an input secret and an optional independent salt.

Only use this function if you need to reuse the extracted key with multiple Expand invocations and different context values. Most common scenarios, including the generation of multiple keys, should use [Key](https://pkg.go.dev/crypto/hkdf@go1.24.2#Key) instead.

### func Key

```go
func Key[Hash hash.Hash](h func() Hash, secret, salt []byte, info string, keyLength int) ([]byte, error)
```

Key derives a key from the given hash, secret, salt and context info, returning a []byte of length keyLength that can be used as cryptographic key. Salt and info can be nil.

## 类型

This section is empty.