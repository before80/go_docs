<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="cn" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.111.3">
<link rel="canonical" type="text/html" href="http://ngd.cn/docs/stdLib/testing/">
<link rel="alternate" type="application/rss&#43;xml" href="http://ngd.cn/docs/stdLib/testing/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>testing | go文档集</title>
<meta name="description" content="The most popular HTML, CSS, and JS library in the world.">
<meta property="og:title" content="testing" />
<meta property="og:description" content="The most popular HTML, CSS, and JS library in the world." />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://ngd.cn/docs/stdLib/testing/" />
<meta itemprop="name" content="testing">
<meta itemprop="description" content="The most popular HTML, CSS, and JS library in the world."><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="testing"/>
<meta name="twitter:description" content="The most popular HTML, CSS, and JS library in the world."/>




<link rel="preload" href="/scss/main.min.bb1f3a37154c4661ae02d3cb1a733edd8005db70f626370ca004c689a63ab7d4.css" as="style">
<link href="/scss/main.min.bb1f3a37154c4661ae02d3cb1a733edd8005db70f626370ca004c689a63ab7d4.css" rel="stylesheet" integrity="">

<link href="/css/extra.css" rel="stylesheet">
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-00000000-0"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-00000000-0');
}
</script>
  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">go文档集</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="/docs/"><span class="active">文档</span></a>
      </li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search">
  <div class="td-search__icon"></div>
  <input type="search" class="td-search__input form-control td-search-input" placeholder="" aria-label="" autocomplete="off">
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>

<a href="#" onclick="print();return false;"></a>.
</p><p>
<a href="/docs/stdLib/testing/"></a>.
</p>
</div>



<h1 class="title">testing</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-15c4da7a1311106016b4a6a6b2bc69e8">fstest</a></li>


    
  
    
    
	
<li>2: <a href="#pg-322639ff9eeda9b3fe5901312f6cdaa3">iotest</a></li>


    
  
    
    
	
<li>3: <a href="#pg-5cc28b3beacd494aaeff5e173ab160da">quick</a></li>


    
  
    
    
	
<li>4: <a href="#pg-d681b0024499d99258a95eaa106cf4ca">testing</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-15c4da7a1311106016b4a6a6b2bc69e8">1 - fstest</h1>
    
	<h1 id="fstest">fstest</h1>
<p><a href="https://pkg.go.dev/testing/fstest@go1.20.1" target="_blank" rel="noopener">https://pkg.go.dev/testing/fstest@go1.20.1</a></p>
<p>fstest包实现了用于测试文件系统实现和用户的支持。</p>
<h2 id="常量">常量</h2>
<p>This section is empty.</p>
<h2 id="变量">变量</h2>
<p>This section is empty.</p>
<h2 id="函数">函数</h2>
<h4 id="func-testfshttpscsopensourcegooglegogogo1201srctestingfstesttestfsgol36">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fstest/testfs.go;l=36" target="_blank" rel="noopener">TestFS</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestFS</span>(<span style="color:#e06c75">fsys</span> <span style="color:#e06c75">fs</span>.<span style="color:#e06c75">FS</span>, <span style="color:#e06c75">expected</span> <span style="color:#56b6c2">...</span><span style="color:#e5c07b">string</span>) <span style="color:#e5c07b">error</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	TestFS函数测试文件系统实现。它遍历fsys中的所有文件树，打开并检查每个文件是否正确。它还检查文件系统至少包含所需的文件。特殊情况是，如果没有列出所需的文件，则fsys必须为空。否则，fsys必须至少包含所列出的文件；它也可以包含其他文件。fsys的内容不能与TestFS函数并发更改。</p>
<p>​	如果TestFS函数发现任何不良行为，它将返回一个报告所有不良行为的错误。错误文本跨多行，每行报告一个检测到的不良行为。</p>
<p>​	在测试内部的典型用法是：</p>
<pre tabindex="0"><code>if err := fstest.TestFS(myFS, &#34;file/that/should/be/present&#34;); err != nil {
	t.Fatal(err)
}
</code></pre><h2 id="类型">类型</h2>
<h3 id="type-mapfshttpscsopensourcegooglegogogo1201srctestingfstestmapfsgol33">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fstest/mapfs.go;l=33" target="_blank" rel="noopener">MapFS</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">MapFS</span> <span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>]<span style="color:#56b6c2">*</span><span style="color:#e06c75">MapFile</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	MapFS是一个简单的内存文件系统，用于测试，表示为从路径名(Open的参数)到有关它们所表示的文件或目录的信息的映射。</p>
<p>​	该映射不必包括包含在映射中的文件的父目录；如果需要，这些父目录将被合成。但是，可以通过设置MapFile.Mode的ModeDir位来包括目录；这可能是对目录的FileInfo进行详细控制或创建空目录所必需的。</p>
<p>​	文件系统操作直接从映射中读取，因此可以通过编辑映射来更改文件系统。一个含义是文件系统操作不能与对映射的更改同时运行，这将导致竞争。另一个含义是打开或读取目录需要迭代整个映射，因此MapFS通常应仅用于少于几百个条目或目录读取的情况。</p>
<h4 id="mapfs-globhttpscsopensourcegooglegogogo1201srctestingfstestmapfsgol133">(MapFS) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fstest/mapfs.go;l=133" target="_blank" rel="noopener">Glob</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">fsys</span> <span style="color:#e06c75">MapFS</span>) <span style="color:#61afef;font-weight:bold">Glob</span>(<span style="color:#e06c75">pattern</span> <span style="color:#e5c07b">string</span>) ([]<span style="color:#e5c07b">string</span>, <span style="color:#e5c07b">error</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="mapfs-openhttpscsopensourcegooglegogogo1201srctestingfstestmapfsgol47">(MapFS) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fstest/mapfs.go;l=47" target="_blank" rel="noopener">Open</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">fsys</span> <span style="color:#e06c75">MapFS</span>) <span style="color:#61afef;font-weight:bold">Open</span>(<span style="color:#e06c75">name</span> <span style="color:#e5c07b">string</span>) (<span style="color:#e06c75">fs</span>.<span style="color:#e06c75">File</span>, <span style="color:#e5c07b">error</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>Open opens the named file.</p>
<h4 id="mapfs-readdirhttpscsopensourcegooglegogogo1201srctestingfstestmapfsgol129">(MapFS) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fstest/mapfs.go;l=129" target="_blank" rel="noopener">ReadDir</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">fsys</span> <span style="color:#e06c75">MapFS</span>) <span style="color:#61afef;font-weight:bold">ReadDir</span>(<span style="color:#e06c75">name</span> <span style="color:#e5c07b">string</span>) ([]<span style="color:#e06c75">fs</span>.<span style="color:#e06c75">DirEntry</span>, <span style="color:#e5c07b">error</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="mapfs-readfilehttpscsopensourcegooglegogogo1201srctestingfstestmapfsgol121">(MapFS) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fstest/mapfs.go;l=121" target="_blank" rel="noopener">ReadFile</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">fsys</span> <span style="color:#e06c75">MapFS</span>) <span style="color:#61afef;font-weight:bold">ReadFile</span>(<span style="color:#e06c75">name</span> <span style="color:#e5c07b">string</span>) ([]<span style="color:#e5c07b">byte</span>, <span style="color:#e5c07b">error</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="mapfs-stathttpscsopensourcegooglegogogo1201srctestingfstestmapfsgol125">(MapFS) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fstest/mapfs.go;l=125" target="_blank" rel="noopener">Stat</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">fsys</span> <span style="color:#e06c75">MapFS</span>) <span style="color:#61afef;font-weight:bold">Stat</span>(<span style="color:#e06c75">name</span> <span style="color:#e5c07b">string</span>) (<span style="color:#e06c75">fs</span>.<span style="color:#e06c75">FileInfo</span>, <span style="color:#e5c07b">error</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="mapfs-subhttpscsopensourcegooglegogogo1201srctestingfstestmapfsgol143">(MapFS) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fstest/mapfs.go;l=143" target="_blank" rel="noopener">Sub</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">fsys</span> <span style="color:#e06c75">MapFS</span>) <span style="color:#61afef;font-weight:bold">Sub</span>(<span style="color:#e06c75">dir</span> <span style="color:#e5c07b">string</span>) (<span style="color:#e06c75">fs</span>.<span style="color:#e06c75">FS</span>, <span style="color:#e5c07b">error</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="type-mapfilehttpscsopensourcegooglegogogo1201srctestingfstestmapfsgol36">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fstest/mapfs.go;l=36" target="_blank" rel="noopener">MapFile</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">MapFile</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Data</span>    []<span style="color:#e5c07b">byte</span>      <span style="color:#7f848e">// file content
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Mode</span>    <span style="color:#e06c75">fs</span>.<span style="color:#e06c75">FileMode</span> <span style="color:#7f848e">// FileInfo.Mode
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">ModTime</span> <span style="color:#e06c75">time</span>.<span style="color:#e06c75">Time</span>   <span style="color:#7f848e">// FileInfo.ModTime
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Sys</span>     <span style="color:#e06c75">any</span>         <span style="color:#7f848e">// FileInfo.Sys
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	MapFile描述MapFS中的单个文件。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-322639ff9eeda9b3fe5901312f6cdaa3">2 - iotest</h1>
    
	<h1 id="iotest">iotest</h1>
<p><a href="https://pkg.go.dev/testing/iotest@go1.20.1" target="_blank" rel="noopener">https://pkg.go.dev/testing/iotest@go1.20.1</a></p>
<p>包 iotest 实现了一些用于测试的 Reader 和 Writer。</p>
<h2 id="常量">常量</h2>
<p>This section is empty.</p>
<h2 id="变量">变量</h2>
<p><a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/iotest/reader.go;l=74" target="_blank" rel="noopener">View Source</a></p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">ErrTimeout</span> = <span style="color:#e06c75">errors</span>.<span style="color:#61afef;font-weight:bold">New</span>(<span style="color:#98c379">&#34;timeout&#34;</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	ErrTimeout 是一个虚假的超时错误。</p>
<h2 id="函数">函数</h2>
<h4 id="func-dataerrreaderhttpscsopensourcegooglegogogo1201srctestingiotestreadergol47">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/iotest/reader.go;l=47" target="_blank" rel="noopener">DataErrReader</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">DataErrReader</span>(<span style="color:#e06c75">r</span> <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>) <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	DataErrReader函数更改 Reader 处理错误的方式。通常，Reader 在读取最后一块数据后的第一次读取调用中返回一个错误(通常是 EOF)。DataErrReader 包装一个 Reader 并更改其行为，以便最终的错误与最终数据一起返回，而不是在最终数据后的第一次调用中返回。</p>
<h4 id="func-errreaderhttpscsopensourcegooglegogogo1201srctestingiotestreadergol94----go116">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/iotest/reader.go;l=94" target="_blank" rel="noopener">ErrReader</a>  &lt;- go1.16</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">ErrReader</span>(<span style="color:#e06c75">err</span> <span style="color:#e5c07b">error</span>) <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	ErrReader函数返回一个 io.Reader，该 Reader 的所有 Read 调用都会返回 0，err。</p>
<h5 id="errreader-example">ErrReader Example</h5>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;errors&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;testing/iotest&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// A reader that always returns a custom error.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">r</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">iotest</span>.<span style="color:#61afef;font-weight:bold">ErrReader</span>(<span style="color:#e06c75">errors</span>.<span style="color:#61afef;font-weight:bold">New</span>(<span style="color:#98c379">&#34;custom error&#34;</span>))
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">n</span>, <span style="color:#e06c75">err</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">r</span>.<span style="color:#61afef;font-weight:bold">Read</span>(<span style="color:#e5c07b">nil</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">fmt</span>.<span style="color:#61afef;font-weight:bold">Printf</span>(<span style="color:#98c379">&#34;n:   %d\nerr: %q\n&#34;</span>, <span style="color:#e06c75">n</span>, <span style="color:#e06c75">err</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Output</span>:
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">n</span>:   <span style="color:#d19a66">0</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">err</span>: <span style="color:#98c379">&#34;custom error&#34;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="func-halfreaderhttpscsopensourcegooglegogogo1201srctestingiotestreadergol32">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/iotest/reader.go;l=32" target="_blank" rel="noopener">HalfReader</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">HalfReader</span>(<span style="color:#e06c75">r</span> <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>) <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	HalfReader函数返回一个 Reader，它通过从 <code>r</code> 读取一半所需的字节数来实现 Read。</p>
<h4 id="func-newreadloggerhttpscsopensourcegooglegogogo1201srctestingiotestloggergol52">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/iotest/logger.go;l=52" target="_blank" rel="noopener">NewReadLogger</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">NewReadLogger</span>(<span style="color:#e06c75">prefix</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">r</span> <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>) <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	NewReadLogger函数返回一个 Reader，它的行为类似于 <code>r</code>，但记录(使用 log.Printf)每次读取到标准错误输出，打印前缀和十六进制读取的数据。</p>
<h4 id="func-newwriteloggerhttpscsopensourcegooglegogogo1201srctestingiotestloggergol30">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/iotest/logger.go;l=30" target="_blank" rel="noopener">NewWriteLogger</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">NewWriteLogger</span>(<span style="color:#e06c75">prefix</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">w</span> <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Writer</span>) <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Writer</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	NewWriteLogger函数返回一个 Writer，它的行为类似于 <code>w</code>，但记录(使用 log.Printf)每次写入到标准错误输出，打印前缀和十六进制写入的数据。</p>
<h4 id="func-onebytereaderhttpscsopensourcegooglegogogo1201srctestingiotestreadergol17">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/iotest/reader.go;l=17" target="_blank" rel="noopener">OneByteReader</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">OneByteReader</span>(<span style="color:#e06c75">r</span> <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>) <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	OneByteReader函数返回一个 Reader，它通过从 <code>r</code> 读取一个字节来实现每个非空的 Read。</p>
<h4 id="func-testreaderhttpscsopensourcegooglegogogo1201srctestingiotestreadergol136----go116">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/iotest/reader.go;l=136" target="_blank" rel="noopener">TestReader</a>  &lt;- go1.16</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestReader</span>(<span style="color:#e06c75">r</span> <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>, <span style="color:#e06c75">content</span> []<span style="color:#e5c07b">byte</span>) <span style="color:#e5c07b">error</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	TestReade函数测试从 <code>r</code> 读取数据是否返回预期的文件内容。它对不同大小的读取进行了测试，直到 EOF。如果 <code>r</code> 实现了 io.ReaderAt 方法或 io.Seeker方法，则 TestReader函数还检查这些操作的行为是否符合预期。</p>
<p>​	如果 TestReader函数发现任何行为不当，它将返回报告这些问题的错误。错误文本可能跨越多行。</p>
<h4 id="func-timeoutreaderhttpscsopensourcegooglegogogo1201srctestingiotestreadergol78">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/iotest/reader.go;l=78" target="_blank" rel="noopener">TimeoutReader</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TimeoutReader</span>(<span style="color:#e06c75">r</span> <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>) <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	TimeoutReader函数在第二次无数据的读取上返回 ErrTimeout。随后的读取调用成功。</p>
<h4 id="func-truncatewriterhttpscsopensourcegooglegogogo1201srctestingiotestwritergol11">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/iotest/writer.go;l=11" target="_blank" rel="noopener">TruncateWriter</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TruncateWriter</span>(<span style="color:#e06c75">w</span> <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Writer</span>, <span style="color:#e06c75">n</span> <span style="color:#e5c07b">int64</span>) <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Writer</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	TruncateWriter函数返回一个 Writer，它写入 <code>w</code>，但在写入 n 个字节后静默停止。</p>
<h2 id="类型">类型</h2>
<p>This section is empty.</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-5cc28b3beacd494aaeff5e173ab160da">3 - quick</h1>
    
	<h1 id="quick">quick</h1>
<p><a href="https://pkg.go.dev/testing/quick@go1.20.1" target="_blank" rel="noopener">https://pkg.go.dev/testing/quick@go1.20.1</a></p>
<p>quick包实现了一些实用的函数，以帮助黑盒测试。</p>
<p>testing/quick包已被冻结，不接受新特性。</p>
<h2 id="常量">常量</h2>
<p>This section is empty.</p>
<h2 id="变量">变量</h2>
<p>This section is empty.</p>
<h2 id="函数">函数</h2>
<h4 id="func-checkhttpscsopensourcegooglegogogo1201srctestingquickquickgol263">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/quick/quick.go;l=263" target="_blank" rel="noopener">Check</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Check</span>(<span style="color:#e06c75">f</span> <span style="color:#e06c75">any</span>, <span style="color:#e06c75">config</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">Config</span>) <span style="color:#e5c07b">error</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Check函数会查找一个<code>f</code>的输入，即任何返回bool类型的函数，使得<code>f</code>返回false。它会重复调用<code>f</code>，对于每个参数都使用任意值。如果<code>f</code>在给定的输入上返回false，则Check会将该输入作为<code>*CheckError</code>返回。例如：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestOddMultipleOfThree</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">func</span>(<span style="color:#e06c75">x</span> <span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">bool</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">y</span> <span style="color:#56b6c2">:=</span> <span style="color:#61afef;font-weight:bold">OddMultipleOfThree</span>(<span style="color:#e06c75">x</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">return</span> <span style="color:#e06c75">y</span><span style="color:#56b6c2">%</span><span style="color:#d19a66">2</span> <span style="color:#56b6c2">==</span> <span style="color:#d19a66">1</span> <span style="color:#56b6c2">&amp;&amp;</span> <span style="color:#e06c75">y</span><span style="color:#56b6c2">%</span><span style="color:#d19a66">3</span> <span style="color:#56b6c2">==</span> <span style="color:#d19a66">0</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">if</span> <span style="color:#e06c75">err</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">quick</span>.<span style="color:#61afef;font-weight:bold">Check</span>(<span style="color:#e06c75">f</span>, <span style="color:#e5c07b">nil</span>); <span style="color:#e06c75">err</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Error</span>(<span style="color:#e06c75">err</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="func-checkequalhttpscsopensourcegooglegogogo1201srctestingquickquickgol302">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/quick/quick.go;l=302" target="_blank" rel="noopener">CheckEqual</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">CheckEqual</span>(<span style="color:#e06c75">f</span>, <span style="color:#e06c75">g</span> <span style="color:#e06c75">any</span>, <span style="color:#e06c75">config</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">Config</span>) <span style="color:#e5c07b">error</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	CheckEqual函数会查找一个输入，使得<code>f</code>和<code>g</code>返回不同的结果。它会重复调用<code>f</code>和<code>g</code>，对于每个参数都使用任意值。如果<code>f</code>和<code>g</code>返回不同的答案，则CheckEqual函数会返回一个<code>*CheckEqualError</code>，描述输入和输出。</p>
<h4 id="func-valuehttpscsopensourcegooglegogogo1201srctestingquickquickgol59">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/quick/quick.go;l=59" target="_blank" rel="noopener">Value</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Value</span>(<span style="color:#e06c75">t</span> <span style="color:#e06c75">reflect</span>.<span style="color:#e06c75">Type</span>, <span style="color:#e06c75">rand</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">rand</span>.<span style="color:#e06c75">Rand</span>) (<span style="color:#e06c75">value</span> <span style="color:#e06c75">reflect</span>.<span style="color:#e06c75">Value</span>, <span style="color:#e06c75">ok</span> <span style="color:#e5c07b">bool</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Value函数返回给定类型的任意值。如果类型实现了Generator接口，则会使用它。注意：要为结构体创建任意值，必须导出所有字段。</p>
<h2 id="类型">类型</h2>
<h3 id="type-checkequalerrorhttpscsopensourcegooglegogogo1201srctestingquickquickgol238">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/quick/quick.go;l=238" target="_blank" rel="noopener">CheckEqualError</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">CheckEqualError</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">CheckError</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Out1</span> []<span style="color:#e06c75">any</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Out2</span> []<span style="color:#e06c75">any</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	CheckEqualError结构体是CheckEqual函数发现错误的结果。</p>
<h4 id="checkequalerror-errorhttpscsopensourcegooglegogogo1201srctestingquickquickgol244">(*CheckEqualError) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/quick/quick.go;l=244" target="_blank" rel="noopener">Error</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">s</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">CheckEqualError</span>) <span style="color:#61afef;font-weight:bold">Error</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="type-checkerrorhttpscsopensourcegooglegogogo1201srctestingquickquickgol228">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/quick/quick.go;l=228" target="_blank" rel="noopener">CheckError</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">CheckError</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Count</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">In</span>    []<span style="color:#e06c75">any</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	CheckError结构体是Check函数发现错误的结果。</p>
<h4 id="checkerror-errorhttpscsopensourcegooglegogogo1201srctestingquickquickgol233">(*CheckError) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/quick/quick.go;l=233" target="_blank" rel="noopener">Error</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">s</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">CheckError</span>) <span style="color:#61afef;font-weight:bold">Error</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="type-confighttpscsopensourcegooglegogogo1201srctestingquickquickgol177">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/quick/quick.go;l=177" target="_blank" rel="noopener">Config</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Config</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// MaxCount设置最大迭代次数。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#7f848e">// 如果为零，则使用MaxCountScale。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">MaxCount</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// MaxCountScale是默认最大值的非负比例因子。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#7f848e">// 0表示默认值，通常为100，但可以通过-quickchecks标志设置。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">MaxCountScale</span> <span style="color:#e5c07b">float64</span>
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// Rand指定随机数的源。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#7f848e">// 如果为nil，则使用默认的伪随机源。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Rand</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">rand</span>.<span style="color:#e06c75">Rand</span>
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// Values指定生成与正在测试的函数的参数相一致的
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    <span style="color:#7f848e">// 任意reflect.Values切片的函数。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#7f848e">// 如果为nil，则使用顶层Value函数来生成它们。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Values</span> <span style="color:#c678dd">func</span>([]<span style="color:#e06c75">reflect</span>.<span style="color:#e06c75">Value</span>, <span style="color:#56b6c2">*</span><span style="color:#e06c75">rand</span>.<span style="color:#e06c75">Rand</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>A Config structure contains options for running a test.</p>
<p>Config结构包含运行测试的选项。</p>
<h3 id="type-generatorhttpscsopensourcegooglegogogo1201srctestingquickquickgol23">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/quick/quick.go;l=23" target="_blank" rel="noopener">Generator</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Generator</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// Generate使用size作为大小提示，返回其所属类型的随机实例。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#61afef;font-weight:bold">Generate</span>(<span style="color:#e06c75">rand</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">rand</span>.<span style="color:#e06c75">Rand</span>, <span style="color:#e06c75">size</span> <span style="color:#e5c07b">int</span>) <span style="color:#e06c75">reflect</span>.<span style="color:#e06c75">Value</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Generator接口可以生成其自身类型的随机值。</p>
<h3 id="type-setuperrorhttpscsopensourcegooglegogogo1201srctestingquickquickgol223">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/quick/quick.go;l=223" target="_blank" rel="noopener">SetupError</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">SetupError</span> <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	SetupError类型是check的使用方式中出现的错误结果，与被测试的函数无关。</p>
<h4 id="setuperror-errorhttpscsopensourcegooglegogogo1201srctestingquickquickgol225">(SetupError) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/quick/quick.go;l=225" target="_blank" rel="noopener">Error</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">s</span> <span style="color:#e06c75">SetupError</span>) <span style="color:#61afef;font-weight:bold">Error</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d681b0024499d99258a95eaa106cf4ca">4 - testing</h1>
    
	<h1 id="testing">testing</h1>
<p><a href="https://pkg.go.dev/testing@go1.20.1" target="_blank" rel="noopener">https://pkg.go.dev/testing@go1.20.1</a></p>
<p>​	testing包提供了对Go程序包进行自动化测试的支持。它旨在与&quot;go test&quot;命令一起使用，该命令自动执行以下形式的任何函数：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestXxx</span>(<span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>其中Xxx不以小写字母开头。函数名称用于标识测试例程。</p>
<p>​	在这些函数内部，使用Error、Fail或相关方法来发出失败信号。</p>
<p>​	要编写新的测试套件，请创建一个文件，其中包含如上所述的TestXxx函数，并将该文件命名为以&quot;_test.go&quot;结尾的名称。该文件将在常规包构建时排除在外，但在运行&quot;go test&quot;命令时将被包括在内。</p>
<p>​	测试文件可以与被测试的包在同一个包中，也可以是具有后缀&quot;_test&quot;的对应包中。</p>
<p>(包内测试)如果测试文件在同一个包中，则可以引用包内未公开的标识符，如下面的示例：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">abs</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#98c379">&#34;testing&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestAbs</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">got</span> <span style="color:#56b6c2">:=</span> <span style="color:#61afef;font-weight:bold">Abs</span>(<span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> <span style="color:#e06c75">got</span> <span style="color:#56b6c2">!=</span> <span style="color:#d19a66">1</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Errorf</span>(<span style="color:#98c379">&#34;Abs(-1) = %d; want 1&#34;</span>, <span style="color:#e06c75">got</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>(包外测试)如果测试文件在一个单独的&quot;_test&quot;包中，被测试的包必须显式导入，并且只能使用其导出的标识符。这被称为&quot;黑盒&quot;测试</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">abs_test</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;testing&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;path_to_pkg/abs&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestAbs</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">got</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">abs</span>.<span style="color:#61afef;font-weight:bold">Abs</span>(<span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> <span style="color:#e06c75">got</span> <span style="color:#56b6c2">!=</span> <span style="color:#d19a66">1</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Errorf</span>(<span style="color:#98c379">&#34;Abs(-1) = %d; want 1&#34;</span>, <span style="color:#e06c75">got</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>欲了解更多细节，请运行 &ldquo;go help test&quot;和 &ldquo;go help testflag&rdquo;。</p>
<h2 id="基准测试-benchmarks">基准测试 Benchmarks</h2>
<p>形如</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">BenchmarkXxx</span>(<span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">B</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>的函数被视为基准测试，并在 &ldquo;go test&rdquo; 命令提供其 -bench 标志时执行。基准测试按顺序运行。</p>
<p>​	有关测试标志的说明，，见<a href="../../References/CommandDocumentation/go#testing-flags">Testing flags</a>。</p>
<p>​	基准测试函数的示例如下所示：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">BenchmarkRandInt</span>(<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">B</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#d19a66">0</span>; <span style="color:#e06c75">i</span> &lt; <span style="color:#e06c75">b</span>.<span style="color:#e06c75">N</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">rand</span>.<span style="color:#61afef;font-weight:bold">Int</span>()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	基准测试函数必须运行目标代码 <code>b.N</code> 次。在基准测试执行期间，<code>b.N</code> 会进行调整，直到基准测试函数持续时间足够长，以便可靠计时。输出</p>
<pre tabindex="0"><code>BenchmarkRandInt-8   	68453040	        17.8 ns/op
</code></pre><p>表示循环运行了 68453040 次，每次循环的速度为 17.8 纳秒。</p>
<p>​	如果基准测试需要在运行之前进行一些昂贵的设置，则可以重置计时器：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">BenchmarkBigLen</span>(<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">B</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">big</span> <span style="color:#56b6c2">:=</span> <span style="color:#61afef;font-weight:bold">NewBig</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">b</span>.<span style="color:#61afef;font-weight:bold">ResetTimer</span>()
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#d19a66">0</span>; <span style="color:#e06c75">i</span> &lt; <span style="color:#e06c75">b</span>.<span style="color:#e06c75">N</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">big</span>.<span style="color:#61afef;font-weight:bold">Len</span>()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	如果基准测试需要在并行设置中测试性能，则可以使用 <code>RunParallel</code> 帮助函数；这样的基准测试旨在与 <code>go test -cpu</code> 标志一起使用：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">BenchmarkTemplateParallel</span>(<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">B</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">templ</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">template</span>.<span style="color:#61afef;font-weight:bold">Must</span>(<span style="color:#e06c75">template</span>.<span style="color:#61afef;font-weight:bold">New</span>(<span style="color:#98c379">&#34;test&#34;</span>).<span style="color:#61afef;font-weight:bold">Parse</span>(<span style="color:#98c379">&#34;Hello, {{.}}!&#34;</span>))
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">b</span>.<span style="color:#61afef;font-weight:bold">RunParallel</span>(<span style="color:#c678dd">func</span>(<span style="color:#e06c75">pb</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">PB</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">var</span> <span style="color:#e06c75">buf</span> <span style="color:#e06c75">bytes</span>.<span style="color:#e06c75">Buffer</span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">for</span> <span style="color:#e06c75">pb</span>.<span style="color:#61afef;font-weight:bold">Next</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">buf</span>.<span style="color:#61afef;font-weight:bold">Reset</span>()
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">templ</span>.<span style="color:#61afef;font-weight:bold">Execute</span>(<span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">buf</span>, <span style="color:#98c379">&#34;World&#34;</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	基准测试结果格式的详细规范在 <a href="../../ProposalGoBenchmarkDataFormat">Proposal: Go Benchmark Data Format</a>。</p>
<p>​	在<a href="https://golang.org/x/perf/cmd" target="_blank" rel="noopener">https://golang.org/x/perf/cmd</a>中有用于处理基准测试结果的标准工具。特别是，<a href="https://golang.org/x/perf/cmd/benchstat" target="_blank" rel="noopener">https://golang.org/x/perf/cmd/benchstat</a>可以进行统计学上健壮的 A/B 比较。</p>
<h3 id="示例">示例</h3>
<p>​	该包还可以运行和验证示例代码。Example函数可以包括一个以 &ldquo;<code>Output:</code>&ldquo;开头的结尾行注释，并在测试运行时与函数的标准输出进行比较。(比较时忽略前导和尾部的空格。) 这些是众多示例中的一个示例：</p>
<p>​	该包还可以运行和验证示例代码。示例函数可以包含以&rdquo;<code>Output:</code>&ldquo;开头的结尾行注释，并在运行测试时与函数的标准输出进行比较。(比较忽略前导和尾随空格。)以下是众多示例中的一个示例：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">ExampleHello</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">fmt</span>.<span style="color:#61afef;font-weight:bold">Println</span>(<span style="color:#98c379">&#34;hello&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">// Output: hello
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">ExampleSalutations</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">fmt</span>.<span style="color:#61afef;font-weight:bold">Println</span>(<span style="color:#98c379">&#34;hello, and&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">fmt</span>.<span style="color:#61afef;font-weight:bold">Println</span>(<span style="color:#98c379">&#34;goodbye&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">// Output:
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    <span style="color:#7f848e">// hello, and
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    <span style="color:#7f848e">// goodbye
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	前缀为&rdquo;<code>Unordered output:</code>&ldquo;的注释与&rdquo;<code>Output:</code>&ldquo;类似，但匹配任何行顺序：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">ExamplePerm</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">for</span> <span style="color:#e06c75">_</span>, <span style="color:#e06c75">value</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">range</span> <span style="color:#61afef;font-weight:bold">Perm</span>(<span style="color:#d19a66">5</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">fmt</span>.<span style="color:#61afef;font-weight:bold">Println</span>(<span style="color:#e06c75">value</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">// Unordered output: 4
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    <span style="color:#7f848e">// 2
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    <span style="color:#7f848e">// 1
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    <span style="color:#7f848e">// 3
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    <span style="color:#7f848e">// 0
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	没有输出注释的示例函数会被编译，但不会被执行。</p>
<p>​	用于声明包、函数F、类型T和类型T上的方法M的示例的命名规则是：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Example</span>() { <span style="color:#56b6c2">...</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">ExampleF</span>() { <span style="color:#56b6c2">...</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">ExampleT</span>() { <span style="color:#56b6c2">...</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">ExampleT_M</span>() { <span style="color:#56b6c2">...</span> }
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	可以通过在名称后附加不同的后缀来为包/类型/函数/方法提供多个示例函数。后缀必须以小写字母开头。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Example_suffix</span>() { <span style="color:#56b6c2">...</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">ExampleF_suffix</span>() { <span style="color:#56b6c2">...</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">ExampleT_suffix</span>() { <span style="color:#56b6c2">...</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">ExampleT_M_suffix</span>() { <span style="color:#56b6c2">...</span> }
</span></span></code></pre></td></tr></table>
</div>
</div><p>​		当测试文件包含单个示例函数、至少一个其他函数、类型、变量或常量声明，并且没有测试或基准测试函数时，整个测试文件被展示为示例。</p>
<h2 id="模糊测试-fuzzing">模糊测试 Fuzzing</h2>
<p>​	&lsquo;go test&rsquo; 和 testing 包支持模糊测试，这是一种使用随机生成的输入调用函数以发现单元测试未预期的错误的测试技术。</p>
<p>形如</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">FuzzXxx</span>(<span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">F</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>的函数被认为是模糊测试。</p>
<p>示例：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">FuzzHex</span>(<span style="color:#e06c75">f</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">F</span>) {
</span></span><span style="display:flex;"><span>  <span style="color:#c678dd">for</span> <span style="color:#e06c75">_</span>, <span style="color:#e06c75">seed</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">range</span> [][]<span style="color:#e5c07b">byte</span>{{}, {<span style="color:#d19a66">0</span>}, {<span style="color:#d19a66">9</span>}, {<span style="color:#d19a66">0xa</span>}, {<span style="color:#d19a66">0xf</span>}, {<span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>, <span style="color:#d19a66">3</span>, <span style="color:#d19a66">4</span>}} {
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">f</span>.<span style="color:#61afef;font-weight:bold">Add</span>(<span style="color:#e06c75">seed</span>)
</span></span><span style="display:flex;"><span>  }
</span></span><span style="display:flex;"><span>  <span style="color:#e06c75">f</span>.<span style="color:#61afef;font-weight:bold">Fuzz</span>(<span style="color:#c678dd">func</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>, <span style="color:#e06c75">in</span> []<span style="color:#e5c07b">byte</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">enc</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">hex</span>.<span style="color:#61afef;font-weight:bold">EncodeToString</span>(<span style="color:#e06c75">in</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">out</span>, <span style="color:#e06c75">err</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">hex</span>.<span style="color:#61afef;font-weight:bold">DecodeString</span>(<span style="color:#e06c75">enc</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> <span style="color:#e06c75">err</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">nil</span> {
</span></span><span style="display:flex;"><span>      <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Fatalf</span>(<span style="color:#98c379">&#34;%v: decode: %v&#34;</span>, <span style="color:#e06c75">in</span>, <span style="color:#e06c75">err</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> !<span style="color:#e06c75">bytes</span>.<span style="color:#61afef;font-weight:bold">Equal</span>(<span style="color:#e06c75">in</span>, <span style="color:#e06c75">out</span>) {
</span></span><span style="display:flex;"><span>      <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Fatalf</span>(<span style="color:#98c379">&#34;%v: not equal after round trip: %v&#34;</span>, <span style="color:#e06c75">in</span>, <span style="color:#e06c75">out</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>  })
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​		模糊测试维护一个种子语料库或默认情况下运行的一组输入，并可以生成输入。种子输入可以通过调用 <code>(*F).Add</code> 或将文件存储在包含模糊测试的包中的 <code>testdata/fuzz/&lt;Name&gt;</code> (其中<code>&lt;Name&gt;</code>是模糊测试的名称)目录中注册。种子输入是可选的，但是当提供一组具有良好代码覆盖率的小种子输入时，模糊测试引擎可能会更有效地发现错误。这些种子输入还可以作为模糊测试识别的漏洞的回归测试。</p>
<p>​	在模糊测试中传递给 <code>(*F).Fuzz</code> 的函数被认为是模糊目标。一个模糊目标必须接受一个 <code>*T</code> 参数，后跟一个或多个随机输入的参数。传递给 <code>(*F).Add</code> 的参数类型必须与这些参数的类型相同。模糊目标可以通过调用 <code>T.Fail</code>(或调用它的任何方法，如 <code>T.Error</code> 或 <code>T.Fatal</code>)或引发 panic 的方式来指示它发现了问题，就像测试一样。</p>
<p>​	当启用模糊测试(通过将 <code>-fuzz</code> 标志设置为与特定模糊测试匹配的正则表达式)，模糊目标将使用对种子输入进行随机更改生成的参数进行调用。在受支持的平台上，&ldquo;go test&rdquo; 使用模糊覆盖率工具编译测试可执行文件。模糊测试引擎使用该工具来查找和缓存扩展覆盖范围的输入，从而增加发现错误的可能性。如果模糊目标对于给定的输入失败，则模糊测试引擎将导致引发失败的输入写入包目录中的 <code>testdata/fuzz/&lt;Name&gt;</code> 目录中的文件中。此文件随后用作种子输入。如果无法在该位置写入文件(例如，因为目录为只读)，则模糊测试引擎将文件写入构建缓存中的模糊缓存目录中。</p>
<p>​	当禁用模糊测试时，<code>F.Add</code>注册的种子输入和<code>testdata/fuzz/&lt;Name&gt;</code>中的种子输入将用于调用模糊目标。在此模式下，模糊测试的行为类似于常规测试，使用<code>F.Fuzz</code>启动子测试而不是<code>T.Run</code>。</p>
<p>​	有关模糊测试的文档，请参见<a href="../../UsingAndUnderstandingGo/fuzzing">Go Fuzzing</a>。</p>
<h2 id="skipping">Skipping</h2>
<p>​	跳过测试或基准测试可以通过调用<code>*T</code>或<code>*B</code>的<code>Skip</code>方法来实现：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestTimeConsuming</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> <span style="color:#e06c75">testing</span>.<span style="color:#61afef;font-weight:bold">Short</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Skip</span>(<span style="color:#98c379">&#34;skipping test in short mode.&#34;</span>)
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#56b6c2">...</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	<code>*T</code>的<code>Skip</code>方法可以在模糊目标中使用，如果输入无效，但不应视为失败的输入。例如：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">FuzzJSONMarshaling</span>(<span style="color:#e06c75">f</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">F</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">f</span>.<span style="color:#61afef;font-weight:bold">Fuzz</span>(<span style="color:#c678dd">func</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>, <span style="color:#e06c75">b</span> []<span style="color:#e5c07b">byte</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">var</span> <span style="color:#e06c75">v</span> <span style="color:#c678dd">interface</span>{}
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span> <span style="color:#e06c75">err</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">json</span>.<span style="color:#61afef;font-weight:bold">Unmarshal</span>(<span style="color:#e06c75">b</span>, <span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">v</span>); <span style="color:#e06c75">err</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">nil</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Skip</span>()
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span> <span style="color:#e06c75">_</span>, <span style="color:#e06c75">err</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">json</span>.<span style="color:#61afef;font-weight:bold">Marshal</span>(<span style="color:#e06c75">v</span>); <span style="color:#e06c75">err</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">nil</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Errorf</span>(<span style="color:#98c379">&#34;Marshal: %v&#34;</span>, <span style="color:#e06c75">err</span>)
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="子测试和子基准测试-subtests-and-sub-benchmarks">子测试和子基准测试 Subtests and Sub-benchmarks</h2>
<p>​	<code>*T</code>和<code>*B</code>的<code>Run</code>方法允许定义子测试和子基准测试，而无需为每个测试定义单独的函数。这使得可以使用表驱动的基准测试和创建分层测试。它还提供了一种共享通用设置和拆卸代码的方法：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestFoo</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">// &lt;setup code&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Run</span>(<span style="color:#98c379">&#34;A=1&#34;</span>, <span style="color:#c678dd">func</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) { <span style="color:#56b6c2">...</span> })
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Run</span>(<span style="color:#98c379">&#34;A=2&#34;</span>, <span style="color:#c678dd">func</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) { <span style="color:#56b6c2">...</span> })
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Run</span>(<span style="color:#98c379">&#34;B=1&#34;</span>, <span style="color:#c678dd">func</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) { <span style="color:#56b6c2">...</span> })
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">// &lt;tear-down code&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	每个子测试和子基准测试都有一个唯一的名称：由顶层测试的名称和传递给Run的名称序列组成，用斜杠分隔，可选地带有一个末尾的序列号以进行消除歧义。</p>
<p>​	<code>-run</code>、<code>-bench</code>和<code>-fuzz</code>命令行标志的参数是一个未锚定的正则表达式，用于匹配测试的名称。对于具有多个斜杠分隔元素(如子测试)的测试，参数本身是斜杠分隔的，其中表达式依次匹配每个名称元素。因为它是未锚定的，所以空表达式匹配任何字符串。例如，使用&quot;matching&quot;表示&quot;whose name contains&rdquo;：</p>
<blockquote>
<p>​	未锚定的正则表达式是指没有明确指定正则表达式匹配字符串的起始位置和结束位置的表达式。在 Go 中，当使用 <code>-run</code> 命令行标志来运行测试用例时，如果正则表达式没有以 <code>^</code>(脱字符)开头和 <code>$</code>(美元符号)结尾，那么该表达式就是未锚定的。这意味着，表达式可以匹配任何位置出现的字符串。例如，如果运行 <code>go test -run TestFoo</code>，那么所有以 <code>TestFoo</code> 作为名字的测试用例都将被运行，包括 <code>TestFooBar</code>、<code>TestFooBaz</code> 等。</p>
</blockquote>
<pre tabindex="0"><code>go test -run &#39;&#39;        # 运行所有测试。
go test -run Foo       # 运行与 &#34;Foo&#34;匹配的顶层测试，如 &#34;TestFooBar&#34;。
go test -run Foo/A=    # 对于匹配 &#34;Foo&#34;的顶级测试，运行匹配 &#34;A=&#34;的子测试。
go test -run /A=1      # 对于所有顶级测试，运行匹配 &#34;A=1&#34;的子测试。
go test -fuzz FuzzFoo  # 对匹配 &#34;FuzzFoo&#34;的目标进行模糊处理。
</code></pre><p>​	-run参数也可以用于运行种子语料库中的特定值，以进行调试。例如：</p>
<pre tabindex="0"><code>go test -run=FuzzFoo/9ddb952d9814
</code></pre><p>​	可以同时设置<code>-fuzz</code>和<code>-run</code>标志，以模糊处理目标但跳过所有其他测试的执行。</p>
<p>​	子测试还可以用于控制并行性。父测试只有在所有子测试完成后才会完成。在以下示例中，所有测试都会并行运行，仅与彼此并行运行，而不考虑其他可能已定义的顶级测试：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestGroupedParallel</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">for</span> <span style="color:#e06c75">_</span>, <span style="color:#e06c75">tc</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">range</span> <span style="color:#e06c75">tests</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">tc</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">tc</span> <span style="color:#7f848e">// capture range variable
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Run</span>(<span style="color:#e06c75">tc</span>.<span style="color:#e06c75">Name</span>, <span style="color:#c678dd">func</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Parallel</span>()
</span></span><span style="display:flex;"><span>            <span style="color:#56b6c2">...</span>
</span></span><span style="display:flex;"><span>        })
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	<code>Run</code>不会返回，直到并行子测试完成，从而提供了一种在一组并行测试之后进行清理的方式：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestTeardownParallel</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">// 在并行测试完成之前，此 Run 不会返回。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Run</span>(<span style="color:#98c379">&#34;group&#34;</span>, <span style="color:#c678dd">func</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">T</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Run</span>(<span style="color:#98c379">&#34;Test1&#34;</span>, <span style="color:#e06c75">parallelTest1</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Run</span>(<span style="color:#98c379">&#34;Test2&#34;</span>, <span style="color:#e06c75">parallelTest2</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Run</span>(<span style="color:#98c379">&#34;Test3&#34;</span>, <span style="color:#e06c75">parallelTest3</span>)
</span></span><span style="display:flex;"><span>    })
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">// &lt;tear-down code&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="main">Main</h2>
<p>​	有时，测试或基准测试程序需要在执行前后进行额外的设置或拆卸。有时还需要控制哪些代码在主线程上运行。为支持这些和其他情况，如果测试文件包含一个函数：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestMain</span>(<span style="color:#e06c75">m</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">M</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>则生成的测试将调用<code>TestMain(m)</code>而不是直接运行测试或基准测试。<code>TestMain</code>在主goroutine中运行，并可以在调用<code>m.Run</code>周围执行任何必要的设置和拆卸操作。<code>m.Run</code>将返回可能传递给<code>os.Exit</code>的退出代码。如果<code>TestMain</code>返回，则测试包装器将<code>m.Run</code>的结果传递给<code>os.Exit</code>。</p>
<p>​	在调用TestMain时，<code>flag.Parse</code>尚未运行。如果TestMain依赖于命令行标志，包括测试包的标志，它应该显式地调用<code>flag.Parse</code>。在测试或基准测试函数运行时，命令行标志总是被解析。</p>
<p>​	TestMain的一个简单实现是：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">TestMain</span>(<span style="color:#e06c75">m</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">M</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// 如果TestMain使用标志，请在此处调用flag.Parse()
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">os</span>.<span style="color:#61afef;font-weight:bold">Exit</span>(<span style="color:#e06c75">m</span>.<span style="color:#61afef;font-weight:bold">Run</span>())
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	TestMain 是一个底层的原语，对于普通测试需求，通常使用普通的测试函数就足够了。</p>
<h2 id="常量">常量</h2>
<p>This section is empty.</p>
<h2 id="变量">变量</h2>
<p>This section is empty.</p>
<h2 id="函数">函数</h2>
<h4 id="func-allocsperrunhttpscsopensourcegooglegogogo1201srctestingallocsgol20----go11">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/allocs.go;l=20" target="_blank" rel="noopener">AllocsPerRun</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">AllocsPerRun</span>(<span style="color:#e06c75">runs</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">f</span> <span style="color:#c678dd">func</span>()) (<span style="color:#e06c75">avg</span> <span style="color:#e5c07b">float64</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	AllocsPerRun函数返回在调用 <code>f</code> 时的平均分配次数。虽然返回值的类型为 float64，但它始终为整数值。</p>
<p>​	为了计算分配次数，该函数将首先作为预热运行一次。然后将测量指定运行次数内的平均分配次数并返回。</p>
<p>​	AllocsPerRun函数在其测量期间将 <code>GOMAXPROCS</code> 设置为 1，并在返回前恢复它。</p>
<h4 id="func-covermodehttpscsopensourcegooglegogogo1201srctestingtestinggol648----go18">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=648" target="_blank" rel="noopener">CoverMode</a>  &lt;- go1.8</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">CoverMode</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	CoverMode函数报告测试覆盖模式设置为什么。可选值为 &ldquo;set&rdquo;、&ldquo;count&rdquo; 或 &ldquo;atomic&rdquo;。如果测试覆盖未启用，则返回值为空字符串。</p>
<h4 id="func-coveragehttpscsopensourcegooglegogogo1201srctestingcovergol49----go14">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/cover.go;l=49" target="_blank" rel="noopener">Coverage</a>  &lt;- go1.4</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Coverage</span>() <span style="color:#e5c07b">float64</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Coverage函数报告当前代码覆盖率，作为范围在 [0, 1] 内的分数。如果未启用覆盖，则 Coverage 返回 0。</p>
<p>​	在运行大型顺序测试集时，每次检查 Coverage函数可以有助于识别哪些测试用例涉及新的代码路径。它不是&quot;go test -cover&quot;和 &ldquo;go tool cover&quot;生成的报告的替代品。</p>
<h4 id="func-inithttpscsopensourcegooglegogogo1201srctestingtestinggol402----go113">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=402" target="_blank" rel="noopener">Init</a>  &lt;- go1.13</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Init</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Init 函数注册测试标志。在运行测试函数之前，&ldquo;go test&quot;命令会自动注册这些标志，因此只有在调用诸如 Benchmark 等函数而不使用&quot;go test&quot;时才需要调用 Init 函数。</p>
<p>​	如果已经调用了 Init函数，则 Init 函数没有任何效果。</p>
<h4 id="func-mainhttpscsopensourcegooglegogogo1201srctestingtestinggol1742">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1742" target="_blank" rel="noopener">Main</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Main</span>(<span style="color:#e06c75">matchString</span> <span style="color:#c678dd">func</span>(<span style="color:#e06c75">pat</span>, <span style="color:#e06c75">str</span> <span style="color:#e5c07b">string</span>) (<span style="color:#e5c07b">bool</span>, <span style="color:#e5c07b">error</span>), <span style="color:#e06c75">tests</span> []<span style="color:#e06c75">InternalTest</span>, <span style="color:#e06c75">benchmarks</span> []<span style="color:#e06c75">InternalBenchmark</span>, <span style="color:#e06c75">examples</span> []<span style="color:#e06c75">InternalExample</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Main函数是 &ldquo;go test&rdquo; 命令实现的内部函数。它被导出是因为它是跨包的，并且早于 &ldquo;internal&rdquo; 包。它不再被 &ldquo;go test&rdquo; 使用，但为了其他系统可以模拟 &ldquo;go test&rdquo; 使用 Main，尽可能地保留了这个函数。但由于 testing 包添加了新功能，有时 Main 无法更新。模拟 &ldquo;go test&rdquo; 的系统应该更新为使用 MainStart。</p>
<h4 id="func-registercoverhttpscsopensourcegooglegogogo1201srctestingcovergol68----go12">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/cover.go;l=68" target="_blank" rel="noopener">RegisterCover</a>  &lt;- go1.2</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">RegisterCover</span>(<span style="color:#e06c75">c</span> <span style="color:#e06c75">Cover</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	RegisterCover函数记录测试的覆盖数据累加器。注意：这个函数是 testing 基础设施的内部函数，可能会更改。它 (目前) 不符合 Go 1 兼容性指南。</p>
<h4 id="func-runbenchmarkshttpscsopensourcegooglegogogo1201srctestingbenchmarkgol522">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=522" target="_blank" rel="noopener">RunBenchmarks</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">RunBenchmarks</span>(<span style="color:#e06c75">matchString</span> <span style="color:#c678dd">func</span>(<span style="color:#e06c75">pat</span>, <span style="color:#e06c75">str</span> <span style="color:#e5c07b">string</span>) (<span style="color:#e5c07b">bool</span>, <span style="color:#e5c07b">error</span>), <span style="color:#e06c75">benchmarks</span> []<span style="color:#e06c75">InternalBenchmark</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	RunBenchmarks函数是一个内部函数，但导出是因为它是跨包的；它是 &ldquo;go test&rdquo; 命令的实现的一部分。</p>
<h4 id="func-runexampleshttpscsopensourcegooglegogogo1201srctestingexamplegol24">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/example.go;l=24" target="_blank" rel="noopener">RunExamples</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">RunExamples</span>(<span style="color:#e06c75">matchString</span> <span style="color:#c678dd">func</span>(<span style="color:#e06c75">pat</span>, <span style="color:#e06c75">str</span> <span style="color:#e5c07b">string</span>) (<span style="color:#e5c07b">bool</span>, <span style="color:#e5c07b">error</span>), <span style="color:#e06c75">examples</span> []<span style="color:#e06c75">InternalExample</span>) (<span style="color:#e06c75">ok</span> <span style="color:#e5c07b">bool</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	RunExamples函数是一个内部函数，但导出是因为它是跨包的；它是 &ldquo;go test&rdquo; 命令的实现的一部分。</p>
<h4 id="func-runtestshttpscsopensourcegooglegogogo1201srctestingtestinggol1995">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1995" target="_blank" rel="noopener">RunTests</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">RunTests</span>(<span style="color:#e06c75">matchString</span> <span style="color:#c678dd">func</span>(<span style="color:#e06c75">pat</span>, <span style="color:#e06c75">str</span> <span style="color:#e5c07b">string</span>) (<span style="color:#e5c07b">bool</span>, <span style="color:#e5c07b">error</span>), <span style="color:#e06c75">tests</span> []<span style="color:#e06c75">InternalTest</span>) (<span style="color:#e06c75">ok</span> <span style="color:#e5c07b">bool</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	RunTests函数是一个内部函数，但导出是因为它是跨包的；它是 &ldquo;go test&rdquo; 命令的实现的一部分。</p>
<h4 id="func-shorthttpscsopensourcegooglegogogo1201srctestingtestinggol633">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=633" target="_blank" rel="noopener">Short</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Short</span>() <span style="color:#e5c07b">bool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Short 函数报告是否设置了 <code>-test.short</code> 标志。</p>
<h4 id="func-verbosehttpscsopensourcegooglegogogo1201srctestingtestinggol656----go11">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=656" target="_blank" rel="noopener">Verbose</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Verbose</span>() <span style="color:#e5c07b">bool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Verbose函数报告是否设置了<code>-test.v</code>标志。</p>
<h2 id="类型">类型</h2>
<h3 id="type-bhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol94">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=94" target="_blank" rel="noopener">B</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">B</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">N</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// contains filtered or unexported fields
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	B是传递给基准测试函数的类型，用于管理基准测试的时间和指定要运行的迭代次数。</p>
<p>​	当Benchmark函数返回或调用FailNow、Fatal、Fatalf、SkipNow、Skip或Skipf方法时，基准测试结束。这些方法只能从运行Benchmark函数的goroutine中调用。其他报告方法，例如Log和Error的变体，可以同时从多个goroutine调用。</p>
<p>​	与测试类似，基准测试日志在执行期间累积，并在完成时转储到标准输出。与测试不同，基准测试日志始终打印，以不隐藏可能影响基准测试结果的输出。</p>
<h4 id="b-cleanuphttpscsopensourcegooglegogogo1201srctestingtestinggol1129----go114">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1129" target="_blank" rel="noopener">Cleanup</a>  &lt;- go1.14</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Cleanup</span>(<span style="color:#e06c75">f</span> <span style="color:#c678dd">func</span>())
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Cleanup方法注册一个函数，以在测试(或子测试)及其所有子测试完成时调用。清理函数将按最后添加的先调用的顺序调用。</p>
<h4 id="b-elapsedhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol343----go120">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=343" target="_blank" rel="noopener">Elapsed</a>  &lt;- go1.20</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Elapsed</span>() <span style="color:#e06c75">time</span>.<span style="color:#e06c75">Duration</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Elapsed方法返回基准测试的测量经过时间。Elapsed报告的持续时间与StartTimer方法、StopTimer方法和ResetTimer方法测量的时间相匹配。</p>
<h4 id="b-errorhttpscsopensourcegooglegogogo1201srctestingtestinggol1040">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1040" target="_blank" rel="noopener">Error</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Error</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Error方法等效于Log方法后跟Fail方法。</p>
<h4 id="b-errorfhttpscsopensourcegooglegogogo1201srctestingtestinggol1047">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1047" target="_blank" rel="noopener">Errorf</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Errorf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Errorf方法等效于Logf方法后跟Fail方法。</p>
<h4 id="b-failhttpscsopensourcegooglegogogo1201srctestingtestinggol925">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=925" target="_blank" rel="noopener">Fail</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Fail</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Fail方法标记函数失败，但继续执行。</p>
<h4 id="b-failnowhttpscsopensourcegooglegogogo1201srctestingtestinggol954">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=954" target="_blank" rel="noopener">FailNow</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">FailNow</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	FailNow方法标记函数失败并通过调用runtime.Goexit(然后在当前goroutine中运行所有延迟调用)停止其执行。执行将继续在下一个测试或基准测试中。FailNow方法必须从运行测试或基准测试函数的goroutine中调用，而不是从在测试期间创建的其他goroutine中调用。调用FailNow方法不会停止这些其他goroutine。</p>
<h4 id="b-failedhttpscsopensourcegooglegogogo1201srctestingtestinggol939">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=939" target="_blank" rel="noopener">Failed</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Failed</span>() <span style="color:#e5c07b">bool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Failed方法报告函数是否已失败。</p>
<h4 id="b-fatalhttpscsopensourcegooglegogogo1201srctestingtestinggol1054">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1054" target="_blank" rel="noopener">Fatal</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Fatal</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Fatal方法等效于 Log方法后跟 FailNow方法。</p>
<h4 id="b-fatalfhttpscsopensourcegooglegogogo1201srctestingtestinggol1061">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1061" target="_blank" rel="noopener">Fatalf</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Fatalf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Fatalf方法等效于 Logf方法后跟 FailNow方法。</p>
<h4 id="b-helperhttpscsopensourcegooglegogogo1201srctestingtestinggol1108----go19">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1108" target="_blank" rel="noopener">Helper</a>  &lt;- go1.9</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Helper</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Helper方法将调用函数标记为测试辅助函数。在打印文件和行信息时，该函数将被跳过。Helper方法可以同时从多个 goroutine 中调用。</p>
<h4 id="b-loghttpscsopensourcegooglegogogo1201srctestingtestinggol1024">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1024" target="_blank" rel="noopener">Log</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Log</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Log方法使用默认格式对其参数进行格式化，类似于 Println，并将文本记录在错误日志中。对于测试，只有在测试失败或设置了 <code>-test.v</code> 标志时，才会打印该文本。对于基准测试，始终会打印文本，以避免性能依赖于 <code>-test.v</code> 标志的值。</p>
<h4 id="b-logfhttpscsopensourcegooglegogogo1201srctestingtestinggol1034">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1034" target="_blank" rel="noopener">Logf</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Logf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Logf方法根据格式对其参数进行格式化，类似于 Printf，并将文本记录在错误日志中。如果没有提供最终换行符，则会添加。对于测试，只有在测试失败或设置了 <code>-test.v</code> 标志时，才会打印该文本。对于基准测试，始终会打印文本，以避免性能依赖于 <code>-test.v</code> 标志的值。</p>
<h4 id="b-namehttpscsopensourcegooglegogogo1201srctestingtestinggol911----go18">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=911" target="_blank" rel="noopener">Name</a>  &lt;- go1.8</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Name</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Name方法返回正在运行的(子)测试或基准测试的名称。</p>
<p>​	名称将包括测试的名称以及任何嵌套的子测试的名称。如果两个同级的子测试具有相同的名称，则 Name 将附加后缀以保证返回的名称是唯一的。</p>
<h4 id="b-reportallocshttpscsopensourcegooglegogogo1201srctestingbenchmarkgol176----go11">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=176" target="_blank" rel="noopener">ReportAllocs</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">ReportAllocs</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	ReportAllocs方法为此基准测试启用 malloc 统计信息。它相当于设置 <code>-test.benchmem</code>，但仅影响调用 ReportAllocs方法的基准测试函数。</p>
<h4 id="b-reportmetrichttpscsopensourcegooglegogogo1201srctestingbenchmarkgol360----go113">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=360" target="_blank" rel="noopener">ReportMetric</a>  &lt;- go1.13</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">ReportMetric</span>(<span style="color:#e06c75">n</span> <span style="color:#e5c07b">float64</span>, <span style="color:#e06c75">unit</span> <span style="color:#e5c07b">string</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	ReportMetric方法将&quot;n unit&quot;添加到报告的基准测试结果中。如果该指标是每次迭代的，则调用者应该除以 b.N，并且按照惯例，单位应该以&rdquo;/op&quot;结尾。ReportMetric 将覆盖先前报告的相同单位的任何值。如果单位为空字符串或单位包含任何空格，则 ReportMetric方法将 panic。如果单位通常由基准框架本身报告(如&quot;allocs/op&rdquo;)，则 ReportMetric方法将覆盖该指标。将 &ldquo;ns/op&rdquo; 设置为 0 将禁止该内置度量。</p>
<h5 id="reportmetric-example">ReportMetric Example</h5>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;sort&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;testing&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// 这里报告了与特定算法相关的自定义基准测试度量标准(在本例中为排序)。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">testing</span>.<span style="color:#61afef;font-weight:bold">Benchmark</span>(<span style="color:#c678dd">func</span>(<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">B</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">var</span> <span style="color:#e06c75">compares</span> <span style="color:#e5c07b">int64</span>
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#d19a66">0</span>; <span style="color:#e06c75">i</span> &lt; <span style="color:#e06c75">b</span>.<span style="color:#e06c75">N</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> []<span style="color:#e5c07b">int</span>{<span style="color:#d19a66">5</span>, <span style="color:#d19a66">4</span>, <span style="color:#d19a66">3</span>, <span style="color:#d19a66">2</span>, <span style="color:#d19a66">1</span>}
</span></span><span style="display:flex;"><span>			<span style="color:#e06c75">sort</span>.<span style="color:#61afef;font-weight:bold">Slice</span>(<span style="color:#e06c75">s</span>, <span style="color:#c678dd">func</span>(<span style="color:#e06c75">i</span>, <span style="color:#e06c75">j</span> <span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">bool</span> {
</span></span><span style="display:flex;"><span>				<span style="color:#e06c75">compares</span><span style="color:#56b6c2">++</span>
</span></span><span style="display:flex;"><span>				<span style="color:#c678dd">return</span> <span style="color:#e06c75">s</span>[<span style="color:#e06c75">i</span>] &lt; <span style="color:#e06c75">s</span>[<span style="color:#e06c75">j</span>]
</span></span><span style="display:flex;"><span>			})
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#7f848e">// 此度量标准是每个操作的，因此需要除以b.N，并将其报告为&#34;/op&#34;单位。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		<span style="color:#e06c75">b</span>.<span style="color:#61afef;font-weight:bold">ReportMetric</span>(<span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">compares</span>)<span style="color:#56b6c2">/</span><span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">b</span>.<span style="color:#e06c75">N</span>), <span style="color:#98c379">&#34;compares/op&#34;</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#7f848e">// 此度量标准是每个时间段的，因此需要除以b.Elapsed，并将其报告为&#34;/ns&#34;单位。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		<span style="color:#e06c75">b</span>.<span style="color:#61afef;font-weight:bold">ReportMetric</span>(<span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">compares</span>)<span style="color:#56b6c2">/</span><span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">b</span>.<span style="color:#61afef;font-weight:bold">Elapsed</span>().<span style="color:#61afef;font-weight:bold">Nanoseconds</span>()), <span style="color:#98c379">&#34;compares/ns&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h5 id="reportmetric-example-parallel">ReportMetric Example (Parallel)</h5>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">32
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;sort&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;sync/atomic&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;testing&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// 这个函数报告了一个与特定算法相关的自定义基准度量(在本例中为排序)并且是并行执行的。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">testing</span>.<span style="color:#61afef;font-weight:bold">Benchmark</span>(<span style="color:#c678dd">func</span>(<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">B</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">var</span> <span style="color:#e06c75">compares</span> <span style="color:#e06c75">atomic</span>.<span style="color:#e06c75">Int64</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">b</span>.<span style="color:#61afef;font-weight:bold">RunParallel</span>(<span style="color:#c678dd">func</span>(<span style="color:#e06c75">pb</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">PB</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#c678dd">for</span> <span style="color:#e06c75">pb</span>.<span style="color:#61afef;font-weight:bold">Next</span>() {
</span></span><span style="display:flex;"><span>				<span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> []<span style="color:#e5c07b">int</span>{<span style="color:#d19a66">5</span>, <span style="color:#d19a66">4</span>, <span style="color:#d19a66">3</span>, <span style="color:#d19a66">2</span>, <span style="color:#d19a66">1</span>}
</span></span><span style="display:flex;"><span>				<span style="color:#e06c75">sort</span>.<span style="color:#61afef;font-weight:bold">Slice</span>(<span style="color:#e06c75">s</span>, <span style="color:#c678dd">func</span>(<span style="color:#e06c75">i</span>, <span style="color:#e06c75">j</span> <span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">bool</span> {
</span></span><span style="display:flex;"><span>					<span style="color:#7f848e">// 因为RunParallel函数在并行中多次运行该函数，
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>                    <span style="color:#7f848e">// 我们必须以原子方式递增计数器以避免竞争写入。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>					<span style="color:#e06c75">compares</span>.<span style="color:#61afef;font-weight:bold">Add</span>(<span style="color:#d19a66">1</span>)
</span></span><span style="display:flex;"><span>					<span style="color:#c678dd">return</span> <span style="color:#e06c75">s</span>[<span style="color:#e06c75">i</span>] &lt; <span style="color:#e06c75">s</span>[<span style="color:#e06c75">j</span>]
</span></span><span style="display:flex;"><span>				})
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		})
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		<span style="color:#7f848e">// 注意：在所有并行调用完成后，每个度量值只需报告一次。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span>		<span style="color:#7f848e">// 此度量值是每个操作，所以需要除以 b.N，并将其报告为 &#34;/op&#34; 单位。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		<span style="color:#e06c75">b</span>.<span style="color:#61afef;font-weight:bold">ReportMetric</span>(<span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">compares</span>.<span style="color:#61afef;font-weight:bold">Load</span>())<span style="color:#56b6c2">/</span><span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">b</span>.<span style="color:#e06c75">N</span>), <span style="color:#98c379">&#34;compares/op&#34;</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#7f848e">// 此度量值是每个时间，所以需要除以 b.Elapsed 并将其报告为 &#34;/ns&#34; 单位。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		<span style="color:#e06c75">b</span>.<span style="color:#61afef;font-weight:bold">ReportMetric</span>(<span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">compares</span>.<span style="color:#61afef;font-weight:bold">Load</span>())<span style="color:#56b6c2">/</span><span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">b</span>.<span style="color:#61afef;font-weight:bold">Elapsed</span>().<span style="color:#61afef;font-weight:bold">Nanoseconds</span>()), <span style="color:#98c379">&#34;compares/ns&#34;</span>)
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="b-resettimerhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol148">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=148" target="_blank" rel="noopener">ResetTimer</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">ResetTimer</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	ResetTimer方法将经过的基准测试时间和内存分配计数器归零，并删除用户报告的度量标准。它不会影响定时器是否在运行。</p>
<h4 id="b-runhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol642----go17">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=642" target="_blank" rel="noopener">Run</a>  &lt;- go1.7</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Run</span>(<span style="color:#e06c75">name</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">f</span> <span style="color:#c678dd">func</span>(<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>)) <span style="color:#e5c07b">bool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Run方法将f作为具有给定名称的子基准测试运行。它报告是否有任何失败。</p>
<p>​	子基准测试与任何其他基准测试相似。调用Run方法至少一次的基准测试本身不会被测量，并且将以N=1的方式调用一次。</p>
<h4 id="b-runparallelhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol783----go13">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=783" target="_blank" rel="noopener">RunParallel</a>  &lt;- go1.3</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">RunParallel</span>(<span style="color:#e06c75">body</span> <span style="color:#c678dd">func</span>(<span style="color:#56b6c2">*</span><span style="color:#e06c75">PB</span>))
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	RunParallel方法在并行中运行基准测试。它创建多个goroutine并将b.N次迭代分布在它们之间。 goroutine的数量默认为GOMAXPROCS。要增加非CPU绑定的基准测试的并行性，请在RunParallel之前调用SetParallelism。 RunParallel方法通常与go test -cpu标志一起使用。</p>
<p>​	body函数将在每个goroutine中运行。它应该设置任何goroutine-local状态，然后迭代直到pb.Next返回false。它不应该使用StartTimer方法、StopTimer方法或ResetTimer方法，因为它们具有全局效果。它也不应该调用Run方法。</p>
<p>​	RunParallel方法将ns/op值报告为整个基准测试的挂起时间，而不是每个并行goroutine的挂起时间或CPU时间总和。</p>
<h5 id="runparallel-example">RunParallel Example</h5>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;bytes&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;testing&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;text/template&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// 这是针对text/template.Template.Execute在单个对象上进行并行基准测试的代码。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">testing</span>.<span style="color:#61afef;font-weight:bold">Benchmark</span>(<span style="color:#c678dd">func</span>(<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">B</span>) {
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">templ</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">template</span>.<span style="color:#61afef;font-weight:bold">Must</span>(<span style="color:#e06c75">template</span>.<span style="color:#61afef;font-weight:bold">New</span>(<span style="color:#98c379">&#34;test&#34;</span>).<span style="color:#61afef;font-weight:bold">Parse</span>(<span style="color:#98c379">&#34;Hello, {{.}}!&#34;</span>))
</span></span><span style="display:flex;"><span>		<span style="color:#7f848e">// RunParallel将创建GOMAXPROCS个goroutine并在它们之间分配工作。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		<span style="color:#e06c75">b</span>.<span style="color:#61afef;font-weight:bold">RunParallel</span>(<span style="color:#c678dd">func</span>(<span style="color:#e06c75">pb</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">testing</span>.<span style="color:#e06c75">PB</span>) {
</span></span><span style="display:flex;"><span>			<span style="color:#7f848e">// 每个goroutine都有自己的bytes.Buffer。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>			<span style="color:#c678dd">var</span> <span style="color:#e06c75">buf</span> <span style="color:#e06c75">bytes</span>.<span style="color:#e06c75">Buffer</span>
</span></span><span style="display:flex;"><span>			<span style="color:#c678dd">for</span> <span style="color:#e06c75">pb</span>.<span style="color:#61afef;font-weight:bold">Next</span>() {
</span></span><span style="display:flex;"><span>				<span style="color:#7f848e">// 循环体在所有goroutine中总共执行b.N次。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>				<span style="color:#e06c75">buf</span>.<span style="color:#61afef;font-weight:bold">Reset</span>()
</span></span><span style="display:flex;"><span>				<span style="color:#e06c75">templ</span>.<span style="color:#61afef;font-weight:bold">Execute</span>(<span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">buf</span>, <span style="color:#98c379">&#34;World&#34;</span>)
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		})
</span></span><span style="display:flex;"><span>	})
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="b-setbyteshttpscsopensourcegooglegogogo1201srctestingbenchmarkgol171">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=171" target="_blank" rel="noopener">SetBytes</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">SetBytes</span>(<span style="color:#e06c75">n</span> <span style="color:#e5c07b">int64</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	SetBytes方法记录在单个操作中处理的字节数。如果调用了此函数，则基准测试将报告ns/op和MB/s。</p>
<h4 id="b-setparallelismhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol827----go13">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=827" target="_blank" rel="noopener">SetParallelism</a>  &lt;- go1.3</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">SetParallelism</span>(<span style="color:#e06c75">p</span> <span style="color:#e5c07b">int</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	SetParallelism方法设置RunParallel方法要使用的goroutine数为<code>p * GOMAXPROCS</code>。对于CPU绑定的基准测试，通常不需要调用SetParallelism方法。如果p小于1，则此调用将无效。</p>
<h4 id="b-setenvhttpscsopensourcegooglegogogo1201srctestingtestinggol1265----go117">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1265" target="_blank" rel="noopener">Setenv</a>  &lt;- go1.17</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Setenv</span>(<span style="color:#e06c75">key</span>, <span style="color:#e06c75">value</span> <span style="color:#e5c07b">string</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Setenv方法调用os.Setenv(key, value)，并使用Cleanup方法在测试后将环境变量恢复到其原始值。</p>
<p>​	因为Setenv方法会影响整个进程，所以它不能在并行测试或具有并行祖先的测试中使用。</p>
<h4 id="b-skiphttpscsopensourcegooglegogogo1201srctestingtestinggol1068----go11">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1068" target="_blank" rel="noopener">Skip</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Skip</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Skip方法等同于Log方法后跟SkipNow方法。</p>
<h4 id="b-skipnowhttpscsopensourcegooglegogogo1201srctestingtestinggol1089----go11">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1089" target="_blank" rel="noopener">SkipNow</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">SkipNow</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	SkipNow方法将测试标记为已跳过，并通过调用runtime.Goexit停止其执行。如果测试失败(请参见Error、Errorf、Fail)，然后跳过，它仍然被认为是已失败的。执行将在下一个测试或基准测试上继续。另请参见FailNow。SkipNow必须从运行测试的goroutine而不是从测试期间创建的其他goroutine调用。调用SkipNow方法不会停止这些其他goroutine。</p>
<h4 id="b-skipfhttpscsopensourcegooglegogogo1201srctestingtestinggol1075----go11">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1075" target="_blank" rel="noopener">Skipf</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Skipf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Skipf方法等同于Logf方法后跟SkipNow方法。</p>
<h4 id="b-skippedhttpscsopensourcegooglegogogo1201srctestingtestinggol1099----go11">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1099" target="_blank" rel="noopener">Skipped</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">Skipped</span>() <span style="color:#e5c07b">bool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Skipped方法报告测试是否被跳过。</p>
<h4 id="b-starttimerhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol122">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=122" target="_blank" rel="noopener">StartTimer</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">StartTimer</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	StartTimer方法开始计时测试。该函数会在基准测试开始前自动调用，但也可以在需要测量但不想计入时间的复杂初始化操作后手动调用以恢复计时。</p>
<h4 id="b-stoptimerhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol135">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=135" target="_blank" rel="noopener">StopTimer</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">StopTimer</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	StopTimer方法停止计时测试。可以在进行不需要测量时间的复杂初始化操作时使用它以暂停计时。</p>
<h4 id="b-tempdirhttpscsopensourcegooglegogogo1201srctestingtestinggol1163----go115">(*B) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1163" target="_blank" rel="noopener">TempDir</a>  &lt;- go1.15</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>) <span style="color:#61afef;font-weight:bold">TempDir</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	TempDir方法返回测试使用的临时目录。该目录会在测试及其所有子测试完成时由 Cleanup方法自动删除。每次调用 t.TempDir方法都会返回一个唯一的目录；如果目录创建失败，TempDir方法会通过调用 Fatal 方法终止测试。</p>
<h3 id="type-benchmarkresulthttpscsopensourcegooglegogogo1201srctestingbenchmarkgol371">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=371" target="_blank" rel="noopener">BenchmarkResult</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">BenchmarkResult</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">N</span>         <span style="color:#e5c07b">int</span>           <span style="color:#7f848e">// 迭代次数。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">T</span>         <span style="color:#e06c75">time</span>.<span style="color:#e06c75">Duration</span> <span style="color:#7f848e">// 所花费的总时间。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Bytes</span>     <span style="color:#e5c07b">int64</span>         <span style="color:#7f848e">// 单次迭代处理的字节数。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">MemAllocs</span> <span style="color:#e5c07b">uint64</span>        <span style="color:#7f848e">// 内存分配总次数。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">MemBytes</span>  <span style="color:#e5c07b">uint64</span>        <span style="color:#7f848e">// 分配的总字节数。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// Extra 记录 ReportMetric 报告的其他度量标准。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Extra</span> <span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>]<span style="color:#e5c07b">float64</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	BenchmarkResult结构体包含基准测试运行的结果。</p>
<h4 id="func-benchmarkhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol841">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=841" target="_blank" rel="noopener">Benchmark</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Benchmark</span>(<span style="color:#e06c75">f</span> <span style="color:#c678dd">func</span>(<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>)) <span style="color:#e06c75">BenchmarkResult</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Benchmark函数对单个函数进行基准测试。它适用于创建不使用 &ldquo;go test&rdquo; 命令的自定义基准测试。</p>
<p>​	如果 f 依赖于测试标志，则必须在调用 Benchmark 之前使用 Init方法注册这些标志，并在调用 flag.Parse 之前进行。</p>
<p>​	如果 f 调用 Run方法，则结果将是估计运行所有不调用 Run方法的子基准测试的结果。</p>
<h4 id="benchmarkresult-allocedbytesperophttpscsopensourcegooglegogogo1201srctestingbenchmarkgol418----go11">(BenchmarkResult) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=418" target="_blank" rel="noopener">AllocedBytesPerOp</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">r</span> <span style="color:#e06c75">BenchmarkResult</span>) <span style="color:#61afef;font-weight:bold">AllocedBytesPerOp</span>() <span style="color:#e5c07b">int64</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	AllocedBytesPerOp方法返回 &ldquo;B/op&rdquo; 指标，它被计算为 r.MemBytes / r.N。</p>
<h4 id="benchmarkresult-allocsperophttpscsopensourcegooglegogogo1201srctestingbenchmarkgol406----go11">(BenchmarkResult) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=406" target="_blank" rel="noopener">AllocsPerOp</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">r</span> <span style="color:#e06c75">BenchmarkResult</span>) <span style="color:#61afef;font-weight:bold">AllocsPerOp</span>() <span style="color:#e5c07b">int64</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	AllocsPerOp方法返回 &ldquo;allocs/op&rdquo; 指标，它被计算为 r.MemAllocs / r.N。</p>
<h4 id="benchmarkresult-memstringhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol500----go11">(BenchmarkResult) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=500" target="_blank" rel="noopener">MemString</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">r</span> <span style="color:#e06c75">BenchmarkResult</span>) <span style="color:#61afef;font-weight:bold">MemString</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	MemString方法以与 &lsquo;go test&rsquo; 相同的格式返回 r.AllocedBytesPerOp 和 r.AllocsPerOp。</p>
<h4 id="benchmarkresult-nsperophttpscsopensourcegooglegogogo1201srctestingbenchmarkgol383">(BenchmarkResult) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=383" target="_blank" rel="noopener">NsPerOp</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">r</span> <span style="color:#e06c75">BenchmarkResult</span>) <span style="color:#61afef;font-weight:bold">NsPerOp</span>() <span style="color:#e5c07b">int64</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	NsPerOp方法返回&quot;ns/op&quot;指标。</p>
<h4 id="benchmarkresult-stringhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol435">(BenchmarkResult) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=435" target="_blank" rel="noopener">String</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">r</span> <span style="color:#e06c75">BenchmarkResult</span>) <span style="color:#61afef;font-weight:bold">String</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	String方法返回基准测试结果的摘要。它遵循 <a href="https://golang.org/design/14313-benchmark-format" target="_blank" rel="noopener">https://golang.org/design/14313-benchmark-format</a> 的基准测试结果行格式，但不包括基准测试名称。同名的额外指标会覆盖内置指标。String方法不包括 allocs/op 或 B/op，因为它们由 MemString方法报告。</p>
<h3 id="type-coverhttpscsopensourcegooglegogogo1201srctestingcovergol35----go12">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/cover.go;l=35" target="_blank" rel="noopener">Cover</a>  &lt;- go1.2</h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Cover</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Mode</span>            <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Counters</span>        <span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>][]<span style="color:#e5c07b">uint32</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Blocks</span>          <span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>][]<span style="color:#e06c75">CoverBlock</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">CoveredPackages</span> <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Cover结构体记录有关测试覆盖检查的信息。注意：此结构体对于测试基础设施是内部的，可能会更改。它尚未(但可能会)受到 Go 1 兼容性指南的影响。</p>
<h3 id="type-coverblockhttpscsopensourcegooglegogogo1201srctestingcovergol22----go12">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/cover.go;l=22" target="_blank" rel="noopener">CoverBlock</a>  &lt;- go1.2</h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">CoverBlock</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Line0</span> <span style="color:#e5c07b">uint32</span> <span style="color:#7f848e">// 块开头所在的行号
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Col0</span>  <span style="color:#e5c07b">uint16</span> <span style="color:#7f848e">// 块开头所在的列号
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Line1</span> <span style="color:#e5c07b">uint32</span> <span style="color:#7f848e">// 块结尾所在的行号
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Col1</span>  <span style="color:#e5c07b">uint16</span> <span style="color:#7f848e">// 块结尾所在的列号
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Stmts</span> <span style="color:#e5c07b">uint16</span> <span style="color:#7f848e">// 此块中包含的语句数
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	CoverBlock结构体记录单个基本块的覆盖数据。这些字段是从编辑器中的 1 开始计数的：例如，文件的开头行号是 1。列以字节为单位测量。注意：此结构体对于测试基础设施是内部的，可能会更改。它尚未(但可能会)受到 Go 1 兼容性指南的影响。</p>
<h3 id="type-fhttpscsopensourcegooglegogogo1201srctestingfuzzgol68----go118">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fuzz.go;l=68" target="_blank" rel="noopener">F</a>  &lt;- go1.18</h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">F</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// contains filtered or unexported fields
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	F结构体是传递给模糊测试的类型。</p>
<p>​	模糊测试将生成的输入针对提供的模糊目标运行，可以找到并报告被测试代码中的潜在错误。</p>
<p>​	默认情况下，模糊测试运行种子语料库，其中包括 <code>(*F).Add</code> 中提供的条目和 <code>testdata/fuzz/&lt;FuzzTestName&gt;</code> 目录中的条目。在任何必要的设置和调用 <code>(*F).Add</code> 后，模糊测试必须调用 <code>(*F).Fuzz</code> 提供模糊目标。有关示例，请参见 testing 包文档，并参见 F.Fuzz 和 F.Add 方法文档获取详细信息。</p>
<p>​	<code>*F</code> 方法只能在 <code>(*F).Fuzz</code> 之前调用。一旦测试执行模糊目标，只能使用 <code>(*T)</code> 方法。<code>(*F).Failed</code> 和 <code>(*F).Name</code> 是 <code>(*F).Fuzz</code> 函数中允许的仅有的 <code>*F</code> 方法。</p>
<h4 id="f-addhttpscsopensourcegooglegogogo1201srctestingfuzzgol152----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fuzz.go;l=152" target="_blank" rel="noopener">Add</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">f</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Add</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Add方法将参数添加到 fuzz 测试的种子语料库中。如果在模糊目标之后或其中调用，将不起作用，并且 <code>args</code> 必须与模糊目标的参数匹配。</p>
<h4 id="f-cleanuphttpscsopensourcegooglegogogo1201srctestingtestinggol1129----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1129" target="_blank" rel="noopener">Cleanup</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Cleanup</span>(<span style="color:#e06c75">f</span> <span style="color:#c678dd">func</span>())
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Cleanup方法注册一个在测试(或子测试)及其所有子测试完成时调用的函数。Cleanup方法将按照最后添加的先调用的顺序调用。</p>
<h4 id="f-errorhttpscsopensourcegooglegogogo1201srctestingtestinggol1040----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1040" target="_blank" rel="noopener">Error</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Error</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Error 方法等同于 Log 方法后跟 Fail 方法。</p>
<h4 id="f-errorfhttpscsopensourcegooglegogogo1201srctestingtestinggol1047----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1047" target="_blank" rel="noopener">Errorf</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Errorf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Errorf方法等同于 Logf 方法后跟 Fail 方法。</p>
<h4 id="f-failhttpscsopensourcegooglegogogo1201srctestingfuzzgol128----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fuzz.go;l=128" target="_blank" rel="noopener">Fail</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">f</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Fail</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Fail 方法标记函数失败但继续执行。</p>
<h4 id="f-failnowhttpscsopensourcegooglegogogo1201srctestingtestinggol954----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=954" target="_blank" rel="noopener">FailNow</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">FailNow</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	FailNow方法标记函数失败并通过调用 runtime.Goexit 停止其执行(然后运行当前 goroutine 中的所有延迟调用)。执行将在下一个测试或基准中继续。FailNow方法必须从运行测试或基准函数的 goroutine 调用，而不是从测试期间创建的其他 goroutine 中调用。调用 FailNow方法不会停止这些其他 goroutine。</p>
<h4 id="f-failedhttpscsopensourcegooglegogogo1201srctestingtestinggol939----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=939" target="_blank" rel="noopener">Failed</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Failed</span>() <span style="color:#e5c07b">bool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Failed 方法报告函数是否已失败。</p>
<h4 id="f-fatalhttpscsopensourcegooglegogogo1201srctestingtestinggol1054----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1054" target="_blank" rel="noopener">Fatal</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Fatal</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Fatal 方法等同于 Log 方法后跟 FailNow 方法。</p>
<h4 id="f-fatalfhttpscsopensourcegooglegogogo1201srctestingtestinggol1061----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1061" target="_blank" rel="noopener">Fatalf</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Fatalf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Fatalf 方法等同于 Logf 方法后跟 FailNow 方法。</p>
<h4 id="f-fuzzhttpscsopensourcegooglegogogo1201srctestingfuzzgol210----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fuzz.go;l=210" target="_blank" rel="noopener">Fuzz</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">f</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Fuzz</span>(<span style="color:#e06c75">ff</span> <span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Fuzz 方法运行fuzz函数，ff，进行模糊测试。如果 ff 对一组参数失败，则这些参数将被添加到种子语料库中。</p>
<p>​	ff 必须是一个没有返回值的函数，其第一个参数为 <code>*T</code>，其余参数为要进行 fuzz 的类型。例如：</p>
<pre tabindex="0"><code>f.Fuzz(func(t *testing.T, b []byte, i int) { ... })
</code></pre><p>​	以下类型是允许的：[]byte、string、bool、byte、rune、float32、float64、int、int8、int16、int32、int64、uint、uint8、uint16、uint32、uint64。更多类型可能会在未来支持。</p>
<p>​	ff 不能调用任何 <code>*F</code> 方法，例如 <code>(*F).Log</code>、<code>(*F).Error</code>、<code>(*F).Skip</code>。应改用相应的 <code>*T</code> 方法。<code>(*F).Failed</code> 和 <code>(*F).Name</code> 是唯一允许在 <code>(*F).Fuzz</code> 函数中使用的 <code>*F</code> 方法</p>
<p>​	该函数应该快速且确定性，其行为不应该依赖于共享状态。不应在执行模糊函数之间保留可变输入参数或指向它们的指针，因为支持它们的内存可能在随后的调用期间被修改。ff不能修改由fuzz引擎提供的参数的底层数据。</p>
<p>​	在进行模糊测试时，F.Fuzz方法不会返回，直到发现问题，时间耗尽(使用<code>-fuzztime</code>设置)，或测试过程被信号中断。F.Fuzz应该仅被调用一次，除非在之前调用了F.Skip或F.Fail。</p>
<h4 id="f-helperhttpscsopensourcegooglegogogo1201srctestingfuzzgol102----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fuzz.go;l=102" target="_blank" rel="noopener">Helper</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">f</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Helper</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Helper方法标记调用函数为测试辅助函数。在打印文件和行信息时，该函数将被跳过。Helper方法可以同时从多个goroutine调用。</p>
<h4 id="f-loghttpscsopensourcegooglegogogo1201srctestingtestinggol1024----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1024" target="_blank" rel="noopener">Log</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Log</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Log方法使用默认格式对其参数进行格式化，类似于Println，并将文本记录在错误日志中。对于测试，仅当测试失败或设置了<code>-test.v</code>标志时才会打印文本。对于基准测试，为避免性能依赖于<code>-test.v</code>标志的值，始终打印文本。</p>
<h4 id="f-logfhttpscsopensourcegooglegogogo1201srctestingtestinggol1034----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1034" target="_blank" rel="noopener">Logf</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Logf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Logf方法根据格式对其参数进行格式化，类似于Printf，并将文本记录在错误日志中。如果没有提供最后一个换行符，则会添加一个。对于测试，仅当测试失败或设置了<code>-test.v</code>标志时才会打印文本。对于基准测试，为避免性能依赖于<code>-test.v</code>标志的值，始终打印文本。</p>
<h4 id="f-namehttpscsopensourcegooglegogogo1201srctestingtestinggol911----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=911" target="_blank" rel="noopener">Name</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Name</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Name方法返回正在运行的(子)测试或基准测试的名称。名称将包括测试的名称以及任何嵌套的子测试的名称。如果两个同级别的子测试名称相同，则Name方法将附加后缀以确保返回的名称是唯一的。</p>
<h4 id="f-setenvhttpscsopensourcegooglegogogo1201srctestingtestinggol1265----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1265" target="_blank" rel="noopener">Setenv</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Setenv</span>(<span style="color:#e06c75">key</span>, <span style="color:#e06c75">value</span> <span style="color:#e5c07b">string</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Setenv方法调用os.Setenv(key, value)，并使用Cleanup方法将环境变量还原为其原始值。由于Setenv方法影响整个进程，因此无法在并行测试或具有并行祖先的测试中使用。</p>
<h4 id="f-skiphttpscsopensourcegooglegogogo1201srctestingtestinggol1068----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1068" target="_blank" rel="noopener">Skip</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Skip</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Skip方法等同于Log方法后跟SkipNow方法。</p>
<h4 id="f-skipnowhttpscsopensourcegooglegogogo1201srctestingtestinggol1089----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1089" target="_blank" rel="noopener">SkipNow</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">SkipNow</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	SkipNow方法将测试标记为已跳过，并通过调用runtime.Goexit停止其执行。如果测试失败(请参见Error、Errorf、Fail)，然后跳过，仍将被视为已失败。执行将在下一个测试或基准测试继续。请参阅FailNow方法。SkipNow方法必须从运行测试的goroutine中调用，而不是从测试期间创建的其他goroutine中调用。调用SkipNow方法不会停止这些其他goroutine。</p>
<h4 id="f-skipfhttpscsopensourcegooglegogogo1201srctestingtestinggol1075----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1075" target="_blank" rel="noopener">Skipf</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Skipf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Skipf方法等同于Logf方法后跟SkipNow方法。</p>
<h4 id="f-skippedhttpscsopensourcegooglegogogo1201srctestingfuzzgol139----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fuzz.go;l=139" target="_blank" rel="noopener">Skipped</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">f</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">Skipped</span>() <span style="color:#e5c07b">bool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Skipped方法报告测试是否被跳过。</p>
<h4 id="f-tempdirhttpscsopensourcegooglegogogo1201srctestingtestinggol1163----go118">(*F) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1163" target="_blank" rel="noopener">TempDir</a>  &lt;- go1.18</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>) <span style="color:#61afef;font-weight:bold">TempDir</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	TempDir方法返回一个临时目录供测试使用。当测试和它的所有子测试完成后，该目录会被Cleanup方法自动删除。每次对t.TempDir方法的后续调用都会返回一个唯一的目录；如果目录创建失败，TempDir方法会通过调用Fatal方法终止测试。</p>
<h3 id="type-internalbenchmarkhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol76">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=76" target="_blank" rel="noopener">InternalBenchmark</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">InternalBenchmark</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Name</span> <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">F</span>    <span style="color:#c678dd">func</span>(<span style="color:#e06c75">b</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">B</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	InternalBenchmark结构体是一个内部类型，但导出因为它是&quot;go test&quot;命令实现的一部分。</p>
<h3 id="type-internalexamplehttpscsopensourcegooglegogogo1201srctestingexamplegol15">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/example.go;l=15" target="_blank" rel="noopener">InternalExample</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">InternalExample</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Name</span>      <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">F</span>         <span style="color:#c678dd">func</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Output</span>    <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Unordered</span> <span style="color:#e5c07b">bool</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="type-internalfuzztargethttpscsopensourcegooglegogogo1201srctestingfuzzgol48----go118">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/fuzz.go;l=48" target="_blank" rel="noopener">InternalFuzzTarget</a>  &lt;- go1.18</h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">InternalFuzzTarget</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Name</span> <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Fn</span>   <span style="color:#c678dd">func</span>(<span style="color:#e06c75">f</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">F</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	InternalFuzzTarget结构体是一个内部类型，但导出因为它是&quot;go test&quot;命令实现的一部分。</p>
<h3 id="type-internaltesthttpscsopensourcegooglegogogo1201srctestingtestinggol1426">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1426" target="_blank" rel="noopener">InternalTest</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">InternalTest</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Name</span> <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">F</span>    <span style="color:#c678dd">func</span>(<span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	InternalTest结构体是一个内部类型，但导出因为它是&quot;go test&quot;命令实现的一部分。</p>
<h3 id="type-mhttpscsopensourcegooglegogogo1201srctestingtestinggol1747----go14">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1747" target="_blank" rel="noopener">M</a>  &lt;- go1.4</h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">M</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// contains filtered or unexported fields
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	M结构体是一个传递给TestMain函数以运行实际测试的类型。</p>
<h4 id="func-mainstarthttpscsopensourcegooglegogogo1201srctestingtestinggol1788----go14">func <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1788" target="_blank" rel="noopener">MainStart</a>  &lt;- go1.4</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">MainStart</span>(<span style="color:#e06c75">deps</span> <span style="color:#e06c75">testDeps</span>, <span style="color:#e06c75">tests</span> []<span style="color:#e06c75">InternalTest</span>, <span style="color:#e06c75">benchmarks</span> []<span style="color:#e06c75">InternalBenchmark</span>, <span style="color:#e06c75">fuzzTargets</span> []<span style="color:#e06c75">InternalFuzzTarget</span>, <span style="color:#e06c75">examples</span> []<span style="color:#e06c75">InternalExample</span>) <span style="color:#56b6c2">*</span><span style="color:#e06c75">M</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	MainStart函数是供由&quot;go test&quot;生成的测试使用的。它不是直接调用的，并且不受Go 1兼容性文档的约束。它可能在不同的版本中改变签名。</p>
<h4 id="m-runhttpscsopensourcegooglegogogo1201srctestingtestinggol1803----go14">(*M) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1803" target="_blank" rel="noopener">Run</a>  &lt;- go1.4</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">m</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">M</span>) <span style="color:#61afef;font-weight:bold">Run</span>() (<span style="color:#e06c75">code</span> <span style="color:#e5c07b">int</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Run方法运行测试。它返回一个退出码以传递给os.Exit。</p>
<h3 id="type-pbhttpscsopensourcegooglegogogo1201srctestingbenchmarkgol747----go13">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=747" target="_blank" rel="noopener">PB</a>  &lt;- go1.3</h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">PB</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// contains filtered or unexported fields
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	PB结构体被用于RunParallel方法以运行并行基准测试。</p>
<h4 id="pb-nexthttpscsopensourcegooglegogogo1201srctestingbenchmarkgol755----go13">(*PB) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/benchmark.go;l=755" target="_blank" rel="noopener">Next</a>  &lt;- go1.3</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">pb</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">PB</span>) <span style="color:#61afef;font-weight:bold">Next</span>() <span style="color:#e5c07b">bool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Next方法报告是否还有更多的迭代需要执行。</p>
<h3 id="type-thttpscsopensourcegooglegogogo1201srctestingtestinggol898">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=898" target="_blank" rel="noopener">T</a></h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// contains filtered or unexported fields
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	T结构体是传递给测试函数以管理测试状态并支持格式化测试日志的类型。</p>
<p>​	当Test函数返回或调用任何FailNow方法、Fatal方法、Fatalf方法、SkipNow方法、Skip方法或Skipf方法时，测试结束。这些方法以及Parallel方法只能从运行Test函数的goroutine中调用。</p>
<p>​	其他报告方法，如Log方法和Error方法的变体，可以同时从多个goroutine调用。</p>
<h4 id="t-cleanuphttpscsopensourcegooglegogogo1201srctestingtestinggol1129----go114">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1129" target="_blank" rel="noopener">Cleanup</a>  &lt;- go1.14</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Cleanup</span>(<span style="color:#e06c75">f</span> <span style="color:#c678dd">func</span>())
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Cleanup方法注册一个函数，在测试(或子测试)及其所有子测试完成时调用。Cleanup方法将按照最后添加、最先调用的顺序调用。</p>
<h4 id="t-deadlinehttpscsopensourcegooglegogogo1201srctestingtestinggol1645----go115">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1645" target="_blank" rel="noopener">Deadline</a>  &lt;- go1.15</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Deadline</span>() (<span style="color:#e06c75">deadline</span> <span style="color:#e06c75">time</span>.<span style="color:#e06c75">Time</span>, <span style="color:#e06c75">ok</span> <span style="color:#e5c07b">bool</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Deadline方法报告测试二进制文件将超过由<code>-timeout</code>标志指定的超时时间的时间。</p>
<p>​	如果<code>-timeout</code>标志指示&quot;no timeout&rdquo;(0)，则ok结果为false。</p>
<h4 id="t-errorhttpscsopensourcegooglegogogo1201srctestingtestinggol1040">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1040" target="_blank" rel="noopener">Error</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Error</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Error方法等同于Log方法后面跟着Fail方法。</p>
<h4 id="t-errorfhttpscsopensourcegooglegogogo1201srctestingtestinggol1047">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1047" target="_blank" rel="noopener">Errorf</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Errorf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Errorf方法等同于Logf方法后跟Fail方法。</p>
<h4 id="t-failhttpscsopensourcegooglegogogo1201srctestingtestinggol925">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=925" target="_blank" rel="noopener">Fail</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Fail</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Fail方法标记函数已经失败，但继续执行。</p>
<h4 id="t-failnowhttpscsopensourcegooglegogogo1201srctestingtestinggol954">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=954" target="_blank" rel="noopener">FailNow</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">FailNow</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	FailNow方法标记函数已经失败并通过调用runtime.Goexit(然后在当前goroutine中运行所有延迟调用)停止其执行。执行将继续在下一个测试或基准测试上。FailNow方法必须从运行测试或基准测试函数的goroutine中调用，而不是从在测试期间创建的其他goroutine中调用。调用FailNow方法不会停止这些其他goroutine。</p>
<h4 id="t-failedhttpscsopensourcegooglegogogo1201srctestingtestinggol939">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=939" target="_blank" rel="noopener">Failed</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Failed</span>() <span style="color:#e5c07b">bool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Failed方法返回当前测试是否失败。</p>
<h4 id="t-fatalhttpscsopensourcegooglegogogo1201srctestingtestinggol1054">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1054" target="_blank" rel="noopener">Fatal</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Fatal</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Fatal方法等同于 Log方法后跟FailNow方法。</p>
<h4 id="t-fatalfhttpscsopensourcegooglegogogo1201srctestingtestinggol1061">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1061" target="_blank" rel="noopener">Fatalf</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Fatalf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Fatalf方法等同于 Logf方法后跟 FailNow方法。</p>
<h4 id="t-helperhttpscsopensourcegooglegogogo1201srctestingtestinggol1108----go19">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1108" target="_blank" rel="noopener">Helper</a>  &lt;- go1.9</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Helper</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Helper方法标记调用该函数的函数为测试帮助函数。在打印文件和行信息时，该函数将被跳过。多个 goroutine 可以同时调用 Helper方法。</p>
<h4 id="t-loghttpscsopensourcegooglegogogo1201srctestingtestinggol1024">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1024" target="_blank" rel="noopener">Log</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Log</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Log方法使用默认格式化方式格式化其参数，类似于 Println，然后将文本记录在错误日志中。对于测试，只有在测试失败或 <code>-test.v</code> 标志设置时才会打印该文本。对于基准测试，总是会打印该文本，以避免性能受到 <code>-test.v</code> 标志值的影响。</p>
<h4 id="t-logfhttpscsopensourcegooglegogogo1201srctestingtestinggol1034">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1034" target="_blank" rel="noopener">Logf</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Logf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Logf方法根据格式进行参数格式化，类似于 Printf，然后将文本记录在错误日志中。如果未提供最后的换行符，则添加一个。对于测试，只有在测试失败或 <code>-test.v</code> 标志设置时才会打印该文本。对于基准测试，总是会打印该文本，以避免性能受到 <code>-test.v</code> 标志值的影响。</p>
<h4 id="t-namehttpscsopensourcegooglegogogo1201srctestingtestinggol911----go18">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=911" target="_blank" rel="noopener">Name</a>  &lt;- go1.8</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Name</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Name方法返回当前运行的(子)测试或基准测试的名称。</p>
<p>​	名称将包括测试的名称以及任何嵌套子测试的名称。如果两个同级别的子测试具有相同的名称，则 Name 方法将附加后缀以确保返回的名称是唯一的。</p>
<h4 id="t-parallelhttpscsopensourcegooglegogogo1201srctestingtestinggol1354">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1354" target="_blank" rel="noopener">Parallel</a></h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Parallel</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Parallel方法表示该测试将与其他并行测试一起运行(且仅与其他并行测试一起运行)。当由于使用 <code>-test.count</code> 或 <code>-test.cpu</code> 而多次运行测试时，单个测试的多个实例永远不会彼此并行运行。</p>
<h4 id="t-runhttpscsopensourcegooglegogogo1201srctestingtestinggol1590----go17">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1590" target="_blank" rel="noopener">Run</a>  &lt;- go1.7</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Run</span>(<span style="color:#e06c75">name</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">f</span> <span style="color:#c678dd">func</span>(<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>)) <span style="color:#e5c07b">bool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Run方法将<code>f</code>作为<code>t</code>的子测试运行，其名称为name。它在单独的goroutine中运行f并阻塞，直到<code>f</code>返回或调用<code>t.Parallel</code>成为并行测试。Run方法报告<code>f</code>是否成功(或至少在调用<code>t.Parallel</code>之前未失败)。</p>
<p>​	Run方法可以同时从多个goroutine调用，但是所有这些调用必须在<code>t</code>返回外部测试函数之前返回。</p>
<h4 id="t-setenvhttpscsopensourcegooglegogogo1201srctestingtestinggol1402----go117">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1402" target="_blank" rel="noopener">Setenv</a>  &lt;- go1.17</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">t</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Setenv</span>(<span style="color:#e06c75">key</span>, <span style="color:#e06c75">value</span> <span style="color:#e5c07b">string</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Setenv方法调用os.Setenv(key，value)并使用Cleanup将环境变量恢复为其原始值。测试完成后，Cleanup方法将在最后一个添加的函数优先调用的顺序下被调用。</p>
<p>​	由于Setenv方法会影响整个进程，因此它不能用于并行测试或具有并行祖先的测试。</p>
<h4 id="t-skiphttpscsopensourcegooglegogogo1201srctestingtestinggol1068----go11">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1068" target="_blank" rel="noopener">Skip</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Skip</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Skip方法等效于Log方法后跟SkipNow方法。</p>
<h4 id="t-skipnowhttpscsopensourcegooglegogogo1201srctestingtestinggol1089----go11">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1089" target="_blank" rel="noopener">SkipNow</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">SkipNow</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	SkipNow方法将测试标记为已跳过，并通过调用runtime.Goexit停止其执行。如果测试失败(请参见Error，Errorf，Fail)，然后跳过它，仍将视为已失败。执行将继续在下一个测试或基准中进行。请参见FailNow。SkipNow方法必须从运行测试的goroutine中调用，而不是从测试期间创建的其他goroutine中调用。调用SkipNow不会停止这些其他goroutine。</p>
<h4 id="t-skipfhttpscsopensourcegooglegogogo1201srctestingtestinggol1075----go11">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1075" target="_blank" rel="noopener">Skipf</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Skipf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Skipf方法等效于Logf方法后跟SkipNow方法。</p>
<h4 id="t-skippedhttpscsopensourcegooglegogogo1201srctestingtestinggol1099----go11">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1099" target="_blank" rel="noopener">Skipped</a>  &lt;- go1.1</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Skipped</span>() <span style="color:#e5c07b">bool</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	Skipped方法报告测试是否已被跳过。</p>
<h4 id="t-tempdirhttpscsopensourcegooglegogogo1201srctestingtestinggol1163----go115">(*T) <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=1163" target="_blank" rel="noopener">TempDir</a>  &lt;- go1.15</h4>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">c</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">TempDir</span>() <span style="color:#e5c07b">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	TempDir方法返回测试用于的临时目录。当测试及其所有子测试完成时，Cleanup方法会自动删除该目录。每个后续调用t.TempDir都会返回一个唯一的目录；如果目录创建失败，则TempDir方法通过调用Fatal方法终止测试。</p>
<h3 id="type-tbhttpscsopensourcegooglegogogo1201srctestingtestinggol860----go12">type <a href="https://cs.opensource.google/go/go/&#43;/go1.20.1:src/testing/testing.go;l=860" target="_blank" rel="noopener">TB</a>  &lt;- go1.2</h3>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">TB</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Cleanup</span>(<span style="color:#c678dd">func</span>())
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Error</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Errorf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Fail</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">FailNow</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Failed</span>() <span style="color:#e5c07b">bool</span>
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Fatal</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Fatalf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Helper</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Log</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Logf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Name</span>() <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Setenv</span>(<span style="color:#e06c75">key</span>, <span style="color:#e06c75">value</span> <span style="color:#e5c07b">string</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Skip</span>(<span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">SkipNow</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Skipf</span>(<span style="color:#e06c75">format</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">args</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">any</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Skipped</span>() <span style="color:#e5c07b">bool</span>
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">TempDir</span>() <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// contains filtered or unexported methods
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>TB 是 T、B 和 F 共有的接口。</p>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User mailing list" aria-label="User mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/twitter" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/stack" aria-label="Stack Overflow">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/google/docsy" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/slack" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer mailing list" aria-label="Developer mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="Developer mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 The Docsy Authors </small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener"></a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
  <script src="/js/main.min.9069af235eb4d4956fc4dc29e5ca46caef0cdcae593856be4e33c99075bc5ea2.js" integrity="sha256-kGmvI1601JVvxNwp5cpGyu8M3K5ZOFa&#43;TjPJkHW8XqI=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>
<script src='/js/deal-zero-width-space.js'></script>
  </body>
</html>
