<!doctype html>
<html itemscope itemtype="http://schema.org/WebPage" lang="cn" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.111.3">
<link rel="canonical" type="text/html" href="http://ngd.cn/docs/References/LanguageSpecification/">
<link rel="alternate" type="application/rss&#43;xml" href="http://ngd.cn/docs/References/LanguageSpecification/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>语言规范 | go文档集</title>
<meta name="description" content="The most popular HTML, CSS, and JS library in the world.">
<meta property="og:title" content="语言规范" />
<meta property="og:description" content="The most popular HTML, CSS, and JS library in the world." />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://ngd.cn/docs/References/LanguageSpecification/" />
<meta itemprop="name" content="语言规范">
<meta itemprop="description" content="The most popular HTML, CSS, and JS library in the world."><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="语言规范"/>
<meta name="twitter:description" content="The most popular HTML, CSS, and JS library in the world."/>




<link rel="preload" href="/scss/main.min.bb1f3a37154c4661ae02d3cb1a733edd8005db70f626370ca004c689a63ab7d4.css" as="style">
<link href="/scss/main.min.bb1f3a37154c4661ae02d3cb1a733edd8005db70f626370ca004c689a63ab7d4.css" rel="stylesheet" integrity="">

<link href="/css/extra.css" rel="stylesheet">
<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-00000000-0"></script>
<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.dataLayer = window.dataLayer || [];
	function gtag(){dataLayer.push(arguments);}
	gtag('js', new Date());
	gtag('config', 'UA-00000000-0');
}
</script>
  </head>
  <body class="td-section">
    <header>
      <nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
  <a class="navbar-brand" href="/"><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class="navbar-brand__name">go文档集</span></a>
  <div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
    <ul class="navbar-nav mt-2 mt-lg-0">
      <li class="nav-item mr-4 mb-2 mb-lg-0">
        <a class="nav-link active" href="/docs/"><span class="active">文档</span></a>
      </li>
      </ul>
  </div>
  <div class="navbar-nav d-none d-lg-block">
    <div class="td-search">
  <div class="td-search__icon"></div>
  <input type="search" class="td-search__input form-control td-search-input" placeholder="" aria-label="" autocomplete="off">
</div>

  </div>
</nav>
    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>

<a href="#" onclick="print();return false;"></a>.
</p><p>
<a href="/docs/References/LanguageSpecification/"></a>.
</p>
</div>



<h1 class="title">语言规范</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-cd35d147ac12276cf35c0f1498cbb196">简介</a></li>


    
  
    
    
	
<li>2: <a href="#pg-6f72088b23005ccad37c6e3eebf072a4">标记法</a></li>


    
  
    
    
	
<li>3: <a href="#pg-089bac3b6bdd64611df01fde021718b7">源代码表示</a></li>


    
  
    
    
	
<li>4: <a href="#pg-eb937eec6006ae5a600409cc0b563cbe">词汇元素</a></li>


    
  
    
    
	
<li>5: <a href="#pg-b203f791c8def3badb1392b97a3734d2">常量</a></li>


    
  
    
    
	
<li>6: <a href="#pg-2ed8b91e7228dba06921c020cea53578">变量</a></li>


    
  
    
    
	
<li>7: <a href="#pg-647e747fa0614356b07bb33dd4cb9f12">类型</a></li>


    
  
    
    
	
<li>8: <a href="#pg-18f37af236cb70cbdbcd65443073d5af">类型和值的属性</a></li>


    
  
    
    
	
<li>9: <a href="#pg-1771d5c1ba1ac864f6a837e5426d85f9">块</a></li>


    
  
    
    
	
<li>10: <a href="#pg-d71ecd79d7948d28bf81d12f97fed6e0">声明和作用域</a></li>


    
  
    
    
	
<li>11: <a href="#pg-47b5b8ffba8abe4a06ed6cf58a54d187">表达式</a></li>


    
  
    
    
	
<li>12: <a href="#pg-19719aa4bf73ebfc511b9933b0e00044">语句</a></li>


    
  
    
    
	
<li>13: <a href="#pg-fad60f56493e437988bc0a6c0f8f24b3">内置函数</a></li>


    
  
    
    
	
<li>14: <a href="#pg-91fab36fce22022fbcd4eb43d0566dc4">包</a></li>


    
  
    
    
	
<li>15: <a href="#pg-b31a0bd56b925b9d410a1060b018ac83">程序初始化和执行</a></li>


    
  
    
    
	
<li>16: <a href="#pg-4faf1953294b7aeab992d40decf46920">错误</a></li>


    
  
    
    
	
<li>17: <a href="#pg-2947293a8dda2e53c1de22489337087a">运行时恐慌</a></li>


    
  
    
    
	
<li>18: <a href="#pg-f0a31af7fbe657440ae83c353159d207">系统考虑</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-cd35d147ac12276cf35c0f1498cbb196">1 - 简介</h1>
    
	<h1 id="the-go-programming-language-specification">The Go Programming Language Specification</h1>
<h2 id="version-of-june-29-2022">Version of June 29, 2022</h2>
<h2 id="introduction-简介">Introduction 简介</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Introduction" target="_blank" rel="noopener">https://go.dev/ref/spec#Introduction</a></p>
</blockquote>
<p>​	这是Go编程语言的参考手册。不带泛型的 <code>Go1.18</code> 之前的版本可以在<a href="https://go.dev/doc/go1.17_spec.html" target="_blank" rel="noopener">这里</a>找到。更多信息和其他文档，请参见 <a href="https://go.dev/" target="_blank" rel="noopener">golang.org</a>。</p>
<p>​	Go是一种通用语言，设计时考虑到了系统编程。它是强类型和垃圾收集的，并且明确支持并发编程。程序是由包构成的，包的属性允许对依赖项进行有效的管理。</p>
<p>​	语法紧凑且易于解析，允许使用集成开发环境等自动工具进行轻松的分析。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-6f72088b23005ccad37c6e3eebf072a4">2 - 标记法</h1>
    
	<h2 id="notation-标记法">Notation 标记法</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Notation" target="_blank" rel="noopener">https://go.dev/ref/spec#Notation</a></p>
</blockquote>
<p>​	（标记法的）语法是用 Extended Backus-Naur Form (EBNF) 的一个<a href="https://en.wikipedia.org/wiki/Wirth_syntax_notation" target="_blank" rel="noopener">变体</a>来指定的。</p>
<pre tabindex="0"><code>Syntax      = { Production } .
Production  = production_name &#34;=&#34; [ Expression ] &#34;.&#34; .
Expression  = Term { &#34;|&#34; Term } .
Term        = Factor { Factor } .
Factor      = production_name | token [ &#34;…&#34; token ] | Group | Option | Repetition .
Group       = &#34;(&#34; Expression &#34;)&#34; .
Option      = &#34;[&#34; Expression &#34;]&#34; .
Repetition  = &#34;{&#34; Expression &#34;}&#34; .
</code></pre><p>Productions are expressions constructed from terms and the following operators, in increasing precedence:</p>
<p>​	产生式是由术语和以下运算符构建的表达式，其优先级越来越高。</p>
<pre tabindex="0"><code>|   alternation
()  grouping
[]  option (0 or 1 times)
{}  repetition (0 to n times)
</code></pre><p>​	小写的产生式名称用于标识词法（终端）标记。非终端则使用<code>CamelCase</code>。词法标记用双引号<code>&quot;&quot;</code>或反引号``包裹起来。</p>
<p>​	<code>a ... b</code>的形式表示从<code>a</code>到<code>b</code>的一组字符作为备选项。在规范的其他地方也使用水平省略号<code>...</code>来非正式地表示各种枚举或没有进一步指定的代码片段。字符<code>…</code>（相对于三个字符<code>...</code>而言）不是Go语言的标记。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-089bac3b6bdd64611df01fde021718b7">3 - 源代码表示</h1>
    
	<h2 id="source-code-representation-源代码表示">Source code representation 源代码表示</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Source_code_representation" target="_blank" rel="noopener">https://go.dev/ref/spec#Source_code_representation</a></p>
</blockquote>
<p>​	源代码是以 <a href="https://en.wikipedia.org/wiki/UTF-8" target="_blank" rel="noopener">UTF-8</a>编码的Unicode文本。该文本未被规范化，因此单个重音码点与由重音和字母组合而成的相同字符是不同的；这些被视为两个码点。为了简单起见，本文将使用<code>非限定术语字符</code>来指代源文本中的Unicode码点。</p>
<p>​	每个码点都是不同的；例如，大写字母和小写字母是不同的字符。</p>
<p>​	实现限制：为了与其他工具兼容，编译器可能不允许源文本中出现<code>NUL</code>字符（U+0000）。</p>
<p>​	实现限制：为了与其他工具兼容，编译器可以忽略UTF-8编码的字节顺序标记（U+FEFF），如果它是源文本中的第一个Unicode码点。字节顺序标记可能在源代码的其他任何地方被禁用。</p>
<h3 id="characters-字符">Characters 字符</h3>
<p>​	以下术语用于表示特定的Unicode字符类别：</p>
<pre tabindex="0"><code>newline        = /* the Unicode code point U+000A */ .
unicode_char   = /* an arbitrary Unicode code point except newline */ .
unicode_letter = /* a Unicode code point categorized as &#34;Letter&#34; */ .
unicode_digit  = /* a Unicode code point categorized as &#34;Number, decimal digit&#34; */ .
</code></pre><p>​	在 <a href="https://www.unicode.org/versions/Unicode8.0.0/" target="_blank" rel="noopener">The Unicode Standard 8.0</a>中，第4.5节 &ldquo;<code>General Category</code> &ldquo;定义了一组字符类别。Go将字母类别<code>Lu</code>、<code>Ll</code>、<code>Lt</code>、<code>Lm</code>或<code>Lo</code>中的所有字符视为<code>Unicode字母</code>，将数字类别<code>Nd</code>中的字符视为<code>Unicode数字</code>。</p>
<h3 id="letters-and-digits-字母和数字">Letters and digits 字母和数字</h3>
<p>​	下划线字符<code>_</code>（U+005F）被视为小写字母。</p>
<pre tabindex="0"><code>letter        = unicode_letter | &#34;_&#34; .
decimal_digit = &#34;0&#34; … &#34;9&#34; .
binary_digit  = &#34;0&#34; | &#34;1&#34; .
octal_digit   = &#34;0&#34; … &#34;7&#34; .
hex_digit     = &#34;0&#34; … &#34;9&#34; | &#34;A&#34; … &#34;F&#34; | &#34;a&#34; … &#34;f&#34; .
</code></pre>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-eb937eec6006ae5a600409cc0b563cbe">4 - 词汇元素</h1>
    
	<h2 id="lexical-elements-词汇元素">Lexical elements 词汇元素</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Lexical_elements" target="_blank" rel="noopener">https://go.dev/ref/spec#Lexical_elements</a></p>
</blockquote>
<h3 id="comments-注释">Comments 注释</h3>
<p>​	注释服务于程序文档，有两种形式：</p>
<ol>
<li>行注释以字符序列<code>//</code>开始，并在行尾结束。</li>
<li>通用注释以字符序列<code>/*</code>开始，并以随后的第一个字符序列<code>*/</code>结束。</li>
</ol>
<p>​	注释不能从<a href="#rune-literals">rune</a>或<a href="#string-literals">string literal</a>开始，也不能从注释内部开始。一个不包含换行符的通用注释就像一个空格。任何其他的注释就像一个换行符。</p>
<h3 id="tokens">Tokens</h3>
<p>​	tokens 构成了Go语言的词汇表。有四个类别：<code>标识符</code>、<code>关键字</code>、<code>操作符和标点符号</code>以及<code>字面量（literals）</code>。由空格（U+0020）、水平制表符（U+0009）、回车符（U+000D）和换行符（U+000A）组成的空白空间被忽略，除非它分隔本来会合并成单个标记的标记。此外，换行或文件结束可能会触发插入分号<a href="#Semicolons">semicolon</a> 。当把输入分解为 tokens 时，下一个 token 是形成有效 token 的最长的字符序列。</p>
<h3 id="semicolons-分号">Semicolons 分号</h3>
<p>​	正式语法（formal syntax）在许多结果（productions）中使用分号&quot;<code>;</code>&ldquo;作为终止符。Go程序可以通过以下两条规则省略大部分的分号：</p>
<p>a. 当输入被分解成 tokens 时，分号会自动插入标记流后，如果某行的最后一个 token 是：</p>
<ul>
<li>
<p>一个标识符（<a href="#identifiers">identifier</a>）</p>
</li>
<li>
<p>一个<a href="#integer-literals">整数字面量</a>、<a href="#floating-point-literals">浮点数字面量</a>、<a href="#imaginary-literals">虚数字面量</a>、<a href="#rune-literals">符文字面量</a>或<a href="#string-literals">字符串字面量</a></p>
</li>
<li>
<p><code>break</code>、 <code>continue</code>、<code>fallthrough</code>、 <code>return</code>中的任意一个<a href="#keywords">关键字</a></p>
</li>
<li>
<p><code>++</code>、<code>--</code>、<code>)</code>、<code>]</code>、 <code>}</code>中的任意一个<a href="#operators-and-punctuation">操作符或标点符号</a></p>
</li>
</ul>
<p>b. 为了允许复杂的语句占用一行，在结尾的&rdquo;<code>)</code>&ldquo;或&rdquo;<code>}</code>&ldquo;之前可以省略分号。</p>
<p>​	为了响应惯用法（idiomatic use），本文档中的代码示例使用这些规则省略分号。</p>
<h3 id="identifiers-标识符">Identifiers 标识符</h3>
<p>​	标识符命名程序实体，如变量和类型。标识符是一个或多个字母和数字的序列。标识符中的第一个字符必须是字母。</p>
<pre tabindex="0"><code>identifier = letter { letter | unicode_digit } .
a
_x9
ThisVariableIsExported
αβ
</code></pre><p>一些标识符是预先声明的（<a href="../DeclarationsAndScope#predeclared-identifiers">predeclared</a>）。</p>
<h3 id="keywords-关键字">Keywords 关键字</h3>
<p>​	以下关键词被作为保留，不能作为标识符使用：</p>
<pre tabindex="0"><code>break        default      func         interface    select
case         defer        go           map          struct
chan         else         goto         package      switch
const        fallthrough  if           range        type
continue     for          import       return       var
</code></pre><h3 id="operators-and-punctuation-操作符和标点符号">Operators and punctuation 操作符和标点符号</h3>
<p>​	以下字符序列代表运算符（<a href="../Expressions#Operators">operators</a>）（包括赋值运算符（<a href="../Statements#assignment-statements">assignment operators</a>））和标点符号：</p>
<pre tabindex="0"><code>+    &amp;     +=    &amp;=     &amp;&amp;    ==    !=    (    )
-    |     -=    |=     ||    &lt;     &lt;=    [    ]
*    ^     *=    ^=     &lt;-    &gt;     &gt;=    {    }
/    &lt;&lt;    /=    &lt;&lt;=    ++    =     :=    ,    ;
%    &gt;&gt;    %=    &gt;&gt;=    --    !     ...   .    :
     &amp;^          &amp;^=          ~
</code></pre><h3 id="integer-literals-整数字面量">Integer literals 整数字面量</h3>
<p>​	整数字面量是代表一个整数常量的数字序列。可选的前缀用于设置非十进制的基数。二进制为<code>0b</code>或<code>0B</code>，八进制为<code>0</code>、<code>0o</code>或<code>0O</code>，十六进制为<code>0x</code>或<code>0X</code>。<code>单一的0被认为是十进制的0</code>。在十六进制字面量中，字母<code>a</code>到<code>f</code>和<code>A</code>到<code>F</code>代表数值10到15。</p>
<p>​	为了便于阅读，下划线字符<code>_</code>可以出现在基数前缀之后或连续的数字之间。这种下划线不会改变字面的值。<code>（只有从 go 1.几的版本及以上版本才可以使用）</code></p>
<pre tabindex="0"><code>int_lit        = decimal_lit | binary_lit | octal_lit | hex_lit .
decimal_lit    = &#34;0&#34; | ( &#34;1&#34; … &#34;9&#34; ) [ [ &#34;_&#34; ] decimal_digits ] .
binary_lit     = &#34;0&#34; ( &#34;b&#34; | &#34;B&#34; ) [ &#34;_&#34; ] binary_digits .
octal_lit      = &#34;0&#34; [ &#34;o&#34; | &#34;O&#34; ] [ &#34;_&#34; ] octal_digits .
hex_lit        = &#34;0&#34; ( &#34;x&#34; | &#34;X&#34; ) [ &#34;_&#34; ] hex_digits .

decimal_digits = decimal_digit { [ &#34;_&#34; ] decimal_digit } .
binary_digits  = binary_digit { [ &#34;_&#34; ] binary_digit } .
octal_digits   = octal_digit { [ &#34;_&#34; ] octal_digit } .
hex_digits     = hex_digit { [ &#34;_&#34; ] hex_digit } .
42
4_2
0600
0_600
0o600
0O600       // second character is capital letter &#39;O&#39;  =&gt; 第二个字符是字母 &#39;O&#39;
0xBadFace
0xBad_Face
0x_67_7a_2f_cc_40_c6
170141183460469231731687303715884105727
170_141183_460469_231731_687303_715884_105727

_42         // an identifier, not an integer literal =&gt; 标识符,非整数字面量42
42_         // invalid: _ must separate successive digits 
	    //=&gt; 无效的：_ 必须分隔连续的数字 （但0x_1FA或 0X_1FA 等字面量却是有效的）
4__2        // invalid: only one _ at a time 
	     //=&gt; 无效的：每次只能使用一个 _（但0x_1FA或 0X_1FA 等字面量却是有效的）
0_xBadFace  // invalid: _ must separate successive digits 
                           //=&gt;  无效的：_ 必须分隔连续的数字（但0x_1FA或 0X_1FA 等字面量却是有效的）
</code></pre><h3 id="floating-point-literals-浮点数字面量">Floating-point literals 浮点数字面量</h3>
<p>​	浮点数字面量是<a href="../Constants">浮点常量</a>的十进制或十六进制表示。</p>
<p>​	十进制浮点数字面量由整数部分（integer part）（十进制数字）、小数点（ a radix point）、小数部分（fractional part ）（十进制数字）和指数部分（exponent part ）（<code>e</code>或<code>E</code>后面有可选的符号和十进制数字）组成。整数部分或小数部分中的一个可以省略；小数点或指数部分中的一个可以省略。指数值 exp 将尾数（mantissa ）（整数和小数部分）按$10^{exp}$ 进行缩放。</p>
<p>​	十六进制浮点数字面量由<code>0x</code>或<code>0X</code>前缀（prefix）、整数部分（integer part）（十六进制数字）、小数点（ a radix point）、小数部分（fractional part ）（十六进制数字）和指数部分（exponent part ）（<code>p</code>或<code>P</code>后面有可选的符号和<code>十进制数字</code>）组成。整数部分或小数部分中的一个可以省略；小数点也可以省略，但指数部分是必须要存在的。(这个语法与<code>IEEE 754-2008 §5.12.3</code>中给出的语法一致。) 指数值exp将尾数（mantissa ）(整数和小数部分)按$2^{exp}$ 进行缩放。</p>
<p>​	为了便于阅读，一个下划线字符<code>_</code>可以出现在基数前缀之后或连续的数字之间；这样的下划线不会改变字面量的值。<code>（只有从 go 1.几的版本及以上版本才可以使用）</code></p>
<pre tabindex="0"><code>float_lit         = decimal_float_lit | hex_float_lit .

decimal_float_lit = decimal_digits &#34;.&#34; [ decimal_digits ] [ decimal_exponent ] |
                    decimal_digits decimal_exponent |
                    &#34;.&#34; decimal_digits [ decimal_exponent ] .
decimal_exponent  = ( &#34;e&#34; | &#34;E&#34; ) [ &#34;+&#34; | &#34;-&#34; ] decimal_digits .

hex_float_lit     = &#34;0&#34; ( &#34;x&#34; | &#34;X&#34; ) hex_mantissa hex_exponent .
hex_mantissa      = [ &#34;_&#34; ] hex_digits &#34;.&#34; [ hex_digits ] |
                    [ &#34;_&#34; ] hex_digits |
                    &#34;.&#34; hex_digits .
hex_exponent      = ( &#34;p&#34; | &#34;P&#34; ) [ &#34;+&#34; | &#34;-&#34; ] decimal_digits .
0.
72.40
072.40       // == 72.40
2.71828
1.e+0
6.67428e-11
1E6
.25
.12345E+5
1_5.         // == 15.0    &lt;=  省略小数部分
0.15e+0_2    // == 15.0  &lt;= 这里有一个可选符号 +   

0x1p-2       // == 0.25  &lt;= 这里有一个可选符号 -   
0x2.p10      // == 2048.0        
0x1.Fp+0     // == 1.9375 &lt;= 这里有一个可选符号 +  
0X.8p-0      // == 0.5 &lt;= 这里有一个可选符号 -
0X_1FFFP-16  // == 0.1249847412109375
0x15e-2      // == 0x15e - 2 (integer subtraction) 整数减法  
	          //&lt;= 相当于 ( 0x15e)  -  2  =  348。
	          //注意这里的 e 是 十六进制表示法中的 e （表示十进制 14），
	          //而不是十进制浮点数字面量中的指数部分前面的 e

0x.p1        // invalid: mantissa has no digits  
	       //=&gt; 无效的： 尾数没有数字
1p-2         // invalid: p exponent requires hexadecimal mantissa  
	      //=&gt; 无效的：p 指数需要十六进制尾数
0x1.5e-2     // invalid: hexadecimal mantissa requires p exponent 
	          //=&gt; 无效的：十六进制尾数需要 p 指数
1_.5         // invalid: _ must separate successive digits
	     //=&gt; 无效的：十六进制尾数需要 p 指数
1._5         // invalid: _ must separate successive digits
	      //=&gt; 无效的：十六进制尾数需要 p 指数
1.5_e1       // invalid: _ must separate successive digits
	         //=&gt; 无效的：十六进制尾数需要 p 指数
1.5e_1       // invalid: _ must separate successive digits
	         //=&gt; 无效的：十六进制尾数需要 p 指数
1.5e1_       // invalid: _ must separate successive digits
	         //=&gt; 无效的：十六进制尾数需要 p 指数
</code></pre><h3 id="imaginary-literals-虚数字面量">Imaginary literals 虚数字面量</h3>
<p>​	虚数字面量表示一个<a href="../Constants">复数常量</a>的虚数部分。它由一个<a href="#integer-literals">整数字面量</a>或<a href="#floating-point-literals">浮点数的字面量</a>和小写字母<code>i</code>组成，虚数字面量的值是各个整数或浮点数字面量的值乘以虚数单位<code>i</code>。</p>
<pre tabindex="0"><code>imaginary_lit = (decimal_digits | int_lit | float_lit) &#34;i&#34; .
</code></pre><p>​	为了向后兼容，虚数字面量的整数部分完全由十进制数字（可能还有下划线）组成，被认为是一个十进制整数，即使它以前导<code>0</code>开始。</p>
<pre tabindex="0"><code>0i
0123i         // == 123i for backward-compatibility
0o123i        // == 0o123 * 1i == 83i
0xabci        // == 0xabc * 1i == 2748i
0.i
2.71828i
1.e+0i
6.67428e-11i
1E6i
.25i
.12345E+5i
0x1p-2i       // == 0x1p-2 * 1i == 0.25i
</code></pre><h3 id="rune-literals-符文字面量">Rune literals 符文字面量</h3>
<p>​	符文字面量表示一个<a href="../Constants">符文常量</a>，一个识别Unicode码点的整数值。一个符文字面量表示为一个或多个字符，用单引号包裹起来，如<code>'x'</code>或<code>'\n'</code>。在引号内，除了换行符（newline）和未转义的单引号（unescaped single quote），任何字符都可以出现。一个单引号字符代表该字符本身的Unicode值，而以<code>反斜线</code>开始的多字符序列则以各种格式编码。</p>
<p>​	最简单的形式代表引号内的单个字符；由于Go源文本是以UTF-8编码的Unicode字符，多个UTF-8编码的字节可能代表一个整数值。例如，字面意义上的<code>'a'</code>持有一个字节，代表字面意义上的<code>a</code>，Unicode U+0061，数值为<code>0x61</code>，而<code>'ä'</code>持有两个字节（<code>0xc3 0xa4</code>），代表字面意义上的a-dieresis，U+00E4，数值为<code>0xe4</code>。</p>
<p>​	一些反斜线转义允许任意的值被编码为ASCII文本。有四种方法可以将整数值表示为数字常量：</p>
<ol>
<li><code>\x</code>后面正好有<code>两个</code>十六进制数字；</li>
<li><code>\u</code>后面正好有<code>四个</code>十六进制数字；</li>
<li><code>\U</code>后面正好有<code>八个</code>十六进制数字，以及</li>
<li>一个普通的反斜线<code>\</code>后面正好有<code>三个</code><strong>八进制</strong>数字。</li>
</ol>
<p>在每种情况下，字面的值都是由相应基数的数字代表的值。</p>
<p>​	虽然这些表示方法都是一个整数，但它们的有效范围不同。八进制转义必须代表0到255之间的值。十六进制转义在结构上满足这一条件。转义<code>\u</code>和<code>\U</code>代表Unicode码点，所以在它们里面有些值是非法的，特别是那些高于<code>0x10FFFF</code>的值和 surrogate halves 的值。</p>
<p>​	在反斜线之后，某些单字符转义表示特殊的值：</p>
<pre tabindex="0"><code>\a   U+0007 alert or bell
\b   U+0008 backspace
\f   U+000C form feed
\n   U+000A line feed or newline
\r   U+000D carriage return  =&gt; 回车
\t   U+0009 horizontal tab =&gt; 水平制表符
\v   U+000B vertical tab =&gt; 垂直制表符
\\   U+005C backslash =&gt; 反斜线
\&#39;   U+0027 single quote  (valid escape only within rune literals) =&gt; 单引号(仅在符文字面量内有效转义)
\&#34;   U+0022 double quote  (valid escape only within string literals) =&gt; 双引号(仅在字符串字面值内有效转义)
</code></pre><p>在符文字面量中的反斜线后面无法识别的字符是非法的。</p>
<pre tabindex="0"><code>rune_lit         = &#34;&#39;&#34; ( unicode_value | byte_value ) &#34;&#39;&#34; .
unicode_value    = unicode_char | little_u_value | big_u_value | escaped_char .
byte_value       = octal_byte_value | hex_byte_value .
octal_byte_value = `\` octal_digit octal_digit octal_digit .
hex_byte_value   = `\` &#34;x&#34; hex_digit hex_digit .
little_u_value   = `\` &#34;u&#34; hex_digit hex_digit hex_digit hex_digit .
big_u_value      = `\` &#34;U&#34; hex_digit hex_digit hex_digit hex_digit
                           hex_digit hex_digit hex_digit hex_digit .
escaped_char     = `\` ( &#34;a&#34; | &#34;b&#34; | &#34;f&#34; | &#34;n&#34; | &#34;r&#34; | &#34;t&#34; | &#34;v&#34; | `\` | &#34;&#39;&#34; | `&#34;` ) .
&#39;a&#39;
&#39;ä&#39;
&#39;本&#39;
&#39;\t&#39;
&#39;\000&#39;
&#39;\007&#39;
&#39;\377&#39;
&#39;\x07&#39;
&#39;\xff&#39;
&#39;\u12e4&#39;
&#39;\U00101234&#39;
&#39;\&#39;&#39;         // rune literal containing single quote character
&#39;aa&#39;         // illegal: too many characters
&#39;\k&#39;         // illegal: k is not recognized after a backslash
&#39;\xa&#39;        // illegal: too few hexadecimal digits
&#39;\0&#39;         // illegal: too few octal digits
&#39;\400&#39;       // illegal: octal value over 255
&#39;\uDFFF&#39;     // illegal: surrogate half
&#39;\U00110000&#39; // illegal: invalid Unicode code point
</code></pre><h3 id="string-literals-字符串字面量">String literals 字符串字面量</h3>
<p>​	字符串字面量表示通过连接字符序列获得的<a href="../Constants">字符串常量</a>。有两种形式：<code>原始字符串字面量</code>和<code>解释字符串字面量</code>。</p>
<p>​	原始字符串字面量是<code>反引号之间</code>的字符序列，如`foo`。在引号内，任何字符都可以出现，除了反引号。原始字符串字面量的值是由引号之间未解释的（隐含的UTF-8编码）字符组成的字符串；特别是，反斜线没有特殊含义，字符串可以包含新行。原始字符串字面量内的回车字符（&rsquo;\r&rsquo;）会从原始字符串值中丢弃。</p>
<p>​	解释字符串字面量是<code>双引号之间</code>的字符序列，如 &ldquo;bar&rdquo;。在引号内，除了换行和未转义的双引号，任何字符都可以出现。引号之间的文字构成了字面量的值，反斜线转义的解释与符文字面量中的解释相同（除了<code>\'</code>是非法的，<code>\&quot;</code>是合法的），限制也相同。三位数的八进制(<code>\nnn</code>)和两位数的十六进制(<code>\xnn</code>)转义代表结果字符串的单个字节；所有其他转义表示单个字符的（可能是多字节的）UTF-8编码。因此，在一个字符串字面中，<code>\377</code>和<code>\xFF</code>代表值为<code>0xFF</code>=255的单个字节，而<code>ÿ</code>、<code>\u00FF</code>、<code>\U000000FF</code>和 <code>\xc3\xbf</code>代表字符<code>U+00FF</code>的UTF-8编码的两个字节<code>0xc3 0xbf</code>。</p>
<pre tabindex="0"><code>string_lit             = raw_string_lit | interpreted_string_lit .
raw_string_lit         = &#34;`&#34; { unicode_char | newline } &#34;`&#34; .
interpreted_string_lit = `&#34;` { unicode_value | byte_value } `&#34;` .
`abc`                // same as &#34;abc&#34;
`\n
\n`                  // same as &#34;\\n\n\\n&#34;
&#34;\n&#34;
&#34;\&#34;&#34;                 // same as `&#34;`
&#34;Hello, world!\n&#34;
&#34;日本語&#34;
&#34;\u65e5本\U00008a9e&#34;
&#34;\xff\u00FF&#34;
&#34;\uD800&#34;             // illegal: surrogate half
&#34;\U00110000&#34;         // illegal: invalid Unicode code point
</code></pre><p>这些示例都表示相同的字符串：</p>
<pre tabindex="0"><code>&#34;日本語&#34;                                 // UTF-8 input text
`日本語`                                 // UTF-8 input text as a raw literal
&#34;\u65e5\u672c\u8a9e&#34;                    // the explicit Unicode code points
&#34;\U000065e5\U0000672c\U00008a9e&#34;        // the explicit Unicode code points
&#34;\xe6\x97\xa5\xe6\x9c\xac\xe8\xaa\x9e&#34;  // the explicit UTF-8 bytes
</code></pre><p>​	如果源代码将一个字符表示为两个码点，例如涉及重音和字母的组合形式，如果放在符文字面量中，结果将是一个错误（它不是一个单一码点），如果放在字符串字面量中，将显示为两个码点。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b203f791c8def3badb1392b97a3734d2">5 - 常量</h1>
    
	<h2 id="constants-常量">Constants 常量</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Constants" target="_blank" rel="noopener">https://go.dev/ref/spec#Constants</a></p>
</blockquote>
<p>​	有布尔常量、符文常量、整数常量、浮点常量、复数常量和字符串常量。符文、整数、浮点和复数常量统称为<code>数值常量</code>。</p>
<p>​	常量值由一个<a href="../LexicalElements#rune-literals">符文字面量</a>、<a href="../LexicalElements#integer-literals">整数字面量</a>、<a href="../LexicalElements#float-point-literals">浮点数字面量</a>、<a href="../LexicalElements#imaginary-literals">虚数字面量</a>或<a href="../LexicalElements#string-literals">字符串字面量</a>，表示常量的标识符，<a href="../Expressions#constant-expressions">常量表达式</a>，结果为常量的<a href="../Expressions#conversions">转换</a>，或一些内置函数的结果值表示，如<code>unsafe.Sizeof</code>应用于某些值，<code>cap</code>或<code>len</code>应用于一些表达式，<code>real</code>和<code>imag</code>应用于复数常量，<code>complex</code>应用于数值常量。布尔真值由预先声明的常数<code>true</code>和<code>false</code>表示。预先声明的标识符<code>iota</code>表示一个整数常量。</p>
<p>​	通常，复数常量是<a href="../Expressions#constant-expressions">常量表达式</a>的一种形式，将在该节中讨论。</p>
<p>​	数值常量表示任意精度的精确值，不会溢出。因此，不存在表示IEEE-754负零、无穷大和非数字值的常量。</p>
<p>​	常量可以是<a href="../Types">有类型的</a>的或无类型的。<code>字面常量</code>、<code>true</code>、<code>false</code>、<code>iota</code>，以及某些只包含无类型的常量操作数的<a href="../Expressions#constant-expressions">常量表达式</a>是无类型的。</p>
<p>​	常量可以通过<a href="../DeclarationsAndScope#constant-declaration">常量声明</a>或<a href="../Expressions#conversions">转换</a>显式地给出类型，也可以在<a href="../DeclarationsAndScope#variable-declarations">变量声明</a>、<a href="../Statements#assignment-statements">赋值语句</a> 、作为<a href="../Expressions">表达式</a>的操作数时，隐式赋予类型。如果常量值不能被<a href="../Types#representability">表示</a>为相应类型的值，那就是一个错误。如果类型是一个<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a>，常量将被转换为类型参数的一个非常量值。</p>
<p>​	一个无类型常量有一个默认的类型，该类型是在需要类型化值的上下文中隐式转换为的类型，例如，在一个<a href="../DeclarationsAndScope#short-variable-declarations">短变量声明</a>中，如<code>i := 0</code>，没有明确的类型。无类型常量的默认类型分别是<code>bool</code>, <code>rune</code>, <code>int</code>, <code>float64</code>, <code>complex128</code>或<code>string</code>，具体取决于它是一个布尔型常量、rune型常量、整数型常量、浮点型常量、复数型常量还是字符串型常量。</p>
<p>​	实现限制：尽管数值常量在语言中具有任意的精度，但编译器可以使用有限精度的内部表示法来实现它们。也就是说，每个实现都必须：</p>
<ul>
<li>用至少256位来表示整数常量。</li>
<li>用至少256位的尾数和至少16位的有符号二进制指数来表示浮点常量，包括复数常量的对应部分。</li>
<li>如果不能精确表示一个整数常量，则给出一个错误。</li>
<li>如果由于溢出而无法表示一个浮点常量或复数常量，则给出一个错误。</li>
<li>如果由于精度的限制，无法表示一个浮点常量或复数常量，则四舍五入到最接近的可表示常量。</li>
</ul>
<p>​	这些要求既适用于字面常量，也适用于<a href="../Expressions#constant-expressions">常量表达式</a>的计算结果。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-2ed8b91e7228dba06921c020cea53578">6 - 变量</h1>
    
	<h2 id="variables-变量">Variables 变量</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Variables" target="_blank" rel="noopener">https://go.dev/ref/spec#Variables </a></p>
</blockquote>
<p>​	变量是用于保存值的存储位置。允许值的集合是由变量的<a href="../Types">类型</a>决定的。</p>
<p>​	<a href="../DeclarationsAndScope#variable-declarations">变量声明</a> 、函数参数和结果、<a href="../DeclarationsAndScope#function-declarations">函数声明</a>或<a href="../Expressions#function-literals">函数字面量</a>的签名为指定的变量保留存储空间。调用内置函数<code>new</code>或获取<a href="../Expressions#composite-literals">复合字面量</a>的地址会在运行时为变量分配存储空间。这样的匿名变量是通过(可能是隐式的)<a href="../Expressions#address-operators">指针间接</a>引用的。</p>
<p>​	<a href="../Types#array-types">数组</a>、<a href="../Types#slice-types">切片</a>和<a href="../Types/struct-types">结构体</a>等类型的结构化变量具有可以被单独<a href="../Expressions#address-operators">寻址</a>的元素和字段。每个这样的元素都像一个变量。</p>
<p>​	变量的静态类型（或仅仅是类型）是在其声明中给出的类型、在<code>new</code>调用或复合字面量中提供的类型、或是结构化变量的元素的类型。接口类型的变量也有一个独特的动态类型，它是运行时分配给变量的值的（非接口）类型（除非该值是预先声明的标识符<code>nil</code>，它没有类型）。在执行过程中，动态类型可能会发生变化，但是存储在接口变量中的值总是可以赋给变量的静态类型。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span> <span style="color:#c678dd">interface</span>{}  <span style="color:#7f848e">// x is nil and has static type interface{}  =&gt; x 为 nil，具有静态类型 interface{}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">v</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>           <span style="color:#7f848e">// v has value nil, static type *T =&gt;  v 具有值 nil，静态类型 * T
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">x</span> = <span style="color:#d19a66">42</span>             <span style="color:#7f848e">// x has value 42 and dynamic type int =&gt;  x 具有值42，动态类型 int
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">x</span> = <span style="color:#e06c75">v</span>              <span style="color:#7f848e">// x has value (*T)(nil) and dynamic type *T =&gt; x 具有值(* T)(nil)和动态类型 * T
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	变量的值是通过在<a href="../Expressions">表达式</a>中引用该变量来检索的；它是最近<a href="../statements#assignment-statements">分配</a>给该变量的值。如果一个变量还没有被赋值，它的值就是其类型的<a href="../ProgramInitializationAndExecution#the-zero-value">零值</a>。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-647e747fa0614356b07bb33dd4cb9f12">7 - 类型</h1>
    
	<h2 id="types-类型">Types 类型</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Types" target="_blank" rel="noopener">https://go.dev/ref/spec#Types </a></p>
</blockquote>
<p>​	类型决定了一组值以及特定于这些值的操作和方法。如果类型具有类型名称，则可以用类型名称表示。如果类型是泛型，则后面必须跟<a href="../Expressions#instantiations">类型参数</a>。还可以使用<code>类型字面量</code>指定类型，它由现有类型组成一个类型。</p>
<pre tabindex="0"><code>Type      = TypeName [ TypeArgs ] | TypeLit | &#34;(&#34; Type &#34;)&#34; .
TypeName  = identifier | QualifiedIdent .
TypeArgs  = &#34;[&#34; TypeList [ &#34;,&#34; ] &#34;]&#34; .
TypeList  = Type { &#34;,&#34; Type } .
TypeLit   = ArrayType | StructType | PointerType | FunctionType | InterfaceType |
            SliceType | MapType | ChannelType .
</code></pre><p>​	该语言<a href="../DeclarationsAndScope#predeclared-identifiers">预先声明</a>了某些类型的名称。其他类型是通过<a href="../DeclarationsAndScope#type-declarations">类型声明</a>或<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数列表</a>引入的。<code>复合类型</code>：数组、结构体、指针、函数、接口、切片、映射和通道类型 —— 可以用类型字面量来构造。</p>
<p>​	预先声明的类型、<a href="../DeclarationsAndScope#type-declarations">已定义的类型</a>和类型参数被称为<code>命名类型</code>。如果别名声明中给出的类型是命名类型，则别名也表示一个（新的）命名类型。</p>
<h3 id="boolean-types-布尔型">Boolean types 布尔型</h3>
<p>​	布尔型表示由预先声明的常量<code>true</code>和<code>false</code>表示的一组布尔真值。预先声明的布尔类型是<code>bool</code>；它是一个<a href="../DeclarationsAndScope#type-declarations">已定义的类型</a>。</p>
<h3 id="numeric-types-数值型">Numeric types 数值型</h3>
<p>​	整数类型、浮点类型或复数类型分别表示整数、浮点或复数的值的集合。它们被统称为<code>数值类型</code>。预先声明的与体系结构无关的数值类型有：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">uint8</span>       <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">unsigned</span>  <span style="color:#d19a66">8</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">bit</span> <span style="color:#61afef;font-weight:bold">integers</span> (<span style="color:#d19a66">0</span> <span style="color:#e06c75">to</span> <span style="color:#d19a66">255</span>)
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">uint16</span>      <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">unsigned</span> <span style="color:#d19a66">16</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">bit</span> <span style="color:#61afef;font-weight:bold">integers</span> (<span style="color:#d19a66">0</span> <span style="color:#e06c75">to</span> <span style="color:#d19a66">65535</span>)
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">uint32</span>      <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">unsigned</span> <span style="color:#d19a66">32</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">bit</span> <span style="color:#61afef;font-weight:bold">integers</span> (<span style="color:#d19a66">0</span> <span style="color:#e06c75">to</span> <span style="color:#d19a66">4294967295</span>)
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">uint64</span>      <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">unsigned</span> <span style="color:#d19a66">64</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">bit</span> <span style="color:#61afef;font-weight:bold">integers</span> (<span style="color:#d19a66">0</span> <span style="color:#e06c75">to</span> <span style="color:#d19a66">18446744073709551615</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">int8</span>        <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">signed</span>  <span style="color:#d19a66">8</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">bit</span> <span style="color:#61afef;font-weight:bold">integers</span> (<span style="color:#56b6c2">-</span><span style="color:#d19a66">128</span> <span style="color:#e06c75">to</span> <span style="color:#d19a66">127</span>)
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">int16</span>       <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">signed</span> <span style="color:#d19a66">16</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">bit</span> <span style="color:#61afef;font-weight:bold">integers</span> (<span style="color:#56b6c2">-</span><span style="color:#d19a66">32768</span> <span style="color:#e06c75">to</span> <span style="color:#d19a66">32767</span>)
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">int32</span>       <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">signed</span> <span style="color:#d19a66">32</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">bit</span> <span style="color:#61afef;font-weight:bold">integers</span> (<span style="color:#56b6c2">-</span><span style="color:#d19a66">2147483648</span> <span style="color:#e06c75">to</span> <span style="color:#d19a66">2147483647</span>)
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">int64</span>       <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">signed</span> <span style="color:#d19a66">64</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">bit</span> <span style="color:#61afef;font-weight:bold">integers</span> (<span style="color:#56b6c2">-</span><span style="color:#d19a66">9223372036854775808</span> <span style="color:#e06c75">to</span> <span style="color:#d19a66">9223372036854775807</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">float32</span>     <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">IEEE</span><span style="color:#56b6c2">-</span><span style="color:#d19a66">754</span> <span style="color:#d19a66">32</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">bit</span> <span style="color:#e06c75">floating</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">point</span> <span style="color:#e06c75">numbers</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">float64</span>     <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">IEEE</span><span style="color:#56b6c2">-</span><span style="color:#d19a66">754</span> <span style="color:#d19a66">64</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">bit</span> <span style="color:#e06c75">floating</span><span style="color:#56b6c2">-</span><span style="color:#e06c75">point</span> <span style="color:#e06c75">numbers</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">complex64</span>   <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">complex</span> <span style="color:#e06c75">numbers</span> <span style="color:#e06c75">with</span> <span style="color:#e5c07b">float32</span> <span style="color:#e06c75">real</span> <span style="color:#e06c75">and</span> <span style="color:#e06c75">imaginary</span> <span style="color:#e06c75">parts</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">complex128</span>  <span style="color:#e06c75">the</span> <span style="color:#e06c75">set</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">all</span> <span style="color:#e06c75">complex</span> <span style="color:#e06c75">numbers</span> <span style="color:#e06c75">with</span> <span style="color:#e5c07b">float64</span> <span style="color:#e06c75">real</span> <span style="color:#e06c75">and</span> <span style="color:#e06c75">imaginary</span> <span style="color:#e06c75">parts</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">byte</span>        <span style="color:#e06c75">alias</span> <span style="color:#c678dd">for</span> <span style="color:#e5c07b">uint8</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">rune</span>        <span style="color:#e06c75">alias</span> <span style="color:#c678dd">for</span> <span style="color:#e5c07b">int32</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	The value of an <em>n</em>-bit integer is <em>n</em> bits wide and represented using <a href="https://en.wikipedia.org/wiki/Two%27s_complement" target="_blank" rel="noopener">two&rsquo;s complement arithmetic</a>. =&gt;仍有疑问？？</p>
<p>​	一个n位整数的值是n位宽，并用<a href="https://en.wikipedia.org/wiki/Two%27s_complement" target="_blank" rel="noopener">二进制补码运算法（two&rsquo;s complement arithmetic）</a>表示。</p>
<p>​	还有一组预先声明的整数类型，它们具有特定于实现的大小：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">uint</span>     <span style="color:#e06c75">either</span> <span style="color:#d19a66">32</span> <span style="color:#e06c75">or</span> <span style="color:#d19a66">64</span> <span style="color:#e06c75">bits</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">int</span>      <span style="color:#e06c75">same</span> <span style="color:#e06c75">size</span> <span style="color:#e06c75">as</span> <span style="color:#e5c07b">uint</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">uintptr</span>  <span style="color:#e06c75">an</span> <span style="color:#e06c75">unsigned</span> <span style="color:#e06c75">integer</span> <span style="color:#e06c75">large</span> <span style="color:#e06c75">enough</span> <span style="color:#e06c75">to</span> <span style="color:#e06c75">store</span> <span style="color:#e06c75">the</span> <span style="color:#e06c75">uninterpreted</span> <span style="color:#e06c75">bits</span> <span style="color:#e06c75">of</span> <span style="color:#e06c75">a</span> <span style="color:#e06c75">pointer</span> <span style="color:#e06c75">value</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	为了避免可移植性问题，所有的数值类型都是<a href="../DeclarationsAndScope#type-declarations">已定义的类型</a>，因此除了 <code>byte</code> (<code>uint8</code>的别名)和 <code>rune</code> (<code>int32</code>的别名)之外，它们是截然不同的。 当不同的数值类型在表达式或赋值中混合使用时，需要进行显式转换。例如，int32和int不是相同类型，尽管它们在一个特定的体系结构上可能具有相同的大小。</p>
<h3 id="string-types-字符串型">String types 字符串型</h3>
<p>​	字符串类型表示字符串值的集合。字符串值是字节序列（可能为空）。<code>字节数</code>被称为字符串的<code>长度</code>，并且永远不会是负数。字符串是不可变的：一旦创建，就不可能改变字符串的内容。预先声明的字符串类型是<code>string</code>；它是一种<a href="../DeclarationsAndScope#type-declarations">已定义的类型</a>。</p>
<p>​	可以使用内置函数 <code>len</code> 查找字符串 <code>s</code> 的长度。如果字符串是常量，那么长度就是编译时常量。字符串的字节可以通过整数<a href="../Expressions#index-expressions">索引</a>0到<code>len(s)-1</code>来访问。<code>取这样一个元素的地址是非法的</code>；如果<code>s[i]</code>是字符串的第<code>i</code>个字节，那么<code>&amp;s[i]</code>是无效的。</p>
<h3 id="array-types-数组型">Array types 数组型</h3>
<p>​	数组是单类型的元素组成的编号序列，称为元素类型。<code>元素的数量</code>被称为数组的<code>长度</code>，并且永远不会是负数。</p>
<pre tabindex="0"><code>ArrayType   = &#34;[&#34; ArrayLength &#34;]&#34; ElementType .
ArrayLength = Expression .
ElementType = Type .
</code></pre><p>​	长度是数组类型的一部分；它必须求值为一个非负<a href="../Constants">常数</a>，该常数可由 int 类型的值<a href="../PropertiesOfTypesAndValues#representability">表示</a>。数组<code>a</code>的长度可以用内置函数<code>len</code>发现。元素可以通过整数<a href="../Expressions#index-expressions">索引</a>0到<code>len(a)-1</code>进行寻址。数组类型总是一维的，但是可以组成多维类型。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>[<span style="color:#d19a66">32</span>]<span style="color:#e5c07b">byte</span>
</span></span><span style="display:flex;"><span>[<span style="color:#d19a66">2</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">N</span>] <span style="color:#c678dd">struct</span> { <span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e5c07b">int32</span> }
</span></span><span style="display:flex;"><span>[<span style="color:#d19a66">1000</span>]<span style="color:#56b6c2">*</span><span style="color:#e5c07b">float64</span>
</span></span><span style="display:flex;"><span>[<span style="color:#d19a66">3</span>][<span style="color:#d19a66">5</span>]<span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>[<span style="color:#d19a66">2</span>][<span style="color:#d19a66">2</span>][<span style="color:#d19a66">2</span>]<span style="color:#e5c07b">float64</span>  <span style="color:#7f848e">// same as [2]([2]([2]float64))
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="slice-types-切片型">Slice types 切片型</h3>
<p>​	切片是底层数组的连续段的描述符，并提供对该数组中编号的元素序列的访问。切片类型表示其元素类型的所有数组切片的集合。<code>元素的数量</code>被称为切片的<code>长度</code>，并且永远不会是负数。一个未初始化的切片的值是<code>nil</code>。</p>
<pre tabindex="0"><code>SliceType = &#34;[&#34; &#34;]&#34; ElementType .
</code></pre><p>​	切片<code>s</code>的长度可以通过内置函数<code>len</code>发现；与数组不同，它在运行过程中可能会发生变化。元素可以通过整数<a href="../Expressions#index-expressions">索引</a>0到<code>len(s)-1</code>进行寻址。给定元素的切片索引可能小于底层数组中同一元素的索引。</p>
<p>​	切片一旦被初始化，总是与保存其元素的底层数组相关联。因此，一个切片与它的底层数组和同一数组的其他切片共享存储；相反，不同的数组总是表示不同的存储。</p>
<p>​	切片的底层数组可以超过切片的末端。容量是对这一范围的衡量：它是切片的长度和切片之外的数组长度之和；可以通过从原始切片切割一个新的切片来创建一个达到这个容量的切片。使用内置函数 <code>cap(a)</code>可以发现切片 <code>a</code> 的容量。</p>
<p>​	可以使用内置函数<code>make</code>来创建一个给定元素类型<code>T</code>的新的、初始化的切片值，该函数接受一个切片类型和指定长度和可选容量的参数。用<code>make</code>创建的切片总是分配一个新的、隐藏的数组，返回的切片值指向该数组。也就是说，执行</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">make</span>([]<span style="color:#e06c75">T</span>, <span style="color:#e06c75">length</span>, <span style="color:#e06c75">capacity</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>产生的切片与分配一个数组并对其进行<a href="../Expressions#slice-expressions">切片</a>是一样的，所以这两个表达式是等同的：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">make</span>([]<span style="color:#e5c07b">int</span>, <span style="color:#d19a66">50</span>, <span style="color:#d19a66">100</span>)
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">new</span>([<span style="color:#d19a66">100</span>]<span style="color:#e5c07b">int</span>)[<span style="color:#d19a66">0</span>:<span style="color:#d19a66">50</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	和数组一样，切片总是一维的，但可以通过组合来构造更高维的对象。对于数组的数组，内部数组在结构上总是相同的长度；但是对于切片的切片（或切片的数组），内部长度可以动态变化。此外，<code>内部切片必须被单独初始化</code>。</p>
<h3 id="struct-types-结构体型">Struct types 结构体型</h3>
<p>​		结构体是一个命名元素（称为<code>字段</code>）的序列，，每个字段都有一个名称和一个类型。字段名可以显示地指定（IdentifierList）或隐含地指定（EmbeddedField）。在一个结构体中，非<a href="../DeclarationsAndScope#blank-identifier">空白</a>字段名必须是<a href="../DeclarationsAndScope#uniqueness-of-identifiers">唯一</a>的。</p>
<pre tabindex="0"><code>StructType    = &#34;struct&#34; &#34;{&#34; { FieldDecl &#34;;&#34; } &#34;}&#34; .
FieldDecl     = (IdentifierList Type | EmbeddedField) [ Tag ] .
EmbeddedField = [ &#34;*&#34; ] TypeName [ TypeArgs ] .
Tag           = string_lit .
// An empty struct.
struct {}

// A struct with 6 fields.
struct {
	x, y int
	u float32
	_ float32  // padding
	A *[]int
	F func()
}
</code></pre><p>​	一个声明了类型但没有明确字段名的字段被称为<code>嵌入式字段</code>。嵌入字段必须被指定为一个类型名<code>T</code>或一个指向非接口类型名<code>*T</code>的指针，而且<code>T</code>本身不能是一个指针类型。未限定类型名作为字段名。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#7f848e">// A struct with four embedded fields of types T1, *T2, P.T3 and *P.T4
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">T1</span>        <span style="color:#7f848e">// field name is T1
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#56b6c2">*</span><span style="color:#e06c75">T2</span>       <span style="color:#7f848e">// field name is T2
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">P</span>.<span style="color:#e06c75">T3</span>      <span style="color:#7f848e">// field name is T3
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#56b6c2">*</span><span style="color:#e06c75">P</span>.<span style="color:#e06c75">T4</span>     <span style="color:#7f848e">// field name is T4
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e5c07b">int</span>  <span style="color:#7f848e">// field names are x and y
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>下面的声明是非法的，<code>因为字段名在一个结构体类型中必须是唯一的</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">T</span>     <span style="color:#7f848e">// conflicts with embedded field *T and *P.T
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>    <span style="color:#7f848e">// conflicts with embedded field T and *P.T
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#56b6c2">*</span><span style="color:#e06c75">P</span>.<span style="color:#e06c75">T</span>  <span style="color:#7f848e">// conflicts with embedded field T and *T
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	如果<code>x.f</code>是表示字段或<a href="../DeclarationsAndScope#function-declarations">方法</a><code>f</code>的合法<a href="../Expressions#selectors">选择器</a>，那么结构体<code>x</code>中的嵌入式字段或方法<code>f</code>被称为（自动）提升（的字段或方法）。</p>
<p>​	被提升的字段与结构体中的普通字段一样，只是它们不能在结构体的<a href="../Expressions#composite-literals">复合字面量</a>中作为字段名使用。</p>
<p>​	给定一个结构体类型<code>S</code>和一个<a href="../Types">命名类型</a><code>T</code>，提升的方法被包含在结构体的方法集中，如下所示：</p>
<ul>
<li>如果<code>S</code>包含一个嵌入式字段<code>T</code>，那么<code>S</code>和<code>*S</code>的方法集都包括带有接收器<code>T</code>的提升方法，<code>*S</code>的方法集也包括带有接收器<code>*T</code>的提升方法。</li>
<li>如果<code>S</code>包含一个嵌入式字段<code>*T</code>，那么<code>S</code>和<code>*S</code>的方法集都包括带有接收器<code>T</code>或<code>*T</code>的提升方法。</li>
</ul>
<p>​	一个字段声明后面可以有一个可选的<code>字符串字面量标签</code>，它成为相应字段声明中所有字段的属性。一个空的标签字符串等同于一个不存在标签。标签通过<a href="https://pkg.go.dev/reflect#StructTag" target="_blank" rel="noopener">反射接口</a>可见，并参与结构体的<a href="../PropertiesOfTypesAndValues#type-identity">类型标识</a>，但在其他情况下被忽略。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e5c07b">float64</span> <span style="color:#98c379">&#34;&#34;</span>  <span style="color:#7f848e">// an empty tag string is like an absent tag
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">name</span> <span style="color:#e5c07b">string</span>  <span style="color:#98c379">&#34;any string is permitted as a tag&#34;</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">_</span>    [<span style="color:#d19a66">4</span>]<span style="color:#e5c07b">byte</span> <span style="color:#98c379">&#34;ceci n&#39;est pas un champ de structure&#34;</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// A struct corresponding to a TimeStamp protocol buffer. 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// 一个对应于 TimeStamp 协议缓冲区的结构。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// The tag strings define the protocol buffer field numbers;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// 标签字符串定义协议缓冲区字段编号
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// they follow the convention outlined by the reflect package.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// 它们遵循反射包描述的约定。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">microsec</span>  <span style="color:#e5c07b">uint64</span> <span style="color:#98c379">`protobuf:&#34;1&#34;`</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">serverIP6</span> <span style="color:#e5c07b">uint64</span> <span style="color:#98c379">`protobuf:&#34;2&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="pointer-types-指针型">Pointer types 指针型</h3>
<p>​	指针类型表示指向给定类型（称为指针的基本类型）<a href="../Variables">变量</a>的所有指针的集合。一个未初始化的指针的值是<code>nil</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">PointerType</span> = <span style="color:#98c379">&#34;*&#34;</span> <span style="color:#e06c75">BaseType</span> .
</span></span><span style="display:flex;"><span><span style="color:#e06c75">BaseType</span>    = <span style="color:#e06c75">Type</span> .
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">*</span><span style="color:#e06c75">Point</span>
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">*</span>[<span style="color:#d19a66">4</span>]<span style="color:#e5c07b">int</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="function-types-函数型">Function types 函数型</h3>
<p>​	函数类型表示具有相同参数类型和结果类型的所有函数的集合。一个函数类型的未初始化变量的值是<code>nil</code>。</p>
<pre tabindex="0"><code>FunctionType   = &#34;func&#34; Signature .
Signature      = Parameters [ Result ] .
Result         = Parameters | Type .
Parameters     = &#34;(&#34; [ ParameterList [ &#34;,&#34; ] ] &#34;)&#34; .
ParameterList  = ParameterDecl { &#34;,&#34; ParameterDecl } .
ParameterDecl  = [ IdentifierList ] [ &#34;...&#34; ] Type .
</code></pre><p>​	在参数或结果的列表中，名称（IdentifierList）必须全部存在或全部不存在。如果存在（名称），每个名称代表指定类型的一个项（参数或结果），并且签名中所有非<a href="../PropertiesOfTypesAndValues#blank-identity">空白</a>的名称必须是唯一的。如果不存在（名称），每个类型代表该类型的一个项。参数和结果列表总是用括号表示，但如果正好仅有一个未命名的结果，则可以写成未括号的类型。</p>
<p>​	在函数签名中的最后一个传入参数可以有一个<code>类型前缀</code> <code>...</code>。有这样一个参数的函数被称为 variadic （<code>可变参数函数</code>），可以用零个或多个参数来调用该函数。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span>()
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e06c75">x</span> <span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e06c75">a</span>, <span style="color:#e06c75">_</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">z</span> <span style="color:#e5c07b">float32</span>) <span style="color:#e5c07b">bool</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e06c75">a</span>, <span style="color:#e06c75">b</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">z</span> <span style="color:#e5c07b">float32</span>) (<span style="color:#e5c07b">bool</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e06c75">prefix</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">values</span> <span style="color:#56b6c2">...</span><span style="color:#e5c07b">int</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e06c75">a</span>, <span style="color:#e06c75">b</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">z</span> <span style="color:#e5c07b">float64</span>, <span style="color:#e06c75">opt</span> <span style="color:#56b6c2">...</span><span style="color:#c678dd">interface</span>{}) (<span style="color:#e06c75">success</span> <span style="color:#e5c07b">bool</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e5c07b">int</span>, <span style="color:#e5c07b">int</span>, <span style="color:#e5c07b">float64</span>) (<span style="color:#e5c07b">float64</span>, <span style="color:#56b6c2">*</span>[]<span style="color:#e5c07b">int</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e06c75">n</span> <span style="color:#e5c07b">int</span>) <span style="color:#c678dd">func</span>(<span style="color:#e06c75">p</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="interface-types-接口型">Interface types 接口型</h3>
<p>​	接口类型定义了一个类型集。接口类型的变量可以存储该接口类型集中的任何类型的值。这样的类型被称为<a href="#implementing-an-interface">实现了该接口</a>。未初始化的接口类型变量的值是<code>nil</code>。</p>
<pre tabindex="0"><code>InterfaceType  = &#34;interface&#34; &#34;{&#34; { InterfaceElem &#34;;&#34; } &#34;}&#34; .
InterfaceElem  = MethodElem | TypeElem .
MethodElem     = MethodName Signature .
MethodName     = identifier .
TypeElem       = TypeTerm { &#34;|&#34; TypeTerm } .
TypeTerm       = Type | UnderlyingType .
UnderlyingType = &#34;~&#34; Type .
</code></pre><p>​	接口类型由接口元素列表指定。接口元素是一个方法或一个类型元素，其中类型元素是一个或多个类型术语的联合。类型术语可以是一个单一类型，也可以是一个单一的底层类型。</p>
<h4 id="basic-interfaces-基本接口">Basic interfaces 基本接口</h4>
<p>​	在其最基本的形式中，接口指定了一个（可能是空的）方法列表。由这样一个接口定义的类型集是实现所有这些方法的类型集，而相应的方法集则完全由这个接口指定的方法组成。那些类型集可以<code>完全由一个方法列表</code>来定义的接口被称为<code>基本接口</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#7f848e">// A simple File interface.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Read</span>([]<span style="color:#e5c07b">byte</span>) (<span style="color:#e5c07b">int</span>, <span style="color:#e5c07b">error</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Write</span>([]<span style="color:#e5c07b">byte</span>) (<span style="color:#e5c07b">int</span>, <span style="color:#e5c07b">error</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Close</span>() <span style="color:#e5c07b">error</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>每个显式指定的方法的名称必须是<a href="../DeclarationsAndScope#uniqueness-of-identifiers">唯一</a>的，不能是<a href="../PropertiesOfTypesAndValues#blank-identity">空白</a>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">String</span>() <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">String</span>() <span style="color:#e5c07b">string</span>  <span style="color:#7f848e">// illegal: String not unique
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#61afef;font-weight:bold">_</span>(<span style="color:#e06c75">x</span> <span style="color:#e5c07b">int</span>)         <span style="color:#7f848e">// illegal: method must have non-blank name
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	多个类型可以实现一个（相同的）接口。例如，如果两个类型<code>S1</code>和<code>S2</code>的方法设置为</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">p</span> <span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Read</span>(<span style="color:#e06c75">p</span> []<span style="color:#e5c07b">byte</span>) (<span style="color:#e06c75">n</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">err</span> <span style="color:#e5c07b">error</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">p</span> <span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Write</span>(<span style="color:#e06c75">p</span> []<span style="color:#e5c07b">byte</span>) (<span style="color:#e06c75">n</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">err</span> <span style="color:#e5c07b">error</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">p</span> <span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Close</span>() <span style="color:#e5c07b">error</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>(其中<code>T</code>代表<code>S1</code>或<code>S2</code>），那么<code>File</code>接口就由<code>S1</code>和<code>S2</code>实现，而不管<code>S1</code>和<code>S2</code>可能有其他方法或共享什么其他方法。</p>
<p>​	作为接口类型集成员的每个类型都实现了该接口。任何给定的类型都可以实现几个不同的接口。例如，所有类型都实现<code>空接口</code> （interface {}），它代表所有（非接口）类型的集合：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">interface</span>{}
</span></span></code></pre></td></tr></table>
</div>
</div><p>为了方便，预先声明的类型<code>any</code>是<code>空接口的别名</code>。</p>
<p>​	类似地，考虑这个接口规范，它出现在定义名为 <code>Locker</code> 的接口的类型声明中：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Locker</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Lock</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Unlock</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>如果<code>S1</code>和<code>S2</code>也实现了</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">p</span> <span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Lock</span>() { … }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">p</span> <span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Unlock</span>() { … }
</span></span></code></pre></td></tr></table>
</div>
</div><p>他们就实现了<code>Locker</code>接口和<code>File</code>接口。</p>
<h4 id="embedded-interfaces-嵌入式接口">Embedded interfaces 嵌入式接口</h4>
<p>​	接口<code>T</code>可以使用（可能是限定的）接口类型名称<code>E</code>作为接口元素。这就是在 <code>T</code> 中嵌入接口 <code>E</code>。<code>T</code>的类型集是由<code>T</code>的显式声明方法定义的类型集和<code>T</code>的嵌入接口的类型集的<code>交集</code>。换句话说，<code>T</code>的类型集是实现<code>T</code>的所有显式声明的方法以及<code>E</code>的所有方法的所有类型的集合。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Reader</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Read</span>(<span style="color:#e06c75">p</span> []<span style="color:#e5c07b">byte</span>) (<span style="color:#e06c75">n</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">err</span> <span style="color:#e5c07b">error</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Close</span>() <span style="color:#e5c07b">error</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Writer</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Write</span>(<span style="color:#e06c75">p</span> []<span style="color:#e5c07b">byte</span>) (<span style="color:#e06c75">n</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">err</span> <span style="color:#e5c07b">error</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Close</span>() <span style="color:#e5c07b">error</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// ReadWriter&#39;s methods are Read, Write, and Close.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">ReadWriter</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Reader</span>  <span style="color:#7f848e">// includes methods of Reader in ReadWriter&#39;s method set
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Writer</span>  <span style="color:#7f848e">// includes methods of Writer in ReadWriter&#39;s method set
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>在嵌入接口时，具有<a href="../DeclarationsAndScope#uniqueness-of-identifiers">相同</a>名称的方法必须具有<a href="../PropertiesOfTypesAndValues#type-identity">相同</a>的签名。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">ReadCloser</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Reader</span>   <span style="color:#7f848e">// includes methods of Reader in ReadCloser&#39;s method set
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#61afef;font-weight:bold">Close</span>()  <span style="color:#7f848e">// illegal: signatures of Reader.Close and Close are different
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="general-interfaces-通用接口">General interfaces 通用接口</h4>
<p>​	在最通用的形式下，接口元素也可以是一个任意类型的术语<code>T</code>，或者是一个指定底层类型<code>T</code>的<code>~T</code>形式的术语，或者是术语<code>t1|t2|...|tn</code>的联合。与方法规范一起，这些元素能够精确地定义一个接口的类型集，如下所示：</p>
<ul>
<li>空接口的类型集是<code>所有非接口类型的集合</code>。</li>
<li>非空接口的类型集是其接口元素的类型集的交集。</li>
<li>方法规范的类型集是其方法集包括该方法的<code>所有非接口类型的集合</code>。</li>
<li>非接口类型术语的类型集是仅由该类型组成的集合。</li>
<li>形式为<code>~T</code>的术语的类型集是其底层类型为<code>T</code>的所有类型的集合。</li>
<li>术语<code>t1|t2|...|tn</code>的联合体类型集是各术语类型集的联合。</li>
</ul>
<p>​	量化 &ldquo;<code>所有非接口类型的集合</code> &ldquo;不仅指手头程序中声明的所有（非接口）类型，还指所有可能程序中的所有可能类型，因此是无限的。类似地，给定实现某个特定方法的<code>所有非接口类型的集合</code>，这些类型的方法集的<code>交集</code>将正好包含该方法，即使手头的程序中的所有类型总是将该方法与另一个方法配对。</p>
<p>通过构造，<code>一个接口的类型集永远不会包含一个接口类型</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#7f848e">// An interface representing only the type int.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// 仅表示 int 类型的接口
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// An interface representing all types with underlying type int.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// 表示底层类型为 int 的所有类型的接口
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	~<span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// An interface representing all types with underlying type int that implement the String method.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// 表示具有实现 String() 方法 和 底层类型为 int 的所有类型的接口。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	~<span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">String</span>() <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// An interface representing an empty type set: there is no type that is both an int and a string.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// 表示空类型集的接口: 没有既是 int 又是 string 的类型。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	在形式为<code>~T</code>的术语中，<code>T</code>的底层类型必须是它自己，而且<code>T</code>不能是一个接口。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">MyInt</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	~[]<span style="color:#e5c07b">byte</span>  <span style="color:#7f848e">// the underlying type of []byte is itself =&gt; []byte 的底层类型是其本身
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	~<span style="color:#e06c75">MyInt</span>   <span style="color:#7f848e">// illegal: the underlying type of MyInt is not MyInt =&gt; 非法的: MyInt的底层类型不是MyInt
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	~<span style="color:#e5c07b">error</span>   <span style="color:#7f848e">// illegal: error is an interface =&gt; 非法的: error 是一个接口
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>联合元素表示类型集的联合：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#7f848e">// The Float interface represents all floating-point types
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// (including any named types whose underlying types are
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// either float32 or float64).
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// Float接口表示所有的浮点类型（包括底层类型为float32或float64的任何命名类型）。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Float</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	~<span style="color:#e5c07b">float32</span> | ~<span style="color:#e5c07b">float64</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	形式为<code>T</code>或<code>~T</code>的术语中的类型<code>T</code>不能是<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a>，所有非接口术语的类型集必须是成对不相交的（类型集的成对交集必须为空）。给定一个类型参数P：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">P</span>                <span style="color:#7f848e">// illegal: P is a type parameter =&gt; 非法的: P 是一个类型参数
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e5c07b">int</span> | ~<span style="color:#e06c75">P</span>         <span style="color:#7f848e">// illegal: P is a type parameter =&gt; 非法的: P 是一个类型参数
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	~<span style="color:#e5c07b">int</span> | <span style="color:#e06c75">MyInt</span>     <span style="color:#7f848e">// illegal: the type sets for ~int and MyInt are not disjoint (~int includes MyInt)  =&gt; 非法的: ~int 和 MyInt 的类型集是相交的(~int 包括 MyInt)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e5c07b">float32</span> | <span style="color:#e06c75">Float</span>  <span style="color:#7f848e">// overlapping type sets but Float is an interface  =&gt; 重叠的类型集，更进一步说Float也是一个接口
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>实现限制：联合(有多个术语)不能包含<a href="../DeclarationsAndScope#predeclared-identifiers">预先声明的标识符</a><code>comparable</code>或指定方法的接口，或嵌入<code>comparable</code>或指定方法的接口。</p>
<p>​	非<a href="#basic-interfaces">基本接口</a>只能作为类型约束使用，或者作为其他接口的元素作为约束使用。它们不能作为值或变量的类型，也不能作为其他非接口类型的组成部分。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span> <span style="color:#e06c75">Float</span>                     <span style="color:#7f848e">// illegal: Float is not a basic interface =&gt; 非法: Float 不是一个基本接口
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span> <span style="color:#c678dd">interface</span>{} = <span style="color:#61afef;font-weight:bold">Float</span>(<span style="color:#e5c07b">nil</span>)  <span style="color:#7f848e">// illegal =&gt; 非法
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Floatish</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">f</span> <span style="color:#e06c75">Float</span>                 <span style="color:#7f848e">// illegal =&gt; 非法
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>接口类型 <code>T</code> 不能嵌入任何递归地包含或嵌入 <code>T</code> 的类型元素。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#7f848e">// illegal: Bad cannot embed itself =&gt; 非法: Bad 不能嵌入自己
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Bad</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Bad</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// illegal: Bad1 cannot embed itself using Bad2 =&gt; 非法: Bad1不能使用 Bad2嵌入自己
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Bad1</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Bad2</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Bad2</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Bad1</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// illegal: Bad3 cannot embed a union containing Bad3 =&gt; Bad3 不能嵌入包含 Bad3的联合
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Bad3</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	~<span style="color:#e5c07b">int</span> | ~<span style="color:#e5c07b">string</span> | <span style="color:#e06c75">Bad3</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="implementing-an-interface-实现一个接口">Implementing an interface 实现一个接口</h4>
<p>如果类型<code>T</code>实现了接口<code>I</code>，则</p>
<ul>
<li><code>T</code>不是接口，并且是<code>I</code>类型集的元素；或者</li>
<li><code>T</code>是接口，并且<code>T</code>的类型集是<code>I</code>的类型集的子集。</li>
</ul>
<p>如果<code>T</code>实现了一个接口，那么<code>T</code>类型的值就实现了该接口。</p>
<h3 id="map-types-映射型">Map types 映射型</h3>
<p>​	映射是一个无序的元素组，由一种类型的元素（称为<code>元素类型</code>）组成，由另一种类型的唯一键集（称为<code>键类型</code>）进行索引。一个未初始化的映射的值是<code>nil</code>。</p>
<pre tabindex="0"><code>MapType     = &#34;map&#34; &#34;[&#34; KeyType &#34;]&#34; ElementType .
KeyType     = Type .
</code></pre><p>​	<a href="../Expressions#comparison-operators">比较运算符</a><code>==</code>和<code>!=</code>必须为键类型的操作数完全定义；<code>因此键类型不能是函数、映射或切片</code>。如果键类型是接口类型，则必须为动态键值定义这些比较运算符；失败将导致<a href="../Run-timePanics">运行时恐慌（run-time panic）</a>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>]<span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">map</span>[<span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>]<span style="color:#c678dd">struct</span>{ <span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e5c07b">float64</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>]<span style="color:#c678dd">interface</span>{}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	映射元素的数量被称为它的<code>长度</code>。对于一个map <code>m</code>来说，它可以用内置函数<code>len</code>来发现，并且在运行过程中可能会改变。在运行过程中可以用<a href="../Statements#assignment-statements">赋值</a>添加元素，用<a href="../Expressions##index-expressions">索引表达式</a>检索元素；可以用内置函数<code>delete</code>删除元素。</p>
<p>​	使用内置函数 <code>make</code> 创建一个新的空 map 值，它使用 map 类型和一个可选的容量提示作为参数：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">make</span>(<span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>]<span style="color:#e5c07b">int</span>)
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">make</span>(<span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>]<span style="color:#e5c07b">int</span>, <span style="color:#d19a66">100</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	初始容量不限制其大小：映射会增长以容纳其中存储的项数，但<code>nil</code>映射除外。<code>nil</code>映射等同于空映射，<code>只是不能添加任何元素</code>。</p>
<h3 id="channel-types-通道型">Channel types 通道型</h3>
<p>​	通道为<a href="../Statements#go-statements">并发执行函数</a>提供了一种机制，通过<a href="../Statements#send-statements">发送</a>和<a href="../Expressions#receive-operator">接收</a>指定元素类型的值进行通信。未初始化的通道的值是<code>nil</code>。</p>
<pre tabindex="0"><code>ChannelType = ( &#34;chan&#34; | &#34;chan&#34; &#34;&lt;-&#34; | &#34;&lt;-&#34; &#34;chan&#34; ) ElementType .
</code></pre><p>​	可选的<code>&lt;-</code>操作符指定了通道的方向：发送或接收。如果指定了方向，则该通道是定向的，否则是双向的。通过<a href="../Statements#assignment-statements">赋值</a>或显式<a href="../Expressions#conversions">转换</a>，通道可以被限制为仅发送或仅接收。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">chan</span> <span style="color:#e06c75">T</span>          <span style="color:#7f848e">// can be used to send and receive values of type T =&gt; 可用于发送或接收类型为 T 的值
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">chan</span><span style="color:#56b6c2">&lt;-</span> <span style="color:#e5c07b">float64</span>  <span style="color:#7f848e">// can only be used to send float64s =&gt; 仅用于发送 float64 类型
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#56b6c2">&lt;-</span><span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>      <span style="color:#7f848e">// can only be used to receive ints =&gt; 仅用于接收 int 类型
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><code>&lt;-</code> 操作符尽可能与最左边的 <code>chan</code> 相关联：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">chan</span><span style="color:#56b6c2">&lt;-</span> <span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>    <span style="color:#7f848e">// same as chan&lt;- (chan int) =&gt; 与 chan&lt;- (chan int) 相同
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">chan</span><span style="color:#56b6c2">&lt;-</span> <span style="color:#56b6c2">&lt;-</span><span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>  <span style="color:#7f848e">// same as chan&lt;- (&lt;-chan int) =&gt;与 chan&lt;- (&lt;-chan int) 相同
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#56b6c2">&lt;-</span><span style="color:#c678dd">chan</span> <span style="color:#56b6c2">&lt;-</span><span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>  <span style="color:#7f848e">// same as &lt;-chan (&lt;-chan int) =&gt; 与 &lt;-chan (&lt;-chan int) 相同
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">chan</span> (<span style="color:#56b6c2">&lt;-</span><span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	可以使用内置函数 <code>make</code> 创建一个新的、初始化的 channel 值，它以channel 类型和可选的容量作为参数：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">make</span>(<span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>, <span style="color:#d19a66">100</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	容量(以元素数量为单位)设置通道中缓冲区的大小。如果容量为零或没有指定，则通道是无缓冲的，只有当发送方和接收方都准备好时，通信才会成功。否则，如果缓冲区不满(可继续发送)或不是空的(可继续接收) ，通道会将数据缓冲起来，并且通信在没有阻塞的情况下成功。一个<code>nil</code>通道不能用于通信。</p>
<p>!!! info &ldquo;引用其他书籍&rdquo;
以下摘自《Go语言精进之路》第34条 了解channel的妙用 第348页。
与无缓冲channel 不同，带缓冲channel 可以通过带有 capacity 参数的内置make 函数创建：c:= make(chan  T, capctity)
由于带缓冲channel 的运行时层实现带有缓冲区，因此对带有缓冲channel的发送操作在缓冲区未满、接收操作在缓冲区非空的情况下是异步的（发送或接收无需阻塞等待）。也就是说，对一个带缓冲channel，在缓冲区无数据或有数据但未满的情况下，对其进行发送操作的goroutine不会阻塞；在缓冲区已满的情况下，对其进行发送操作的goroutine会阻塞；在缓冲区为空的情况下，对其进行接收操作的goroutine亦会阻塞。</p>
<p>​	通道可以用内置函数<code>close</code>来关闭。<a href="../Expressions#receive-operator">接收操作符</a>的多值赋值形式可以用来判断数据是否在通道关闭之前发送出去。
​	任意数量的goroutines都可以通过<a href="../Statements#send-statements">发送语句</a>、<a href="../Expressions#receive-operator">接收操作</a>以及对内置函数<code>cap</code>和<code>len</code>的调用，来操作一个通道。通道是一个先入先出的队列。例如，如果一个goroutine在通道上发送数据，第二个goroutine接收这些数据，那么这些数据将按照发送的顺序被接收。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-18f37af236cb70cbdbcd65443073d5af">8 - 类型和值的属性</h1>
    
	<h2 id="properties-of-types-and-values-类型和值的属性">Properties of types and values 类型和值的属性</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Properties_of_types_and_values" target="_blank" rel="noopener">https://go.dev/ref/spec#Properties_of_types_and_values</a></p>
</blockquote>
<h3 id="underlying-types-底层类型基本类型">Underlying types 底层类型/基本类型</h3>
<p>​	每个类型<code>T</code>都有一个底层类型。如果<code>T</code>是预先声明的布尔型、数值型或字符串型之一，或者是一个类型字面量，那么对应的底层类型就是<code>T</code>本身。否则，<code>T</code>的底层类型是<code>T</code>在其声明中所指的类型的底层类型。对于类型参数，则是其<a href="../DeclarationsAndScope#type-constraints">类型约束</a>的底层类型，它总是一个接口。</p>
<pre tabindex="0"><code>type (
	A1 = string
	A2 = A1
)

type (
	B1 string
	B2 B1
	B3 []B1
	B4 B3
)

func f[P any](x P) { … }
</code></pre><p>​	<code>string</code>、 <code>A1</code>、 <code>A2</code>、 <code>B1</code>和 <code>B2</code>的底层类型是 string。<code>[]B1</code>、<code>B3</code>和<code>B4</code>的底层类型是<code>[]B1</code>。<code>P</code>的底层类型是<code>interface{}</code>。</p>
<h3 id="core-types-核心类型">Core types 核心类型</h3>
<p>​	每个非接口类型<code>T</code>都有一个核心类型，它与<code>T</code>的<a href="#underlying-types">底层类型</a>相同。</p>
<p>​	如果满足以下条件之一，那么接口<code>T</code>就有一个核心类型：</p>
<ol>
<li>存在一个单一的类型<code>U</code>，它是<code>T</code>的<a href="../Types#interface-types">类型集</a>中所有类型的<a href="#underlying-types">底层类型</a>；或者</li>
<li><code>T</code>的类型集只包含具有相同元素类型<code>E</code>的<a href="../Types#channel-types">通道类型</a>，并且所有定向通道具有相同的方向。</li>
</ol>
<p>其他接口都没有核心类型。</p>
<p>接口的核心类型取决于满足的条件：</p>
<ol>
<li>类型<code>U</code>；或者</li>
<li>如果<code>T</code>只包含双向通道，则为类型<code>chan E</code>；或者为 <code>chan&lt;- E</code>或<code>&lt;-chan E</code>类型，这取决于现存定向信道的方向。</li>
</ol>
<p>根据定义，核心类型绝不是<a href="../DeclarationsAndScope#type-definitions">已定义的类型</a>、<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a>或<a href="../Types#interface-types">接口类型</a>。</p>
<p>具有核心类型的接口的示例：</p>
<pre tabindex="0"><code>type Celsius float32
type Kelvin  float32

interface{ int }                          // int
interface{ Celsius|Kelvin }               // float32
interface{ ~chan int }                    // chan int
interface{ ~chan int|~chan&lt;- int }        // chan&lt;- int
interface{ ~[]*data; String() string }    // []*data
</code></pre><p>没有核心类型的接口的示例：</p>
<pre tabindex="0"><code>interface{}                               // no single underlying type
interface{ Celsius|float64 }              // no single underlying type
interface{ chan int | chan&lt;- string }     // channels have different element types
interface{ &lt;-chan int | chan&lt;- int }      // directional channels have different directions
</code></pre><p>​	一些操作（<a href="../Expressions#slice-expressions">切片表达式</a>、<a href="../Built-inFunctions#appending-to-copying-slices">追加和复制</a>）依赖于稍微宽松的核心类型形式，这些核心类型接受字节切片和字符串。具体来说，如果正好有两种类型，<code>[]byte</code>和<code>string</code>，它们是接口<code>T</code>的类型集中所有类型的底层类型，那么<code>T</code>的核心类型就被称为<code>bytestring</code>。</p>
<p>具有<code>bytestring</code>核心类型的接口的例子：</p>
<pre tabindex="0"><code>interface{ int }                          // int (same as ordinary core type) =&gt; int （与普通核心类型相同）
interface{ []byte | string }              // bytestring
interface{ ~[]byte | myString }           // bytestring
</code></pre><p>注意<code>bytestring</code>不是一个真正的类型；它不能用来声明变量(是由其他类型组成的)。它的存在只是为了描述一些从字节序列中读取的操作的行为，这些字节序列可能是字节切片或字符串。</p>
<h3 id="type-identity-类型一致性">Type identity 类型一致性</h3>
<p>两种类型要么相同，要么不同。</p>
<p>​	<a href="../Types">命名类型</a>总是与任何其他类型不同。否则，如果两个类型的<a href="../Types">底层类型</a>字面量在结构上是一致的，那么这两个类型就是相同的；也就是说，它们有相同的字面量结构，相应的组成部分拥有一致的类型。详细来说：</p>
<ul>
<li>如果两个数组类型有一致的元素类型和相同的数组长度，那么它们就是一致的。</li>
<li>如果两个切片类型有一致的元素类型，那么它们就是一致的。</li>
<li>如果两个结构体类型具有相同的字段序列，并且相应的字段具有一致的名称、一致的类型和一致的标签，那么它们就是一致的。来自不同包的不可导出的字段名总是不同的。</li>
<li>如果两个指针类型有一致的基本类型，那么它们就是一致的。</li>
<li>如果两个函数类型有相同数量的参数和结果值，并且相应的参数和结果类型是相同的，并且两个函数要么都是可变的，要么都不是。参数和结果名称不需要匹配。</li>
<li>如果两个接口类型定义了相同的类型集，那么它们就是一致的。</li>
<li>如果两个映射类型有一致的键和元素类型，它们就是一致的。</li>
<li>如果两个通道类型有一致的元素类型和相同的方向，那么它们是一致的。</li>
<li>如果两个<a href="../Expressions#instantiated">实例化</a>的类型的定义类型和所有类型参数都是一致的，那么它们就是一致的。</li>
</ul>
<p>给出声明：</p>
<pre tabindex="0"><code>type (
	A0 = []string
	A1 = A0
	A2 = struct{ a, b int }
	A3 = int
	A4 = func(A3, float64) *A0
	A5 = func(x int, _ float64) *[]string

	B0 A0
	B1 []string
	B2 struct{ a, b int }
	B3 struct{ a, c int }
	B4 func(int, float64) *B0
	B5 func(x int, y float64) *A1

	C0 = B0
	D0[P1, P2 any] struct{ x P1; y P2 }
	E0 = D0[int, string]
)
</code></pre><p>这些类型是一致的：</p>
<pre tabindex="0"><code>A0, A1, and []string
A2 and struct{ a, b int }
A3 and int
A4, func(int, float64) *[]string, and A5

B0 and C0
D0[int, string] and E0
[]int and []int
struct{ a, b *B5 } and struct{ a, b *B5 }
func(x int, y float64) *[]string, func(int, float64) (result *[]string), and A5
</code></pre><p>​	<code>B0</code>和<code>B1</code>是不同的，因为它们是由不同的<a href="../DeclarationsAndScope#type-definitions">类型定义</a>所创建的新类型；<code>func(int, float64) *B0</code>和<code>func(x int, y float64) *[]string</code>是不同的，因为<code>B0</code>与<code>[]string</code>是不同的；<code>P1</code>和<code>P2</code>是不同，因为它们是不同的类型参数。<code>D0[int, string]</code>和<code>struct{ x int; y string }</code>是不同的，因为前者是一个<a href="../Expressions#instantiated">实例化</a>的定义类型，而后者是一个类型字面量（但它们仍然是<a href="#assignability">可分配的</a>）。</p>
<h3 id="assignability-可分配性">Assignability 可分配性</h3>
<p>​	在以下这些情况中，<code>V</code>类型的值<code>x</code>是可以分配给<code>T</code>类型的<a href="../Variables">变量</a>（&quot;<code>x</code>可以分配给<code>T</code>&quot;）：</p>
<ul>
<li><code>V</code>和<code>T</code>是一致的。</li>
<li><code>V</code>和<code>T</code>有一致的<a href="#underlying-types">底层类型</a>，但不是类型参数，并且<code>V</code>或<code>T</code>中至少有一个不是<a href="../Types">命名类型</a>。</li>
<li><code>V</code>和<code>T</code>是具有一致元素类型的通道类型，<code>V</code>是一个双向通道，并且<code>V</code>或<code>T</code>中至少有一个不是<a href="../Types">命名类型</a>。</li>
<li><code>T</code>是接口类型，但不是一个类型参数，并且<code>x</code><a href="../Types#implementing-an-interface">实现</a>了<code>T</code>。</li>
<li><code>x</code>是预先声明的标识符<code>nil</code>，并且<code>T</code>是一个指针、函数、切片、映射、通道或接口类型，但不是一个类型参数。</li>
<li><code>x</code>是可由<code>T</code>类型的值<a href="#representability">表示</a>的非类型化的<a href="">常量</a>。</li>
</ul>
<p>​	除此之外，如果<code>x</code>的类型<code>V</code>或<code>T</code>是类型参数，并且满足以下条件之一，那么<code>x</code>也可以分配给类型<code>T</code>的变量：</p>
<ul>
<li><code>x</code>是预先声明的标识符<code>nil</code>，<code>T</code>是类型参数，并且<code>x</code>可以分配给<code>T</code>的类型集中的每个类型。</li>
<li><code>V</code>不是<a href="../Types">命名类型</a>，<code>T</code>是一个类型参数，并且<code>x</code>可以分配给<code>T</code>的类型集中的每个类型。</li>
<li><code>V</code>是类型参数，<code>T</code>不是<a href="../Types">命名类型</a>，而<code>V</code>的类型集中的每个类型的值都可以分配给<code>T</code>。</li>
</ul>
<h3 id="representability-可表示性">Representability 可表示性</h3>
<p>​	如果满足以下条件之一，<a href="../Constants">常量</a><code>x</code>就可以被<code>T</code>类型的值所表示，其中<code>T</code>不是<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a>：</p>
<ul>
<li><code>x</code>在由<code>T</code><a href="../Types">所确定的</a>值的集合中。</li>
<li><code>T</code>是<a href="../Types/numeric-types">浮点类型</a>，并且<code>x</code>可以被舍入到<code>T</code>的精度而不会溢出。四舍五入使用的是IEEE 754的四舍五入到偶数的规则，但IEEE的负0被进一步简化为无符号0。请注意，常量值绝不会出现IEEE负零、NaN或无穷大。</li>
<li><code>T</code>是复数类型，<code>x</code>的<a href="../Built-inFunctions#manipulating-complex-numbers">组成</a><code>real(x)</code>和<code>imag(x)</code>可以用<code>T</code>的组成类型（<code>float32</code>或<code>float64</code>）的值表示。</li>
</ul>
<p>​	如果<code>T</code>是类型参数，并且<code>x</code>可以由<code>T</code>的类型集中的每个类型的值来表示，那么<code>x</code>就可以由<code>T</code>类型的值来表示。</p>
<pre tabindex="0"><code>x                   T           x is representable by a value of T because

&#39;a&#39;                 byte        97 is in the set of byte values
97                  rune        rune is an alias for int32, and 97 is in the set of 32-bit integers
&#34;foo&#34;               string      &#34;foo&#34; is in the set of string values
1024                int16       1024 is in the set of 16-bit integers
42.0                byte        42 is in the set of unsigned 8-bit integers
1e10                uint64      10000000000 is in the set of unsigned 64-bit integers
2.718281828459045   float32     2.718281828459045 rounds to 2.7182817 which is in the set of float32 values
-1e-1000            float64     -1e-1000 rounds to IEEE -0.0 which is further simplified to 0.0
0i                  int         0 is an integer value
(42 + 0i)           float32     42.0 (with zero imaginary part) is in the set of float32 values


x                   T           x is not representable by a value of T because

0                   bool        0 is not in the set of boolean values
&#39;a&#39;                 string      &#39;a&#39; is a rune, it is not in the set of string values
1024                byte        1024 is not in the set of unsigned 8-bit integers
-1                  uint16      -1 is not in the set of unsigned 16-bit integers
1.1                 int         1.1 is not an integer value
42i                 float32     (0 + 42i) is not in the set of float32 values
1e1000              float64     1e1000 overflows to IEEE +Inf after rounding
</code></pre><h3 id="method-sets-方法集">Method sets 方法集</h3>
<p>​	类型的方法集确定了该类型的<a href="../Expressions#operands">操作数</a>可以<a href="../Expressions#calls">调用</a>的方法。每个类型都有一个与之相关的（可能是空的）方法集。</p>
<ul>
<li><a href="">定义类型</a><code>T</code>的方法集包括所有用接收器类型<code>T</code>声明的<a href="../DeclarationsAndScope#method-declarations">方法</a>。</li>
<li>指向<a href="">定义类型</a><code>T</code>的指针（<code>T</code>既不是指针也不是接口）的方法集是与接收器<code>*T</code>或<code>T</code>一起声明的所有方法的集合。</li>
<li><a href="../Types#interface-types">接口类型</a>的方法集是该接口<a href="../Types/interface-types">类型集</a>中每个类型的方法集的交集（最终的方法集通常只是接口中声明的方法集）。</li>
</ul>
<p>​	进一步的规则，应用于包含嵌入字段的结构体（和结构体指针），会在关于<a href="../Types#struct-types">结构体类型</a>的章节中描述。任何其他类型都有一个空的方法集。</p>
<p>​	在方法集中，每个方法必须有一个<a href="../DeclarationsAndScope#uniqueness-of-identifiers">唯一的</a>非<a href="../DeclarationsAndScope#blank-identifier">空白</a><a href="../Types#interface-types">方法名</a>。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1771d5c1ba1ac864f6a837e5426d85f9">9 - 块</h1>
    
	<h2 id="blocks-块">Blocks 块</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Blocks" target="_blank" rel="noopener">https://go.dev/ref/spec#Blocks</a></p>
</blockquote>
<p>​	块是在一对匹配的大括号内的声明和语句（一个可能是空的）序列。</p>
<pre tabindex="0"><code>Block = &#34;{&#34; StatementList &#34;}&#34; .
StatementList = { Statement &#34;;&#34; } .
</code></pre><p>源代码中除了显式块之外，还有隐式块：</p>
<ol>
<li>包含所有的Go源码文本的 <code>universe block</code> 。</li>
<li>每个<a href="../Packages">包</a>都有一个<code>package block</code>，包含该包的所有 Go 源代码。</li>
<li>每个文件都有一个<code>file block</code>，包含该文件中的所有Go 源代码。</li>
<li>每个 &ldquo;<a href="../Statements#if-statements-if">if</a>&quot;、&quot;<a href="../Statements#for-statements-for">for</a> &ldquo;和 &ldquo;<a href="../Statements#switch-statements-switch">switch</a> &ldquo;语句都被认为是在自己的隐式块中。</li>
<li>&ldquo;<a href="../Statements#switch-statements-switch">switch</a>&ldquo;或 &ldquo;<a href="../Statements#select-statements-select">select</a> &ldquo;语句中的每个子句都是一个隐式块。</li>
</ol>
<p>块是可以嵌套并影响着<a href="../DeclarationsAndScope">作用域</a>。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-d71ecd79d7948d28bf81d12f97fed6e0">10 - 声明和作用域</h1>
    
	<h2 id="declarations-and-scope-声明和作用域">Declarations and scope 声明和作用域</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Declarations_and_scope" target="_blank" rel="noopener">https://go.dev/ref/spec#Declarations_and_scope</a></p>
</blockquote>
<p>​	声明将一个非<a href="#blank-identifier">空白</a>的标识符绑定到一个<a href="../Constants">常量</a>、<a href="../Types">类型</a>、<a href="#type-parameter-declarations">类型参数</a>、<a href="../Variables">变量</a>、<a href="#function-declarations">函数</a>、<a href="../Statements#labeled-statements">标签</a>或<a href="../Pachages#import-declarations">包</a>。程序中的每个标识符都必须被声明。没有一个标识符可以在同一个块中声明两次，也没有一个标识符可以同时在文件块和包块中声明。</p>
<p>​	<a href="#blank-identifier">空白标识符（即<code>_</code>）</a>可以像其他标识符一样在声明中使用，但它不引入绑定，因此不被声明。在包块中，标识符<code>init</code>只能用于<a href="../ProgramInitializationAndExecution#package-initialization">init函数</a>的声明，和空白标识符一样，它不会引入一个新的绑定。</p>
<pre tabindex="0"><code>Declaration   = ConstDecl | TypeDecl | VarDecl .
TopLevelDecl  = Declaration | FunctionDecl | MethodDecl .
</code></pre><p>​	声明标识符的作用域是源文本的范围，其中标识符表示指定的常量、类型、变量、函数、标签或包。</p>
<p>​	Go在词法使用<a href="../Blocks">块</a>来确定作用域：</p>
<ol>
<li><a href="../DeclarationsAndScope#predeclared-identifiers">预先声明的标识符</a>的作用域是<code>universe block</code>。</li>
<li>表示常量、类型、变量或函数（但不是方法）的标识符在顶层（任何函数之外）声明的作用域是<code>package block</code>。</li>
<li>导入的包的包名的作用域是在导入声明的文件的<code>file block</code>。</li>
<li>表示方法接收器、函数参数或结果变量的标识符的作用域是函数体。</li>
<li>表示函数的类型参数或由方法接收器声明的标识符的作用域从函数名称之后开始，在函数体的末端结束。</li>
<li>表示类型的类型参数的标识符的作用域从类型的名称之后开始，在TypeSpec的末尾结束。=&gt;仍有疑问？？</li>
<li>在函数中声明的常量或变量标识符的作用域从ConstSpec或VarSpec（ShortVarDecl用于短变量声明）的末尾开始，在最里面的包含块的末尾结束。</li>
<li>在函数中声明的类型标识符的作用域从TypeSpec中的标识符开始，在最内层的包含块的末端结束。</li>
</ol>
<p>​	在块中声明的标识符可以在内部块中被重新声明。当内部声明的标识符在作用域内时，它表示内部声明所声明的实体。</p>
<p>​	<a href="../Packages#package-clause">包语句</a>不是一个声明；包名不出现在任何作用域中。它的目的是识别属于同一<a href="../Packages">包</a>的文件，并为导入声明指定默认的包名。</p>
<h3 id="label-scopes-标签作用域">Label scopes 标签作用域</h3>
<p>​	标签由<a href="../Statements#labeled-statements">标签语句</a>声明，用于 &ldquo;<a href="">break</a>&quot;、&quot;<a href="">continue</a> &ldquo;和 &ldquo;<a href="">goto</a> &ldquo;语句中。定义一个从不使用的标签是非法的。与其他标识符不同的是，标签没有块作用域，也不会与不是标签的标识符冲突。标签的作用域是声明它的函数的主体，不包括任何嵌套函数的主体。</p>
<h3 id="blank-identifier-空白标识符">Blank identifier 空白标识符</h3>
<p>​	空白标识符由下划线字符<code>_</code>表示。它是一个<code>匿名的占位符</code>，而不是普通的（非空白）标识符，在声明中具有特殊的意义，可以作为<a href="../Expresssions#operands">操作数</a>，也可以在<a href="../Statements#assignment-statements">赋值语句</a>中。</p>
<h3 id="predeclared-identifiers--预先声明的标识符">Predeclared identifiers  预先声明的标识符</h3>
<p>下列标识符是在<a href="../Blocks">universe block</a>中隐式声明的：</p>
<pre tabindex="0"><code>Types:
	any bool byte comparable
	complex64 complex128 error float32 float64
	int int8 int16 int32 int64 rune string
	uint uint8 uint16 uint32 uint64 uintptr

Constants:
	true false iota

Zero value:
	nil

Functions:
	append cap close complex copy delete imag len
	make new panic print println real recover
</code></pre><h3 id="exported-identifiers-可导出的标识符">Exported identifiers 可导出的标识符</h3>
<p>​	标识符可以被导出，以允许从另一个包访问它。一个标识符在以下两种情况下被导出：</p>
<ol>
<li>标识符的第一个字符是一个Unicode大写字母（Unicode字符类别Lu）；并且</li>
<li>该标识符在<a href="../Blocks">package block</a>中被声明，或者它是一个字段名或方法名。</li>
</ol>
<p>所有其他标识符都不被导出。</p>
<h3 id="uniqueness-of-identifiers-标识符的唯一性">Uniqueness of identifiers 标识符的唯一性</h3>
<p>​	给定一组标识符，如果一个标识符与这组标识符中的每一个都不同，则称为唯一。如果两个标识符的拼写不同，或者它们出现在不同的<a href="../Packages">包</a>中并且不被<a href="#exported-identifiers">导出</a>，那么它们就是不同的。否则，它们是相同的。</p>
<h3 id="constant-declarations-常量声明">Constant declarations 常量声明</h3>
<p>​	常量声明将一列标识符（常量的名称）与一列<a href="../Expressions#constant-expressions">常量表达式</a>的值绑定。标识符的数量必须等于表达式的数量，左边的第n个标识符被绑定到右边的第n个表达式的值上。</p>
<pre tabindex="0"><code>ConstDecl      = &#34;const&#34; ( ConstSpec | &#34;(&#34; { ConstSpec &#34;;&#34; } &#34;)&#34; ) .
ConstSpec      = IdentifierList [ [ Type ] &#34;=&#34; ExpressionList ] .

IdentifierList = identifier { &#34;,&#34; identifier } .
ExpressionList = Expression { &#34;,&#34; Expression } .
</code></pre><p>​	如果有指定类型，则所有常量都采用该指定的类型，并且表达式必须<a href="../PropertiesOfTypesAndValues#assignability">可以赋值</a>给该类型，该类型不能是一个类型参数。</p>
<p>​	如果类型被省略，则常量采取相应表达式的类型。</p>
<p>​	如果表达式的值是<code>无类型的（untyped）</code><a href="../Constants">常量</a>，那么声明的常量仍然是无类型，并且常量标识符表示该<code>无类型的</code>常量值。例如，如果表达式是一个浮点字面量，那么常量标识符就表示一个浮点常量，即使字面量的小数部分是0。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">const</span> <span style="color:#e06c75">Pi</span> <span style="color:#e5c07b">float64</span> = <span style="color:#d19a66">3.14159265358979323846</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">const</span> <span style="color:#e06c75">zero</span> = <span style="color:#d19a66">0.0</span>         <span style="color:#7f848e">// untyped floating-point constant =&gt; 无类型浮点数数常量
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">size</span> <span style="color:#e5c07b">int64</span> = <span style="color:#d19a66">1024</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">eof</span>        = <span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span>  <span style="color:#7f848e">// untyped integer constant =&gt; 无类型整数常量
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">const</span> <span style="color:#e06c75">a</span>, <span style="color:#e06c75">b</span>, <span style="color:#e06c75">c</span> = <span style="color:#d19a66">3</span>, <span style="color:#d19a66">4</span>, <span style="color:#98c379">&#34;foo&#34;</span>  <span style="color:#7f848e">// a = 3, b = 4, c = &#34;foo&#34;, untyped integer and string constants =&gt; 无类型整数常量 和 字符串常量
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">u</span>, <span style="color:#e06c75">v</span> <span style="color:#e5c07b">float32</span> = <span style="color:#d19a66">0</span>, <span style="color:#d19a66">3</span>    <span style="color:#7f848e">// u = 0.0, v = 3.0
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	在括号内的<code>const</code>声明列表中，除了第一个ConstSpec外的任何表达式都可以省略表达式列表。这样的空列表相当于对前面第一个非空表达式列表及其类型（如果有的话）进行文本替换。因此，<code>省略表达式列表等同于重复前面的列表</code>。标识符的数量必须等于<code>上一个列表</code>中表达式的数量。与<a href="#iota">iota 常量生成器</a>一起使用，此机制允许对连续值进行轻量级声明。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">const</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Sunday</span> = <span style="color:#e5c07b">iota</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Monday</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Tuesday</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Wednesday</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Thursday</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Friday</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Partyday</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">numberOfDays</span>  <span style="color:#7f848e">// this constant is not exported
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="iota">Iota</h3>
<p>​	在<a href="#constant-declarations">常量声明</a>中，预先声明的标识符<code>iota</code>表示连续的无类型整数<a href="../Constants">常量</a>。它的值是该常量声明中各个 ConstSpec 的索引，从零开始。它可以被用来构造一组相关的常量：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">const</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">c0</span> = <span style="color:#e5c07b">iota</span>  <span style="color:#7f848e">// c0 == 0
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">c1</span> = <span style="color:#e5c07b">iota</span>  <span style="color:#7f848e">// c1 == 1
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">c2</span> = <span style="color:#e5c07b">iota</span>  <span style="color:#7f848e">// c2 == 2
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">const</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">a</span> = <span style="color:#d19a66">1</span> <span style="color:#56b6c2">&lt;&lt;</span> <span style="color:#e5c07b">iota</span>  <span style="color:#7f848e">// a == 1  (iota == 0)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">b</span> = <span style="color:#d19a66">1</span> <span style="color:#56b6c2">&lt;&lt;</span> <span style="color:#e5c07b">iota</span>  <span style="color:#7f848e">// b == 2  (iota == 1)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">c</span> = <span style="color:#d19a66">3</span>          <span style="color:#7f848e">// c == 3  (iota == 2, unused)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">d</span> = <span style="color:#d19a66">1</span> <span style="color:#56b6c2">&lt;&lt;</span> <span style="color:#e5c07b">iota</span>  <span style="color:#7f848e">// d == 8  (iota == 3)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">const</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">u</span>         = <span style="color:#e5c07b">iota</span> <span style="color:#56b6c2">*</span> <span style="color:#d19a66">42</span>  <span style="color:#7f848e">// u == 0     (untyped integer constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">v</span> <span style="color:#e5c07b">float64</span> = <span style="color:#e5c07b">iota</span> <span style="color:#56b6c2">*</span> <span style="color:#d19a66">42</span>  <span style="color:#7f848e">// v == 42.0  (float64 constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">w</span>         = <span style="color:#e5c07b">iota</span> <span style="color:#56b6c2">*</span> <span style="color:#d19a66">42</span>  <span style="color:#7f848e">// w == 84    (untyped integer constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">const</span> <span style="color:#e06c75">x</span> = <span style="color:#e5c07b">iota</span>  <span style="color:#7f848e">// x == 0
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">y</span> = <span style="color:#e5c07b">iota</span>  <span style="color:#7f848e">// y == 0
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	根据定义，在同一个ConstSpec中（可以认为是同一行中）多次使用<code>iota</code>都有相同的值：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">const</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">bit0</span>, <span style="color:#e06c75">mask0</span> = <span style="color:#d19a66">1</span> <span style="color:#56b6c2">&lt;&lt;</span> <span style="color:#e5c07b">iota</span>, <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e5c07b">iota</span> <span style="color:#56b6c2">-</span> <span style="color:#d19a66">1</span>  <span style="color:#7f848e">// bit0 == 1, mask0 == 0  (iota == 0)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">bit1</span>, <span style="color:#e06c75">mask1</span>                           <span style="color:#7f848e">// bit1 == 2, mask1 == 1  (iota == 1)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">_</span>, <span style="color:#e06c75">_</span>                                  <span style="color:#7f848e">//                        (iota == 2, unused)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">bit3</span>, <span style="color:#e06c75">mask3</span>                           <span style="color:#7f848e">// bit3 == 8, mask3 == 7  (iota == 3)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>最后这个例子利用了最后一个非空表达式列表的<a href="#constant-declarations">隐式重复</a>。</p>
<h3 id="type-declarations-类型声明">Type declarations 类型声明</h3>
<p>​	类型声明将一个标识符，即类型名称，与一个类型绑定。类型声明有两种形式：<code>别名声明</code>和<code>类型定义</code>。</p>
<pre tabindex="0"><code>TypeDecl = &#34;type&#34; ( TypeSpec | &#34;(&#34; { TypeSpec &#34;;&#34; } &#34;)&#34; ) .
TypeSpec = AliasDecl | TypeDef .
</code></pre><h4 id="alias-declarations-别名声明">Alias declarations 别名声明</h4>
<p>别名声明将一个标识符绑定到给定的类型上。</p>
<pre tabindex="0"><code>AliasDecl = identifier &#34;=&#34; Type .
</code></pre><p>在标识符的<a href="#declarations-and-scope">作用域</a>内，它作为该类型的别名。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">nodeList</span> = []<span style="color:#56b6c2">*</span><span style="color:#e06c75">Node</span>  <span style="color:#7f848e">// nodeList and []*Node are identical types =&gt; nodeList 和[]*Node 类型是一致的
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">Polar</span>    = <span style="color:#e06c75">polar</span>    <span style="color:#7f848e">// Polar and polar denote identical types =&gt; Polar 和 polar 表示一致的类型
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="type-definitions-类型定义">Type definitions 类型定义</h4>
<p>​	类型定义创建了一个新的、不同的类型，其<a href="../Types">底层类型</a>和操作与给定的类型相同，并将标识符，即类型名称绑定到它。</p>
<pre tabindex="0"><code>TypeDef = identifier [ TypeParameters ] Type .
</code></pre><p>​	这个新的类型被称为<code>已定义类型</code>。它与任何其他类型（包括它创建时使用的类型）不同。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Point</span> <span style="color:#c678dd">struct</span>{ <span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e5c07b">float64</span> }  <span style="color:#7f848e">// Point and struct{ x, y float64 } are different types
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">polar</span> <span style="color:#e06c75">Point</span>                   <span style="color:#7f848e">// polar and Point denote different types
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">TreeNode</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">left</span>, <span style="color:#e06c75">right</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">TreeNode</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">value</span> <span style="color:#e06c75">any</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Block</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">BlockSize</span>() <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Encrypt</span>(<span style="color:#e06c75">src</span>, <span style="color:#e06c75">dst</span> []<span style="color:#e5c07b">byte</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Decrypt</span>(<span style="color:#e06c75">src</span>, <span style="color:#e06c75">dst</span> []<span style="color:#e5c07b">byte</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	一个已定义类型可以有与之相关的方法。这一新定义的类型不会继承绑定到给定类型的任何方法，但是<code>接口类型</code>或<code>复合类型的元素</code>的<a href="../PropertiesOfTypesAndValues#method-sets">方法集</a>保持不变。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#7f848e">// A Mutex is a data type with two methods, Lock and Unlock. 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; Mutex 是一个数据类型，其有 Lock 和 Unlock 两个方法
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Mutex</span> <span style="color:#c678dd">struct</span>         { <span style="color:#7f848e">/* Mutex fields */</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">m</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">Mutex</span>) <span style="color:#61afef;font-weight:bold">Lock</span>()    { <span style="color:#7f848e">/* Lock implementation */</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">m</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">Mutex</span>) <span style="color:#61afef;font-weight:bold">Unlock</span>()  { <span style="color:#7f848e">/* Unlock implementation */</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// NewMutex has the same composition as Mutex but its method set is empty. 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; NewMutex 和 Mutex 有相同的组成部分，但 NewMutex 的方法集是空的
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">NewMutex</span> <span style="color:#e06c75">Mutex</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// The method set of PtrMutex&#39;s underlying type *Mutex remains unchanged, 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; PtrMutex 的底层类型 *Mutex 的方法集是不会改变的
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// but the method set of PtrMutex is empty. 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 但 PtrMutex 的方法集是空的
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">PtrMutex</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">Mutex</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// The method set of *PrintableMutex contains the methods
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// Lock and Unlock bound to its embedded field Mutex. 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; *PrintableMutex 的方法集包含 Lock 和 Unlock (这两个方法都是在 Mutex 这一嵌入字段中所绑定的)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">PrintableMutex</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Mutex</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// MyBlock is an interface type that has the same method set as Block. 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; MyBlock 是一个接口类型，其与Block接口有着相同的方法集
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">MyBlock</span> <span style="color:#e06c75">Block</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>类型定义可用于定义不同的布尔型、数值型或字符串型，并为它们绑定方法：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">TimeZone</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">const</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">EST</span> <span style="color:#e06c75">TimeZone</span> = <span style="color:#56b6c2">-</span>(<span style="color:#d19a66">5</span> <span style="color:#56b6c2">+</span> <span style="color:#e5c07b">iota</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">CST</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">MST</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">PST</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">tz</span> <span style="color:#e06c75">TimeZone</span>) <span style="color:#61afef;font-weight:bold">String</span>() <span style="color:#e5c07b">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#e06c75">fmt</span>.<span style="color:#61afef;font-weight:bold">Sprintf</span>(<span style="color:#98c379">&#34;GMT%+dh&#34;</span>, <span style="color:#e06c75">tz</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	如果类型定义指定了<a href="#type-parameter-declarations">类型参数</a>，那么这个<code>类型名称</code>表示一个<code>泛型</code>。<code>泛型</code>在使用时必须被<a href="../Expressions#instantiations">实例化</a>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">List</span>[<span style="color:#e06c75">T</span> <span style="color:#e06c75">any</span>] <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">next</span>  <span style="color:#56b6c2">*</span><span style="color:#e06c75">List</span>[<span style="color:#e06c75">T</span>]
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">value</span> <span style="color:#e06c75">T</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>In a type definition the given type cannot be a type parameter.</p>
<p>在一个类型定义中，给定的类型不能是一个<code>类型参数</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span>[<span style="color:#e06c75">P</span> <span style="color:#e06c75">any</span>] <span style="color:#e06c75">P</span>    <span style="color:#7f848e">// illegal: P is a type parameter 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 非法的：P 是一个类型参数
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#e06c75">f</span>[<span style="color:#e06c75">T</span> <span style="color:#e06c75">any</span>]() {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">type</span> <span style="color:#e06c75">L</span> <span style="color:#e06c75">T</span>   <span style="color:#7f848e">// illegal: T is a type parameter declared by the enclosing function 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    <span style="color:#7f848e">//=&gt; 非法的：T 是封闭函数所声明的一个类型参数
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	泛型也可以有与之相关的<a href="#method-declarations">方法</a>。在这种情况下，方法接收器必须声明与<code>泛型定义</code>中存在的相同数量的类型参数。=&gt;仍有疑问？？</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#7f848e">// The method Len returns the number of elements in the linked list l. 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 方法 Len 会返回链接列表 l 中的元素的数量
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">l</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">List</span>[<span style="color:#e06c75">T</span>]) <span style="color:#61afef;font-weight:bold">Len</span>() <span style="color:#e5c07b">int</span>  { … }
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="type-parameter-declarations-类型参数声明">Type parameter declarations 类型参数声明</h3>
<p>​	类型参数列表<code>声明</code>了一个泛型函数或类型声明的类型参数。类型参数列表看起来和普通的函数参数列表一样，除了类型参数名称必须全部出现，并且列表被括在<code>方括号</code>中，而不是<code>花括号</code>中。</p>
<pre tabindex="0"><code>TypeParameters  = &#34;[&#34; TypeParamList [ &#34;,&#34; ] &#34;]&#34; .
TypeParamList   = TypeParamDecl { &#34;,&#34; TypeParamDecl } .
TypeParamDecl   = IdentifierList TypeConstraint .
</code></pre><p>​	列表中所有非空白的名字必须是唯一的。每个名字都声明了一个类型参数，这是一个新的且不同的<a href="../Types">命名类型</a>，作为声明中一个（到目前为止）未知类型的占位符。类型参数在泛型函数或类型<a href="../Expressions#instantiations">实例化</a>时被替换为<code>类型实参（type argument）</code>。</p>
<pre tabindex="0"><code>[P any]
[S interface{ ~[]byte|string }]
[S ~[]E, E any]
[P Constraint[int]]
[_ any]
</code></pre><p>​	就像每个普通的函数参数都有一个参数类型一样，每个类型参数也有一个相应的被称为其<a href="#type-constraints">类型约束</a>的（元）类型。</p>
<p>​	当泛型的类型参数列表声明了一个带有约束条件<code>C</code>的单一类型参数<code>P</code>，从而使文本<code>P C</code>构成一个有效的表达式时，就会出现解析歧义：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span>[<span style="color:#e06c75">P</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">C</span>] …
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span>[<span style="color:#61afef;font-weight:bold">P</span> (<span style="color:#e06c75">C</span>)] …
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span>[<span style="color:#e06c75">P</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">C</span>|<span style="color:#e06c75">Q</span>] …
</span></span><span style="display:flex;"><span>…
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	在这些罕见的情况下，类型参数列表很难与表达式进行区别，导致该类型声明被解析为一个数组类型声明。为了解决这种歧义，可将约束嵌入到一个<a href="../Types#interface-types">接口</a>中或者在尾部使用逗号：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span>[<span style="color:#e06c75">P</span> <span style="color:#c678dd">interface</span>{<span style="color:#56b6c2">*</span><span style="color:#e06c75">C</span>}] …
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span>[<span style="color:#e06c75">P</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">C</span>,] …
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	类型参数也可以通过与泛型相关的<a href="#method-declarations">方法声明</a>的接收器规范来声明。</p>
<h4 id="type-constraints-类型约束">Type constraints 类型约束</h4>
<p>​	类型约束是一个<a href="../Types#interface-types">接口</a>，该接口定义了对应的<code>类型参数</code>所允许的一组<code>类型实参</code>，并控制该类型参数的值所支持的操作。</p>
<pre tabindex="0"><code>TypeConstraint = TypeElem .
</code></pre><p>​	如果约束是一个形式为<code>interface{E}</code>的接口字面量，其中<code>E</code>是一个嵌入的类型元素（不是方法），在类型参数列表中，为了方便起见，可以省略参数列表中封闭的<code>interface{ … }</code>：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>[<span style="color:#e06c75">T</span> []<span style="color:#e06c75">P</span>]                      <span style="color:#7f848e">// = [T interface{[]P}]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[<span style="color:#e06c75">T</span> ~<span style="color:#e5c07b">int</span>]                     <span style="color:#7f848e">// = [T interface{~int}]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[<span style="color:#e06c75">T</span> <span style="color:#e5c07b">int</span>|<span style="color:#e5c07b">string</span>]               <span style="color:#7f848e">// = [T interface{int|string}]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Constraint</span> ~<span style="color:#e5c07b">int</span>         <span style="color:#7f848e">// illegal: ~int is not inside a type parameter list 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 非法的： ~int 不在一个类型参数列表中
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	<a href="../Types#interface-types">预先声明的接口类型</a>： <code>comparable</code> ，表示所有非接口类型的集合，这些类型是<a href="../Expressions#comparison-operators">可比较的</a>。具体来说，如果一个类型<code>T</code>实现了<code>comparable</code>：</p>
<ul>
<li><code>T</code>不是一个接口类型并且<code>T</code>支持操作<code>==</code>和<code>!=</code>；或者</li>
<li><code>T</code>是一个接口类型，并且<code>T</code>的<a href="../Types#interface-types">类型集</a>中的每个类型都实现了<code>comparable</code>。</li>
</ul>
<p>​	尽管非类型参数的接口可以被<a href="../Expressions#comparison-operators">比较</a>（可能导致运行时恐慌），但它们也没有实现<code>comparable</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">int</span>                          <span style="color:#7f848e">// implements comparable =&gt; 实现了 comparable
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[]<span style="color:#e5c07b">byte</span>                       <span style="color:#7f848e">// does not implement comparable (slices cannot be compared) 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 未实现 comparable （切片不能被比较）
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">interface</span>{}                  <span style="color:#7f848e">// does not implement comparable (see above) 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 未实现 comparable (见上文)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">interface</span>{ ~<span style="color:#e5c07b">int</span> | ~<span style="color:#e5c07b">string</span> }  <span style="color:#7f848e">// type parameter only: implements comparable 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 仅对类型形参：实现了 comparable
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">interface</span>{ <span style="color:#e06c75">comparable</span> }      <span style="color:#7f848e">// type parameter only: implements comparable 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 仅对类型形参：实现了 comparable
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">interface</span>{ ~<span style="color:#e5c07b">int</span> | ~[]<span style="color:#e5c07b">byte</span> }  <span style="color:#7f848e">// type parameter only: does not implement comparable (not all types in the type set are comparable) 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 仅对类型形参：未实现 comparable （不是所有类型集中的类型都可以被比较）
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	<code>comparable</code>这一接口和（直接或间接）嵌入<code>comparable</code>的接口只能作为<code>类型约束</code>使用。它们不能成为值或变量的类型，或其他非接口类型的组成部分。</p>
<h3 id="variable-declarations-变量声明">Variable declarations 变量声明</h3>
<p>​	变量声明创建一个或多个变量，为它们绑定相应的标识符，并为每个变量设定一个类型和一个初始值。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">VarDecl</span>     = <span style="color:#98c379">&#34;var&#34;</span> ( <span style="color:#e06c75">VarSpec</span> | <span style="color:#98c379">&#34;(&#34;</span> { <span style="color:#e06c75">VarSpec</span> <span style="color:#98c379">&#34;;&#34;</span> } <span style="color:#98c379">&#34;)&#34;</span> ) .
</span></span><span style="display:flex;"><span><span style="color:#e06c75">VarSpec</span>     = <span style="color:#61afef;font-weight:bold">IdentifierList</span> ( <span style="color:#e06c75">Type</span> [ <span style="color:#98c379">&#34;=&#34;</span> <span style="color:#e06c75">ExpressionList</span> ] | <span style="color:#98c379">&#34;=&#34;</span> <span style="color:#e06c75">ExpressionList</span> ) .
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">i</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">U</span>, <span style="color:#e06c75">V</span>, <span style="color:#e06c75">W</span> <span style="color:#e5c07b">float64</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">k</span> = <span style="color:#d19a66">0</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e5c07b">float32</span> = <span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span>, <span style="color:#56b6c2">-</span><span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">i</span>       <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">u</span>, <span style="color:#e06c75">v</span>, <span style="color:#e06c75">s</span> = <span style="color:#d19a66">2.0</span>, <span style="color:#d19a66">3.0</span>, <span style="color:#98c379">&#34;bar&#34;</span>
</span></span><span style="display:flex;"><span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">re</span>, <span style="color:#e06c75">im</span> = <span style="color:#61afef;font-weight:bold">complexSqrt</span>(<span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">_</span>, <span style="color:#e06c75">found</span> = <span style="color:#e06c75">entries</span>[<span style="color:#e06c75">name</span>]  <span style="color:#7f848e">// map lookup; only interested in &#34;found&#34;
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	如果变量声明时给出的是表达式列表，则变量将按照<a href="../statements#assignment-statements">赋值语句</a>的规则用表达式进行初始化。否则，每个变量被初始化为其<a href="../ProgramInitializationAndExecution#the-zero-value">零值</a>。</p>
<p>​	如果变量声明时提供了类型，则每个变量都被指定为该类型。否则，每个变量都被设定为赋值中相应的初始化值的类型。如果该值是一个<code>无类型的</code>常量，它首先被隐式<a href="../Expressions#conversions">转换</a>为其<a href="../Constants">默认类型</a>；如果它是一个<code>无类型的</code>布尔值，它首先被隐式转换为<code>bool</code>。预先声明的值<code>nil</code>不能用来初始化一个没有明确类型的变量。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">d</span> = <span style="color:#e06c75">math</span>.<span style="color:#61afef;font-weight:bold">Sin</span>(<span style="color:#d19a66">0.5</span>)  <span style="color:#7f848e">// d is float64
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">i</span> = <span style="color:#d19a66">42</span>             <span style="color:#7f848e">// i is int
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">t</span>, <span style="color:#e06c75">ok</span> = <span style="color:#e06c75">x</span>.(<span style="color:#e06c75">T</span>)      <span style="color:#7f848e">// t is T, ok is bool
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">n</span> = <span style="color:#e5c07b">nil</span>            <span style="color:#7f848e">// illegal 非法的
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>实现限制：在<a href="#function-declarations">函数体</a>中声明一个变量，若该变量从未被使用，编译器可以认为它是非法的。</p>
<h3 id="short-variable-declarations-短变量声明">Short variable declarations 短变量声明</h3>
<p>短变量声明使用的语法：</p>
<pre tabindex="0"><code>ShortVarDecl = IdentifierList &#34;:=&#34; ExpressionList .
</code></pre><p>它是带有初始化表达式但没有类型的常规<a href="#variable-declarations">变量声明</a>的简写：</p>
<pre tabindex="0"><code>&#34;var&#34; IdentifierList &#34;=&#34; ExpressionList .
i, j := 0, 10
f := func() int { return 7 }
ch := make(chan int)
r, w, _ := os.Pipe()  // os.Pipe() returns a connected pair of Files and an error, if any
_, y, _ := coord(p)   // coord() returns three values; only interested in y coordinate
</code></pre><p>​	与常规变量声明不同，短变量声明可以重新声明变量，前提是这些变量最初是在同一个块（如果该块是函数体，则是参数列表）中<code>以相同的类型声明的</code>，并且<code>至少有一个</code>非<a href="#blank-identifier">空白</a>变量是新的。因此，重复声明只能出现在一个多变量的短声明中。重复声明并没有引入一个新的变量；它只是给原来的变量分配了一个新的值。<code>:=</code>左侧的非空白变量名必须是<a href="#uniqueness-of-identifiers">唯一</a>的。</p>
<pre tabindex="0"><code>field1, offset := nextField(str, 0)
field2, offset := nextField(str, offset)  // redeclares offset
x, y, x := 1, 2, 3                        // illegal: x repeated on left side of :=
</code></pre><p>​	短变量声明只能出现在函数内部。在某些情况下，如 &ldquo;<a href="../Statements#if-statements-if">if</a>&quot;、&quot;<a href="../Statements#for-statements-for">for</a> &ldquo;或 &ldquo;<a href="../Statements#switch-statements-switch">switch</a> &ldquo;语句的初始化语句中，它们可以用来声明局部临时变量。</p>
<h3 id="function-declarations-函数声明">Function declarations 函数声明</h3>
<p>函数声明将标识符（函数名称）绑定到函数。</p>
<pre tabindex="0"><code>FunctionDecl = &#34;func&#34; FunctionName [ TypeParameters ] Signature [ FunctionBody ] .
FunctionName = identifier .
FunctionBody = Block .
</code></pre><p>​	如果函数的<a href="../Types#function-types">签名</a>声明了结果参数，那么函数体的语句列表必须以一个<a href="../Statements#terminating-statements">终止语句</a>结束。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">IndexRune</span>(<span style="color:#e06c75">s</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">r</span> <span style="color:#e5c07b">rune</span>) <span style="color:#e5c07b">int</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span>, <span style="color:#e06c75">c</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">range</span> <span style="color:#e06c75">s</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">if</span> <span style="color:#e06c75">c</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">r</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#c678dd">return</span> <span style="color:#e06c75">i</span>
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">// invalid: missing return statement 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    <span style="color:#7f848e">//=&gt; 无效的: 缺少 return 语句
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	如果函数声明中指定了<a href="#type-parameter-declarations">类型参数</a>，那么函数名就表示一个<code>泛型函数</code>。在被调用或作为值使用之前，泛型函数必须先被实例化。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#e06c75">min</span>[<span style="color:#e06c75">T</span> ~<span style="color:#e5c07b">int</span>|~<span style="color:#e5c07b">float64</span>](<span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e06c75">T</span>) <span style="color:#e06c75">T</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">if</span> <span style="color:#e06c75">x</span> &lt; <span style="color:#e06c75">y</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">return</span> <span style="color:#e06c75">x</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#e06c75">y</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	没有类型参数的函数声明可以省略函数体。这样的声明提供了一个在Go外部实现的函数的签名，比如一个汇编程序。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">flushICache</span>(<span style="color:#e06c75">begin</span>, <span style="color:#e06c75">end</span> <span style="color:#e5c07b">uintptr</span>)  <span style="color:#7f848e">// implemented externally =&gt; 由外部实现
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="method-declarations-方法声明">Method declarations 方法声明</h3>
<p>​	方法是带有接收器的<a href="#function-declarations">函数</a>。方法声明将一个标识符，即方法名称，绑定到一个方法上，并将该方法与接收器的基本类型联系起来。</p>
<pre tabindex="0"><code>MethodDecl = &#34;func&#34; Receiver MethodName Signature [ FunctionBody ] .
Receiver   = Parameters .
</code></pre><p>​	接收器是通过方法名前面的一个额外的参数部分指定的。该参数部分必须声明一个非可变参数，即接收器。它的类型必须是一个<a href="#type-declarations">已定义</a>类型<code>T</code>或者一个指向已定义类型<code>T</code>的指针，后面可能是一个用方括号括起来的类型参数名称列表<code>[P1, P2, ...]</code>。<code>T</code>被称为接收器的<code>基本类型</code>。<code>接收器的基类型不能是一个指针或接口类型</code>，<code>并且它必须在与方法相同的包中定义</code>。这个定义过程称为将该方法与其接收器基本类型绑定，该方法名只在<code>T</code>或<code>*T</code>类型的<a href="../Expressions#selectors">选择器</a>中可见。</p>
<p>​	一个非<a href="#blank-identifier">空白</a>的接收器标识符在方法签名中必须是<a href="#uniqueness-of-identifiers">唯一</a>的。如果接收器的值没有在方法体中被引用，它的标识符可以在声明中被省略。这一规则与函数和方法的普通参数类似。</p>
<p>​	对于一个基本类型，绑定到它的非空白名称必须是唯一的。如果基本类型是一个<a href="../Types#struct-types">结构类型</a>，非空白的方法名和字段名必须是唯一的。</p>
<p>给出定义类型<code>Point</code>，其声明：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">p</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">Point</span>) <span style="color:#61afef;font-weight:bold">Length</span>() <span style="color:#e5c07b">float64</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#e06c75">math</span>.<span style="color:#61afef;font-weight:bold">Sqrt</span>(<span style="color:#e06c75">p</span>.<span style="color:#e06c75">x</span> <span style="color:#56b6c2">*</span> <span style="color:#e06c75">p</span>.<span style="color:#e06c75">x</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">p</span>.<span style="color:#e06c75">y</span> <span style="color:#56b6c2">*</span> <span style="color:#e06c75">p</span>.<span style="color:#e06c75">y</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">p</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">Point</span>) <span style="color:#61afef;font-weight:bold">Scale</span>(<span style="color:#e06c75">factor</span> <span style="color:#e5c07b">float64</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">p</span>.<span style="color:#e06c75">x</span> <span style="color:#56b6c2">*=</span> <span style="color:#e06c75">factor</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">p</span>.<span style="color:#e06c75">y</span> <span style="color:#56b6c2">*=</span> <span style="color:#e06c75">factor</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>绑定了方法<code>Length</code>和<code>Scale</code>，接收器类型为<code>*Point</code>，对应基本类型<code>Point</code>。</p>
<p>If the receiver base type is a <a href="https://go.dev/ref/spec#Type_declarations" target="_blank" rel="noopener">generic type</a>, the receiver specification must declare corresponding type parameters for the method to use. This makes the receiver type parameters available to the method. Syntactically, this type parameter declaration looks like an <a href="https://go.dev/ref/spec#Instantiations" target="_blank" rel="noopener">instantiation</a> of the receiver base type: the type arguments must be identifiers denoting the type parameters being declared, one for each type parameter of the receiver base type. The type parameter names do not need to match their corresponding parameter names in the receiver base type definition, and all non-blank parameter names must be unique in the receiver parameter section and the method signature. The receiver type parameter constraints are implied by the receiver base type definition: corresponding type parameters have corresponding constraints.</p>
<p>​	如果接收器的基本类型是一个<a href="#type-declarations">泛型</a>，接收器规范必须为要使用的方法声明相应的类型形参。这使得接收器的类型形参对该方法可用。从语法上讲，这个类型形参声明看起来就像接收器基本类型的实例化：类型实参必须是表示被声明的类型参数的标识符，接收器基本类型的每个类型形参各有一个。<code>类型形参名无需匹配接收器基本类型定义中对应的形参名</code>，并且所有非空白形参名在接收器形参部分和方法签名中必须是唯一的。接收器类型形参的约束是由接收器基本类型定义所隐含的：相应的类型形参有相应的约束。=&gt; 仍有疑问？？</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Pair</span>[<span style="color:#e06c75">A</span>, <span style="color:#e06c75">B</span> <span style="color:#e06c75">any</span>] <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">a</span> <span style="color:#e06c75">A</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">b</span> <span style="color:#e06c75">B</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">p</span> <span style="color:#e06c75">Pair</span>[<span style="color:#e06c75">A</span>, <span style="color:#e06c75">B</span>]) <span style="color:#61afef;font-weight:bold">Swap</span>() <span style="color:#e06c75">Pair</span>[<span style="color:#e06c75">B</span>, <span style="color:#e06c75">A</span>]  { … }  <span style="color:#7f848e">// receiver declares A, B 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 接收器声明了 A，B
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">p</span> <span style="color:#e06c75">Pair</span>[<span style="color:#e06c75">First</span>, <span style="color:#e06c75">_</span>]) <span style="color:#61afef;font-weight:bold">First</span>() <span style="color:#e06c75">First</span>  { … }  <span style="color:#7f848e">// receiver declares First, corresponds to A in Pair 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 接收器声明了 First， 对应 Pair 中的 A
</span></span></span></code></pre></td></tr></table>
</div>
</div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-47b5b8ffba8abe4a06ed6cf58a54d187">11 - 表达式</h1>
    
	<h2 id="expressions-表达式">Expressions 表达式</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Expressions" target="_blank" rel="noopener">https://go.dev/ref/spec#Expressions</a></p>
</blockquote>
<p>表达式通过将运算符和函数应用于操作数来规定值的计算。</p>
<h3 id="operands-操作数">Operands 操作数</h3>
<p>​	操作数表示表达式中的基本值。操作数可以是一个字面量，一个表示<a href="../DeclarationsAndScope#constant-declarations">常量</a>、<a href="../DeclarationsAndScope#variable-declarations">变量</a>或函数的（可以是<a href="#qualified-identifiers">限定的</a>）非<a href="../DeclarationsAndScope#blank-identifier">空白</a>标识符，或者一对圆括号内的表达式。</p>
<pre tabindex="0"><code>Operand     = Literal | OperandName [ TypeArgs ] | &#34;(&#34; Expression &#34;)&#34; .
Literal     = BasicLit | CompositeLit | FunctionLit .
BasicLit    = int_lit | float_lit | imaginary_lit | rune_lit | string_lit .
OperandName = identifier | QualifiedIdent .
</code></pre><p>​	表示泛型函数的操作数名称后面可以跟一个<a href="#instantiations">类型实参</a>列表；产生的操作数是一个<a href="#instantiations">实例化过的</a>函数。</p>
<p>​	<a href="../DeclarationsAndScope#blank-identifier">空白标识符（即<code>_</code>）</a>只能在<a href="../Statements#assignment-statements">赋值语句</a>的左侧作为操作数出现。</p>
<p>实现限制：若操作数的类型是具有空<a href="../Types#interface-types">类型集</a>的<a href="../DeclarationsAndScope#type-parameter-declarations">类型形参</a>，则编译器不必报告错误。具有这种类型形参的函数不能被<a href="#instantiations">实例化</a>；任何尝试都会导致实例化处的错误。</p>
<h3 id="qualified-identifiers-限定标识符">Qualified identifiers 限定标识符</h3>
<p>​	限定标识符是以包名作为前缀限定的标识符。包名和标识符都不能是<a href="../DeclarationsAndScope#blank-identifier">空白标识符（即<code>_</code>）</a>。</p>
<pre tabindex="0"><code>QualifiedIdent = PackageName &#34;.&#34; identifier .
</code></pre><p>​	限定标识符可以在不同包中访问一个标识符，但该标识符所在的包必须已经被<a href="../Packages#import-declarations">导入</a>。该标识符必须<a href="../DeclarationsAndScope#exported-identifiers">可被导出</a>并在该包的<a href="../Blocks">package block</a>中声明。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">math</span>.<span style="color:#e06c75">Sin</span> <span style="color:#7f848e">// denotes the Sin function in package math 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		 <span style="color:#7f848e">//	=&gt; 表示 math 包中的 Sin 函数
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="composite-literals-复合字面量">Composite literals 复合字面量</h3>
<p>​	复合字面量每次被求值时都会构造新的复合值。<code>它们由字面量的类型和一个由花括号组成的元素列表组成</code>。每个元素可以选择在前面加上一个相应的键。</p>
<pre tabindex="0"><code>CompositeLit  = LiteralType LiteralValue .
LiteralType   = StructType | ArrayType | &#34;[&#34; &#34;...&#34; &#34;]&#34; ElementType |
                SliceType | MapType | TypeName [ TypeArgs ] .
LiteralValue  = &#34;{&#34; [ ElementList [ &#34;,&#34; ] ] &#34;}&#34; .
ElementList   = KeyedElement { &#34;,&#34; KeyedElement } .
KeyedElement  = [ Key &#34;:&#34; ] Element .
Key           = FieldName | Expression | LiteralValue .
FieldName     = identifier .
Element       = Expression | LiteralValue .
</code></pre><p>​	LiteralType 的<a href="../Types#core-types">核心类型</a><code>T</code>必须是一个结构体、数组、切片或映射类型（除了当类型是作为TypeName给出时，语法会强制执行这个约束）。元素和键的类型必须<a href="../PropertiesOfTypesAndValues#assignability">可分配</a>给<code>T</code>类型的对应字段、元素和键类型；不需要进行额外的转换。</p>
<p>​	这里的键被解释为结构体字面量的字段名、数组字面量或切片字面量的索引、映射字面量的键。</p>
<p>​	对于映射字面量，所有的元素必须有一个键。用相同的字段名或常量键值指定多个元素是错误的。对于非常量的映射键，请参见关于<a href="#order-of-evaluation">求值顺序</a>的章节。</p>
<p>​	对于结构体字面量来说，以下规则适用：</p>
<ul>
<li>键必须是结构体类型中声明的字段名。</li>
<li>不包含任何键的元素列表必须按照字段的声明顺序为每个结构体字段列出一个元素。</li>
<li>如果任何元素有一个键，那么每个元素都必须有一个键。</li>
<li>包含键的元素列表不需要每个结构体字段都有一个元素。省略的字段将获得该字段类型的零值。</li>
<li><code>字面量可以省略元素列表；这样的字面量相当对其类型的求值为零值</code>。</li>
<li>为属于不在同一个包中的结构体（即该结构体在其他包中定义）的非可导出字段指定元素是错误的。</li>
</ul>
<p>给定的声明：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Point3D</span> <span style="color:#c678dd">struct</span> { <span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span>, <span style="color:#e06c75">z</span> <span style="color:#e5c07b">float64</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Line</span> <span style="color:#c678dd">struct</span> { <span style="color:#e06c75">p</span>, <span style="color:#e06c75">q</span> <span style="color:#e06c75">Point3D</span> }
</span></span></code></pre></td></tr></table>
</div>
</div><p>我们可以这样写：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#7f848e">// zero value for Point3D 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; Point3D 的零值
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">origin</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">Point3D</span>{} 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// zero value for line.q.x 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; line.q.x 的零值
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">line</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">Line</span>{<span style="color:#e06c75">origin</span>, <span style="color:#e06c75">Point3D</span>{<span style="color:#e06c75">y</span>: <span style="color:#56b6c2">-</span><span style="color:#d19a66">4</span>, <span style="color:#e06c75">z</span>: <span style="color:#d19a66">12.3</span>}}  
</span></span></code></pre></td></tr></table>
</div>
</div><p>对于数组字面量和切片字面量，以下规则适用：</p>
<ul>
<li>每个元素都有一个相关的整数索引，标记其在数组中的位置。</li>
<li>带键的元素使用该键作为其索引。键必须是一个可由<code>int</code>类型的值<a href="../PropertiesOfTypesAndValues#representability">表示的</a>非负常数；如果它是有类型的，则它必须是<a href="../Types#numeric-types">整数类型</a>。</li>
<li>不带键的元素使用前一个元素的索引加1。如果第一个元素没有键，它的索引是0。</li>
</ul>
<p>​	对一个复合字面量<a href="">取址</a>会产生一个指向唯一<a href="../Variables">变量</a>的指针，该变量用字面量的值初始化。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">pointer</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">Point3D</span> = <span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">Point3D</span>{<span style="color:#e06c75">y</span>: <span style="color:#d19a66">1000</span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>请注意，切片或映射类型的<a href="../ProgramInitializationAndExecution#the-zero-value">零值</a>与同一类型的初始化过但为空的值不同。因此，获取一个空切片或空映射复合字面量的地址与用<a href="../Built-inFunctions#allocation">new</a>分配一个新的切片或映射值的效果不同。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#7f848e">// p1 points to an initialized, empty slice with value []int{} and length 0 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; p1 指向一个值为 []int{} 且 长度为 0 的初始化过的空切片
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">p1</span> <span style="color:#56b6c2">:=</span> <span style="color:#56b6c2">&amp;</span>[]<span style="color:#e5c07b">int</span>{}    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// p2 points to an uninitialized slice with value nil and length 0 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; p2 指向一个值为 nil 且其长度为 0 的未初始化的切片
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">p2</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">new</span>([]<span style="color:#e5c07b">int</span>)  
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	数组字面量的长度是字面量类型中指定的长度。如果在字面量上提供的元素少于长度，缺少的元素将被设置为数组元素类型的零值。若提供的元素的索引值超出了数组的索引范围，将导致错误。标记法<code>...</code>指定的数组长度等于最大元素索引加1。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">buffer</span> <span style="color:#56b6c2">:=</span> [<span style="color:#d19a66">10</span>]<span style="color:#e5c07b">string</span>{}             <span style="color:#7f848e">// len(buffer) == 10
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">intSet</span> <span style="color:#56b6c2">:=</span> [<span style="color:#d19a66">6</span>]<span style="color:#e5c07b">int</span>{<span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>, <span style="color:#d19a66">3</span>, <span style="color:#d19a66">5</span>}       <span style="color:#7f848e">// len(intSet) == 6
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">days</span> <span style="color:#56b6c2">:=</span> [<span style="color:#56b6c2">...</span>]<span style="color:#e5c07b">string</span>{<span style="color:#98c379">&#34;Sat&#34;</span>, <span style="color:#98c379">&#34;Sun&#34;</span>}  <span style="color:#7f848e">// len(days) == 2
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	切片字面量描述了整个底层数组字面量。因此，切片字面量的长度和容量是最大元素索引加1。切片字面量的形式是：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>[]<span style="color:#e06c75">T</span>{<span style="color:#e06c75">x1</span>, <span style="color:#e06c75">x2</span>, … <span style="color:#e06c75">xn</span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>是对数组进行切片操作的简写：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">tmp</span> <span style="color:#56b6c2">:=</span> [<span style="color:#e06c75">n</span>]<span style="color:#e06c75">T</span>{<span style="color:#e06c75">x1</span>, <span style="color:#e06c75">x2</span>, … <span style="color:#e06c75">xn</span>}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">tmp</span>[<span style="color:#d19a66">0</span> : <span style="color:#e06c75">n</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	在一个数组、切片或映射类型<code>T</code>的复合字面量中，如果本身是复合字面量的<strong>元素或映射键</strong>与<code>T</code>的元素或键类型相同，则可以省略（<strong>元素或映射键的</strong>）相应的字面量类型。同样，当元素或键类型为<code>*T</code>时，作为复合字面量地址的元素或键可以省略<code>&amp;T</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>[<span style="color:#56b6c2">...</span>]<span style="color:#e06c75">Point</span>{{<span style="color:#d19a66">1.5</span>, <span style="color:#56b6c2">-</span><span style="color:#d19a66">3.5</span>}, {<span style="color:#d19a66">0</span>, <span style="color:#d19a66">0</span>}}     <span style="color:#7f848e">// same as [...]Point{Point{1.5, -3.5}, Point{0, 0}}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span>[][]<span style="color:#e5c07b">int</span>{{<span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>, <span style="color:#d19a66">3</span>}, {<span style="color:#d19a66">4</span>, <span style="color:#d19a66">5</span>}}          <span style="color:#7f848e">// same as [][]int{[]int{1, 2, 3}, []int{4, 5}}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span>[][]<span style="color:#e06c75">Point</span>{{{<span style="color:#d19a66">0</span>, <span style="color:#d19a66">1</span>}, {<span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>}}}         <span style="color:#7f848e">// same as [][]Point{[]Point{Point{0, 1}, Point{1, 2}}}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>]<span style="color:#e06c75">Point</span>{<span style="color:#98c379">&#34;orig&#34;</span>: {<span style="color:#d19a66">0</span>, <span style="color:#d19a66">0</span>}}    <span style="color:#7f848e">// same as map[string]Point{&#34;orig&#34;: Point{0, 0}}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">map</span>[<span style="color:#e06c75">Point</span>]<span style="color:#e5c07b">string</span>{{<span style="color:#d19a66">0</span>, <span style="color:#d19a66">0</span>}: <span style="color:#98c379">&#34;orig&#34;</span>}    <span style="color:#7f848e">// same as map[Point]string{Point{0, 0}: &#34;orig&#34;}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">PPoint</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">Point</span>
</span></span><span style="display:flex;"><span>[<span style="color:#d19a66">2</span>]<span style="color:#56b6c2">*</span><span style="color:#e06c75">Point</span>{{<span style="color:#d19a66">1.5</span>, <span style="color:#56b6c2">-</span><span style="color:#d19a66">3.5</span>}, {}}          <span style="color:#7f848e">// same as [2]*Point{&amp;Point{1.5, -3.5}, &amp;Point{}}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[<span style="color:#d19a66">2</span>]<span style="color:#e06c75">PPoint</span>{{<span style="color:#d19a66">1.5</span>, <span style="color:#56b6c2">-</span><span style="color:#d19a66">3.5</span>}, {}}          <span style="color:#7f848e">// same as [2]PPoint{PPoint(&amp;Point{1.5, -3.5}), PPoint(&amp;Point{})}
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	当使用LiteralType的TypeName形式的复合字面量<code>作为操作数</code>出现在<a href="../LexicalElements#keywords">关键字</a>和 &ldquo;<code>if</code>&quot;、&quot;<code>for</code> &ldquo;或 &ldquo;<code>switch</code> &ldquo;等语句块的<code>左花括号</code>之间，并且复合字面量没有被括在圆括号、方括号或花括号中时，会出现解析歧义。在这种罕见的情况下，字面量的左花括号被错误地解析为引入语句块的左花括号。为了解决这个问题，复合字面量<code>必须出现在圆括号</code>内。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">if</span> <span style="color:#e06c75">x</span> <span style="color:#56b6c2">==</span> (<span style="color:#e06c75">T</span>{<span style="color:#e06c75">a</span>,<span style="color:#e06c75">b</span>,<span style="color:#e06c75">c</span>}[<span style="color:#e06c75">i</span>]) { … }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">if</span> (<span style="color:#e06c75">x</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">T</span>{<span style="color:#e06c75">a</span>,<span style="color:#e06c75">b</span>,<span style="color:#e06c75">c</span>}[<span style="color:#e06c75">i</span>]) { … }
</span></span></code></pre></td></tr></table>
</div>
</div><p>有效的数组、切片和映射字面量的例子：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#7f848e">// list of prime numbers =&gt; 质数列表
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">primes</span> <span style="color:#56b6c2">:=</span> []<span style="color:#e5c07b">int</span>{<span style="color:#d19a66">2</span>, <span style="color:#d19a66">3</span>, <span style="color:#d19a66">5</span>, <span style="color:#d19a66">7</span>, <span style="color:#d19a66">9</span>, <span style="color:#d19a66">2147483647</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// vowels[ch] is true if ch is a vowel 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">//=&gt; 当 ch 是 元音时，vowels[ch] 为 真
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">vowels</span> <span style="color:#56b6c2">:=</span> [<span style="color:#d19a66">128</span>]<span style="color:#e5c07b">bool</span>{<span style="color:#98c379">&#39;a&#39;</span>: <span style="color:#e5c07b">true</span>, <span style="color:#98c379">&#39;e&#39;</span>: <span style="color:#e5c07b">true</span>, <span style="color:#98c379">&#39;i&#39;</span>: <span style="color:#e5c07b">true</span>, <span style="color:#98c379">&#39;o&#39;</span>: <span style="color:#e5c07b">true</span>, <span style="color:#98c379">&#39;u&#39;</span>: <span style="color:#e5c07b">true</span>, <span style="color:#98c379">&#39;y&#39;</span>: <span style="color:#e5c07b">true</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// the array [10]float32{-1, 0, 0, 0, -0.1, -0.1, 0, 0, 0, -1}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">filter</span> <span style="color:#56b6c2">:=</span> [<span style="color:#d19a66">10</span>]<span style="color:#e5c07b">float32</span>{<span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span>, <span style="color:#d19a66">4</span>: <span style="color:#56b6c2">-</span><span style="color:#d19a66">0.1</span>, <span style="color:#56b6c2">-</span><span style="color:#d19a66">0.1</span>, <span style="color:#d19a66">9</span>: <span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// frequencies in Hz for equal-tempered scale (A4 = 440Hz)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">noteFrequency</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>]<span style="color:#e5c07b">float32</span>{
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;C0&#34;</span>: <span style="color:#d19a66">16.35</span>, <span style="color:#98c379">&#34;D0&#34;</span>: <span style="color:#d19a66">18.35</span>, <span style="color:#98c379">&#34;E0&#34;</span>: <span style="color:#d19a66">20.60</span>, <span style="color:#98c379">&#34;F0&#34;</span>: <span style="color:#d19a66">21.83</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#98c379">&#34;G0&#34;</span>: <span style="color:#d19a66">24.50</span>, <span style="color:#98c379">&#34;A0&#34;</span>: <span style="color:#d19a66">27.50</span>, <span style="color:#98c379">&#34;B0&#34;</span>: <span style="color:#d19a66">30.87</span>,
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="function-literals-函数字面量">Function literals 函数字面量</h3>
<p>​	函数字面量表示一个匿名<a href="../DeclarationsAndScope#function-declarations">函数</a>。函数字面量不能声明<code>类型参数</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">FunctionLit</span> = <span style="color:#98c379">&#34;func&#34;</span> <span style="color:#e06c75">Signature</span> <span style="color:#e06c75">FunctionBody</span> .
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e06c75">a</span>, <span style="color:#e06c75">b</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">z</span> <span style="color:#e5c07b">float64</span>) <span style="color:#e5c07b">bool</span> { <span style="color:#c678dd">return</span> <span style="color:#e06c75">a</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">b</span> &lt; <span style="color:#e5c07b">int</span>(<span style="color:#e06c75">z</span>) }
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	函数字面量可以被分配给一个变量或直接调用。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">func</span>(<span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">int</span> { <span style="color:#c678dd">return</span> <span style="color:#e06c75">x</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">y</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e06c75">ch</span> <span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>) { <span style="color:#e06c75">ch</span> <span style="color:#56b6c2">&lt;-</span> <span style="color:#e06c75">ACK</span> }(<span style="color:#e06c75">replyChan</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	函数字面量可以是<code>闭包</code>：它们可以引用外层函数中定义的变量。然后，这些变量在外层的函数和函数字面量之间共享，并且只要它们可以被访问，它们就可以一直存在。</p>
<h3 id="primary-expressions-主表达式">Primary expressions 主表达式</h3>
<p>主表达式是一元、二元表达式的操作数。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">PrimaryExpr</span> =
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Operand</span> |
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Conversion</span> |
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">MethodExpr</span> |
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">PrimaryExpr</span> <span style="color:#e06c75">Selector</span> |
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">PrimaryExpr</span> <span style="color:#e06c75">Index</span> |
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">PrimaryExpr</span> <span style="color:#e06c75">Slice</span> |
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">PrimaryExpr</span> <span style="color:#e06c75">TypeAssertion</span> |
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">PrimaryExpr</span> <span style="color:#e06c75">Arguments</span> .
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Selector</span>       = <span style="color:#98c379">&#34;.&#34;</span> <span style="color:#e06c75">identifier</span> .
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Index</span>          = <span style="color:#98c379">&#34;[&#34;</span> <span style="color:#e06c75">Expression</span> <span style="color:#98c379">&#34;]&#34;</span> .
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Slice</span>          = <span style="color:#98c379">&#34;[&#34;</span> [ <span style="color:#e06c75">Expression</span> ] <span style="color:#98c379">&#34;:&#34;</span> [ <span style="color:#e06c75">Expression</span> ] <span style="color:#98c379">&#34;]&#34;</span> |
</span></span><span style="display:flex;"><span>                 <span style="color:#98c379">&#34;[&#34;</span> [ <span style="color:#e06c75">Expression</span> ] <span style="color:#98c379">&#34;:&#34;</span> <span style="color:#e06c75">Expression</span> <span style="color:#98c379">&#34;:&#34;</span> <span style="color:#e06c75">Expression</span> <span style="color:#98c379">&#34;]&#34;</span> .
</span></span><span style="display:flex;"><span><span style="color:#e06c75">TypeAssertion</span>  = <span style="color:#98c379">&#34;.&#34;</span> <span style="color:#98c379">&#34;(&#34;</span> <span style="color:#e06c75">Type</span> <span style="color:#98c379">&#34;)&#34;</span> .
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Arguments</span>      = <span style="color:#98c379">&#34;(&#34;</span> [ ( <span style="color:#e06c75">ExpressionList</span> | <span style="color:#e06c75">Type</span> [ <span style="color:#98c379">&#34;,&#34;</span> <span style="color:#e06c75">ExpressionList</span> ] ) [ <span style="color:#98c379">&#34;...&#34;</span> ] [ <span style="color:#98c379">&#34;,&#34;</span> ] ] <span style="color:#98c379">&#34;)&#34;</span> .
</span></span><span style="display:flex;"><span><span style="color:#e06c75">x</span>
</span></span><span style="display:flex;"><span><span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span>(<span style="color:#e06c75">s</span> <span style="color:#56b6c2">+</span> <span style="color:#98c379">&#34;.txt&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#d19a66">3.1415</span>, <span style="color:#e5c07b">true</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Point</span>{<span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">m</span>[<span style="color:#98c379">&#34;foo&#34;</span>]
</span></span><span style="display:flex;"><span><span style="color:#e06c75">s</span>[<span style="color:#e06c75">i</span> : <span style="color:#e06c75">j</span> <span style="color:#56b6c2">+</span> <span style="color:#d19a66">1</span>]
</span></span><span style="display:flex;"><span><span style="color:#e06c75">obj</span>.<span style="color:#e06c75">color</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">f</span>.<span style="color:#e06c75">p</span>[<span style="color:#e06c75">i</span>].<span style="color:#61afef;font-weight:bold">x</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="selectors-选择器">Selectors 选择器</h3>
<p>​	对于<a href="#primary-expressions">主表达式</a><code>x</code>（不是<a href="../Packages#package-clause">包名</a>）来说，选择器表达式：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">x</span>.<span style="color:#e06c75">f</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>表示值<code>x</code>（有时是<code>*x</code>；见下文）的字段或方法<code>f</code>。标识符<code>f</code>被称为（字段或方法）<code>选择器</code>；它不能是<a href="../DeclarationsAndScope#blank-identifier">空白标识符</a>。选择器表达式的类型是<code>f</code>的类型。若<code>x</code>是包名，请参见关于<a href="#qualified-identifiers">限定标识符</a>一节。</p>
<p>​	选择器<code>f</code>可以表示类型<code>T</code>的<code>f</code>字段或<code>f</code>方法，也可以指代<code>T</code>的<a href="../Types#struct-types">嵌入字段</a>或嵌入方法<code>f</code>。在<code>T</code>的一个嵌入字段<code>A</code>中声明的字段或方法<code>f</code>的深度是<code>A</code>中<code>f</code>的深度加1。</p>
<p>以下规则适用于选择器：</p>
<ol>
<li>对于类型为<code>T</code>或<code>*T</code>（<code>T</code>不是指针或接口类型）的值<code>x</code>，<code>x.f</code>表示<code>T</code>中存在这样一个最浅深度的字段或方法<code>f</code>。如果不是恰好有<a href="../DeclarationsAndScope#uniqueness-of-identifiers">仅有一个</a><code>f</code>在最浅深度的话，那么选择器表达式是非法的。</li>
<li>对于接口类型<code>I</code>的值<code>x</code>，<code>x.f</code>表示动态值<code>x</code>的名为<code>f</code>的实际方法。如果在<code>I</code>的<a href="../PropertiesOfTypesAndValues#method-sets">方法集</a>中没有名为<code>f</code>的方法，那么选择器表达式是非法的。</li>
<li>作为例外，如果<code>x</code>的类型是一个<a href="../DeclarationsAndScope#type-definitions">定义的</a>指针类型，并且<code>(*x).f</code>是一个有效的表示一个字段（不是一个方法）的选择器表达式，那么<code>x.f</code>是<code>(*x).f</code>的简写。</li>
<li>在所有其它情况下，<code>x.f</code>是非法的。</li>
<li>如果<code>x</code>是值为<code>nil</code>的指针类型，并且<code>x.f</code>表示一个结构体字段，那么赋值或计算<code>x.f</code>会引起<a href="../Run-timePanics">运行时恐慌</a>。</li>
<li>如果<code>x</code>是值为<code>nil</code>的接口类型，那么<a href="#calls">调用</a>或<a href="#method-values">计值</a><code>x.f</code>方法会引起<a href="../Run-timePanics">运行时恐慌</a>。</li>
</ol>
<p>例如，给定声明：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T0</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">x</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#56b6c2">*</span><span style="color:#e06c75">T0</span>) <span style="color:#61afef;font-weight:bold">M0</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T1</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">y</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">T1</span>) <span style="color:#61afef;font-weight:bold">M1</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T2</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">z</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">T1</span>
</span></span><span style="display:flex;"><span>	<span style="color:#56b6c2">*</span><span style="color:#e06c75">T0</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#56b6c2">*</span><span style="color:#e06c75">T2</span>) <span style="color:#61afef;font-weight:bold">M2</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Q</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T2</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">t</span> <span style="color:#e06c75">T2</span>     <span style="color:#7f848e">// with t.T0 != nil =&gt; 假定 t.T0 != nil
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">p</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T2</span>    <span style="color:#7f848e">// with p != nil and (*p).T0 != nil =&gt; 假定 p != nil 并且 (*p).T0 != nil
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">q</span> <span style="color:#e06c75">Q</span> = <span style="color:#e06c75">p</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>则我们可以这样写：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">t</span>.<span style="color:#e06c75">z</span>          <span style="color:#7f848e">// t.z
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">t</span>.<span style="color:#e06c75">y</span>          <span style="color:#7f848e">// t.T1.y
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">t</span>.<span style="color:#e06c75">x</span>          <span style="color:#7f848e">// (*t.T0).x
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">p</span>.<span style="color:#e06c75">z</span>          <span style="color:#7f848e">// (*p).z
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">p</span>.<span style="color:#e06c75">y</span>          <span style="color:#7f848e">// (*p).T1.y
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">p</span>.<span style="color:#e06c75">x</span>          <span style="color:#7f848e">// (*(*p).T0).x
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">q</span>.<span style="color:#e06c75">x</span>          <span style="color:#7f848e">// (*(*q).T0).x        (*q).x is a valid field selector =&gt; (*q).x 是一个有效的字段选择器
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">p</span>.<span style="color:#61afef;font-weight:bold">M0</span>()       <span style="color:#7f848e">// ((*p).T0).M0()      M0 expects *T0 receiver
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">p</span>.<span style="color:#61afef;font-weight:bold">M1</span>()       <span style="color:#7f848e">// ((*p).T1).M1()      M1 expects T1 receiver
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">p</span>.<span style="color:#61afef;font-weight:bold">M2</span>()       <span style="color:#7f848e">// p.M2()              M2 expects *T2 receiver
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">M2</span>()       <span style="color:#7f848e">// (&amp;t).M2()           M2 expects *T2 receiver, see section on Calls
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>但下面的内容是无效的：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">q</span>.<span style="color:#61afef;font-weight:bold">M0</span>()       <span style="color:#7f848e">// (*q).M0 is valid but not a field selector =&gt; (*q).M0是有效的，但不是字段选择器
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="method-expressions-方法表达式">Method expressions 方法表达式</h3>
<p>​	如果<code>M</code>在类型<code>T</code>的<a href="../PropertiesOfTypesAndValues#method-sets">方法集</a>中，那么<code>T.M</code>是一个可以作为普通函数来调用的函数，其实参与<code>M</code>相同，不过其前缀有一个额外的（作为该方法的接收器的）实参。</p>
<pre tabindex="0"><code>MethodExpr    = ReceiverType &#34;.&#34; MethodName .
ReceiverType  = Type .
</code></pre><p>​	考虑有两个方法的结构体类型<code>T</code>，方法一的接收器是<code>T</code>类型的<code>Mv</code>，方法二的接收器是<code>*T</code>类型的<code>Mp</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">a</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">tv</span>  <span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Mv</span>(<span style="color:#e06c75">a</span> <span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">int</span>         { <span style="color:#c678dd">return</span> <span style="color:#d19a66">0</span> }  <span style="color:#7f848e">// value receiver =&gt; 值类型的 接收器
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">tp</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Mp</span>(<span style="color:#e06c75">f</span> <span style="color:#e5c07b">float32</span>) <span style="color:#e5c07b">float32</span> { <span style="color:#c678dd">return</span> <span style="color:#d19a66">1</span> }  <span style="color:#7f848e">// pointer receiver =&gt; 指针类型的 接收器
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">t</span> <span style="color:#e06c75">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>表达式</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">T</span>.<span style="color:#e06c75">Mv</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>产生一个与<code>Mv</code>等价的函数，但是它的第一个形参是一个明确的接收器；它的签名是：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e06c75">tv</span> <span style="color:#e06c75">T</span>, <span style="color:#e06c75">a</span> <span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">int</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	该函数可以在带有一个明确接收器的情况下正常调用，因此如下这五种调用是等同的：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Mv</span>(<span style="color:#d19a66">7</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">T</span>.<span style="color:#61afef;font-weight:bold">Mv</span>(<span style="color:#e06c75">t</span>, <span style="color:#d19a66">7</span>)
</span></span><span style="display:flex;"><span>(<span style="color:#e06c75">T</span>).<span style="color:#61afef;font-weight:bold">Mv</span>(<span style="color:#e06c75">t</span>, <span style="color:#d19a66">7</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">f1</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">T</span>.<span style="color:#e06c75">Mv</span>; <span style="color:#61afef;font-weight:bold">f1</span>(<span style="color:#e06c75">t</span>, <span style="color:#d19a66">7</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">f2</span> <span style="color:#56b6c2">:=</span> (<span style="color:#e06c75">T</span>).<span style="color:#e06c75">Mv</span>; <span style="color:#61afef;font-weight:bold">f2</span>(<span style="color:#e06c75">t</span>, <span style="color:#d19a66">7</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>类似地，表达式</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>(<span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>).<span style="color:#e06c75">Mp</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>产生一个代表<code>Mp</code>的函数值，它的签名是：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e06c75">tp</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>, <span style="color:#e06c75">f</span> <span style="color:#e5c07b">float32</span>) <span style="color:#e5c07b">float32</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	对于一个<code>带值接收器</code>的方法，可以<code>推导出</code>一个带有明确指针接收器的函数，所以</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>(<span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>).<span style="color:#e06c75">Mv</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>产生了一个代表<code>Mv</code>的函数值，它的签名是：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e06c75">tv</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>, <span style="color:#e06c75">a</span> <span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">int</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Such a function indirects through the receiver to create a value to pass as the receiver to the underlying method; the method does not overwrite the value whose address is passed in the function call.</p>
<p>​	这样的函数通过接收器<code>间接地</code>创建了一个值，作为接收器传递给底层方法；该方法不会覆盖（其地址在函数调用中被传递的）那个值。=&gt;仍有疑问？？</p>
<p>The final case, a value-receiver function for a pointer-receiver method, is illegal because pointer-receiver methods are not in the method set of the value type.</p>
<p>​	最后一种情况，将一个带指针接收器的方法<code>当做</code>一个带值接收器的函数，是非法的，因为指针接收器的方法不在值类型的方法集中。=&gt;仍有疑问？？</p>
<p>​	从方法中推导出来的函数值是用<code>函数调用语法</code>来调用的；接收器被作为调用的第一个实参来提供。也就是说，<code>f := T.Mv</code>中的<code>f</code>是作为<code>f(t, 7)</code>被调用，而不是<code>t.f(7)</code>。构造一个绑定接收器的函数，可以使用<a href="#function-literals">函数字面量</a>或<a href="#method-values">方法值</a>。</p>
<p>​	从接口类型的方法中推导出来函数值是合法的。这样的函数需要一个该接口类型的显式接收器。</p>
<h3 id="method-values-方法值">Method values 方法值</h3>
<p>​	如果表达式<code>x</code>有静态类型<code>T</code>，并且<code>M</code>在类型<code>T</code>的<a href="../PropertiesOfTypesAndValues#method-sets">方法集</a>中，那么<code>x.M</code>被称为一个<code>方法值</code>。方法值<code>x.M</code>是一个可调用的函数值，其实参与<code>x.M</code>的方法调用相同。表达式<code>x</code>在方法值的求值过程中被求值和保存；然后保存的副本被用作任何调用中的接收器上，这些调用可能在以后执行。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">S</span> <span style="color:#c678dd">struct</span> { <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">t</span> <span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">M</span>() { <span style="color:#e5c07b">print</span>(<span style="color:#e06c75">t</span>) }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">t</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">new</span>(<span style="color:#e06c75">T</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">S</span>{<span style="color:#e06c75">T</span>: <span style="color:#e06c75">t</span>}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">t</span>.<span style="color:#e06c75">M</span>                    <span style="color:#7f848e">// receiver *t is evaluated and stored in f =&gt; 接收器 *t 被求值，并被保存在 f 中
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">g</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">s</span>.<span style="color:#e06c75">M</span>                    <span style="color:#7f848e">// receiver *(s.T) is evaluated and stored in g =&gt; 接收器 *(s.T) 被求值，并被保存在 g 中
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#56b6c2">*</span><span style="color:#e06c75">t</span> = <span style="color:#d19a66">42</span>                     <span style="color:#7f848e">// does not affect stored receivers in f and g =&gt; 不会影响 保存在 f 和 g 中的接收器
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	类型<code>T</code>既可以是接口类型，也可以是非接口类型。</p>
<p>​	如同上面对<a href="#method-expressions">方法表达式</a>的讨论，考虑一个有两个方法的结构体类型<code>T</code>，方法一的接收器是<code>T</code>类型的<code>Mv</code>，方法二的接收器是<code>*T</code>类型的<code>Mp</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">a</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">tv</span>  <span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Mv</span>(<span style="color:#e06c75">a</span> <span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">int</span>         { <span style="color:#c678dd">return</span> <span style="color:#d19a66">0</span> }  <span style="color:#7f848e">// value receiver =&gt; 值接收器
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">tp</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">Mp</span>(<span style="color:#e06c75">f</span> <span style="color:#e5c07b">float32</span>) <span style="color:#e5c07b">float32</span> { <span style="color:#c678dd">return</span> <span style="color:#d19a66">1</span> }  <span style="color:#7f848e">// pointer receiver =&gt; 指针接收器
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">t</span> <span style="color:#e06c75">T</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">pt</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">makeT</span>() <span style="color:#e06c75">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>表达式</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">t</span>.<span style="color:#e06c75">Mv</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>产生一个类型如下的函数值：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">int</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>这两种调用是等价的：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">t</span>.<span style="color:#61afef;font-weight:bold">Mv</span>(<span style="color:#d19a66">7</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">t</span>.<span style="color:#e06c75">Mv</span>; <span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#d19a66">7</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>同样地，表达式</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">pt</span>.<span style="color:#e06c75">Mp</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>产生一个类型如下的函数值：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span>(<span style="color:#e5c07b">float32</span>) <span style="color:#e5c07b">float32</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	和<a href="#selectors">选择器</a>一样，若对以值作为接收器的非接口方法，使用指针来引用，则（Go语言）将自动解除对该指针的引用：<code>pt.Mv</code>等同于<code>(*pt).Mv</code>。</p>
<p>​	和<a href="#calls">方法调用</a>一样，若对以指针作为接收器的非接口方法，使用可寻址的值来引用，则（Go语言）将自动获取该值的地址：<code>t.Mp</code>等同于<code>(&amp;t).Mp</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">t</span>.<span style="color:#e06c75">Mv</span>; <span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#d19a66">7</span>)   <span style="color:#7f848e">// like t.Mv(7)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">pt</span>.<span style="color:#e06c75">Mp</span>; <span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#d19a66">7</span>)  <span style="color:#7f848e">// like pt.Mp(7)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">pt</span>.<span style="color:#e06c75">Mv</span>; <span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#d19a66">7</span>)  <span style="color:#7f848e">// like (*pt).Mv(7)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">t</span>.<span style="color:#e06c75">Mp</span>; <span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#d19a66">7</span>)   <span style="color:#7f848e">// like (&amp;t).Mp(7)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#61afef;font-weight:bold">makeT</span>().<span style="color:#e06c75">Mp</span>   <span style="color:#7f848e">// invalid: result of makeT() is not addressable =&gt; 无效的：makeT() 的结果是 不可寻址的
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	尽管上面的例子使用了非接口类型，但从接口类型的值中创建一个方法值也是合法的。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">i</span> <span style="color:#c678dd">interface</span> { <span style="color:#61afef;font-weight:bold">M</span>(<span style="color:#e5c07b">int</span>) } = <span style="color:#e06c75">myVal</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">i</span>.<span style="color:#e06c75">M</span>; <span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#d19a66">7</span>)  <span style="color:#7f848e">// like i.M(7)
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="index-expressions-索引表达式">Index expressions 索引表达式</h3>
<p>若主表达式的形式是：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">a</span>[<span style="color:#e06c75">x</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><p>则表示可用<code>x</code>来检索的数组<code>a</code>、数组指针<code>a</code>、切片<code>a</code>、字符串<code>a</code>或映射<code>a</code>的元素，<code>x</code>分别被称为<code>索引</code>或<code>映射键</code>。以下规则适用：</p>
<p>如果<code>a</code>既不是映射也不是类型参数：</p>
<ul>
<li>索引<code>x</code>必须是一个无类型的常量，或者其<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a>必须是<a href="../Types#numeric-types">整数类型</a></li>
<li>常量索引必须是非负且可以用<code>int</code>类型的值来<a href="../PropertiesOfTypesAndValues#representability">表示</a></li>
<li>无类型常量索引会被赋予<code>int</code>类型。</li>
<li>如果<code>0 &lt;= x &lt; len(a)</code>，则索引<code>x</code>在范围内，否则就超出了范围。</li>
</ul>
<p>对于数组类型<code>A</code>的<code>a</code>：</p>
<ul>
<li><a href="../Constants">常量</a>索引必须在范围内</li>
<li>如果<code>x</code>在运行时超出了范围，就会发生<a href="../Run-timePanics">运行时恐慌</a></li>
<li><code>a[x]</code>是索引为<code>x</code>的数组元素，<code>a[x]</code>的类型是<code>A</code>的元素类型。</li>
</ul>
<p>对于数组类型<a href="../Types#pointer-types">指针</a>的<code>a</code>：</p>
<ul>
<li><code>a[x]</code> 是 <code>(*a)[x]</code>的简写</li>
</ul>
<p>对于<a href="../Types#slice-types">切片类型</a><code>S</code>的<code>a</code>：</p>
<ul>
<li>如果<code>x</code>在运行时超出了范围，就会发生<a href="../Run-timePanics">运行时恐慌</a></li>
<li><code>a[x]</code>是索引<code>x</code>处的切片元素，<code>a[x]</code>的类型是<code>S</code>的元素类型。</li>
</ul>
<p>For <code>a</code> of <a href="https://go.dev/ref/spec#String_types" target="_blank" rel="noopener">string type</a>:</p>
<p>对于<a href="../Types#string-types">字符串类型</a>的<code>a</code>：</p>
<ul>
<li>如果字符串<code>a</code>是常量，那么<a href="../Constants">常量</a>索引必须在范围内</li>
<li>如果<code>x</code>在运行时超出了范围，就会发生<a href="../Run-timePanics">运行时恐慌</a></li>
<li><code>a[x]</code>是索引<code>x</code>处的非常量字节值，<code>a[x]</code>的类型是<code>byte</code>。</li>
<li><code>a[x]</code>不能被赋值</li>
</ul>
<p>对于<a href="../Types#map-types">映射类型</a>为<code>M</code>的<code>a</code>：</p>
<ul>
<li><code>x</code>的类型必须可以被<a href="../PropertiesOfTypesAndValues#assignability">分配</a>给<code>M</code>的键类型</li>
<li>如果映射中有键<code>x</code>的项，那么<code>a[x]</code>就是键<code>x</code>的映射元素，<code>a[x]</code>的类型就是<code>M</code>的元素类型</li>
<li>如果映射为<code>nil</code>或者不包含任何项，<code>a[x]</code>是<code>M</code>的元素类型的<a href="../ProgramInitializationAndExecution#the-zero-value">零值</a>。</li>
</ul>
<p>对于<a href="../DeclarationsAndScope#type-parameter-declarations">参数类型</a>为<code>P</code>的<code>a</code>：</p>
<ul>
<li>索引表达式<code>a[x]</code>必须对<code>P</code>的类型集中的所有类型的值有效。</li>
<li><code>P</code>的类型集中所有类型的元素类型必须是相同的。在此上下文中，字符串类型的元素类型是<code>byte</code>。</li>
<li>如果在<code>P</code>的类型集中有一个映射类型，那么该类型集中的所有类型必须是映射类型，且对应的键类型必须都是一致的。</li>
<li><code>a[x]</code>是索引为<code>x</code>的数组、切片或字符串元素，或者<code>P</code>实例化的类型实参中键为<code>x</code>的映射元素，<code>a[x]</code>的类型是（一致的）元素类型的类型。</li>
<li>如果<code>P</code>的类型集包括字符串类型，则<code>a[x]</code>不能再被赋值。</li>
</ul>
<p>否则<code>a[x]</code>是非法的。</p>
<p>​	若将类型为<code>map[K]V</code>的映射<code>a</code>上的索引表达式使用在<a href="../Statements#assignment-statements">赋值语句</a>或特殊格式的初始化中：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">v</span>, <span style="color:#e06c75">ok</span> = <span style="color:#e06c75">a</span>[<span style="color:#e06c75">x</span>]
</span></span><span style="display:flex;"><span><span style="color:#e06c75">v</span>, <span style="color:#e06c75">ok</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">a</span>[<span style="color:#e06c75">x</span>]
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">v</span>, <span style="color:#e06c75">ok</span> = <span style="color:#e06c75">a</span>[<span style="color:#e06c75">x</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><p>将产生一个额外的<code>无类型</code>布尔值。如果键<code>x</code>存在于映射中，<code>ok</code>的值为<code>true</code>，否则为<code>false</code>。</p>
<p>​	若给<code>nil</code>映射的元素赋值，将导致<a href="../Run-timePanics">运行时恐慌</a>。</p>
<h3 id="slice-expressions-切片表达式">Slice expressions 切片表达式</h3>
<p>​	切片表达式从一个字符串、数组、数组指针或切片中构造一个子串或切片。有两种变体：一种是指定低位和高位边界的简单形式，另一种是同时也指定容量的完整形式。</p>
<h4 id="simple-slice-expressions-简单切片表达式">Simple slice expressions 简单切片表达式</h4>
<p>主表达式</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">a</span>[<span style="color:#e06c75">low</span> : <span style="color:#e06c75">high</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><p>构造了一个子字符串或切片。<code>a</code>的<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a>必须是字符串、数组、数组指针、切片或者<a href="../PropertiesOfTypesAndValues#core-types">bytestring</a>。<code>low</code>和<code>high</code>所在的索引选择了哪些元素显示在操作数<code>a</code>的结果中。若结果的索引从0开始，则长度等于<code>high</code> 减去 <code>low</code>。在对数组<code>a</code>进行切片后</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">a</span> <span style="color:#56b6c2">:=</span> [<span style="color:#d19a66">5</span>]<span style="color:#e5c07b">int</span>{<span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>, <span style="color:#d19a66">3</span>, <span style="color:#d19a66">4</span>, <span style="color:#d19a66">5</span>}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">a</span>[<span style="color:#d19a66">1</span>:<span style="color:#d19a66">4</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><p>切片<code>s</code>有类型<code>[]int</code>，长度3，容量4，以及元素</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">s</span>[<span style="color:#d19a66">0</span>] <span style="color:#56b6c2">==</span> <span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">s</span>[<span style="color:#d19a66">1</span>] <span style="color:#56b6c2">==</span> <span style="color:#d19a66">3</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">s</span>[<span style="color:#d19a66">2</span>] <span style="color:#56b6c2">==</span> <span style="color:#d19a66">4</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	为方便起见，任何索引都可以被省略。缺少的<code>low</code>索引默认为0；缺少的<code>high</code>索引默认为被切片的操作数的长度：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">a</span>[<span style="color:#d19a66">2</span>:]  <span style="color:#7f848e">// same as a[2 : len(a)]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">a</span>[:<span style="color:#d19a66">3</span>]  <span style="color:#7f848e">// same as a[0 : 3]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">a</span>[:]   <span style="color:#7f848e">// same as a[0 : len(a)]
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	如果<code>a</code>是一个数组指针，则<code>a[low:high]</code>是<code>(*a)[low:high]</code>的简写。</p>
<p>​	对于数组或字符串，如果<code>0 &lt;= low &lt;= high &lt;= len(a)</code>，则索引在范围内，否则就超出了范围。对于切片，索引的上限是切片的容量<code>cap(a)</code>，而不是长度。<a href="../Constants">常量</a>索引必须是非负的，并且可以用<code>int</code>类型的值来<a href="../PropertiesOfTypesAndValues#representability">表示</a>；对于数组或字符串常量，常量索引也必须在范围内。如果两个索引都是常量，它们必须满足<code>low &lt;= high</code>。如果索引在运行时超出范围，就会发生<a href="../Run-timePanics">运行时恐慌</a>。</p>
<p>​	除了<a href="../Constants">无类型字符串</a>外：</p>
<ul>
<li>
<p>如果被切片的操作数是字符串或切片，则切片的操作结果是一个与操作数相同类型的非常量值。</p>
</li>
<li>
<p>如果被切片的操作数是无类型的字符串，则切片的操作结果是一个<code>string</code>类型的非常量值。</p>
</li>
<li>
<p>如果被切片的操作数是（必须<a href="#address-operators">可被寻址</a>的）数组，则切片的操作结果是一个与数组的元素类型一致的切片。</p>
</li>
</ul>
<p>​	如果有效切片表达式的切片操作数是<code>nil</code>切片，那么切片的操作结果就是一个<code>nil</code>切片。否则，如果切片的操作结果是一个切片，则它与操作数共享底层数组。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">a</span> [<span style="color:#d19a66">10</span>]<span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">s1</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">a</span>[<span style="color:#d19a66">3</span>:<span style="color:#d19a66">7</span>]   <span style="color:#7f848e">// underlying array of s1 is array a; &amp;s1[2] == &amp;a[5] =&gt; s1 的底层数组是数组 a；&amp;s1[2] == &amp;a[5]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">s2</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">s1</span>[<span style="color:#d19a66">1</span>:<span style="color:#d19a66">4</span>]  <span style="color:#7f848e">// underlying array of s2 is underlying array of s1 which is array a; &amp;s2[1] == &amp;a[5] =&gt; s2 的底层数组是 s1 的底层数组 a； &amp;s2[1] == &amp;a[5]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">s2</span>[<span style="color:#d19a66">1</span>] = <span style="color:#d19a66">42</span>     <span style="color:#7f848e">// s2[1] == s1[2] == a[5] == 42; they all refer to the same underlying array element =&gt; s2[1] == s1[2] == a[5] == 42；它们都指向相同的底层数组元素
</span></span></span></code></pre></td></tr></table>
</div>
</div><h4 id="full-slice-expressions-完整的切片表达式">Full slice expressions 完整的切片表达式</h4>
<p>主表达式</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">a</span>[<span style="color:#e06c75">low</span> : <span style="color:#e06c75">high</span> : <span style="color:#e06c75">max</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><p>构造了一个与简单切片表达式<code>a[low : high]</code>相同类型的切片，并且具有相同的长度和元素。此外，它通过将结果切片设置为<code>max 减去 low</code>的容量。<code>a</code>的<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a>必须是数组，数组指针，或者切片（但不是字符串）。在对数组<code>a</code>进行切分后</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">a</span> <span style="color:#56b6c2">:=</span> [<span style="color:#d19a66">5</span>]<span style="color:#e5c07b">int</span>{<span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>, <span style="color:#d19a66">3</span>, <span style="color:#d19a66">4</span>, <span style="color:#d19a66">5</span>}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">t</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">a</span>[<span style="color:#d19a66">1</span>:<span style="color:#d19a66">3</span>:<span style="color:#d19a66">5</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><p>切片<code>t</code>有类型<code>[]int</code>，长度2，容量4，以及元素</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">t</span>[<span style="color:#d19a66">0</span>] <span style="color:#56b6c2">==</span> <span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">t</span>[<span style="color:#d19a66">1</span>] <span style="color:#56b6c2">==</span> <span style="color:#d19a66">3</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	与简单切片表达式一样，如果<code>a</code>是一个数组指针，则<code>a[low:high:max]</code>是<code>(*a)[low:high:max]</code>的简写。如果切片的操作数是一个数组，它必须是<a href="#address-operators">可被寻址的</a>。</p>
<p>​	如果<code>0 &lt;= low &lt;= high &lt;= max &lt;= cap(a)</code>，则索引就在范围内，否则就超出了范围。<a href="../Constants">常量</a>索引必须是非负数，并且可以用<code>int</code>类型的值来<a href="../PropertiesOfTypesAndValues#representability">表示</a>；对于数组，常量索引也必须在范围内。如果多个索引是常量，那么出现的常量必须在相对于彼此的范围内。如果索引在运行时超出了范围，就会发生<a href="../Run-timePanics">运行时恐慌</a>。</p>
<h3 id="type-assertions-类型断言">Type assertions 类型断言</h3>
<p>​	对于<a href="../Types#interface-ypes">接口类型</a>但非<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a>的表达式<code>x</code>和类型<code>T</code>的主表达式</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">x</span>.(<span style="color:#e06c75">T</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>断言了<code>x</code>不是<code>nil</code>，并且<code>x</code>中存储的值是<code>T</code>类型。标记法<code>x.(T)</code>被称为<code>类型断言</code>。</p>
<p>​	更确切地说，如果<code>T</code>不是接口类型，则<code>x.(T)</code>断言<code>x</code>的动态类型与<code>T</code>的类型<a href="../PropertiesOfTypesAndValues#type-identity">一致</a>。在这种情况下，<code>T</code>必须实现<code>x</code>的（接口）类型；否则类型断言是无效的，因为对于<code>x</code>来说存储<code>T</code>类型的值是不可能的。如果<code>T</code>是一个接口类型，则<code>x.(T)</code> 断言<code>x</code>的动态类型<a href="../Types#implementing-an-interface">实现</a>了接口<code>T</code>。</p>
<p>If the type assertion holds, the value of the expression is the value stored in <code>x</code> and its type is <code>T</code>. If the type assertion is false, a <a href="https://go.dev/ref/spec#Run_time_panics" target="_blank" rel="noopener">run-time panic</a> occurs. In other words, even though the dynamic type of <code>x</code> is known only at run time, the type of <code>x.(T)</code> is known to be <code>T</code> in a correct program.</p>
<p>​	如果类型断言成立，表达式的值就是存储在<code>x</code>中的值，其类型是<code>T</code>。 如果类型断言不成立，就会发生<a href="../Run-timePanics">运行时恐慌</a>。换句话说，尽管<code>x</code>的动态类型只有在运行时才知道，但在一个正确的程序中，<code>x.(T)</code>的类型是已知的，是<code>T</code>。=&gt; 仍有疑问？？</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span> <span style="color:#c678dd">interface</span>{} = <span style="color:#d19a66">7</span>          <span style="color:#7f848e">// x has dynamic type int and value 7 =&gt; x 有动态类型 int 以及值 7
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">x</span>.(<span style="color:#e5c07b">int</span>)                   <span style="color:#7f848e">// i has type int and value 7 =&gt; i 有类型 int 和 值 7
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">I</span> <span style="color:#c678dd">interface</span> { <span style="color:#61afef;font-weight:bold">m</span>() }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#e06c75">y</span> <span style="color:#e06c75">I</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">y</span>.(<span style="color:#e5c07b">string</span>)        <span style="color:#7f848e">// illegal: string does not implement I (missing method m) =&gt; 非法的：string 没有实现 I （缺少m方法）
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">r</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">y</span>.(<span style="color:#e06c75">io</span>.<span style="color:#e06c75">Reader</span>)     <span style="color:#7f848e">// r has type io.Reader and the dynamic type of y must implement both I and io.Reader =&gt; r 有类型 io.Reader，并且 y 的动态类型必须同时实现 I 和 io.Reader
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	…
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	在<a href="">赋值语句</a>或特殊格式的初始化中使用的类型断言</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">v</span>, <span style="color:#e06c75">ok</span> = <span style="color:#e06c75">x</span>.(<span style="color:#e06c75">T</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">v</span>, <span style="color:#e06c75">ok</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">x</span>.(<span style="color:#e06c75">T</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">v</span>, <span style="color:#e06c75">ok</span> = <span style="color:#e06c75">x</span>.(<span style="color:#e06c75">T</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">v</span>, <span style="color:#e06c75">ok</span> <span style="color:#c678dd">interface</span>{} = <span style="color:#e06c75">x</span>.(<span style="color:#e06c75">T</span>) <span style="color:#7f848e">// dynamic types of v and ok are T and bool =&gt; v 的动态类型是 T， ok 的动态类型是 bool
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>将产生一个额外的无类型布尔值。如果断言成立，<code>ok</code>的值为<code>true</code>。否则为<code>false</code>，并且<code>v</code>的值是<code>T</code>类型的<a href="../ProgramInitializationAndExecution#the-zero-value">零值</a>。在这种情况下<code>不会</code>发生<a href="../Run-timePanics">运行时恐慌</a>。</p>
<h3 id="calls-调用">Calls 调用</h3>
<p>给定一个表达式<code>f</code>，其<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a>为<a href="../Types#function-types">函数类型</a><code>F</code>,</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#e06c75">a1</span>, <span style="color:#e06c75">a2</span>, … <span style="color:#e06c75">an</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>带实参<code>a1, a2, ... an</code>调用了<code>f</code>。除了一种特殊情况以外，实参必须是<a href="../PropertiesOfTypesAndValues#assignability">可分配</a>给<code>F</code>的参数类型的单值表达式，并且在函数被调用之前被求值。该表达式的类型是<code>F</code>的结果类型。方法调用是类似的，但是方法本身被指定为一个（在该方法的接收器类型的值上的）选择器。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">math</span>.<span style="color:#61afef;font-weight:bold">Atan2</span>(<span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span>)  <span style="color:#7f848e">// function call =&gt; 函数调用
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">pt</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">Point</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">pt</span>.<span style="color:#61afef;font-weight:bold">Scale</span>(<span style="color:#d19a66">3.5</span>)     <span style="color:#7f848e">// method call with receiver pt =&gt; 带接收器 pt 的方法调用
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	如果<code>f</code>表示一个泛型函数，在它被调用或作为函数值使用之前，必须将其<a href="#instantiations">实例化</a>。</p>
<p>​	在函数调用中，函数值和实参以<a href="#order-of-evaluation">通常的顺序</a>被求值。在它们被求值之后，调用的参数被按值传递给函数，然后被调用的函数开始执行。当函数返回时，函数的返回参数按值传递给调用者。</p>
<p>​	调用一个<code>nil</code>的函数值会引起<a href="../Run-timePanics">运行时恐慌</a>。</p>
<p>​	作为一个特例，如果一个函数或方法的返回值<code>g</code>在数量上相等，并且可以单独分配给另一个函数或方法<code>f</code>的参数，那么调用<code>f(g(parameters_of_g))</code>将在把<code>g</code>的返回值依次绑定到<code>f</code>的参数后再调用<code>f</code>。对<code>f</code>的调用必须不包含对<code>g</code>的调用以外的参数，并且<code>g</code>必须至少有一个返回值。如果<code>f</code>有一个在最后的<code>...</code>参数，它将被分配给<code>g</code>的（在分配完普通参数后所剩余的）返回值。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Split</span>(<span style="color:#e06c75">s</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">pos</span> <span style="color:#e5c07b">int</span>) (<span style="color:#e5c07b">string</span>, <span style="color:#e5c07b">string</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#e06c75">s</span>[<span style="color:#d19a66">0</span>:<span style="color:#e06c75">pos</span>], <span style="color:#e06c75">s</span>[<span style="color:#e06c75">pos</span>:]
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Join</span>(<span style="color:#e06c75">s</span>, <span style="color:#e06c75">t</span> <span style="color:#e5c07b">string</span>) <span style="color:#e5c07b">string</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#e06c75">s</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">t</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">if</span> <span style="color:#61afef;font-weight:bold">Join</span>(<span style="color:#61afef;font-weight:bold">Split</span>(<span style="color:#e06c75">value</span>, <span style="color:#e5c07b">len</span>(<span style="color:#e06c75">value</span>)<span style="color:#56b6c2">/</span><span style="color:#d19a66">2</span>)) <span style="color:#56b6c2">!=</span> <span style="color:#e06c75">value</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">log</span>.<span style="color:#61afef;font-weight:bold">Panic</span>(<span style="color:#98c379">&#34;test fails&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	如果<code>x</code>的<a href="../PropertiesOfTypesAndValues#method-sets">方法集</a>（<code>x</code>的类型）包含<code>m</code>，并且实参列表可以分配给<code>m</code>的参数列表，那么方法调用<code>x.m()</code>是有效的。如果<code>x</code>是<a href="#address-operators">可寻址的</a>，并且<code>&amp;x</code>的方法集包含<code>m</code>，则<code>x.m()</code>就是<code>(&amp;x).m()</code>的简写：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">p</span> <span style="color:#e06c75">Point</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">p</span>.<span style="color:#61afef;font-weight:bold">Scale</span>(<span style="color:#d19a66">3.5</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>没有明确的方法类型，也<code>没有方法字面量</code>。</p>
<h3 id="passing-arguments-to--parameters-向参数传递实参">Passing arguments to <code>...</code> parameters 向&hellip;参数传递实参</h3>
<p>​	如果<code>f</code>是带有一个<code>...T</code>类型的位置在最后的参数<code>p</code>的可变函数，那么在<code>f</code>内部，<code>p</code>的类型等同于<code>[]T</code>类型。如果<code>f</code>被调用时没有给<code>p</code>的实参，传递给<code>p</code>的值是<code>nil</code>。否则，传递的值是一个新的<code>[]T</code>类型的切片，这个切片带有一个新的底层数组，这个底层数组的连续元素作为实参，并且这些实参都必须<a href="../PropertiesOfTypesAndValues#assignability">可分配</a>给<code>T</code>。因此，切片的长度和容量等于绑定到<code>p</code>的实参的数量，并且对每次调用（实参数量）都可能有所不同。</p>
<p>给出函数和调用</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Greeting</span>(<span style="color:#e06c75">prefix</span> <span style="color:#e5c07b">string</span>, <span style="color:#e06c75">who</span> <span style="color:#56b6c2">...</span><span style="color:#e5c07b">string</span>)
</span></span><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">Greeting</span>(<span style="color:#98c379">&#34;nobody&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">Greeting</span>(<span style="color:#98c379">&#34;hello:&#34;</span>, <span style="color:#98c379">&#34;Joe&#34;</span>, <span style="color:#98c379">&#34;Anna&#34;</span>, <span style="color:#98c379">&#34;Eileen&#34;</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	在<code>Greeting</code>函数第一次被调用时，<code>who</code>的值为<code>nil</code>，在第二次被调用时，<code>who</code>的值为<code>[]string{&quot;Joe&quot;, &quot;Anna&quot;, &quot;Eileen&quot;}</code>。</p>
<p>​		如果最后一个实参可以分配给切片类型<code>[]T</code>，并且后面是<code>...</code>，那么它就会在不改变值的情况下传递一个<code>...T</code>参数。在这种情况下，不会创建新的切片。</p>
<p>给出切片<code>s</code>并调用</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> []<span style="color:#e5c07b">string</span>{<span style="color:#98c379">&#34;James&#34;</span>, <span style="color:#98c379">&#34;Jasmine&#34;</span>}
</span></span><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">Greeting</span>(<span style="color:#98c379">&#34;goodbye:&#34;</span>, <span style="color:#e06c75">s</span><span style="color:#56b6c2">...</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>在<code>Greeting</code>函数中，<code>who</code>将拥有与<code>s</code>相同的底层数组的值。</p>
<h3 id="instantiations-实例化">Instantiations 实例化</h3>
<p>​	<code>泛型函数</code>或<code>泛型</code>是通过用<code>类型实参</code>替换<code>类型参数</code>而被实例化的。实例化分两步进行：</p>
<ol>
<li>在泛型声明中，每个类型参数都被替换为其对应的类型实参。这种替换发生在整个函数或类型声明中，包括类型参数列表本身和该列表中的每个类型。</li>
<li>替换之后，每个类型实参必须<a href="../Types#interface-types">实现</a>相应类型参数的<a href="../DeclarationsAndScope#type-parameter-declarations">约束</a>（若有需要则实例化它）。否则实例化就会失败。</li>
</ol>
<p>​	实例化一个类型会产生一个新的非泛型的<a href="../Types">命名类型</a>；实例化一个函数会产生一个新的非泛型的函数。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">parameter</span> <span style="color:#e06c75">list</span>    <span style="color:#c678dd">type</span> <span style="color:#e06c75">arguments</span>    <span style="color:#e06c75">after</span> <span style="color:#e06c75">substitution</span>
</span></span><span style="display:flex;"><span>  类型参数列表             类型实参            替换后
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>[<span style="color:#e06c75">P</span> <span style="color:#e06c75">any</span>]                <span style="color:#e5c07b">int</span>               <span style="color:#e5c07b">int</span> <span style="color:#e06c75">implements</span> <span style="color:#e06c75">any</span>
</span></span><span style="display:flex;"><span>[<span style="color:#e06c75">S</span> ~[]<span style="color:#e06c75">E</span>, <span style="color:#e06c75">E</span> <span style="color:#e06c75">any</span>]        []<span style="color:#e5c07b">int</span>, <span style="color:#e5c07b">int</span>        []<span style="color:#e5c07b">int</span> <span style="color:#e06c75">implements</span> ~[]<span style="color:#e5c07b">int</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">implements</span> <span style="color:#e06c75">any</span>
</span></span><span style="display:flex;"><span>[<span style="color:#e06c75">P</span> <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Writer</span>]          <span style="color:#e5c07b">string</span>            <span style="color:#e06c75">illegal</span>: <span style="color:#e5c07b">string</span> <span style="color:#e06c75">doesn</span>&#39;<span style="color:#e06c75">t</span> <span style="color:#e06c75">implement</span> <span style="color:#e06c75">io</span>.<span style="color:#e06c75">Writer</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	对于泛型函数，可以明确地提供类型实参，也可以靠部分或完整地<a href="#type-inference">推断</a>出它们。非<a href="#calls">调用</a>的泛型函数需要一个类型实参列表用于实例化；如果该列表是部分的，那么所有剩余的类型实参必须是可推断的。被调用的泛型函数可以提供一份（可能是部分的）类型实参列表，（如果省略的类型实参可以从普通（非类型）函数参数中推断出来）也可以完全省略。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#e06c75">min</span>[<span style="color:#e06c75">T</span> ~<span style="color:#e5c07b">int</span>|~<span style="color:#e5c07b">float64</span>](<span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e06c75">T</span>) <span style="color:#e06c75">T</span> { … }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">min</span>                   <span style="color:#7f848e">// illegal: min must be instantiated with type arguments when used without being called =&gt; 非法的：在非调用情况下使用 min 时，min 必须用类型实参实例化
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">minInt</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">min</span>[<span style="color:#e5c07b">int</span>]         <span style="color:#7f848e">// minInt has type func(x, y int) int =&gt; minInt 类型为 func(x, y int) int   &lt;= 非调用的情况
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">a</span> <span style="color:#56b6c2">:=</span> <span style="color:#61afef;font-weight:bold">minInt</span>(<span style="color:#d19a66">2</span>, <span style="color:#d19a66">3</span>)          <span style="color:#7f848e">// a has value 2 of type int =&gt; a 的类型为 int，值为 2 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">b</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">min</span>[<span style="color:#e5c07b">float64</span>](<span style="color:#d19a66">2.0</span>, <span style="color:#d19a66">3</span>)  <span style="color:#7f848e">// b has value 2.0 of type float64 =&gt; b 的类型为 float64，值为 2.0 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">c</span> <span style="color:#56b6c2">:=</span> <span style="color:#61afef;font-weight:bold">min</span>(<span style="color:#e06c75">b</span>, <span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span>)            <span style="color:#7f848e">// c has value -1.0 of type float64 =&gt; c 的类型为 float64，值为 -1.0 
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	部分类型实参列表不能是空的；至少第一个（类型）实参必须存在。该列表是完整的类型实参列表的前缀，剩下的参数需要推断。宽泛地说，类型实参可以从 &ldquo;从右到左&quot;省略。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#e06c75">apply</span>[<span style="color:#e06c75">S</span> ~[]<span style="color:#e06c75">E</span>, <span style="color:#e06c75">E</span> <span style="color:#e06c75">any</span>](<span style="color:#e06c75">s</span> <span style="color:#e06c75">S</span>, <span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#e06c75">E</span>) <span style="color:#e06c75">E</span>) <span style="color:#e06c75">S</span> { … }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">f0</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">apply</span>[]                  <span style="color:#7f848e">// illegal: type argument list cannot be empty =&gt; 非法的：类型实参列表不能为空
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">f1</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">apply</span>[[]<span style="color:#e5c07b">int</span>]             <span style="color:#7f848e">// type argument for S explicitly provided, type argument for E inferred =&gt; S 的类型实参被明确提供了，E 的类型实参则需要被推断
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">f2</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">apply</span>[[]<span style="color:#e5c07b">string</span>, <span style="color:#e5c07b">string</span>]  <span style="color:#7f848e">// both type arguments explicitly provided =&gt; 两个类型实参都被明确提供了
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">bytes</span> []<span style="color:#e5c07b">byte</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">r</span> <span style="color:#56b6c2">:=</span> <span style="color:#61afef;font-weight:bold">apply</span>(<span style="color:#e06c75">bytes</span>, <span style="color:#c678dd">func</span>(<span style="color:#e5c07b">byte</span>) <span style="color:#e5c07b">byte</span> { … })  <span style="color:#7f848e">// both type arguments inferred from the function arguments =&gt; 两个类型实参 都需要从函数实参中被推断出来
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>对于<code>泛型，所有的类型实参必须都被明确提供</code>。</p>
<h3 id="type-inference-类型推断">Type inference 类型推断</h3>
<p>​	缺失的函数类型实参可以通过一系列的步骤来推断，如下所述。每个步骤都试图使用已知的信息来推断额外的类型实参。一旦所有的类型实参都是已知的，类型推断就会停止。在类型推断完成后，仍然有必要将所有类型实参替换为类型参数，并验证每个类型实参是否<a href="../Types#interface-types">实现</a>了相关的约束；推断的类型实参有可能无法实现约束，在这种情况下，实例化就会失败。</p>
<p>类型推断是基于：</p>
<ul>
<li><a href="../DeclarationsAndScope#type-parameter-declarations">类型参数列表</a></li>
<li>使用已知类型实参(如果有的话)初始化过的用于替换的映射 <code>M</code></li>
<li>（可能是空的）普通函数实参列表（仅在函数调用的情况下）。</li>
</ul>
<p>然后进行以下步骤：</p>
<ol>
<li>对所有<code>有类型</code>普通函数实参应用<a href="#function-argument-type-inference">函数实参类型推断</a></li>
<li>应用<a href="#constraint-type-inference">约束类型推断</a></li>
<li>使用每个<code>无类型</code>函数实参的默认类型，对所有<code>无类型</code>普通函数实参应用<a href="#function-argument-type-inference">函数实参类型推断</a></li>
<li>应用<a href="#constraint-type-inference">约束类型推断</a></li>
</ol>
<p>​	如果没有普通函数实参或无类型函数实参数，则跳过相应的步骤。如果前一步没有推断出任何新的类型实参，则跳过<a href="#constraint-type-inference">约束类型推断</a>，但如果有缺失的类型实参，则（这个步骤：即<a href="#constraint-type-inference">约束类型推断</a>）至少要运行一次。</p>
<p>​	替换映射<code>M</code>贯穿所有的步骤，每个步骤都可以向<code>M</code>添加条目。一旦<code>M</code>为每个类型参数提供了一个类型实参或者推断步骤失败，这个过程就会停止。如果推断步骤失败，或者在最后一步之后<code>M</code>仍然缺少类型实参，则类型推断失败。</p>
<h4 id="type-unification-类型联合">Type unification 类型联合</h4>
<p>​	类型推断是基于类型联合的。单一的联合步骤适用于一个<a href="#type-inference">替换映射</a>和两种类型，其中一个或两个可能是或包含类型参数。替换映射跟踪已知的（显式提供的或已经推断出的）类型实参：该映射包含每个类型参数<code>P</code>和相应的已知类型实参<code>A</code>的一个条目<code>P</code>→<code>A</code>。在联合过程中，已知的类型实参在比较类型时取代了它们对应的类型参数。联合过程是寻找使两个类型等同的替换映射条目的过程。</p>
<p>​	对于联合来说，如果两个类型不包含当前类型参数列表中的任何类型参数，或者它们是忽略了通道方向的通道类型，或者它们的底层类型是等同的，那么它们（这两个类型）就是一致的。</p>
<p>Unification works by comparing the structure of pairs of types: their structure disregarding type parameters must be identical, and types other than type parameters must be equivalent. A type parameter in one type may match any complete subtype in the other type; each successful match causes an entry to be added to the substitution map. If the structure differs, or types other than type parameters are not equivalent, unification fails.</p>
<p>​	联合是通过比较类型对的结构来实现的：它们的结构在不考虑类型参数时必须是一致的，而类型参数以外的类型必须是等同的。一个类型中的类型参数可以匹配另一个类型中的任何完整的子类型；每个成功的匹配都会将一个条目添加到替换映射中。如果结构不同，或者除类型参数外的其他类型不等同，那么联合就会失败。=&gt; 仍有疑问？？</p>
<p>For example, if <code>T1</code> and <code>T2</code> are type parameters, <code>[]map[int]bool</code> can be unified with any of the following:</p>
<p>​	例如，如果<code>T1</code>和<code>T2</code>是类型参数，<code>[]map[int]bool</code>可以与以下任何一种类型联合：=&gt; 仍有疑问？？</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>[]<span style="color:#c678dd">map</span>[<span style="color:#e5c07b">int</span>]<span style="color:#e5c07b">bool</span>   <span style="color:#7f848e">// types are identical =&gt; 类型是一致的
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">T1</span>               <span style="color:#7f848e">// adds T1 → []map[int]bool to substitution map =&gt; 添加 T1 → []map[int]bool 到 替换映射中
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[]<span style="color:#e06c75">T1</span>             <span style="color:#7f848e">// adds T1 → map[int]bool to substitution map =&gt; 添加 T1 → map[int]bool 到 替换映射中
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[]<span style="color:#c678dd">map</span>[<span style="color:#e06c75">T1</span>]<span style="color:#e06c75">T2</span>      <span style="color:#7f848e">// adds T1 → int and T2 → bool to substitution map =&gt; 添加 T1 → int 和 T2 → bool 到 替换映射中
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>On the other hand, <code>[]map[int]bool</code> cannot be unified with any of</p>
<p>另一方面，<code>[]map[int]bool</code>不能与以下任何一个联合起来  =&gt; 仍有疑问？？</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">int</span>              <span style="color:#7f848e">// int is not a slice =&gt; int 不是切片
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">struct</span>{}         <span style="color:#7f848e">// a struct is not a slice =&gt; 结构体不是切片
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[]<span style="color:#c678dd">struct</span>{}       <span style="color:#7f848e">// a struct is not a map =&gt; 结构体不是映射
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[]<span style="color:#c678dd">map</span>[<span style="color:#e06c75">T1</span>]<span style="color:#e5c07b">string</span>  <span style="color:#7f848e">// map element types don&#39;t match =&gt; 映射元素类型不能匹配
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	作为这个通用规则的一个例外，由于<a href="../DeclarationsAndScope#type-definitions">定义类型</a><code>D</code>和类型字面量<code>L</code>从来都是<code>不等同</code>的，联合将<code>D</code>的底层类型与<code>L</code>进行比较。例如，给定定义类型</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Vector</span> []<span style="color:#e5c07b">float64</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>和类型字面量<code>[]E</code>，联合过程会将<code>[]float64</code>与<code>[]E</code>进行比较，并在替换映射中添加一个条目<code>E</code>→<code>float64</code>。</p>
<h4 id="function-argument-type-inference-函数实参类型推断">Function argument type inference 函数实参类型推断</h4>
<p>Function argument type inference infers type arguments from function arguments: if a function parameter is declared with a type <code>T</code> that uses type parameters, <a href="https://go.dev/ref/spec#Type_unification" target="_blank" rel="noopener">unifying</a> the type of the corresponding function argument with <code>T</code> may infer type arguments for the type parameters used by <code>T</code>.</p>
<p>​	函数实参类型推断从函数实参中推断出类型实参：如果函数参数声明时带有使用了类型参数的类型<code>T</code>，那么将对应函数实参的类型与<code>T</code>进行<a href="#type-unification">联合</a>，可能推断出被<code>T</code>所使用的类型参数的类型实参。=&gt;仍有疑问？？</p>
<p>例如，给定<a href="../DeclarationsAndScope#function-declarations">泛型函数</a></p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#e06c75">scale</span>[<span style="color:#e06c75">Number</span> ~<span style="color:#e5c07b">int64</span>|~<span style="color:#e5c07b">float64</span>|~<span style="color:#e5c07b">complex128</span>](<span style="color:#e06c75">v</span> []<span style="color:#e06c75">Number</span>, <span style="color:#e06c75">s</span> <span style="color:#e06c75">Number</span>) []<span style="color:#e06c75">Number</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>和调用</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">vector</span> []<span style="color:#e5c07b">float64</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">scaledVector</span> <span style="color:#56b6c2">:=</span> <span style="color:#61afef;font-weight:bold">scale</span>(<span style="color:#e06c75">vector</span>, <span style="color:#d19a66">42</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Number</code>的类型实参，可以通过联合<code>vector</code>的类型与对应的参数类型中推断出：<code>[]float64</code>和<code>[]Number</code>在结构上匹配，且<code>float64</code>与<code>Number</code>匹配。这就把<code>Number</code>→<code>float64</code>这个条目添加到<a href="#type-inference">替换映射</a>中。在第一轮<code>函数实参类型推断</code>中，无类型实参，比如这里的第二个函数实参<code>42</code>，会被忽略，只有在还有未解决的类型参数时才会考虑。</p>
<p>​	推断发生在两个独立的阶段；每个阶段在一个特定的（参数，实参）对的列表上操作：</p>
<ol>
<li>列表<code>Lt</code>包含所有使用了类型参数的参数类型和<code>有类型的</code>函数实参所组成的（参数，实参）对。</li>
<li>列表<code>Lu</code>包含所有剩下的参数类型为单一类型参数的对。在这个列表中，各自的函数实参是<code>无类型的</code>。</li>
</ol>
<p>任何其他的（参数，实参）对都被忽略。</p>
<p>​	根据结构，列表<code>Lu</code>中对的实参是无类型的常量（或无类型的布尔比较结果）。而且由于无类型值的<a href="../Constants">默认类型</a>总是预先声明的非复合类型，它们永远不能与复合类型相匹配，所以仅考虑作为单一类型参数的参数类型就足够了。</p>
<p>​	每个列表都在一个独立的阶段中被处理：</p>
<ol>
<li>在第一阶段，<code>Lt</code>中的每各配对的参数和实参类型被联合。如果一个配对的联合成功了，它可能会产生新的条目，并被添加到替换映射<code>M</code>中。</li>
<li>第二阶段考虑列表<code>Lu</code>中的条目。此阶段，将忽略已为其确定类型实参的类型参数。对于剩下的每一对，参数类型（这是一个单一的类型参数）和相应的无类型实参的<a href="../Constants">默认类型</a>进行联合。如果联合失败，则类型推断失败。</li>
</ol>
<p>​	当联合过程成功时，即使所有的类型实参在最后一个列表元素被处理之前就被推断出来了，对每个列表的处理还是会继续进行，直到所有的列表元素都被考虑。</p>
<p>示例：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#e06c75">min</span>[<span style="color:#e06c75">T</span> ~<span style="color:#e5c07b">int</span>|~<span style="color:#e5c07b">float64</span>](<span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e06c75">T</span>) <span style="color:#e06c75">T</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">min</span>(<span style="color:#e06c75">x</span>, <span style="color:#d19a66">2.0</span>)    <span style="color:#7f848e">// T is int, inferred from typed argument x; 2.0 is assignable to int =&gt; T 是 int 类型，它是从有类型的实参 x 中推断出来的，2.0 是 可分配给 int 的
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#61afef;font-weight:bold">min</span>(<span style="color:#d19a66">1.0</span>, <span style="color:#d19a66">2.0</span>)  <span style="color:#7f848e">// T is float64, inferred from default type for 1.0 and matches default type for 2.0 =&gt; T 是 float64 类型，它是从 1.0 的默认类型中推断出来的，且与 2.0 的默认类型匹配
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#61afef;font-weight:bold">min</span>(<span style="color:#d19a66">1.0</span>, <span style="color:#d19a66">2</span>)    <span style="color:#7f848e">// illegal: default type float64 (for 1.0) doesn&#39;t match default type int (for 2) =&gt; 非法的：1.0 的默认类型 float64 与 2 的默认类型 int 不匹配
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	在例子<code>min(1.0, 2)</code>中，处理函数实参<code>1.0</code>会产生替换映射条目<code>T</code> → <code>float64</code>。因为处理过程一直持续到所有无类型的实参被考虑，所以报告了一个错误。这确保了类型推断不依赖于无类型实参的顺序。</p>
<h4 id="constraint-type-inference-约束类型推断">Constraint type inference 约束类型推断</h4>
<p>Constraint type inference infers type arguments by considering type constraints. If a type parameter <code>P</code> has a constraint with a <a href="https://go.dev/ref/spec#Core_types" target="_blank" rel="noopener">core type</a> <code>C</code>, <a href="https://go.dev/ref/spec#Type_unification" target="_blank" rel="noopener">unifying</a> <code>P</code> with <code>C</code> may infer additional type arguments, either the type argument for <code>P</code>, or if that is already known, possibly the type arguments for type parameters used in <code>C</code>.</p>
<p>​	约束类型推断通过考虑类型约束来推断类型实参。如果类型参数<code>P</code>有一个<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a><code>C</code>的约束，将<code>P</code>与<code>C</code><a href="#type-unification">联合</a>起来可能会推断出额外的类型实参，要么是<code>P</code>的类型实参，（如果这个是已知，则）要么可能是<code>C</code>中使用的类型参数的类型实参。=&gt;仍有疑问？？已知指的是什么，是 类型参数P有一个核心类型C的约束？</p>
<p>例如，考虑具有类型参数<code>List</code>和<code>Elem</code>的类型参数列表：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>[<span style="color:#e06c75">List</span> ~[]<span style="color:#e06c75">Elem</span>, <span style="color:#e06c75">Elem</span> <span style="color:#e06c75">any</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><p>约束类型推断可以从<code>List</code>的类型实参推断出<code>Elem</code>的类型，因为<code>Elem</code>是<code>List</code>的核心类型<code>[]Elem</code>中的一个类型参数。如果类型实参是<code>Bytes</code>类型：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Bytes</span> []<span style="color:#e5c07b">byte</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>将<code>Bytes</code>的底层类型与核心类型联合起来，就意味着将<code>[]byte</code>与<code>[]Elem</code>联合起来。这一联合成功了，并产生了<code>Elem</code>→<code>byte</code>的<a href="#type-inference">替换映射</a>条目。因此，在这个例子中，约束类型推断可以从第一个类型实参推断出第二个类型实参。</p>
<p>Using the core type of a constraint may lose some information: In the (unlikely) case that the constraint&rsquo;s type set contains a single <a href="https://go.dev/ref/spec#Type_definitions" target="_blank" rel="noopener">defined type</a> <code>N</code>, the corresponding core type is <code>N</code>&rsquo;s underlying type rather than <code>N</code> itself. In this case, constraint type inference may succeed but instantiation will fail because the inferred type is not in the type set of the constraint. Thus, constraint type inference uses the <em>adjusted core type</em> of a constraint: if the type set contains a single type, use that type; otherwise use the constraint&rsquo;s core type.</p>
<p>​	使用约束的核心类型可能会丢失一些信息。在（不太可能的）情况下，约束的类型集包含单一的<a href="../DeclarationsAndScope#type-definitions">定义类型</a><code>N</code>，相应的核心类型是<code>N</code>的底层类型而不是<code>N</code>本身。在这种情况下，约束的类型推断可能会成功，但实例化会失败，因为推断的类型不在约束的类型集中。因此，约束类型推断使用调整后的约束的核心类型：如果类型集包含一个单一的类型，则使用该类型；否则使用约束的核心类型。=&gt; 仍有疑问？？</p>
<p>​	通常，约束类型推断分两个阶段进行。从一个给定的替换映射<code>M</code>开始</p>
<ol>
<li>对于所有带调整过的核心类型的类型参数，将该类型参数与该类型联合起来。如果任何联合失败，约束类型推断就会失败。</li>
<li>此时，<code>M</code>中的一些条目可能将类型参数映射到其他类型参数或包含类型参数的类型。对于<code>M</code>中每个条目<code>P</code>→<code>A</code>，其中<code>A</code>是或包含类型参数<code>Q</code>，而<code>M</code>中存在条目<code>Q</code>→<code>B</code>，用<code>A</code>中相应的<code>B</code>替换这些<code>Q</code>。在无法进一步替换时，则停止。</li>
</ol>
<p>​	约束类型推断的结果是从类型参数<code>P</code>到类型实参<code>A</code>的最终替换映射<code>M</code>，其中在任何<code>A</code>中都没有出现类型参数<code>P</code>。</p>
<p>例如，给定类型参数列表</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>[<span style="color:#e06c75">A</span> <span style="color:#e06c75">any</span>, <span style="color:#e06c75">B</span> []<span style="color:#e06c75">C</span>, <span style="color:#e06c75">C</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">A</span>]
</span></span></code></pre></td></tr></table>
</div>
</div><p>以及为类型参数<code>A</code>提供的单一类型实参<code>int</code>，初始替换映射<code>M</code>包含条目<code>A</code>→<code>int</code>。</p>
<p>​	在<code>第一阶段</code>，类型参数<code>B</code>和<code>C</code>与它们各自约束的核心类型联合起来。这就在<code>M</code>中加入了<code>B</code>→<code>[]C</code>和<code>C</code>→<code>*A</code>的条目。</p>
<p>此时，<code>M</code>中存在两个条目，其右手边是或包含类型参数，而<code>M</code>中存在其他条目：<code>[]C</code>和<code>*A</code>。在<code>第二阶段</code>，这些类型参数被替换成它们各自的类型。这发生在哪个顺序上并不重要。从第一阶段后的<code>M</code>的状态开始：</p>
<pre tabindex="0"><code>A` → `int`, `B` → `[]C`, `C` → `*A
</code></pre><p>用<code>int</code>替换→右边的<code>A</code>。</p>
<pre tabindex="0"><code>A` → `int`, `B` → `[]C`, `C` → `*int
</code></pre><p>用<code>*int</code>替换→右边的<code>C</code>。</p>
<pre tabindex="0"><code>A` → `int`, `B` → `[]*int`, `C` → `*int
</code></pre><p>此时，不可能再进一步替换，该替换映射已满。因此，<code>M</code>代表类型参数到类型实参列表的最终映射。</p>
<h3 id="operators-操作符">Operators 操作符</h3>
<p>操作符将操作数组合成表达式。</p>
<pre tabindex="0"><code>Expression = UnaryExpr | Expression binary_op Expression .
UnaryExpr  = PrimaryExpr | unary_op UnaryExpr .

binary_op  = &#34;||&#34; | &#34;&amp;&amp;&#34; | rel_op | add_op | mul_op .
rel_op     = &#34;==&#34; | &#34;!=&#34; | &#34;&lt;&#34; | &#34;&lt;=&#34; | &#34;&gt;&#34; | &#34;&gt;=&#34; .
add_op     = &#34;+&#34; | &#34;-&#34; | &#34;|&#34; | &#34;^&#34; .
mul_op     = &#34;*&#34; | &#34;/&#34; | &#34;%&#34; | &#34;&lt;&lt;&#34; | &#34;&gt;&gt;&#34; | &#34;&amp;&#34; | &#34;&amp;^&#34; .

unary_op   = &#34;+&#34; | &#34;-&#34; | &#34;!&#34; | &#34;^&#34; | &#34;*&#34; | &#34;&amp;&#34; | &#34;&lt;-&#34; .
</code></pre><p>​	比较操作符将在<a href="#comparison-operators">其他地方</a>讨论。对于其他二元运算符，操作数类型必须是<a href="../PropertiesOfTypesAndValues#type-identity">一致的</a>，除非操作涉及移位或无类型的<a href="../Constants">常量</a>。对于只涉及常量的操作，请参见<a href="#constant-expressions">常量表达式</a>部分。</p>
<p>​	除了移位操作之外，如果一个操作数是<code>无类型</code>常量，而另一个操作数不是，那么该常量将被隐式地<a href="#conversions">转换</a>为另一个操作数的类型。</p>
<p>​	移位表达式中的<code>右操作数</code>必须是<a href="../Types#numeric-types">整数类型</a>，或者是可以用<code>uint</code>类型的值<a href="../PropertiesOfTypesAndValues#representability">表示</a>的<code>无类型</code>常量。如果一个非常量移位表达式的<code>左操作数</code>是一个<code>无类型</code>常量，那么它首先被隐式地转换为假设移位表达式被其左操作数单独替换时的类型。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">29
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">a</span> [<span style="color:#d19a66">1024</span>]<span style="color:#e5c07b">byte</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">s</span> <span style="color:#e5c07b">uint</span> = <span style="color:#d19a66">33</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// The results of the following examples are given for 64-bit ints.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// 以下示例的结果是针对 64-bits 整型给出的。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">i</span> = <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>                   <span style="color:#7f848e">// 1 has type int =&gt; 1 拥有 int 类型 ，i == 8589934592
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">j</span> <span style="color:#e5c07b">int32</span> = <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>             <span style="color:#7f848e">// 1 has type int32; j == 0 =&gt; 1 拥有 int32 类型；j == 0
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">k</span> = <span style="color:#e5c07b">uint64</span>(<span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>)           <span style="color:#7f848e">// 1 has type uint64; k == 1 &lt;&lt;33 =&gt; 1 拥有 uint64 类型；k == 1 &lt;&lt; 33, k == 8589934592
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">m</span> <span style="color:#e5c07b">int</span> = <span style="color:#d19a66">1.0</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>             <span style="color:#7f848e">// 1.0 has type int; m == 1&lt;&lt;33 =&gt; 1.0 拥有 int 类型；m == 1 &lt;&lt; 33, m == 8589934592 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">n</span> = <span style="color:#d19a66">1.0</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">j</span>            <span style="color:#7f848e">// 1.0 has type int32; n == true =&gt; 1.0 拥有 int32 类型；n == true
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">o</span> = <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">==</span> <span style="color:#d19a66">2</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>           <span style="color:#7f848e">// 1 and 2 have type int; o == false =&gt; 1 和 2 拥有 int 类型；o == false
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">p</span> = <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">==</span> <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#d19a66">33</span>          <span style="color:#7f848e">// 1 has type int; p == true =&gt; 1 拥有 int 类型；p == true
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">u</span> = <span style="color:#d19a66">1.0</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>                 <span style="color:#7f848e">// illegal: 1.0 has type float64, cannot shift =&gt; 非法的：1.0 拥有 float64 类型，但不能移位
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">u1</span> = <span style="color:#d19a66">1.0</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">!=</span> <span style="color:#d19a66">0</span>           <span style="color:#7f848e">// illegal: 1.0 has type float64, cannot shift =&gt; 非法的： 1.0 拥有 float64 类型，但不能移位
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">u2</span> = <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">!=</span> <span style="color:#d19a66">1.0</span>           <span style="color:#7f848e">// illegal: 1 has type float64, cannot shift =&gt; 非法的： 1 拥有 float64 类型，但不能移位
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">v1</span> <span style="color:#e5c07b">float32</span> = <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>          <span style="color:#7f848e">// illegal: 1 has type float32, cannot shift =&gt; 非法的：1 拥有 float32 类型，但不能移位
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">v2</span> = <span style="color:#e5c07b">string</span>(<span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>)          <span style="color:#7f848e">// illegal: 1 is converted to a string, cannot shift =&gt; 非法的： 1 被转换成 string 类型，但不能移位
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">w</span> <span style="color:#e5c07b">int64</span> = <span style="color:#d19a66">1.0</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#d19a66">33</span>          <span style="color:#7f848e">// 1.0&lt;&lt;33 is a constant shift expression; w == 1&lt;&lt;33 =&gt; 1.0 &lt;&lt; 33 是一个常量移位表达式；w == 1 &lt;&lt; 33, w == 8589934592
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span> = <span style="color:#e06c75">a</span>[<span style="color:#d19a66">1.0</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>]              <span style="color:#7f848e">// panics: 1.0 has type int, but 1&lt;&lt;33 overflows array bounds =&gt; 恐慌：1.0 拥有 int 类型，但 1 &lt;&lt; 33 溢出了数组的边界
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">b</span> = <span style="color:#e5c07b">make</span>([]<span style="color:#e5c07b">byte</span>, <span style="color:#d19a66">1.0</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>)   <span style="color:#7f848e">// 1.0 has type int; len(b) == 1&lt;&lt;33 =&gt; 1.0 拥有 int 类型；len(b) == 1 &lt;&lt; 33
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// The results of the following examples are given for 32-bit ints,
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// which means the shifts will overflow.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// 以下示例的结果是针对 32-bits 整型给出。 这意味着移位将会溢出。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">mm</span> <span style="color:#e5c07b">int</span> = <span style="color:#d19a66">1.0</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>            <span style="color:#7f848e">// 1.0 has type int; mm == 0 =&gt; 1.0 拥有 int 类型；mm == 0
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">oo</span> = <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">==</span> <span style="color:#d19a66">2</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>          <span style="color:#7f848e">// 1 and 2 have type int; oo == true =&gt; 1 和 2 拥有 int 类型； oo == true
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">pp</span> = <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">==</span> <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#d19a66">33</span>         <span style="color:#7f848e">// illegal: 1 has type int, but 1&lt;&lt;33 overflows int =&gt; 非法的：1 拥有 int 类型，但 1 &lt;&lt; 33 溢出了 int 的范围
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">xx</span> = <span style="color:#e06c75">a</span>[<span style="color:#d19a66">1.0</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>]             <span style="color:#7f848e">// 1.0 has type int; xx == a[0] =&gt; 1.0 拥有 int 类型；xx == a[0] 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">bb</span> = <span style="color:#e5c07b">make</span>([]<span style="color:#e5c07b">byte</span>, <span style="color:#d19a66">1.0</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>)  <span style="color:#7f848e">// 1.0 has type int; len(bb) == 0 =&gt; 1.0 拥有 int 类型；len(bb) == 0
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>=&gt; 仍有疑问？？</p>
<h4 id="operator-precedence-优先级运算符">Operator precedence 优先级运算符</h4>
<p>​	一元运算符的优先级最高。由于<code>++</code>和<code>--</code>运算符构成的是语句，而不是表达式，因此它们不属于运算符等级体系。因此，语句<code>*p++</code>与<code>(*p)++</code>相同。</p>
<p>​	二元运算符有五个优先级别。<code>乘法运算符</code>绑定最强，其次是<code>加法运算符</code>、比较运算符、<code>&amp;&amp;</code>（逻辑AND），最后是<code>||</code>（逻辑OR）。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">Precedence</span>    <span style="color:#e06c75">Operator</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d19a66">5</span>             <span style="color:#56b6c2">*</span>  <span style="color:#56b6c2">/</span>  <span style="color:#56b6c2">%</span>  <span style="color:#56b6c2">&lt;&lt;</span>  <span style="color:#56b6c2">&gt;&gt;</span>  <span style="color:#56b6c2">&amp;</span>  <span style="color:#56b6c2">&amp;^</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d19a66">4</span>             <span style="color:#56b6c2">+</span>  <span style="color:#56b6c2">-</span>  |  ^
</span></span><span style="display:flex;"><span>    <span style="color:#d19a66">3</span>             <span style="color:#56b6c2">==</span>  <span style="color:#56b6c2">!=</span>  &lt;  <span style="color:#56b6c2">&lt;=</span>  &gt;  <span style="color:#56b6c2">&gt;=</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d19a66">2</span>             <span style="color:#56b6c2">&amp;&amp;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#d19a66">1</span>             <span style="color:#56b6c2">||</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	优先级相同的二元运算符按从左到右的顺序结合。例如，<code>x / y * z</code>等同于<code>(x / y)* z</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#56b6c2">+</span><span style="color:#e06c75">x</span>
</span></span><span style="display:flex;"><span><span style="color:#d19a66">23</span> <span style="color:#56b6c2">+</span> <span style="color:#d19a66">3</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">x</span>[<span style="color:#e06c75">i</span>]
</span></span><span style="display:flex;"><span><span style="color:#e06c75">x</span> <span style="color:#56b6c2">&lt;=</span> <span style="color:#61afef;font-weight:bold">f</span>()
</span></span><span style="display:flex;"><span>^<span style="color:#e06c75">a</span> <span style="color:#56b6c2">&gt;&gt;</span> <span style="color:#e06c75">b</span>
</span></span><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">f</span>() <span style="color:#56b6c2">||</span> <span style="color:#61afef;font-weight:bold">g</span>()
</span></span><span style="display:flex;"><span><span style="color:#e06c75">x</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">y</span><span style="color:#56b6c2">+</span><span style="color:#d19a66">1</span> <span style="color:#56b6c2">&amp;&amp;</span> <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">chanInt</span> &gt; <span style="color:#d19a66">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="arithmetic-operators-算术运算符">Arithmetic operators 算术运算符</h3>
<p>​	算术运算符适用于数字值，产生的结果<code>与第一个操作数的类型</code>相同。四个标准的算术运算符（<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>）适用于<a href="../Types#numeric-types">整型</a>、<a href="../Types#numeric-types">浮点型</a>和<a href="../Types#numeric-types">复数型</a>；<code>+</code>也适用于<a href="../Types#string-types">字符串</a>。位逻辑运算符和移位运算符只适用于整型。</p>
<pre tabindex="0"><code>+    sum        （和）            integers, floats, complex values, strings
-    difference （差）            integers, floats, complex values
*    product    （积）            integers, floats, complex values
/    quotient   （商）            integers, floats, complex values
%    remainder  （余）            integers

&amp;    bitwise AND            integers
|    bitwise OR             integers
^    bitwise XOR            integers
&amp;^   bit clear (AND NOT)    integers

&lt;&lt;   left shift             integer &lt;&lt; integer &gt;= 0
&gt;&gt;   right shift            integer &gt;&gt; integer &gt;= 0
</code></pre><p>​	如果操作数类型是<a href="#type-parameter-declarations">类型参数</a>，那么操作数必须适用于该类型集中的每个类型。操作数被表示为类型参数被<a href="#instantiations">实例化</a>的类型实参的值，并且操作以该类型实参的精度进行计算。例如，给定一个函数：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#e06c75">dotProduct</span>[<span style="color:#e06c75">F</span> ~<span style="color:#e5c07b">float32</span>|~<span style="color:#e5c07b">float64</span>](<span style="color:#e06c75">v1</span>, <span style="color:#e06c75">v2</span> []<span style="color:#e06c75">F</span>) <span style="color:#e06c75">F</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">var</span> <span style="color:#e06c75">s</span> <span style="color:#e06c75">F</span>
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span>, <span style="color:#e06c75">x</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">range</span> <span style="color:#e06c75">v1</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">y</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">v2</span>[<span style="color:#e06c75">i</span>]
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">s</span> <span style="color:#56b6c2">+=</span> <span style="color:#e06c75">x</span> <span style="color:#56b6c2">*</span> <span style="color:#e06c75">y</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#e06c75">s</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>x * y</code>的乘积 和 <code>s += x * y</code>的加法分别以<code>float32</code>或<code>float64</code>精度计算，这取决于<code>F</code>的类型实参。</p>
<h4 id="integer-operators-整数运算符">Integer operators 整数运算符</h4>
<p>对于两个整数值<code>x</code>和<code>y</code>，它们的整数商<code>q = x / y</code>和余数<code>r = x % y</code>满足以下关系：</p>
<pre tabindex="0"><code>x = q*y + r  and  |r| &lt; |y|
</code></pre><p>with <code>x / y</code>被截断到零（&quot;<a href="https://en.wikipedia.org/wiki/Modulo_operation" target="_blank" rel="noopener">截断除法</a>&quot;）。</p>
<pre tabindex="0"><code> x     y     x / y     x % y
 5     3       1         2
-5     3      -1        -2
 5    -3      -1         2
-5    -3       1        -2
</code></pre><p>​	这条规则有一个例外：如果）<code>被除数</code>（dividend<code>x</code>是<code>x</code>的<code>int</code>类型的最负值，那么商<code>q = x / -1</code>就等于<code>x</code>（而<code>r = 0</code>），这是由于二元补码的<a href="#integer-overflow">整数溢出</a>：</p>
<pre tabindex="0"><code>                         x, q
int8                     -128
int16                  -32768
int32             -2147483648
int64    -9223372036854775808
</code></pre><p>​	如果<code>除数</code>（divisor）是一个<a href="../Constants">常量</a>，那么它一定不能为零。如果除数在运行时为零，就会发生<a href="../Run-timePanics">运行时恐慌</a>。如果除数是非负数，并且除数是2的常数幂，除法可以用<code>右移</code>来代替，计算余数可以用<code>按位与</code>操作来代替。</p>
<pre tabindex="0"><code> x     x / 4     x % 4     x &gt;&gt; 2     x &amp; 3
 11      2         3         2          3
-11     -2        -3        -3          1
</code></pre><p>​	移位运算符通过右操作数指定的<code>移位计数</code>对左操作数进行移位，<code>移位计数</code>必须为非负数。如果<code>移位计数</code>在运行时为负数，就会发生<a href="../Run-timePanics">运行时恐慌</a>。如果<code>左操作数</code>是<code>有符号整数</code>，移位操作符实现<code>算术移位</code>；如果是<code>无符号整数</code>，则实现<code>逻辑移位</code>。<code>移位计数</code>没有上限。<code>移位计数</code>为<code>n</code>的移位行为就像左操作数被<code>1</code>移了<code>n</code>次。因此，<code>x&lt;&lt;1</code>与<code>x*2</code>相同，<code>x&gt;&gt;1</code>与<code>x/2</code>相同（但向右移位被截断到负无穷大）。</p>
<p>对于整数操作数，一元运算符<code>+</code>、<code>-</code>和<code>^</code>的定义如下：</p>
<pre tabindex="0"><code>+x                          is 0 + x
-x    negation              is 0 - x
^x    bitwise complement    is m ^ x  with m = &#34;all bits set to 1&#34; for unsigned x
                                      and  m = -1 for signed x
</code></pre><h4 id="integer-overflow-整数溢出">Integer overflow 整数溢出</h4>
<p>​	对于<a href="../Types#numeric-types">无符号整型值</a>，<code>+</code>、<code>-</code>、<code>*</code>和<code>&lt;&lt;</code>运算是以<code>2n</code>为模来计算的，其中<code>n</code>是无符号整型的位宽。广义上讲，这些无符号整型操作<code>在溢出时丢弃高位</code>，程序可以依靠 &ldquo;<code>wrap around</code>&quot;。</p>
<p>​	对于<code>有符号整型值</code>，<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>和<code>&lt;&lt;</code>运算<code>可以合法地溢出</code>，其产生的值是存在的，并且可以被有符号整型表示法、其操作和操作数明确地定义。溢出不会引起<a href="../Run-timePanics">运行时恐慌</a>。在假设不发生溢出的情况下，编译器可能不会优化代码。例如，它不会假设<code>x&lt;x+1</code>总是真的。</p>
<h4 id="floating-point-operators-浮点运算符">Floating-point operators 浮点运算符</h4>
<p>​	对于浮点数和复数，<code>+x</code>与<code>x</code>相同，而<code>-x</code>是负的<code>x</code>。浮点数或复数除以0的结果，在IEEE-754标准中没有规定；是否会发生<a href="../Run-timePanics">运行时恐慌</a>是由具体实现决定的。</p>
<p>An implementation may combine multiple floating-point operations into a single fused operation, possibly across statements, and produce a result that differs from the value obtained by executing and rounding the instructions individually. An explicit <a href="https://go.dev/ref/spec#Numeric_types" target="_blank" rel="noopener">floating-point type</a> <a href="https://go.dev/ref/spec#Conversions" target="_blank" rel="noopener">conversion</a> rounds to the precision of the target type, preventing fusion that would discard that rounding.</p>
<p>​	某些实现可能会将多个浮点运算合并为一个单一的融合运算，可能会跨越语句，产生的结果与单独执行和舍入指令得到的值不同。明确的<a href="#conversions">浮点类型转换</a>是按照目标类型的精度进行舍入的，这样就可以避免融合时放弃舍入的做法。=&gt; 仍有疑问？？</p>
<p>​	例如，一些体系架构提供了一个 &ldquo;<code>fused multiply and add</code>&quot;（<code>FMA</code>）指令，其在计算<code>x*y+z</code>时，不对中间结果<code>x*y</code>进行舍入。这些例子显示了Go的实现何时可以使用该指令：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#7f848e">// FMA allowed for computing r, because x*y is not explicitly rounded: 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// =&gt; FMA 允许被用来计算 r, 因为 x*y 不会被明确地进行舍入：
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">r</span>  = <span style="color:#e06c75">x</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">y</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">z</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">r</span>  = <span style="color:#e06c75">z</span>;   <span style="color:#e06c75">r</span> <span style="color:#56b6c2">+=</span> <span style="color:#e06c75">x</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">y</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">t</span>  = <span style="color:#e06c75">x</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">y</span>; <span style="color:#e06c75">r</span> = <span style="color:#e06c75">t</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">z</span>
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">*</span><span style="color:#e06c75">p</span> = <span style="color:#e06c75">x</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">y</span>; <span style="color:#e06c75">r</span> = <span style="color:#56b6c2">*</span><span style="color:#e06c75">p</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">z</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">r</span>  = <span style="color:#e06c75">x</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">y</span> <span style="color:#56b6c2">+</span> <span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">z</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// FMA disallowed for computing r, because it would omit rounding of x*y:
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// =&gt; FMA 不允许被用来计算 r, 因为它会省略 x*y 的舍入：
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">r</span>  = <span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">x</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">y</span>) <span style="color:#56b6c2">+</span> <span style="color:#e06c75">z</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">r</span>  = <span style="color:#e06c75">z</span>; <span style="color:#e06c75">r</span> <span style="color:#56b6c2">+=</span> <span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">x</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">y</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">t</span>  = <span style="color:#e5c07b">float64</span>(<span style="color:#e06c75">x</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">y</span>); <span style="color:#e06c75">r</span> = <span style="color:#e06c75">t</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">z</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="string-concatenation-字符串连接">String concatenation 字符串连接</h4>
<p>​	字符串可以使用<code>+</code>运算符或<code>+=</code>赋值运算符进行连接：</p>
<pre tabindex="0"><code>s := &#34;hi&#34; + string(c)
s += &#34; and good bye&#34;
</code></pre><p>​	字符串加法通过连接操作数创建一个新的字符串。</p>
<h3 id="comparison-operators-比较运算符">Comparison operators 比较运算符</h3>
<p>​	比较运算符比较两个操作数，并产生一个无类型布尔值。</p>
<pre tabindex="0"><code>==    equal
!=    not equal
&lt;     less
&lt;=    less or equal
&gt;     greater
&gt;=    greater or equal
</code></pre><p>​	在任何比较中，第一个操作数必须是<a href="../PropertiesOfTypesAndValues#assignability">可分配</a>给第二个操作数的类型，反之亦然。</p>
<p>​	相等运算符<code>==</code>和<code>!=</code>适用于可比较的操作数。排序运算符<code>&lt;</code>, <code>&lt;=</code>, <code>&gt;</code>, 和<code>&gt;=</code>适用于被排序的操作数。这些术语和比较结果的定义如下：</p>
<ul>
<li>布尔值是可比较的。如果两个布尔值都是<code>true</code>或者都是<code>false</code>，那么它们是相等的。</li>
<li>按照通常的方式，整数值是可比较的并且是可排序的。</li>
<li>按照IEEE-754标准的定义，浮点值是可比较的并且是可排序的。</li>
<li>复数值是可比较的。如果<code>real(u) == real(v)</code>和<code>imag(u) == imag(v)</code>，则这两个复数值<code>u</code>和<code>v</code>是相等的。</li>
<li>字符串值是可（按字节顺序）比较的并且是可（按字节顺序）排序的。</li>
<li>指针值是可比较的。如果两个指针值指向同一个变量，或者两个指针值都是<code>nil</code>，则它们的值是相等的。指向不同的<a href="../SystemConsiderations#size-and-alignment-guarantees">零尺寸</a>变量的指针值可能相等，也可能不相等。</li>
<li>通道值是可比较的。如果两个通道是由同一个调用<a href="../Built-inFunctions#making-slices-maps-and-channels">make</a>创建的，或者它们的值都为<code>nil</code>，则它们的值是相等的。</li>
<li>接口值是可比较的。如果两个接口值有<a href="../PropertiesOfTypesAndValues#type-identity">一致的</a>动态类型和相同的动态值，或者两者的值都是<code>nil</code>，则它们的值是相等的。</li>
<li>非接口类型 <code>X</code> 的值 <code>x</code> 和接口类型 <code>T</code> 的值 <code>t</code> ，在 <code>X</code> 类型的值是可比较的并且 <code>X</code> <a href="../Types#implementing-an-interface">实现</a> <code>T</code> 时是可比较的。如果 <code>t</code> 的动态类型等于 <code>X</code>，且 <code>t</code> 的动态值等于 <code>x</code>，则它们是相等的。</li>
<li>如果结构体值的所有字段都是可比较的，那么结构体值就是可比较的。如果两个结构体值对应的非<a href="../DeclarationsAndScope#blank-identifier">空白</a>字段相等，那么它们就是相等的。</li>
<li>如果数组元素类型的值是可比较的，那么数组值是可比较的。如果两个数组的对应元素是相等的，那么这两个数组值就是相等的。</li>
</ul>
<p>​	对两个动态类型相同的接口值进行比较，如果它们的类型值不具有可比性，则会引起<a href="../Run-timePanics">运行时恐慌</a>。这种行为不仅适用于直接的接口值比较，也适用于比较接口值的数组或带有接口值字段的结构体。</p>
<p>​	<code>切片值、映射值和函数值是不可比较的</code>。然而，作为一种特殊情况，切片值、映射值或函数值可以与预先声明的标识符<code>nil</code>比较。指针值、通道值和接口值与<code>nil</code>的比较也是允许的，并遵循上述的通用规则。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">const</span> <span style="color:#e06c75">c</span> = <span style="color:#d19a66">3</span> &lt; <span style="color:#d19a66">4</span>            <span style="color:#7f848e">// c is the untyped boolean constant true =&gt; c 是无类型的布尔常量 true
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">MyBool</span> <span style="color:#e5c07b">bool</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// The result of a comparison is an untyped boolean. =&gt; 比较的结果为一个无类型的布尔值。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#7f848e">// The usual assignment rules apply. =&gt; 使用通用赋值规则。
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">b3</span>        = <span style="color:#e06c75">x</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">y</span> <span style="color:#7f848e">// b3 has type bool =&gt; b3 拥有 bool 类型
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">b4</span> <span style="color:#e5c07b">bool</span>   = <span style="color:#e06c75">x</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">y</span> <span style="color:#7f848e">// b4 has type bool =&gt; b4 拥有 bool 类型
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">b5</span> <span style="color:#e06c75">MyBool</span> = <span style="color:#e06c75">x</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">y</span> <span style="color:#7f848e">// b5 has type MyBool =&gt; b5 拥有 MyBool 类型
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="logical-operators-逻辑运算符">Logical operators 逻辑运算符</h3>
<p>​	逻辑运算符适用于<a href="../Types#boolean-types">布尔</a>值，并产生一个与操作数相同类型的结果。右操作数是按条件进行求值的。</p>
<pre tabindex="0"><code>&amp;&amp;    conditional AND    p &amp;&amp; q  is  &#34;if p then q else false&#34;
||    conditional OR     p || q  is  &#34;if p then true else q&#34;
!     NOT                !p      is  &#34;not p&#34;
</code></pre><h3 id="address-operators-地址运算符">Address operators 地址运算符</h3>
<p>​	对于类型为<code>T</code>的操作数<code>x</code>，寻址操作<code>&amp;x</code>产生一个类型为<code>*T</code>的指针指向<code>x</code>。该操作数<code>x</code>必须是可寻址的，也就是说，它要么是一个变量、指针间接（pointer indirection）或<code>对切片的索引操作（slice indexing operation，是一个名词）</code>；要么是一个可寻址结构体操作数的字段选择器；要么是一个可寻址数组的数组索引操作。作为可寻址要求的一个例外，<code>x</code>也可以是一个（可能是括号内的）<a href="#composite-literals">复合字面量</a>。如果对<code>x</code>的求值会引起<a href="../Run-timePanics">运行时恐慌</a>，那么对<code>&amp;x</code>的求值也会引起<a href="../Run-timePanics">运行时恐慌</a>。</p>
<p>​	对于指针类型<code>*T</code>的操作数<code>x</code>，指针间接<code>*x</code>表示<code>x</code>所指向的<code>T</code>类型的<a href="">变量</a>，如果<code>x</code>是<code>nil</code>，试图求值<code>*x</code>将导致<a href="../Run-timePanics">运行时恐慌</a>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">x</span>
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">a</span>[<span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#d19a66">2</span>)]
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">Point</span>{<span style="color:#d19a66">2</span>, <span style="color:#d19a66">3</span>}
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">*</span><span style="color:#e06c75">p</span>
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">*</span><span style="color:#61afef;font-weight:bold">pf</span>(<span style="color:#e06c75">x</span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span> <span style="color:#56b6c2">*</span><span style="color:#e5c07b">int</span> = <span style="color:#e5c07b">nil</span>
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">*</span><span style="color:#e06c75">x</span>   <span style="color:#7f848e">// causes a run-time panic =&gt; 导致一个 运行时恐慌
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#56b6c2">&amp;*</span><span style="color:#e06c75">x</span>  <span style="color:#7f848e">// causes a run-time panic =&gt; 导致一个 运行时恐慌
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="receive-operator-接收操作符">Receive operator 接收操作符</h3>
<p>​	对于<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a>为<a href="../Types#channel-types">通道</a>的操作数<code>ch</code>，接收操作<code>&lt;-ch</code>的值是从通道<code>ch</code>中接收的值，通道方向必须允许接收操作，接收操作的类型是通道的元素类型。这个表达式会阻塞，直到有一个可用的值。从一个 <code>nil</code>的通道接收时，将永远阻塞。在一个<a href="../Built-inFunctions#close">已经关闭</a>的通道上的接收操作总是可以立即进行，并在任何先前发送的值被接收后，产生一个该元素类型的<a href="../ProgramInitializationAndExecution#the-zero-value">零值</a>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">v1</span> <span style="color:#56b6c2">:=</span> <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">ch</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">v2</span> = <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">ch</span>
</span></span><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">ch</span>)
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">strobe</span>  <span style="color:#7f848e">// wait until clock pulse and discard received value =&gt; 等待，直到时钟脉冲并且丢弃接收值
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	在<a href="../Statements#assignment-statement">赋值语句</a>或特殊形式的初始化中使用的一个接收表达式</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">x</span>, <span style="color:#e06c75">ok</span> = <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">ch</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">x</span>, <span style="color:#e06c75">ok</span> <span style="color:#56b6c2">:=</span> <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">ch</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span>, <span style="color:#e06c75">ok</span> = <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">ch</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span>, <span style="color:#e06c75">ok</span> <span style="color:#e06c75">T</span> = <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">ch</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>将产生一个额外的无类型布尔值结果，报告通信是否成功。如果收到的值是由一个成功的发送操作传递给通道的，那么<code>ok</code>的值为<code>true</code>，如果是一个因为通道关闭且空而产生的零值，则为<code>false</code>。</p>
<h3 id="conversions-转换">Conversions 转换</h3>
<p>​	转换将表达式的<a href="../Types">类型</a>改变为转换所指定的类型。转换可以出现在源文件中的字面量上，也可以隐含在由表达式所在的上下文。</p>
<p>​	显式转换是<code>T(x)</code>形式的表达式，其中<code>T</code>是一个类型，<code>x</code>是可以被转换为<code>T</code>类型的表达式。</p>
<pre tabindex="0"><code>Conversion = Type &#34;(&#34; Expression [ &#34;,&#34; ] &#34;)&#34; .
</code></pre><p>​	如果类型以运算符<code>*</code>或<code>&lt;-</code>开头，或者如果类型以关键字<code>func</code>开头，并且没有结果列表，那么在必要时必须用<code>圆括号</code>括起来，以避免产生歧义：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#56b6c2">*</span><span style="color:#61afef;font-weight:bold">Point</span>(<span style="color:#e06c75">p</span>)        <span style="color:#7f848e">// same as *(Point(p))
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>(<span style="color:#56b6c2">*</span><span style="color:#e06c75">Point</span>)(<span style="color:#e06c75">p</span>)      <span style="color:#7f848e">// p is converted to *Point
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#56b6c2">&lt;-</span><span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>(<span style="color:#e06c75">c</span>)    <span style="color:#7f848e">// same as &lt;-(chan int(c))
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>(<span style="color:#56b6c2">&lt;-</span><span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>)(<span style="color:#e06c75">c</span>)  <span style="color:#7f848e">// c is converted to &lt;-chan int
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">func</span>()(<span style="color:#e06c75">x</span>)        <span style="color:#7f848e">// function signature func() x
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>(<span style="color:#c678dd">func</span>())(<span style="color:#e06c75">x</span>)      <span style="color:#7f848e">// x is converted to func()
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>(<span style="color:#c678dd">func</span>() <span style="color:#e5c07b">int</span>)(<span style="color:#e06c75">x</span>)  <span style="color:#7f848e">// x is converted to func() int
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">func</span>() <span style="color:#e5c07b">int</span>(<span style="color:#e06c75">x</span>)    <span style="color:#7f848e">// x is converted to func() int (unambiguous)
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	一个<a href="../Constants">常量</a>值<code>x</code>可以被转换为<code>T</code>类型，如果<code>x</code>可以用<code>T</code>的一个值来<a href="../PropertiesOfTypesAndValues#representability">表示</a>的话。作为一种特殊情况，可以使用 与 非常量<code>x</code><a href="#conversions-to-and-from-a-string-type">相同的规则</a>显式地将整数常量<code>x</code>转换为<a href="../Types#string-types">字符串类型</a>。</p>
<p>​	将常量转换为非<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a>的类型，会得到一个有类型的常量。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">uint</span>(<span style="color:#e5c07b">iota</span>)               <span style="color:#7f848e">// iota value of type uint =&gt; uint 类型的 iota 值 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">float32</span>(<span style="color:#d19a66">2.718281828</span>)     <span style="color:#7f848e">// 2.718281828 of type float32 =&gt; float32 类型的 2.718281828
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">complex128</span>(<span style="color:#d19a66">1</span>)            <span style="color:#7f848e">// 1.0 + 0.0i of type complex128 =&gt;  complex128 类型的 1.0 + 0.0i
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">float32</span>(<span style="color:#d19a66">0.49999999</span>)      <span style="color:#7f848e">// 0.5 of type float32 =&gt;  float32 类型的 0.5 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">float64</span>(<span style="color:#56b6c2">-</span><span style="color:#d19a66">1e-1000</span>)        <span style="color:#7f848e">// 0.0 of type float64 =&gt;  float64 类型的0.0 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">string</span>(<span style="color:#98c379">&#39;x&#39;</span>)              <span style="color:#7f848e">// &#34;x&#34; of type string =&gt;  string 类型的 &#34;x&#34; 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">string</span>(<span style="color:#d19a66">0x266c</span>)           <span style="color:#7f848e">// &#34;♬&#34; of type string =&gt; string 类型的 &#34;♬&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#61afef;font-weight:bold">myString</span>(<span style="color:#98c379">&#34;foo&#34;</span> <span style="color:#56b6c2">+</span> <span style="color:#98c379">&#34;bar&#34;</span>)  <span style="color:#7f848e">// &#34;foobar&#34; of type myString =&gt; myString 类型的 &#34;foobar&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">string</span>([]<span style="color:#e5c07b">byte</span>{<span style="color:#98c379">&#39;a&#39;</span>})      <span style="color:#7f848e">// not a constant: []byte{&#39;a&#39;} is not a constant =&gt; 不是常量：[]byte{&#39;a&#39;} 不是常量
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>(<span style="color:#56b6c2">*</span><span style="color:#e5c07b">int</span>)(<span style="color:#e5c07b">nil</span>)              <span style="color:#7f848e">// not a constant: nil is not a constant, *int is not a boolean, numeric, or string type =&gt; 不是常量：nil 不是常量，*int 不是布尔、数值、字符串类型
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">int</span>(<span style="color:#d19a66">1.2</span>)                 <span style="color:#7f848e">// illegal: 1.2 cannot be represented as an int =&gt; 非法的：1.2 不能被 int 表示
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">string</span>(<span style="color:#d19a66">65.0</span>)             <span style="color:#7f848e">// illegal: 65.0 is not an integer constant =&gt; 非法的：65.0 不是整数常量
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	将常量转换为一个类型参数会产生一个该类型的非常量值，该值表示为类型参数<a href="#instantiations">实例化</a>时所带的类型实参的值。例如，给定一个函数：</p>
<pre tabindex="0"><code>func f[P ~float32|~float64]() {
	… P(1.1) …
}
</code></pre><p>转换<code>P(1.1)</code>的结果是一个<code>P</code>类型的非常量值，而值<code>1.1</code>被表示为<code>float32</code>或<code>float64</code>，这取决于<code>f</code>的类型参数。因此，如果<code>f</code>被实例化为<code>float32</code>类型，那么表达式<code>P(1.1)+1.2</code>的数值会用与非常量<code>float32</code>加法相同的精度进行计算。</p>
<p>非常量值<code>x</code>可以在以下的任何情况下被转换为<code>T</code>类型：</p>
<ul>
<li><code>x</code>可以被<a href="../PropertiesOfTypesAndValues#assignability">分配</a>给<code>T</code>。</li>
<li>忽略结构体标签（见下文），<code>x</code>的类型和<code>T</code>不是<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a>，但有<a href="../PropertiesOfTypesAndValues#type-identity">一致的</a><a href="../Types">底层类型</a>。</li>
<li>忽略结构体标签（见下文），<code>x</code>的类型和<code>T</code>是指针类型，不是<a href="../Types">命名类型</a>，它们的指针基类型不是类型参数，但有一致的底层类型。</li>
<li><code>x</code>的类型和<code>T</code>都是整型或浮点型。</li>
<li><code>x</code>的类型和<code>T</code>都是复数类型。</li>
<li><code>x</code>是一个整型、字节型、符文型的切片，<code>T</code>是一个字符串类型。</li>
<li><code>x</code>是一个字符串类型，<code>T</code>是一个字节型、符文型的切片。</li>
<li><code>x</code>是一个切片，<code>T</code>是一个指向数组的指针，而且切片和数组的类型有<a href="../PropertiesOfTypesAndValues#type-identity">一致的</a>元素类型。</li>
</ul>
<p>​	此外，如果<code>T</code>或<code>x</code>的类型<code>V</code>是类型参数，如果满足以下条件之一，<code>x</code>也可以被转换为<code>T</code>类型：</p>
<ul>
<li><code>V</code>和<code>T</code>都是类型参数，并且<code>V</code>的类型集中的每个类型的值都可以转换为<code>T</code>的类型集中的每个类型。</li>
<li>只有<code>V</code>是一个类型参数，并且<code>V</code>的类型集中的每个类型的值都可以转换为<code>T</code>。</li>
<li>只有<code>T</code>是一个类型参数，并且<code>x</code>可以转换为<code>T</code>的类型集中的每个类型。</li>
</ul>
<p>​	为了转换的目的，在比较结构体类型的是否一致时，<a href="../Types#struct-types">结构体标签</a>被忽略：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Person</span> <span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Name</span>    <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Address</span> <span style="color:#56b6c2">*</span><span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">Street</span> <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">City</span>   <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">data</span> <span style="color:#56b6c2">*</span><span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Name</span>    <span style="color:#e5c07b">string</span> <span style="color:#98c379">`json:&#34;name&#34;`</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">Address</span> <span style="color:#56b6c2">*</span><span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">Street</span> <span style="color:#e5c07b">string</span> <span style="color:#98c379">`json:&#34;street&#34;`</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">City</span>   <span style="color:#e5c07b">string</span> <span style="color:#98c379">`json:&#34;city&#34;`</span>
</span></span><span style="display:flex;"><span>	} <span style="color:#98c379">`json:&#34;address&#34;`</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">person</span> = (<span style="color:#56b6c2">*</span><span style="color:#e06c75">Person</span>)(<span style="color:#e06c75">data</span>)  <span style="color:#7f848e">// ignoring tags, the underlying types are identical =&gt; 忽略标签，底层类型是一致的
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	数值类型之间或与字符串类型之间的（非常量）转换有特殊的规则。这些转换可能会改变<code>x</code>的表示，并产生运行时间成本。所有其他的转换只改变<code>x</code>的类型而不改变其表示。</p>
<p>​	没有语言机制可以在<code>指针和整型之间进行转换</code>。<a href="https://go.dev/ref/spec#Package_unsafe" target="_blank" rel="noopener">unsafe</a>包在受限制的情况下实现了这个功能。</p>
<h4 id="conversions-between-numeric-types-数值型之间的转换">Conversions between numeric types 数值型之间的转换</h4>
<p>对于非常量数值的转换，适用以下规则：</p>
<ol>
<li>当在整型之间转换时，如果数值是有符号的<a href="../Types#numeric-types">整型</a>，那么它被符号位扩展到隐式的无限精度；否则它被零扩展。然后，它被截断以适应结果类型的大小。例如，如果<code>v := uint16(0x10F0)</code>，那么<code>uint32(int8(v)) == 0xFFFFFFF0</code>。该转换总是产生一个有效的值；没有溢出的迹象。</li>
<li>当把<a href="../Types#numeric-types">浮点型</a>数值转换为整型时，小数会被丢弃（向零截断）。</li>
<li>当将一个整型或浮点型数值转换为浮点型，或将一个<a href="../Types#numeric-types">复数型</a>数值转换为另一个复数类型时，结果值被舍入到目标类型所指定的精度。例如，<code>float32</code>类型的变量<code>x</code>的值可能会使用超出IEEE-754 32位数的额外精度来存储，但是<code>float32(x)</code>表示将<code>x</code>的值舍入到<code>32</code>位精度的结果。同样地，<code>x + 0.1</code>可能使用超过<code>32</code>位的精度，但是<code>float32(x + 0.1)</code>则不会。</li>
</ol>
<p>​	在所有涉及浮点值或复数值的非常量转换中，如果结果类型不能表示该值，转换仍会成功，但结果值取决于实现。</p>
<h4 id="conversions-to-and-from-a-string-type-与字符串类型的转换">Conversions to and from a string type 与字符串类型的转换</h4>
<ol>
<li>
<p>将有符号或无符号的整型值转换为字符串类型，会产生一个包含该整型值的UTF-8表示的字符串。在有效的Unicode码点范围之外的值会被转换为<code>&quot;\uFFFD&quot;</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">string</span>(<span style="color:#98c379">&#39;a&#39;</span>)       <span style="color:#7f848e">// &#34;a&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">string</span>(<span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span>)        <span style="color:#7f848e">// &#34;\ufffd&#34; == &#34;\xef\xbf\xbd&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">string</span>(<span style="color:#d19a66">0xf8</span>)      <span style="color:#7f848e">// &#34;\u00f8&#34; == &#34;ø&#34; == &#34;\xc3\xb8&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">myString</span> <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">myString</span>(<span style="color:#d19a66">0x65e5</span>)  <span style="color:#7f848e">// &#34;\u65e5&#34; == &#34;日&#34; == &#34;\xe6\x97\xa5&#34;
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>将字节切片转换为字符串类型，可以得到一个字符串，其连续的字节是该切片的元素。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">string</span>([]<span style="color:#e5c07b">byte</span>{<span style="color:#98c379">&#39;h&#39;</span>, <span style="color:#98c379">&#39;e&#39;</span>, <span style="color:#98c379">&#39;l&#39;</span>, <span style="color:#98c379">&#39;l&#39;</span>, <span style="color:#98c379">&#39;\xc3&#39;</span>, <span style="color:#98c379">&#39;\xb8&#39;</span>})   <span style="color:#7f848e">// &#34;hellø&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">string</span>([]<span style="color:#e5c07b">byte</span>{})                                     <span style="color:#7f848e">// &#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">string</span>([]<span style="color:#e5c07b">byte</span>(<span style="color:#e5c07b">nil</span>))                                  <span style="color:#7f848e">// &#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">bytes</span> []<span style="color:#e5c07b">byte</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">string</span>(<span style="color:#e06c75">bytes</span>{<span style="color:#98c379">&#39;h&#39;</span>, <span style="color:#98c379">&#39;e&#39;</span>, <span style="color:#98c379">&#39;l&#39;</span>, <span style="color:#98c379">&#39;l&#39;</span>, <span style="color:#98c379">&#39;\xc3&#39;</span>, <span style="color:#98c379">&#39;\xb8&#39;</span>})    <span style="color:#7f848e">// &#34;hellø&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">myByte</span> <span style="color:#e5c07b">byte</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">string</span>([]<span style="color:#e06c75">myByte</span>{<span style="color:#98c379">&#39;w&#39;</span>, <span style="color:#98c379">&#39;o&#39;</span>, <span style="color:#98c379">&#39;r&#39;</span>, <span style="color:#98c379">&#39;l&#39;</span>, <span style="color:#98c379">&#39;d&#39;</span>, <span style="color:#98c379">&#39;!&#39;</span>})       <span style="color:#7f848e">// &#34;world!&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#61afef;font-weight:bold">myString</span>([]<span style="color:#e06c75">myByte</span>{<span style="color:#98c379">&#39;\xf0&#39;</span>, <span style="color:#98c379">&#39;\x9f&#39;</span>, <span style="color:#98c379">&#39;\x8c&#39;</span>, <span style="color:#98c379">&#39;\x8d&#39;</span>})   <span style="color:#7f848e">// &#34;🌍&#34;
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>将符文切片转换为字符串类型，可以得到一个字符串，即转换为字符串的各个符文值的连接。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">string</span>([]<span style="color:#e5c07b">rune</span>{<span style="color:#d19a66">0x767d</span>, <span style="color:#d19a66">0x9d6c</span>, <span style="color:#d19a66">0x7fd4</span>})   <span style="color:#7f848e">// &#34;\u767d\u9d6c\u7fd4&#34; == &#34;白鵬翔&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">string</span>([]<span style="color:#e5c07b">rune</span>{})                         <span style="color:#7f848e">// &#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">string</span>([]<span style="color:#e5c07b">rune</span>(<span style="color:#e5c07b">nil</span>))                      <span style="color:#7f848e">// &#34;&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">runes</span> []<span style="color:#e5c07b">rune</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">string</span>(<span style="color:#e06c75">runes</span>{<span style="color:#d19a66">0x767d</span>, <span style="color:#d19a66">0x9d6c</span>, <span style="color:#d19a66">0x7fd4</span>})    <span style="color:#7f848e">// &#34;\u767d\u9d6c\u7fd4&#34; == &#34;白鵬翔&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">myRune</span> <span style="color:#e5c07b">rune</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">string</span>([]<span style="color:#e06c75">myRune</span>{<span style="color:#d19a66">0x266b</span>, <span style="color:#d19a66">0x266c</span>})         <span style="color:#7f848e">// &#34;\u266b\u266c&#34; == &#34;♫♬&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#61afef;font-weight:bold">myString</span>([]<span style="color:#e06c75">myRune</span>{<span style="color:#d19a66">0x1f30e</span>})              <span style="color:#7f848e">// &#34;\U0001f30e&#34; == &#34;🌎&#34;
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>将字符串类型的值转换为字节类型的切片，得到一个切片，其连续的元素是字符串的字节。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>[]<span style="color:#e5c07b">byte</span>(<span style="color:#98c379">&#34;hellø&#34;</span>)             <span style="color:#7f848e">// []byte{&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;\xc3&#39;, &#39;\xb8&#39;}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[]<span style="color:#e5c07b">byte</span>(<span style="color:#98c379">&#34;&#34;</span>)                  <span style="color:#7f848e">// []byte{}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">bytes</span>(<span style="color:#98c379">&#34;hellø&#34;</span>)              <span style="color:#7f848e">// []byte{&#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;\xc3&#39;, &#39;\xb8&#39;}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span>[]<span style="color:#61afef;font-weight:bold">myByte</span>(<span style="color:#98c379">&#34;world!&#34;</span>)          <span style="color:#7f848e">// []myByte{&#39;w&#39;, &#39;o&#39;, &#39;r&#39;, &#39;l&#39;, &#39;d&#39;, &#39;!&#39;}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[]<span style="color:#61afef;font-weight:bold">myByte</span>(<span style="color:#61afef;font-weight:bold">myString</span>(<span style="color:#98c379">&#34;🌏&#34;</span>))    <span style="color:#7f848e">// []myByte{&#39;\xf0&#39;, &#39;\x9f&#39;, &#39;\x8c&#39;, &#39;\x8f&#39;}
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>将字符串类型的值转换为符文类型的切片，会得到一个包含该字符串的各个Unicode码点的切片。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>[]<span style="color:#e5c07b">rune</span>(<span style="color:#61afef;font-weight:bold">myString</span>(<span style="color:#98c379">&#34;白鵬翔&#34;</span>))   <span style="color:#7f848e">// []rune{0x767d, 0x9d6c, 0x7fd4}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[]<span style="color:#e5c07b">rune</span>(<span style="color:#98c379">&#34;&#34;</span>)                  <span style="color:#7f848e">// []rune{}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">runes</span>(<span style="color:#98c379">&#34;白鵬翔&#34;</span>)              <span style="color:#7f848e">// []rune{0x767d, 0x9d6c, 0x7fd4}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span>[]<span style="color:#61afef;font-weight:bold">myRune</span>(<span style="color:#98c379">&#34;♫♬&#34;</span>)              <span style="color:#7f848e">// []myRune{0x266b, 0x266c}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>[]<span style="color:#61afef;font-weight:bold">myRune</span>(<span style="color:#61afef;font-weight:bold">myString</span>(<span style="color:#98c379">&#34;🌐&#34;</span>))    <span style="color:#7f848e">// []myRune{0x1f310}
</span></span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h4 id="conversions-from-slice-to-array-pointer-从切片到数组指针的转换">Conversions from slice to array pointer 从切片到数组指针的转换</h4>
<p>​	将切片转换为数组指针，会得到一个指向切片底层数组的指针。如果切片的<a href="../Built-inFunctions#length-and-capacity">长度</a>小于数组的长度，就会发生<a href="../Run-timePanics">运行时恐慌</a>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">make</span>([]<span style="color:#e5c07b">byte</span>, <span style="color:#d19a66">2</span>, <span style="color:#d19a66">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">s0</span> <span style="color:#56b6c2">:=</span> (<span style="color:#56b6c2">*</span>[<span style="color:#d19a66">0</span>]<span style="color:#e5c07b">byte</span>)(<span style="color:#e06c75">s</span>)      <span style="color:#7f848e">// s0 != nil
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">s1</span> <span style="color:#56b6c2">:=</span> (<span style="color:#56b6c2">*</span>[<span style="color:#d19a66">1</span>]<span style="color:#e5c07b">byte</span>)(<span style="color:#e06c75">s</span>[<span style="color:#d19a66">1</span>:])  <span style="color:#7f848e">// &amp;s1[0] == &amp;s[1]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">s2</span> <span style="color:#56b6c2">:=</span> (<span style="color:#56b6c2">*</span>[<span style="color:#d19a66">2</span>]<span style="color:#e5c07b">byte</span>)(<span style="color:#e06c75">s</span>)      <span style="color:#7f848e">// &amp;s2[0] == &amp;s[0]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">s4</span> <span style="color:#56b6c2">:=</span> (<span style="color:#56b6c2">*</span>[<span style="color:#d19a66">4</span>]<span style="color:#e5c07b">byte</span>)(<span style="color:#e06c75">s</span>)      <span style="color:#7f848e">// panics: len([4]byte) &gt; len(s)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">t</span> []<span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">t0</span> <span style="color:#56b6c2">:=</span> (<span style="color:#56b6c2">*</span>[<span style="color:#d19a66">0</span>]<span style="color:#e5c07b">string</span>)(<span style="color:#e06c75">t</span>)    <span style="color:#7f848e">// t0 == nil
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">t1</span> <span style="color:#56b6c2">:=</span> (<span style="color:#56b6c2">*</span>[<span style="color:#d19a66">1</span>]<span style="color:#e5c07b">string</span>)(<span style="color:#e06c75">t</span>)    <span style="color:#7f848e">// panics: len([1]string) &gt; len(t)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">u</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">make</span>([]<span style="color:#e5c07b">byte</span>, <span style="color:#d19a66">0</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">u0</span> <span style="color:#56b6c2">:=</span> (<span style="color:#56b6c2">*</span>[<span style="color:#d19a66">0</span>]<span style="color:#e5c07b">byte</span>)(<span style="color:#e06c75">u</span>)      <span style="color:#7f848e">// u0 != nil
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="constant-expressions-常量表达式">Constant expressions 常量表达式</h3>
<p>​	常量表达式可以只包含<a href="../Constants">常量</a>操作数，并在编译时进行求值。</p>
<p>​	无类型的布尔、数值和字符串常量可以作为操作数使用，只要合法地分别使用布尔、数值或字符串类型的操作数。</p>
<p>​	常量<a href="#comparison-operators">比较</a>总是产生一个无类型的布尔常量。如果常量<a href="#operators">移位表达式</a>的左操作数是一个无类型的常量，那么结果就是一个整型常量；否则就是一个与左操作数相同类型的常量（左操作数必须是<a href="../Types#numeric-types">整型</a>）。</p>
<p>​	任何其他对无类型常量的操作都会产生一个相同类型的无类型常量，也就是布尔、整数、浮点、复数或字符串常量。如果一个二元运算（除移位外）的无类型操作数是不同种类的，那么结果就是出现在如下列表的操作数类型：整数，符文，浮点，复数。例如，一个无类型的整数常量除以一个无类型的复数常量，得到一个无类型的复数常量。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">const</span> <span style="color:#e06c75">a</span> = <span style="color:#d19a66">2</span> <span style="color:#56b6c2">+</span> <span style="color:#d19a66">3.0</span>          <span style="color:#7f848e">// a == 5.0   (untyped floating-point constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">b</span> = <span style="color:#d19a66">15</span> <span style="color:#56b6c2">/</span> <span style="color:#d19a66">4</span>           <span style="color:#7f848e">// b == 3     (untyped integer constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">c</span> = <span style="color:#d19a66">15</span> <span style="color:#56b6c2">/</span> <span style="color:#d19a66">4.0</span>         <span style="color:#7f848e">// c == 3.75  (untyped floating-point constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> Θ <span style="color:#e5c07b">float64</span> = <span style="color:#d19a66">3</span><span style="color:#56b6c2">/</span><span style="color:#d19a66">2</span>      <span style="color:#7f848e">// Θ == 1.0   (type float64, 3/2 is integer division)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> Π <span style="color:#e5c07b">float64</span> = <span style="color:#d19a66">3</span><span style="color:#56b6c2">/</span><span style="color:#d19a66">2.</span>     <span style="color:#7f848e">// Π == 1.5   (type float64, 3/2. is float division)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">d</span> = <span style="color:#d19a66">1</span> <span style="color:#56b6c2">&lt;&lt;</span> <span style="color:#d19a66">3.0</span>         <span style="color:#7f848e">// d == 8     (untyped integer constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">e</span> = <span style="color:#d19a66">1.0</span> <span style="color:#56b6c2">&lt;&lt;</span> <span style="color:#d19a66">3</span>         <span style="color:#7f848e">// e == 8     (untyped integer constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">f</span> = <span style="color:#e5c07b">int32</span>(<span style="color:#d19a66">1</span>) <span style="color:#56b6c2">&lt;&lt;</span> <span style="color:#d19a66">33</span>   <span style="color:#7f848e">// illegal    (constant 8589934592 overflows int32)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">g</span> = <span style="color:#e5c07b">float64</span>(<span style="color:#d19a66">2</span>) <span style="color:#56b6c2">&gt;&gt;</span> <span style="color:#d19a66">1</span>  <span style="color:#7f848e">// illegal    (float64(2) is a typed floating-point constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">h</span> = <span style="color:#98c379">&#34;foo&#34;</span> &gt; <span style="color:#98c379">&#34;bar&#34;</span>    <span style="color:#7f848e">// h == true  (untyped boolean constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">j</span> = <span style="color:#e5c07b">true</span>             <span style="color:#7f848e">// j == true  (untyped boolean constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">k</span> = <span style="color:#98c379">&#39;w&#39;</span> <span style="color:#56b6c2">+</span> <span style="color:#d19a66">1</span>          <span style="color:#7f848e">// k == &#39;x&#39;   (untyped rune constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">l</span> = <span style="color:#98c379">&#34;hi&#34;</span>             <span style="color:#7f848e">// l == &#34;hi&#34;  (untyped string constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">m</span> = <span style="color:#e5c07b">string</span>(<span style="color:#e06c75">k</span>)        <span style="color:#7f848e">// m == &#34;x&#34;   (type string)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> Σ = <span style="color:#d19a66">1</span> <span style="color:#56b6c2">-</span> <span style="color:#d19a66">0.707i</span>       <span style="color:#7f848e">//            (untyped complex constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> Δ = Σ <span style="color:#56b6c2">+</span> <span style="color:#d19a66">2.0e-4</span>       <span style="color:#7f848e">//            (untyped complex constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> Φ = <span style="color:#e5c07b">iota</span><span style="color:#56b6c2">*</span><span style="color:#d19a66">1i</span> <span style="color:#56b6c2">-</span> <span style="color:#d19a66">1</span><span style="color:#56b6c2">/</span><span style="color:#d19a66">1i</span>   <span style="color:#7f848e">//            (untyped complex constant)
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	将内置函数 <code>complex</code> 应用于无类型的整数、符文或浮点常量，可以得到一个无类型的复数常量。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">const</span> <span style="color:#e06c75">ic</span> = <span style="color:#e5c07b">complex</span>(<span style="color:#d19a66">0</span>, <span style="color:#e06c75">c</span>)   <span style="color:#7f848e">// ic == 3.75i  (untyped complex constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">i</span>Θ = <span style="color:#e5c07b">complex</span>(<span style="color:#d19a66">0</span>, Θ)   <span style="color:#7f848e">// iΘ == 1i     (type complex128)
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	<code>常量表达式总是被精确地求值</code>；中间值和常量本身可能需要比语言中任何预先声明的类型<code>所支持的精度大得多</code>。以下是合法的声明：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">const</span> <span style="color:#e06c75">Huge</span> = <span style="color:#d19a66">1</span> <span style="color:#56b6c2">&lt;&lt;</span> <span style="color:#d19a66">100</span>         <span style="color:#7f848e">// Huge == 1267650600228229401496703205376  (untyped integer constant)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">Four</span> <span style="color:#e5c07b">int8</span> = <span style="color:#e06c75">Huge</span> <span style="color:#56b6c2">&gt;&gt;</span> <span style="color:#d19a66">98</span>  <span style="color:#7f848e">// Four == 4                                (type int8)
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>常量除法或取余操作的<code>除数一定不能为零</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#d19a66">3.14</span> <span style="color:#56b6c2">/</span> <span style="color:#d19a66">0.0</span>   <span style="color:#7f848e">// illegal: division by zero
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	类型常量的值必须总是可以准确地由常量类型的值来<a href="../PropertiesOfTypesAndValues#representability">表示</a>。下面的常量表达式是非法的：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">uint</span>(<span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span>)     <span style="color:#7f848e">// -1 cannot be represented as a uint =&gt; -1 不能作为 uint 来表示
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">int</span>(<span style="color:#d19a66">3.14</span>)    <span style="color:#7f848e">// 3.14 cannot be represented as an int =&gt; 3.14 不能作为 int 来表示
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">int64</span>(<span style="color:#e06c75">Huge</span>)  <span style="color:#7f848e">// 1267650600228229401496703205376 cannot be represented as an int64 =&gt; 1267650600228229401496703205376 不能作为 int64 来表示
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">Four</span> <span style="color:#56b6c2">*</span> <span style="color:#d19a66">300</span>   <span style="color:#7f848e">// operand 300 cannot be represented as an int8 (type of Four) =&gt; 操作数 300 不能作为 int8（Four的类型） 来表示
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">Four</span> <span style="color:#56b6c2">*</span> <span style="color:#d19a66">100</span>   <span style="color:#7f848e">// product 400 cannot be represented as an int8 (type of Four) =&gt; 乘积 400 不能作为 int8（Four的类型） 来表示
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	一元按位补运算符<code>^</code>使用的掩码符合非常量的规则：对于无符号常量来说是所有(掩码)位都是<code>1</code>，对于有符号和无类型的常量来说是<code>-1</code>。=&gt; 仍有疑问？？</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>^<span style="color:#d19a66">1</span>         <span style="color:#7f848e">// untyped integer constant, equal to -2 =&gt; 无类型的整数常量，等于 -2
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">uint8</span>(^<span style="color:#d19a66">1</span>)  <span style="color:#7f848e">// illegal: same as uint8(-2), -2 cannot be represented as a uint8 =&gt; 非法的: 相当于 uint8(-2)， -2 不能被 uint8 所表示
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>^<span style="color:#e5c07b">uint8</span>(<span style="color:#d19a66">1</span>)  <span style="color:#7f848e">// typed uint8 constant, same as 0xFF ^ uint8(1) = uint8(0xFE) =&gt; 无类型的 uint8 常量， 相当于 0xFF ^ uint8(1) = uint8(0xFE)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e5c07b">int8</span>(^<span style="color:#d19a66">1</span>)   <span style="color:#7f848e">// same as int8(-2) =&gt; 相当于 int8(-2)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>^<span style="color:#e5c07b">int8</span>(<span style="color:#d19a66">1</span>)   <span style="color:#7f848e">// same as -1 ^ int8(1) = -2 =&gt; 相当于 -1 ^ int8(1) = -2
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>实现限制：编译器在计算无类型浮点或复数常量表达式时可能会使用舍入，请参见<a href="../Constants">常量</a>部分的实现限制。这种舍入可能会导致浮点常量表达式在整数上下文中无效，即使它在使用无限精度计算时是整数，反之亦然。</p>
<h3 id="order-of-evaluation-求值顺序">Order of evaluation 求值顺序</h3>
<p>​	在包级别上，<a href="../Packages#package-initialization">初始化依赖关系</a>决定了<a href="../DeclarationsAndScope#variable-declarations">变量声明</a>中各个初始化表达式的求值顺序。除此之外，在求值表达式、赋值或<a href="../Statements#return-statements">返回语句</a>的<a href="#operands">操作数</a>时，所有的函数调用、方法调用和通信操作都是按词法从左到右的顺序求值的。</p>
<p>例如，在（函数局部）赋值中</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">y</span>[<span style="color:#61afef;font-weight:bold">f</span>()], <span style="color:#e06c75">ok</span> = <span style="color:#61afef;font-weight:bold">g</span>(<span style="color:#61afef;font-weight:bold">h</span>(), <span style="color:#61afef;font-weight:bold">i</span>()<span style="color:#56b6c2">+</span><span style="color:#e06c75">x</span>[<span style="color:#61afef;font-weight:bold">j</span>()], <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">c</span>), <span style="color:#61afef;font-weight:bold">k</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>函数调用和通信发生的顺序是<code>f()</code>, <code>h()</code>, <code>i(),</code> <code>j()</code>, <code>&lt;-c</code>, <code>g()</code>, 和<code>k()</code>。然而，与<code>x</code>的求值和索引以及<code>y</code>的求值相比，这些事件的顺序没有被指定。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">a</span> <span style="color:#56b6c2">:=</span> <span style="color:#d19a66">1</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">f</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">func</span>() <span style="color:#e5c07b">int</span> { <span style="color:#e06c75">a</span><span style="color:#56b6c2">++</span>; <span style="color:#c678dd">return</span> <span style="color:#e06c75">a</span> }
</span></span><span style="display:flex;"><span><span style="color:#e06c75">x</span> <span style="color:#56b6c2">:=</span> []<span style="color:#e5c07b">int</span>{<span style="color:#e06c75">a</span>, <span style="color:#61afef;font-weight:bold">f</span>()}            <span style="color:#7f848e">// x may be [1, 2] or [2, 2]: evaluation order between a and f() is not specified =&gt; x 可以是 [1, 2] 或是 [2, 2]： a 和 f() 的求值顺序没有被指定
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">m</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">map</span>[<span style="color:#e5c07b">int</span>]<span style="color:#e5c07b">int</span>{<span style="color:#e06c75">a</span>: <span style="color:#d19a66">1</span>, <span style="color:#e06c75">a</span>: <span style="color:#d19a66">2</span>}  <span style="color:#7f848e">// m may be {2: 1} or {2: 2}: evaluation order between the two map assignments is not specified =&gt; m 可以是 {2: 1} 或是 {2: 2}： 两个映射赋值的求值顺序没有被指定
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">n</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">map</span>[<span style="color:#e5c07b">int</span>]<span style="color:#e5c07b">int</span>{<span style="color:#e06c75">a</span>: <span style="color:#61afef;font-weight:bold">f</span>()}      <span style="color:#7f848e">// n may be {2: 3} or {3: 3}: evaluation order between the key and the value is not specified =&gt; n 可以是 {2: 3} 或是 {3: 3}： 键和值的求值顺序没有被指定
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	在包级别上，对于独立的初始化表达式来说，初始化依赖关系会覆盖其从左到右的求值规则，但不覆盖每个表达式中的操作数：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">a</span>, <span style="color:#e06c75">b</span>, <span style="color:#e06c75">c</span> = <span style="color:#61afef;font-weight:bold">f</span>() <span style="color:#56b6c2">+</span> <span style="color:#61afef;font-weight:bold">v</span>(), <span style="color:#61afef;font-weight:bold">g</span>(), <span style="color:#61afef;font-weight:bold">sqr</span>(<span style="color:#61afef;font-weight:bold">u</span>()) <span style="color:#56b6c2">+</span> <span style="color:#61afef;font-weight:bold">v</span>()
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">f</span>() <span style="color:#e5c07b">int</span>        { <span style="color:#c678dd">return</span> <span style="color:#e06c75">c</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">g</span>() <span style="color:#e5c07b">int</span>        { <span style="color:#c678dd">return</span> <span style="color:#e06c75">a</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">sqr</span>(<span style="color:#e06c75">x</span> <span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">int</span> { <span style="color:#c678dd">return</span> <span style="color:#e06c75">x</span><span style="color:#56b6c2">*</span><span style="color:#e06c75">x</span> }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// functions u and v are independent of all other variables and functions
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// =&gt; 函数 u 和 v 独立于其它所有的变量和函数
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>函数调用按照<code>u()</code>、<code>sqr()</code>、<code>v()</code>、<code>f()</code>、<code>v()</code>、<code>g()</code>的顺序发生。</p>
<p>​	单个表达式中的浮点运算是按照运算符的结合性来求值的。显式的括号会通过覆盖默认的结合性来影响求值。在表达式<code>x + (y + z)</code>中，加法<code>y + z</code>会在加<code>x</code>之前进行。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-19719aa4bf73ebfc511b9933b0e00044">12 - 语句</h1>
    
	<h2 id="statements-语句">Statements 语句</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Statements" target="_blank" rel="noopener">https://go.dev/ref/spec#Statements </a></p>
</blockquote>
<p>语句控制执行。</p>
<pre tabindex="0"><code>Statement =
	Declaration | LabeledStmt | SimpleStmt |
	GoStmt | ReturnStmt | BreakStmt | ContinueStmt | GotoStmt |
	FallthroughStmt | Block | IfStmt | SwitchStmt | SelectStmt | ForStmt |
	DeferStmt .

SimpleStmt = EmptyStmt | ExpressionStmt | SendStmt | IncDecStmt | Assignment | ShortVarDecl .
</code></pre><h3 id="terminating-statements-终止语句">Terminating statements 终止语句</h3>
<p>​	终止语句中断了一个<a href="../Blocks">块</a>中的常规控制流。下列语句是终止性的：</p>
<ol>
<li>&ldquo;<code>return</code>&ldquo;或 &ldquo;<code>goto</code> &ldquo;语句。</li>
<li>对内置函数<code>panic</code>的调用。</li>
<li>语句列表以终止语句结束的块。</li>
<li>一个 &ldquo;<code>if</code> &ldquo;语句，其中：
<ul>
<li>存在 &ldquo;<code>else</code> &ldquo;分支，并且</li>
<li>两个分支都是终止语句。</li>
</ul>
</li>
<li>一个 &ldquo;<code>for</code> &ldquo;语句，其中：
<ul>
<li>没有 &ldquo;<code>break</code> &ldquo;语句引用&rdquo;<code>for</code> &ldquo;语句，并且</li>
<li>循环条件不存在，并且</li>
<li>这个&rdquo;<code>for</code>&ldquo;语句没有使用<code>range</code>子句。</li>
</ul>
</li>
<li>一个 &ldquo;<code>switch</code> &ldquo;语句，其中：
<ul>
<li>没有 &ldquo;<code>break</code> &ldquo;语句引用 &ldquo;<code>switch</code> &ldquo;语句</li>
<li>有一个默认的分支，并且</li>
<li>每个分支下的语句列表，包括默认分支，都以一个终止语句结束，或者是一个可能标有 <a href="#fallthrough-statements-fallthrough">&ldquo;fallthrough &ldquo;的语句</a>。</li>
</ul>
</li>
<li>一个 &ldquo;<code>select</code>&ldquo;语句，其中:
<ul>
<li>没有&rdquo;<code>break</code>&ldquo;语句引用&rdquo;<code>select</code>&ldquo;语句，并且</li>
<li>每个分支下的语句列表，包括默认分支（如果存在），都以一个终止语句结束</li>
</ul>
</li>
<li>标记终止语句的<a href="#labeled-statements">标签语句</a>。</li>
</ol>
<p>​	所有其他语句都不是终止性的。</p>
<p>​	如果<a href="../Blocks">语句列表</a>不是空的，并且其最后的非空语句是终止性的，则该列表以终止性语句结束。</p>
<h3 id="empty-statements-空语句">Empty statements 空语句</h3>
<p>空语句不做任何事情。</p>
<pre tabindex="0"><code>EmptyStmt = .
</code></pre><h3 id="labeled-statements-标签语句">Labeled statements 标签语句</h3>
<p>标签语句可以是<code>goto</code>、<code>break</code>或<code>continue</code>语句的目标。</p>
<pre tabindex="0"><code>LabeledStmt = Label &#34;:&#34; Statement .
Label       = identifier .
Error: log.Panic(&#34;error encountered&#34;)
</code></pre><h3 id="expression-statements-表达式语句">Expression statements 表达式语句</h3>
<p>​	除了特定的内置函数外，函数和方法<a href="../Expressions#calls">调用</a>以及<a href="../Expressions#receive-operator">接收操作</a>可以出现在语句上下文中。这样的语句可以用圆括号括起来。</p>
<pre tabindex="0"><code>ExpressionStmt = Expression .
</code></pre><p>以下内置函数不允许出现在语句上下文中：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">append</span> <span style="color:#e06c75">cap</span> <span style="color:#e06c75">complex</span> <span style="color:#e06c75">imag</span> <span style="color:#e06c75">len</span> <span style="color:#e06c75">make</span> <span style="color:#e06c75">new</span> <span style="color:#e06c75">real</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">unsafe</span>.<span style="color:#e06c75">Add</span> <span style="color:#e06c75">unsafe</span>.<span style="color:#e06c75">Alignof</span> <span style="color:#e06c75">unsafe</span>.<span style="color:#e06c75">Offsetof</span> <span style="color:#e06c75">unsafe</span>.<span style="color:#e06c75">Sizeof</span> <span style="color:#e06c75">unsafe</span>.<span style="color:#e06c75">Slice</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">h</span>(<span style="color:#e06c75">x</span><span style="color:#56b6c2">+</span><span style="color:#e06c75">y</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">f</span>.<span style="color:#61afef;font-weight:bold">Close</span>()
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">&lt;-</span><span style="color:#61afef;font-weight:bold">ch</span>
</span></span><span style="display:flex;"><span>(<span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">ch</span>)
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">len</span>(<span style="color:#98c379">&#34;foo&#34;</span>)  <span style="color:#7f848e">// illegal if len is the built-in function
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="send-statements-发送语句">Send statements 发送语句</h3>
<p>​	发送语句在通道上发送一个值。通道表达式的<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a>必须是一个<a href="../Types#channel-types">通道</a>，通道方向必须允许发送操作，而且要发送的值的类型必须是<a href="../PropertiesOfTypesAndValues#assignability">可以分配</a>给通道的元素类型。</p>
<pre tabindex="0"><code>SendStmt = Channel &#34;&lt;-&#34; Expression .
Channel  = Expression .
</code></pre><p>​	在通信开始之前，通道和值表达式都被求值。通信阻塞，直到发送（操作）可以进行。如果有接收端准备好了，那么在一个没有缓冲的通道上的发送可以继续进行。在缓冲通道上的发送可以在缓冲区有空间的情况下进行。在关闭的通道上进行发送会引起<a href="../Run-timePanics">运行时恐慌</a>。在<code>nil</code>通道上的发送会永远阻塞。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">ch</span> <span style="color:#56b6c2">&lt;-</span> <span style="color:#d19a66">3</span>  <span style="color:#7f848e">// send value 3 to channel ch
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="incdec-statements--自增自减语句">IncDec statements  自增自减语句</h3>
<p>​	<code>++</code>和<code>--</code>语句通过无类型<a href="../Constants">常量</a><code>1</code>来增加或减少其操作数。与赋值一样，操作数必须是<a href="../Expressions#address-operators">可寻址的</a>，或者是一个映射索引表达式。</p>
<pre tabindex="0"><code>IncDecStmt = Expression ( &#34;++&#34; | &#34;--&#34; ) .
</code></pre><p>下面的<a href="#assignment-statements">赋值语句</a>在语义上是等同的：</p>
<pre tabindex="0"><code>IncDec statement    Assignment
x++                 x += 1
x--                 x -= 1
</code></pre><h3 id="assignment-statements-赋值语句">Assignment statements 赋值语句</h3>
<p>​	赋值是用一个<a href="../#Expressions">表达式</a>指定的新值来替换存储在<a href="../Variables">变量</a>中的当前值。赋值语句可以为单个变量赋值，也可以将多个值赋给匹配数量的变量。</p>
<pre tabindex="0"><code>Assignment = ExpressionList assign_op ExpressionList .

assign_op = [ add_op | mul_op ] &#34;=&#34; .
</code></pre><p>​	每个左操作数必须是<a href="../Expressions#address-operators">可寻址的</a>，或是一个映射索引表达式，或是（仅对<code>=</code>赋值）<a href="../DeclarationsAndScope#blank-identifier">空白标识符，即<code>_</code></a>。操作数可以用圆括号括起来。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">x</span> = <span style="color:#d19a66">1</span>
</span></span><span style="display:flex;"><span><span style="color:#56b6c2">*</span><span style="color:#e06c75">p</span> = <span style="color:#61afef;font-weight:bold">f</span>()
</span></span><span style="display:flex;"><span><span style="color:#e06c75">a</span>[<span style="color:#e06c75">i</span>] = <span style="color:#d19a66">23</span>
</span></span><span style="display:flex;"><span>(<span style="color:#e06c75">k</span>) = <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">ch</span>  <span style="color:#7f848e">// same as: k = &lt;-ch
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	赋值操作<code>x</code> op<code>=</code> <code>y</code>，其中<code>op</code>是一个<a href="../Expressions#arithmetic-operators">二元算术运算符</a>，相当于<code>x</code> <code>=</code> <code>x</code> op <code>(y)</code>，但只对<code>x</code>进行一次求值。op<code>=</code>结构是一个单一的标记。在赋值操作中，左表达式和右表达式列表都必须正好包含一个单值表达式，并且左表达式不能是空白标识符。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">a</span>[<span style="color:#e06c75">i</span>] <span style="color:#56b6c2">&lt;&lt;=</span> <span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">i</span> <span style="color:#56b6c2">&amp;^=</span> <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">n</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	多元赋值将多值运算的各个元素分配给一个变量列表。有两种形式。在第一种形式中，右操作数是单个多值表达式，如一个函数调用、一个<a href="../Types#channel-types">通道</a>或<a href="../Types#map-types">映射</a>操作，或一个<a href="../Expressions#type-assertions">类型断言</a>。左操作数必须与值的数量相匹配。例如，如果<code>f</code>是一个返回两个值的函数，</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> = <span style="color:#61afef;font-weight:bold">f</span>()
</span></span></code></pre></td></tr></table>
</div>
</div><p>将第一个值赋给 <code>x</code>，将第二个值赋给 <code>y</code>。在第二种形式中，左操作数必须等于右表达式数量，每个表达式必须是单值的，右边的第<code>n</code>个表达式被分配给左边的第<code>n</code>个操作数：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">one</span>, <span style="color:#e06c75">two</span>, <span style="color:#e06c75">three</span> = <span style="color:#98c379">&#39;一&#39;</span>, <span style="color:#98c379">&#39;二&#39;</span>, <span style="color:#98c379">&#39;三&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><a href="../DeclarationsAndScope#blank-identifier">空白标识符，即<code>_</code></a>提供了一种在赋值中忽略右值的方法：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">_</span> = <span style="color:#e06c75">x</span>       <span style="color:#7f848e">// evaluate x but ignore it =&gt; 对 x 求值，但忽略它
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">x</span>, <span style="color:#e06c75">_</span> = <span style="color:#61afef;font-weight:bold">f</span>()  <span style="color:#7f848e">// evaluate f() but ignore second result value =&gt; 对 f() 求值，但忽略它的第二个结果值
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	赋值分两个阶段进行。第一阶段，左边的<a href="../Expressions#index-expressions">索引表达式</a>和<a href="../Expressions#address-operators">指针间接</a>（包括<a href="../Expressions#selectors">选择器</a>中的隐式指针间接）的操作数以及右边的表达式都按照<a href="../Expressions#order-of-evaluation">通常的顺序被求值</a>。第二阶段，赋值是按照从左到右的顺序进行的。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">a</span>, <span style="color:#e06c75">b</span> = <span style="color:#e06c75">b</span>, <span style="color:#e06c75">a</span>  <span style="color:#7f848e">// exchange a and b =&gt; 交换 a 和 b
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">x</span> <span style="color:#56b6c2">:=</span> []<span style="color:#e5c07b">int</span>{<span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>, <span style="color:#d19a66">3</span>}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#d19a66">0</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">i</span>, <span style="color:#e06c75">x</span>[<span style="color:#e06c75">i</span>] = <span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>  <span style="color:#7f848e">// set i = 1, x[0] = 2
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">i</span> = <span style="color:#d19a66">0</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">x</span>[<span style="color:#e06c75">i</span>], <span style="color:#e06c75">i</span> = <span style="color:#d19a66">2</span>, <span style="color:#d19a66">1</span>  <span style="color:#7f848e">// set x[0] = 2, i = 1
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">x</span>[<span style="color:#d19a66">0</span>], <span style="color:#e06c75">x</span>[<span style="color:#d19a66">0</span>] = <span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>  <span style="color:#7f848e">// set x[0] = 1, then x[0] = 2 (so x[0] == 2 at end) =&gt; 设 x[0] = 1, 然后设 x[0] = 2 （故最后 x[0] == 2）
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">x</span>[<span style="color:#d19a66">1</span>], <span style="color:#e06c75">x</span>[<span style="color:#d19a66">3</span>] = <span style="color:#d19a66">4</span>, <span style="color:#d19a66">5</span>  <span style="color:#7f848e">// set x[1] = 4, then panic setting x[3] = 5. =&gt; 设 x[1] = 4, 然后设 x[3] = 5 时 panic
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Point</span> <span style="color:#c678dd">struct</span> { <span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span> <span style="color:#e5c07b">int</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">p</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">Point</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">x</span>[<span style="color:#d19a66">2</span>], <span style="color:#e06c75">p</span>.<span style="color:#e06c75">x</span> = <span style="color:#d19a66">6</span>, <span style="color:#d19a66">7</span>  <span style="color:#7f848e">// set x[2] = 6, then panic setting p.x = 7 =&gt; 设 x[2] = 6, 然后设 p.x = 7 时 panic
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">i</span> = <span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">x</span> = []<span style="color:#e5c07b">int</span>{<span style="color:#d19a66">3</span>, <span style="color:#d19a66">5</span>, <span style="color:#d19a66">7</span>}
</span></span><span style="display:flex;"><span><span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span>, <span style="color:#e06c75">x</span>[<span style="color:#e06c75">i</span>] = <span style="color:#c678dd">range</span> <span style="color:#e06c75">x</span> {  <span style="color:#7f848e">// set i, x[2] = 0, x[0]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#c678dd">break</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// after this loop, i == 0 and x == []int{3, 5, 3}
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	在赋值中，每个值必须<a href="../PropertiesOfTypesAndValues#assignability">可以赋给</a>它所赋的操作数的类型，但有以下特殊情况：</p>
<ol>
<li>任何类型的值都可以被分配给<code>空白标识符</code>。</li>
<li>如果无类型的常量被分配给接口类型的变量或空白标识符，那么该常量首先被隐式地<a href="../Expressions#conversions">转换</a>为其<a href="../Constants">默认类型</a>。</li>
<li>如果无类型的布尔值被分配给接口类型的变量或空白标识符，它首先被隐式转换为<code>bool</code>。</li>
</ol>
<h3 id="if-statements---if-语句">If statements - if 语句</h3>
<p>​	&ldquo;<code>if</code> &ldquo;语句根据布尔表达式的值指定两个分支的条件性执行。如果表达式的值为真，则执行 &ldquo;<code>if</code> &ldquo;分支，否则，执行 &ldquo;<code>else</code> &ldquo;分支（如果存在）。</p>
<pre tabindex="0"><code>IfStmt = &#34;if&#34; [ SimpleStmt &#34;;&#34; ] Expression Block [ &#34;else&#34; ( IfStmt | Block ) ] .
if x &gt; max {
	x = max
}
</code></pre><p>表达式前面可以有一个简单的语句，它在表达式被求值之前执行。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">if</span> <span style="color:#e06c75">x</span> <span style="color:#56b6c2">:=</span> <span style="color:#61afef;font-weight:bold">f</span>(); <span style="color:#e06c75">x</span> &lt; <span style="color:#e06c75">y</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#e06c75">x</span>
</span></span><span style="display:flex;"><span>} <span style="color:#c678dd">else</span> <span style="color:#c678dd">if</span> <span style="color:#e06c75">x</span> &gt; <span style="color:#e06c75">z</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#e06c75">z</span>
</span></span><span style="display:flex;"><span>} <span style="color:#c678dd">else</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#e06c75">y</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="switch-statements----switch-语句">Switch statements  - switch 语句</h3>
<p>​	&ldquo;<code>switch</code> &ldquo;语句提供多路执行。表达式或类型与 &ldquo;switch &ldquo;内部的 &ldquo;case &ldquo;进行比较，以确定执行哪个分支。</p>
<pre tabindex="0"><code>SwitchStmt = ExprSwitchStmt | TypeSwitchStmt .
</code></pre><p>​	有两种形式：<code>表达式开关</code>和<code>类型开关</code>。在<code>表达式开关</code>中，case 包含与开关表达式的值进行比较的表达式。在<code>类型开关</code>中，case 包含类型，这些类型与特别说明的表达式开关的类型进行比较。在<code>switch语句</code>中，<code>switch 表达式</code>被精确地求值一次。</p>
<h4 id="expression-switches-表达式开关">Expression switches 表达式开关</h4>
<p>​	在表达式开关中，<code>switch 表达式</code>被求值，case表达式（不需要是常量）被从左到右和从上到下求值；第一个等于switch表达式的表达式会触发相关case语句的执行；其他case被跳过。如果没有匹配的case，但有一个 &ldquo;default&rdquo; case，那么这个语句将被执行。&ldquo;default&rdquo; case 最多只能有一个，它可以出现在 &ldquo;switch &ldquo;语句的任何地方。缺省的<code>switch 表达式</code>等同于布尔值<code>true</code>。</p>
<pre tabindex="0"><code>ExprSwitchStmt = &#34;switch&#34; [ SimpleStmt &#34;;&#34; ] [ Expression ] &#34;{&#34; { ExprCaseClause } &#34;}&#34; .
ExprCaseClause = ExprSwitchCase &#34;:&#34; StatementList .
ExprSwitchCase = &#34;case&#34; ExpressionList | &#34;default&#34; .
</code></pre><p>​	如果<code>switch 表达式</code>求值为无类型的常量，它首先被隐式地<a href="../Expressions#conversions">转换</a>为其<a href="../Constants">默认类型</a>。预先声明的无类型值<code>nil</code>不能作为<code>switch 表达式</code>使用。<code>switch 表达式</code>的类型必须是<a href="../Expressions#comparison-operators">可比较的</a>。</p>
<p>​	如果一个case 表达式是无类型的，它首先被隐式地<a href="../Expressions#conversions">转换</a>为<code>switch 表达式</code>的类型。对于每个（可能转换过的）case 表达式<code>x</code>和<code>switch 表达式</code>的值<code>t</code>，<code>x == t</code>必须是一个有效的<a href="../Expressions#comparison-operators">比较</a>。</p>
<p>​	换句话说，<code>switch 表达式</code>被当作是用来声明和初始化一个没有明确类型的临时变量<code>t</code>；每个case表达式<code>x</code>都是用<code>t</code>的值来测试是否相等。</p>
<p>​	在case或default子句中，最后一个非空语句可以是一个（可能被<a href="#labeled-statements">标记的</a>）<a href="#fallthrough-statements">&ldquo;fallthrough &ldquo;语句</a>，表示控制应该从这个子句的结尾流向下一个子句的第一个语句。否则，控制将流向 &ldquo;switch &ldquo;语句的末尾。&ldquo;fallthrough&quot;语句可以作为<code>表达式开关</code>中除最后一个子句之外的所有子句的最后一个语句出现。</p>
<p>​	<code>switch 表达式</code>前面可以有一个简单的语句，它在表达式被求值之前执行。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">switch</span> <span style="color:#e06c75">tag</span> {
</span></span><span style="display:flex;"><span><span style="color:#c678dd">default</span>: <span style="color:#61afef;font-weight:bold">s3</span>()
</span></span><span style="display:flex;"><span><span style="color:#c678dd">case</span> <span style="color:#d19a66">0</span>, <span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>, <span style="color:#d19a66">3</span>: <span style="color:#61afef;font-weight:bold">s1</span>()
</span></span><span style="display:flex;"><span><span style="color:#c678dd">case</span> <span style="color:#d19a66">4</span>, <span style="color:#d19a66">5</span>, <span style="color:#d19a66">6</span>, <span style="color:#d19a66">7</span>: <span style="color:#61afef;font-weight:bold">s2</span>()
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">switch</span> <span style="color:#e06c75">x</span> <span style="color:#56b6c2">:=</span> <span style="color:#61afef;font-weight:bold">f</span>(); {  <span style="color:#7f848e">// missing switch expression means &#34;true&#34; =&gt; 缺少 switch 表达式 意味着 &#34;true&#34;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">case</span> <span style="color:#e06c75">x</span> &lt; <span style="color:#d19a66">0</span>: <span style="color:#c678dd">return</span> <span style="color:#56b6c2">-</span><span style="color:#e06c75">x</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">default</span>: <span style="color:#c678dd">return</span> <span style="color:#e06c75">x</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">switch</span> {
</span></span><span style="display:flex;"><span><span style="color:#c678dd">case</span> <span style="color:#e06c75">x</span> &lt; <span style="color:#e06c75">y</span>: <span style="color:#61afef;font-weight:bold">f1</span>()
</span></span><span style="display:flex;"><span><span style="color:#c678dd">case</span> <span style="color:#e06c75">x</span> &lt; <span style="color:#e06c75">z</span>: <span style="color:#61afef;font-weight:bold">f2</span>()
</span></span><span style="display:flex;"><span><span style="color:#c678dd">case</span> <span style="color:#e06c75">x</span> <span style="color:#56b6c2">==</span> <span style="color:#d19a66">4</span>: <span style="color:#61afef;font-weight:bold">f3</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>实现限制：编译器可能不允许多个case 表达式求值为同一个常量。例如，目前的编译器不允许在case表达式中出现重复的整型常量、浮点常量或字符串常量。</p>
<h4 id="type-switches-类型开关">Type switches 类型开关</h4>
<p>​	<code>类型开关</code>比较的是<code>类型</code>而不是值。它与<code>表达式开关</code>类似。它由一个特殊的<code>switch 表达式</code>标记，该表达式具有<a href="../Expressions#type-assertions">类型断言</a>的形式，使用关键字<code>type</code>而不是实际的类型：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">switch</span> <span style="color:#e06c75">x</span>.(<span style="color:#c678dd">type</span>) {
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// cases
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	然后，case 将实际类型<code>T</code>与表达式<code>x</code>的动态类型相匹配。与类型断言一样，<code>x</code>必须是<a href="../Types#interface-types">接口类型</a>，但不是<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a>，而且case 中列出的每个非接口类型<code>T</code>必须实现<code>x</code>的类型。在类型开关的case 中，列出的类型都必须是<a href="../PropertiesOfTypesAndValues#type-identity">不同的</a>。</p>
<pre tabindex="0"><code>TypeSwitchStmt  = &#34;switch&#34; [ SimpleStmt &#34;;&#34; ] TypeSwitchGuard &#34;{&#34; { TypeCaseClause } &#34;}&#34; .
TypeSwitchGuard = [ identifier &#34;:=&#34; ] PrimaryExpr &#34;.&#34; &#34;(&#34; &#34;type&#34; &#34;)&#34; .
TypeCaseClause  = TypeSwitchCase &#34;:&#34; StatementList .
TypeSwitchCase  = &#34;case&#34; TypeList | &#34;default&#34; .
</code></pre><p>​	TypeSwitchGuard 可能包括一个<a href="../DeclarationsAndScope#short-variable-declarations">短变量声明</a>。当使用这种形式时，该变量在每个子句的<a href="../Blocks">隐含块</a>中的TypeSwitchCase的末尾被声明。在子句中，如果case正好列出了一种类型，那么变量就有这种类型；否则，变量就有TypeSwitchGuard中表达式的类型。</p>
<p>​	case 可以使用预先声明的标识符<a href="../DeclarationsAndScope#predeclared-identifiers">nil</a>来代替类型；当TypeSwitchGuard中的表达式是一个<code>nil</code>接口值时，该case被选中。最多只能有一个<code>nil </code>case。</p>
<p>​	给定一个<code>interface{}</code>类型的表达式<code>x</code>，下面的类型开关：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">switch</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">x</span>.(<span style="color:#c678dd">type</span>) {
</span></span><span style="display:flex;"><span><span style="color:#c678dd">case</span> <span style="color:#e5c07b">nil</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">printString</span>(<span style="color:#98c379">&#34;x is nil&#34;</span>)                <span style="color:#7f848e">// type of i is type of x (interface{}) =&gt; i 类型是 x 的类型（interface{}）
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">case</span> <span style="color:#e5c07b">int</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">printInt</span>(<span style="color:#e06c75">i</span>)                            <span style="color:#7f848e">// type of i is int =&gt; i 类型是 int
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">case</span> <span style="color:#e5c07b">float64</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">printFloat64</span>(<span style="color:#e06c75">i</span>)                        <span style="color:#7f848e">// type of i is float64 =&gt; i 类型是 float64 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">case</span> <span style="color:#c678dd">func</span>(<span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">float64</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">printFunction</span>(<span style="color:#e06c75">i</span>)                       <span style="color:#7f848e">// type of i is func(int) float64 =&gt; i 类型是 func(int) float64
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">case</span> <span style="color:#e5c07b">bool</span>, <span style="color:#e5c07b">string</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">printString</span>(<span style="color:#98c379">&#34;type is bool or string&#34;</span>)  <span style="color:#7f848e">// type of i is type of x (interface{}) =&gt; i 类型是 x 的类型（interface{}）
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">default</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">printString</span>(<span style="color:#98c379">&#34;don&#39;t know the type&#34;</span>)     <span style="color:#7f848e">// type of i is type of x (interface{}) =&gt; i 类型是 x 的类型（interface{}）
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>可以重写：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">v</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">x</span>  <span style="color:#7f848e">// x is evaluated exactly once =&gt; x 只被求值一次
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">if</span> <span style="color:#e06c75">v</span> <span style="color:#56b6c2">==</span> <span style="color:#e5c07b">nil</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">v</span>                                 <span style="color:#7f848e">// type of i is type of x (interface{})
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#61afef;font-weight:bold">printString</span>(<span style="color:#98c379">&#34;x is nil&#34;</span>)
</span></span><span style="display:flex;"><span>} <span style="color:#c678dd">else</span> <span style="color:#c678dd">if</span> <span style="color:#e06c75">i</span>, <span style="color:#e06c75">isInt</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">v</span>.(<span style="color:#e5c07b">int</span>); <span style="color:#e06c75">isInt</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">printInt</span>(<span style="color:#e06c75">i</span>)                            <span style="color:#7f848e">// type of i is int
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>} <span style="color:#c678dd">else</span> <span style="color:#c678dd">if</span> <span style="color:#e06c75">i</span>, <span style="color:#e06c75">isFloat64</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">v</span>.(<span style="color:#e5c07b">float64</span>); <span style="color:#e06c75">isFloat64</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">printFloat64</span>(<span style="color:#e06c75">i</span>)                        <span style="color:#7f848e">// type of i is float64
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>} <span style="color:#c678dd">else</span> <span style="color:#c678dd">if</span> <span style="color:#e06c75">i</span>, <span style="color:#e06c75">isFunc</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">v</span>.(<span style="color:#c678dd">func</span>(<span style="color:#e5c07b">int</span>) <span style="color:#e5c07b">float64</span>); <span style="color:#e06c75">isFunc</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">printFunction</span>(<span style="color:#e06c75">i</span>)                       <span style="color:#7f848e">// type of i is func(int) float64
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>} <span style="color:#c678dd">else</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">_</span>, <span style="color:#e06c75">isBool</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">v</span>.(<span style="color:#e5c07b">bool</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">_</span>, <span style="color:#e06c75">isString</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">v</span>.(<span style="color:#e5c07b">string</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">if</span> <span style="color:#e06c75">isBool</span> <span style="color:#56b6c2">||</span> <span style="color:#e06c75">isString</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">v</span>                         <span style="color:#7f848e">// type of i is type of x (interface{})
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		<span style="color:#61afef;font-weight:bold">printString</span>(<span style="color:#98c379">&#34;type is bool or string&#34;</span>)
</span></span><span style="display:flex;"><span>	} <span style="color:#c678dd">else</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#e06c75">v</span>                         <span style="color:#7f848e">// type of i is type of x (interface{})
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		<span style="color:#61afef;font-weight:bold">printString</span>(<span style="color:#98c379">&#34;don&#39;t know the type&#34;</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a>或<a href="../DeclarationsAndScope#type-declarations">泛型</a>可以作为 case 中的一个类型。如果在<a href="../Expressions#instantiations">实例化</a>时，该类型被发现与开关中的另一个条目重复，则选择第一个匹配的case。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#e06c75">f</span>[<span style="color:#e06c75">P</span> <span style="color:#e06c75">any</span>](<span style="color:#e06c75">x</span> <span style="color:#e06c75">any</span>) <span style="color:#e5c07b">int</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">switch</span> <span style="color:#e06c75">x</span>.(<span style="color:#c678dd">type</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">case</span> <span style="color:#e06c75">P</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">return</span> <span style="color:#d19a66">0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">case</span> <span style="color:#e5c07b">string</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">return</span> <span style="color:#d19a66">1</span>
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">case</span> []<span style="color:#e06c75">P</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">return</span> <span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">case</span> []<span style="color:#e5c07b">byte</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">return</span> <span style="color:#d19a66">3</span>
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">default</span>:
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">return</span> <span style="color:#d19a66">4</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">v1</span> = <span style="color:#e06c75">f</span>[<span style="color:#e5c07b">string</span>](<span style="color:#98c379">&#34;foo&#34;</span>)   <span style="color:#7f848e">// v1 == 0
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">v2</span> = <span style="color:#e06c75">f</span>[<span style="color:#e5c07b">byte</span>]([]<span style="color:#e5c07b">byte</span>{})  <span style="color:#7f848e">// v2 == 2
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	类型开关防护（guard ）前可以有一个简单的语句，该语句在防护（guard ）被求值前执行。</p>
<p>​	在类型开关中<code>不允许使用</code> &ldquo;fallthrough &ldquo;语句。</p>
<h3 id="for-statements----for-语句">For statements  - for 语句</h3>
<p>​	 &ldquo;<code>for</code> &ldquo;语句指定重复执行一个块。有三种形式：迭代可以由单个条件、&ldquo;for &ldquo;子句或 &ldquo;range &ldquo;子句控制。</p>
<pre tabindex="0"><code>ForStmt = &#34;for&#34; [ Condition | ForClause | RangeClause ] Block .
Condition = Expression .
</code></pre><h4 id="for-statements-with-single-condition-带有单一条件的for语句">For statements with single condition 带有单一条件的for语句</h4>
<p>​	在其最简单的形式中，&ldquo;for &ldquo;语句指定重复执行一个块，只要一个布尔条件被求值为真。该条件在每次迭代前被求值。如果条件不存在，它就等同于布尔值<code>true</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">for</span> <span style="color:#e06c75">a</span> &lt; <span style="color:#e06c75">b</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">a</span> <span style="color:#56b6c2">*=</span> <span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h4 id="for-statements-with-for-clause-带有for子句的for语句">For statements with <code>for</code> clause 带有for子句的for语句</h4>
<p>​	带有for子句的 &ldquo;for &ldquo;语句也受其条件的控制，但另外它可以指定一个<code>init</code>和一个<code>post</code>语句，如一个赋值，一个增量或减量语句。init语句可以是一个<a href="../DeclarationsAndScope#short-variable-declarations">短变量声明</a>，但post语句则不能。由init语句声明的变量会在每次迭代中重复使用。</p>
<pre tabindex="0"><code>ForClause = [ InitStmt ] &#34;;&#34; [ Condition ] &#34;;&#34; [ PostStmt ] .
InitStmt = SimpleStmt .
PostStmt = SimpleStmt .
for i := 0; i &lt; 10; i++ {
	f(i)
}
</code></pre><p>​	如果（init语句）非空，则它在求值第一个迭代的条件之前被执行一次；post语句在每次执行块之后被执行（而且只有当该块被执行时）。For子句的任何元素都可以是空的，但是（除非只有一个条件）<a href="../LexicalElements#semicolons">分号</a>是必须的。如果没有条件，则等同于布尔值<code>true</code>。=&gt; 仍有疑问？？</p>
<pre tabindex="0"><code>for cond { S() }    is the same as    for ; cond ; { S() }
for      { S() }    is the same as    for true     { S() }
</code></pre><h4 id="for-statements-with-range-clause--带有range子句的for语句">For statements with <code>range</code> clause  带有range子句的for语句</h4>
<p>​	带有 &ldquo;<code>range</code>&ldquo;子句的 &ldquo;for &ldquo;语句遍历一个数组、切片、字符串或映射的所有条目，或在一个通道上收到的值。对于每个条目，如果存在的话，它将迭代值分配给相应的迭代变量，然后执行该块。</p>
<pre tabindex="0"><code>RangeClause = [ ExpressionList &#34;=&#34; | IdentifierList &#34;:=&#34; ] &#34;range&#34; Expression .
</code></pre><p>​	在 &ldquo;<code>range</code>&ldquo;子句中<code>右边的表达式</code>称为<code>范围表达式</code>，其<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a>必须是数组、指向数组的指针、切片、字符串、映射或允许<a href="../Expressions#receive-operator">接收操作</a>的通道。和赋值一样，如果左操作数存在的话，那么它必须是<a href="../Expressions#address-operators">可寻址的</a>或映射索引表达式；它们（即左操作数）表示<code>迭代变量</code>。如果<code>range 表达式</code>是一个通道，最多允许一个迭代变量，其他情况下最多可以有两个迭代变量。如果最后一个迭代变量是<a href="../DeclarationsAndScope#blank-identifier">空白标识符，即<code>_</code></a>，那么range 子句就等同于没有该空白标识符的相同子句。</p>
<p>​	在开始循环之前，range 表达式<code>x</code>被求值一次，<strong>但有一个例外</strong>：如果最多只有一个迭代变量，并且<code>len(x)</code>是<a href="../Constants">常量</a>，那么range 表达式不被求值。</p>
<p>Function calls on the left are evaluated once per iteration. For each iteration, iteration values are produced as follows if the respective iteration variables are present:</p>
<p>​	左边的函数调用在每个迭代中被求值一次（=&gt;仍有疑问？？）。对于每个迭代，如果各自的迭代变量存在，则迭代值按以下产生：</p>
<pre tabindex="0"><code>Range expression                          1st value          2nd value
range 表达式                               第一个值           第二

array or slice  a  [n]E, *[n]E, or []E    index    i  int    a[i]       E
string          s  string type            index    i  int    see below  rune
map             m  map[K]V                key      k  K      m[k]       V
channel         c  chan E, &lt;-chan E       element  e  E
</code></pre><ol>
<li>对于一个数组值、数组指针值或切片值<code>a</code>，索引迭代值按递增顺序产生，从元素索引0开始。如果最多只有一个迭代变量，range 循环产生从<code>0</code>到<code>len(a)-1</code>的迭代值，并且不对数组或切片本身进行索引。对于一个<code>nil</code> 切片，迭代次数为0。</li>
<li>对于一个字符串值，&ldquo;range &ldquo;子句在字符串中的Unicode码点上进行迭代，从字节索引0开始。在连续的迭代中，索引值将是字符串中连续的UTF-8编码码点的第一个字节的索引，第二个值，类型为<code>rune</code>，将是相应码点的值。<code>如果迭代遇到一个无效的UTF-8序列</code>，第二个值将是（Unicode替换字符）<code>0xFFFD</code>，下一次迭代将在字符串中推进一个字节。</li>
<li>对映射的迭代顺序没有指定，不保证每次迭代都是一样的。如果在迭代过程中删除了一个尚未到达的映射条目，将不会产生相应的迭代值。如果在迭代过程中创建了一个映射条目，该条目可能在迭代过程中被产生，也可能被跳过。对于每个创建的条目，以及从一个迭代到另一个迭代，选择可能有所不同。如果映射为<code>nil</code>，迭代次数为0。</li>
<li>对于通道，产生的迭代值是通道上连续发送的值，直到通道<a href="../Built-inFunctions#close">关闭</a>。如果通道为<code>nil</code>，则 range 表达式永远阻塞。</li>
</ol>
<p>​	迭代值被分配给各自的迭代变量，就像在<a href="#assignment-statements">赋值语句</a>中一样。</p>
<p>​	迭代变量可以由 &ldquo;range &ldquo;子句使用<a href="../DeclarationsAndScope#short-variable-declarations">短变量声明</a>的形式（<code>:=</code>）来声明。在这种情况下，它们的类型被设置为各自的迭代值的类型，它们的<a href="../DeclarationsAndScope">作用域</a>是 &ldquo;for &ldquo;语句的块；它们在每个迭代中被重复使用。如果迭代变量是在 &ldquo;for &ldquo;语句之外声明的，执行后它们的值将是最后一次迭代的值。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">33
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">testdata</span> <span style="color:#56b6c2">*</span><span style="color:#c678dd">struct</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">a</span> <span style="color:#56b6c2">*</span>[<span style="color:#d19a66">7</span>]<span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span>, <span style="color:#e06c75">_</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">range</span> <span style="color:#e06c75">testdata</span>.<span style="color:#e06c75">a</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// testdata.a is never evaluated; len(testdata.a) is constant =&gt; testdata.a 不会被求值； len(testdata.a) 是常量 &lt;= 这里符合前面说的那个“但有一个例外”的情况
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#7f848e">// i ranges from 0 to 6 =&gt; i 范围从 0 到 6
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#e06c75">i</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">a</span> [<span style="color:#d19a66">10</span>]<span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span>, <span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">range</span> <span style="color:#e06c75">a</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// type of i is int
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#7f848e">// type of s is string
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#7f848e">// s == a[i]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#61afef;font-weight:bold">g</span>(<span style="color:#e06c75">i</span>, <span style="color:#e06c75">s</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">key</span> <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">val</span> <span style="color:#c678dd">interface</span>{}  <span style="color:#7f848e">// element type of m is assignable to val =&gt; m 的元素类型可赋值给 val
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">m</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>]<span style="color:#e5c07b">int</span>{<span style="color:#98c379">&#34;mon&#34;</span>:<span style="color:#d19a66">0</span>, <span style="color:#98c379">&#34;tue&#34;</span>:<span style="color:#d19a66">1</span>, <span style="color:#98c379">&#34;wed&#34;</span>:<span style="color:#d19a66">2</span>, <span style="color:#98c379">&#34;thu&#34;</span>:<span style="color:#d19a66">3</span>, <span style="color:#98c379">&#34;fri&#34;</span>:<span style="color:#d19a66">4</span>, <span style="color:#98c379">&#34;sat&#34;</span>:<span style="color:#d19a66">5</span>, <span style="color:#98c379">&#34;sun&#34;</span>:<span style="color:#d19a66">6</span>}
</span></span><span style="display:flex;"><span><span style="color:#c678dd">for</span> <span style="color:#e06c75">key</span>, <span style="color:#e06c75">val</span> = <span style="color:#c678dd">range</span> <span style="color:#e06c75">m</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">h</span>(<span style="color:#e06c75">key</span>, <span style="color:#e06c75">val</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// key == last map key encountered in iteration
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// val == map[key]
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">ch</span> <span style="color:#c678dd">chan</span> <span style="color:#e06c75">Work</span> = <span style="color:#61afef;font-weight:bold">producer</span>()
</span></span><span style="display:flex;"><span><span style="color:#c678dd">for</span> <span style="color:#e06c75">w</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">range</span> <span style="color:#e06c75">ch</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">doWork</span>(<span style="color:#e06c75">w</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// empty a channel =&gt; 清空通道
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">for</span> <span style="color:#c678dd">range</span> <span style="color:#e06c75">ch</span> {}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="go-statements----go-语句">Go statements  - go 语句</h3>
<p>​	<code>go</code>语句作为一个独立的并发控制线程（或称为goroutine），<code>在同一地址空间内</code>开始执行一个函数调用。</p>
<pre tabindex="0"><code>GoStmt = &#34;go&#34; Expression .
</code></pre><p>​	（go语句中的）表达式<code>必须是一个函数或方法调用</code>；其不能用圆括号括起来。对内置函数的调用与<a href="#expression-statements">表达式语句</a>一样受到限制。</p>
<p>​	函数值和参数在调用的goroutine中<a href="../Expressions#order-of-evaluation">像往常一样被求值</a>，但与普通调用不同的是，程序执行不会等待被调用的函数完成。相反，该函数开始在一个新的goroutine中独立执行。当函数终止时，其goroutine也会终止。如果该函数有任何返回值，当函数完成时，它们会被丢弃。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">go</span> <span style="color:#61afef;font-weight:bold">Server</span>()
</span></span><span style="display:flex;"><span><span style="color:#c678dd">go</span> <span style="color:#c678dd">func</span>(<span style="color:#e06c75">ch</span> <span style="color:#c678dd">chan</span><span style="color:#56b6c2">&lt;-</span> <span style="color:#e5c07b">bool</span>) { <span style="color:#c678dd">for</span> { <span style="color:#61afef;font-weight:bold">sleep</span>(<span style="color:#d19a66">10</span>); <span style="color:#e06c75">ch</span> <span style="color:#56b6c2">&lt;-</span> <span style="color:#e5c07b">true</span> }} (<span style="color:#e06c75">c</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="select-statements---select-语句">Select statements - select 语句</h3>
<p>​	 &ldquo;<code>select</code> &ldquo;语句选择一组可能的<a href="#send-statements">发送</a>或<a href="../Expressions#receive-operator">接收</a>操作中的一个来进行。它看起来类似于 &ldquo;<a href="#switch-statements">switch</a> &ldquo;语句，但其 case 都是只涉及通信操作。</p>
<pre tabindex="0"><code>SelectStmt = &#34;select&#34; &#34;{&#34; { CommClause } &#34;}&#34; .
CommClause = CommCase &#34;:&#34; StatementList .
CommCase   = &#34;case&#34; ( SendStmt | RecvStmt ) | &#34;default&#34; .
RecvStmt   = [ ExpressionList &#34;=&#34; | IdentifierList &#34;:=&#34; ] RecvExpr .
RecvExpr   = Expression .
</code></pre><p>​	一个有 RecvStmt 的 case 可以将 RecvExpr 的结果分配给一个或两个变量，这些变量可以用<a href="../DeclarationsAndScope#short-variable-declarations">短变量声明</a>来声明。RecvExpr 必须是一个（可能是圆括号内的）接收操作。最多可以有一个default case，它可以出现在 case 列表的任何地方。</p>
<p>​	 &ldquo;<code>select</code> &ldquo;语句的执行分几个步骤进行：</p>
<ol>
<li>对于语句中的所有情况，在进入 &ldquo;<code>select</code>&ldquo;语句时，接收操作的通道操作数、通道、发送语句的右侧表达式（按源代码出现的顺序）被求值一次。结果是一组要接收或发送的通道，以及对应的要发送的值。无论选择哪一个（如果有）通信操作来进行，在这次求值中的任何副作用都会发生。在 RecvStmt 左侧的表达式有一个短变量声明或赋值，还没有被求值。</li>
<li>如果一个或多个通信可以进行，则通过统一的伪随机选择来选择一个可以进行的通信。否则，如果有一个default case，就会选择该情况。如果没有default case，&quot;<code>select</code>&ldquo;语句就会阻塞，直到至少有一项通信可以进行。</li>
<li>除非选择的情况是default case，否则将执行相应的通信操作。</li>
<li>如果选择的 case 是一个带有短变量声明或赋值的RecvStmt，左边的表达式会被求值，接收到的值（或多个值）被用于赋值。</li>
<li>所选 case 语句列表被执行。</li>
</ol>
<p>​	由于在<code>nil</code>通道上的通信永远不能进行，所以只有<code>nil</code>通道且没有default case 的<code>select</code>语句会永远阻塞。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">30
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">a</span> []<span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">c</span>, <span style="color:#e06c75">c1</span>, <span style="color:#e06c75">c2</span>, <span style="color:#e06c75">c3</span>, <span style="color:#e06c75">c4</span> <span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">i1</span>, <span style="color:#e06c75">i2</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">select</span> {
</span></span><span style="display:flex;"><span><span style="color:#c678dd">case</span> <span style="color:#e06c75">i1</span> = <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">c1</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#e5c07b">print</span>(<span style="color:#98c379">&#34;received &#34;</span>, <span style="color:#e06c75">i1</span>, <span style="color:#98c379">&#34; from c1\n&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">case</span> <span style="color:#e06c75">c2</span> <span style="color:#56b6c2">&lt;-</span> <span style="color:#e06c75">i2</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#e5c07b">print</span>(<span style="color:#98c379">&#34;sent &#34;</span>, <span style="color:#e06c75">i2</span>, <span style="color:#98c379">&#34; to c2\n&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">case</span> <span style="color:#e06c75">i3</span>, <span style="color:#e06c75">ok</span> <span style="color:#56b6c2">:=</span> (<span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">c3</span>):  <span style="color:#7f848e">// same as: i3, ok := &lt;-c3
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#c678dd">if</span> <span style="color:#e06c75">ok</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e5c07b">print</span>(<span style="color:#98c379">&#34;received &#34;</span>, <span style="color:#e06c75">i3</span>, <span style="color:#98c379">&#34; from c3\n&#34;</span>)
</span></span><span style="display:flex;"><span>	} <span style="color:#c678dd">else</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e5c07b">print</span>(<span style="color:#98c379">&#34;c3 is closed\n&#34;</span>)
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span><span style="color:#c678dd">case</span> <span style="color:#e06c75">a</span>[<span style="color:#61afef;font-weight:bold">f</span>()] = <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">c4</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// same as:
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#7f848e">// case t := &lt;-c4
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#7f848e">//	a[f()] = t
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">default</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#e5c07b">print</span>(<span style="color:#98c379">&#34;no communication\n&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">for</span> {  <span style="color:#7f848e">// send random sequence of bits to c
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#c678dd">select</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">case</span> <span style="color:#e06c75">c</span> <span style="color:#56b6c2">&lt;-</span> <span style="color:#d19a66">0</span>:  <span style="color:#7f848e">// note: no statement, no fallthrough, no folding of cases
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#c678dd">case</span> <span style="color:#e06c75">c</span> <span style="color:#56b6c2">&lt;-</span> <span style="color:#d19a66">1</span>:
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">select</span> {}  <span style="color:#7f848e">// block forever
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="return-statements----return-语句">Return statements  - return 语句</h3>
<p>​	函数<code>F</code>中的 &ldquo;<code>return</code>&ldquo;语句终止了<code>F</code>的执行，并且可以选择提供一个或多个结果值。在<code>F</code>返回给它的调用者之前，任何由<code>F</code><a href="#defer-statements">延迟</a>的函数都会被执行。</p>
<pre tabindex="0"><code>ReturnStmt = &#34;return&#34; [ ExpressionList ] .
</code></pre><p>​	在没有结果类型的函数中，&quot;<code>return</code>&ldquo;语句必须不指定任何结果值。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">noResult</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>有三种方法可以从一个有结果类型的函数中返回值：</p>
<ol>
<li>
<p>可以在 &ldquo;<code>return</code>&ldquo;语句中明确列出一个或多个返回值。每个表达式必须是单值的，并且可以分配给函数的结果类型的相应元素。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">simpleF</span>() <span style="color:#e5c07b">int</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">complexF1</span>() (<span style="color:#e06c75">re</span> <span style="color:#e5c07b">float64</span>, <span style="color:#e06c75">im</span> <span style="color:#e5c07b">float64</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#56b6c2">-</span><span style="color:#d19a66">7.0</span>, <span style="color:#56b6c2">-</span><span style="color:#d19a66">4.0</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>&ldquo;<code>return</code>&ldquo;语句中的表达式列表可能是对一个多值函数的单一调用。其效果就像从该函数返回的每个值都被分配到一个临时变量中，其类型为相应的值，随后的 &ldquo;<code>return</code>&ldquo;语句列出了这些变量，此时，前一种情况的规则适用。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">complexF2</span>() (<span style="color:#e06c75">re</span> <span style="color:#e5c07b">float64</span>, <span style="color:#e06c75">im</span> <span style="color:#e5c07b">float64</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#61afef;font-weight:bold">complexF1</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>如果函数的结果类型为其结果参数指定了名称，表达式列表可能是空的。结果参数作为普通的局部变量，函数可以根据需要给它们赋值。<code>return</code>语句会返回这些变量的值。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">complexF3</span>() (<span style="color:#e06c75">re</span> <span style="color:#e5c07b">float64</span>, <span style="color:#e06c75">im</span> <span style="color:#e5c07b">float64</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">re</span> = <span style="color:#d19a66">7.0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">im</span> = <span style="color:#d19a66">4.0</span>
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">devnull</span>) <span style="color:#61afef;font-weight:bold">Write</span>(<span style="color:#e06c75">p</span> []<span style="color:#e5c07b">byte</span>) (<span style="color:#e06c75">n</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">_</span> <span style="color:#e5c07b">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">n</span> = <span style="color:#e5c07b">len</span>(<span style="color:#e06c75">p</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<p>​	不管它们是如何被声明的，<code>所有的结果值在进入函数时都被初始化为</code>其类型的<a href="../ProgramInitializationAndExecution#the-zero-value">零值</a>。指定结果的 &ldquo;<code>return</code>&ldquo;语句<code>在执行任何延迟函数之前</code>设置结果参数。</p>
<p>实现限制：如果在返回的地方有一个与结果参数同名的不同实体（常量、类型或变量）在<a href="../DeclarationsAndScope">作用域</a>内，编译器可能不允许在 &ldquo;<code>return</code>&ldquo;语句中出现空表达式列表。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#e06c75">n</span> <span style="color:#e5c07b">int</span>) (<span style="color:#e06c75">res</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">err</span> <span style="color:#e5c07b">error</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">if</span> <span style="color:#e06c75">_</span>, <span style="color:#e06c75">err</span> <span style="color:#56b6c2">:=</span> <span style="color:#61afef;font-weight:bold">f</span>(<span style="color:#e06c75">n</span><span style="color:#56b6c2">-</span><span style="color:#d19a66">1</span>); <span style="color:#e06c75">err</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">nil</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">return</span>  <span style="color:#7f848e">// invalid return statement: err is shadowed =&gt; 无效的返回语句： err 被遮蔽了
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="break-statements---break-语句">Break statements - break 语句</h3>
<p>​	 &ldquo;<code>break</code> &ldquo;语句可以终止同一函数中最里面的 &ldquo;<a href="#for-statements-for">for</a>&quot;、&quot;<a href="#switch-statements-switch">switch</a> &ldquo;或 &ldquo;<a href="#select-statements-select">select</a> &ldquo;语句的执行。</p>
<pre tabindex="0"><code>BreakStmt = &#34;break&#34; [ Label ] .
</code></pre><p>​	如果有一个标签，它必须是一个封闭的 &ldquo;<code>for</code>&quot;、&quot;<code>switch</code> &ldquo;或 &ldquo;<code>select</code> &ldquo;语句的标签，而且是执行终止的那一个。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">OuterLoop</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span> = <span style="color:#d19a66">0</span>; <span style="color:#e06c75">i</span> &lt; <span style="color:#e06c75">n</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">for</span> <span style="color:#e06c75">j</span> = <span style="color:#d19a66">0</span>; <span style="color:#e06c75">j</span> &lt; <span style="color:#e06c75">m</span>; <span style="color:#e06c75">j</span><span style="color:#56b6c2">++</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#c678dd">switch</span> <span style="color:#e06c75">a</span>[<span style="color:#e06c75">i</span>][<span style="color:#e06c75">j</span>] {
</span></span><span style="display:flex;"><span>			<span style="color:#c678dd">case</span> <span style="color:#e5c07b">nil</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#e06c75">state</span> = <span style="color:#e06c75">Error</span>
</span></span><span style="display:flex;"><span>				<span style="color:#c678dd">break</span> <span style="color:#e06c75">OuterLoop</span>
</span></span><span style="display:flex;"><span>			<span style="color:#c678dd">case</span> <span style="color:#e06c75">item</span>:
</span></span><span style="display:flex;"><span>				<span style="color:#e06c75">state</span> = <span style="color:#e06c75">Found</span>
</span></span><span style="display:flex;"><span>				<span style="color:#c678dd">break</span> <span style="color:#e06c75">OuterLoop</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="continue-statements----continue-语句">Continue statements  - continue 语句</h3>
<p>​	 &ldquo;<code>continue</code> &ldquo;语句通过将控制推进到循环块的末端来开始最内层的 <a href="#for-statements-for">&ldquo;for &ldquo;循环</a>的下一次迭代。&quot;<code>for</code> &ldquo;循环必须是在同一个函数中。</p>
<pre tabindex="0"><code>ContinueStmt = &#34;continue&#34; [ Label ] .
</code></pre><p>​	如果有一个标签，它必须是一个封闭的 &ldquo;<code>for</code> &ldquo;语句的标签，而且是执行前进的那一个。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">RowLoop</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">for</span> <span style="color:#e06c75">y</span>, <span style="color:#e06c75">row</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">range</span> <span style="color:#e06c75">rows</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">for</span> <span style="color:#e06c75">x</span>, <span style="color:#e06c75">data</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">range</span> <span style="color:#e06c75">row</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#c678dd">if</span> <span style="color:#e06c75">data</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">endOfRow</span> {
</span></span><span style="display:flex;"><span>				<span style="color:#c678dd">continue</span> <span style="color:#e06c75">RowLoop</span>
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			<span style="color:#e06c75">row</span>[<span style="color:#e06c75">x</span>] = <span style="color:#e06c75">data</span> <span style="color:#56b6c2">+</span> <span style="color:#61afef;font-weight:bold">bias</span>(<span style="color:#e06c75">x</span>, <span style="color:#e06c75">y</span>)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="goto-statements-语句-goto">Goto statements 语句 goto</h3>
<p>​	 &ldquo;<code>goto</code> &ldquo;语句将控制转移到同一函数中具有相应标签的语句。</p>
<pre tabindex="0"><code>GotoStmt = &#34;goto&#34; Label .
goto Error
</code></pre><p>​	执行 &ldquo;<code>goto</code> &ldquo;语句不能导致任何变量进入goto处的作用域之外的<a href="../DeclarationsAndScope">作用域</a>。例如，这个例子：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>	<span style="color:#c678dd">goto</span> <span style="color:#e06c75">L</span>  <span style="color:#7f848e">// BAD
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">v</span> <span style="color:#56b6c2">:=</span> <span style="color:#d19a66">3</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">L</span>:
</span></span></code></pre></td></tr></table>
</div>
</div><p>是错误的，因为跳转到标签<code>L</code>时，跳过了创建<code>v</code>的过程。</p>
<p>​	<a href="../Blocks">块</a>外的 &ldquo;<code>goto</code> &ldquo;语句不能跳到该块内的标签。例如，这个例子：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">if</span> <span style="color:#e06c75">n</span><span style="color:#56b6c2">%</span><span style="color:#d19a66">2</span> <span style="color:#56b6c2">==</span> <span style="color:#d19a66">1</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">goto</span> <span style="color:#e06c75">L1</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#c678dd">for</span> <span style="color:#e06c75">n</span> &gt; <span style="color:#d19a66">0</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">f</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">n</span><span style="color:#56b6c2">--</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">L1</span>:
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">f</span>()
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">n</span><span style="color:#56b6c2">--</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>是错误的，因为标签<code>L1</code>在 &ldquo;for &ldquo;语句的块内，而<code>goto</code>不在其中。</p>
<h3 id="fallthrough-statements-语句-fallthrough">Fallthrough statements 语句 fallthrough</h3>
<p>​	在<a href="#expression-switches">表达式开关语句</a>中，&quot;<code>fallthrough</code> &ldquo;语句将控制转移到下一个<code>case</code>子句的第一个语句。它只能作为这种子句中的最后一个非空语句使用。</p>
<pre tabindex="0"><code>FallthroughStmt = &#34;fallthrough&#34; .
</code></pre><h3 id="defer-statements-语句-defer">Defer statements 语句 defer</h3>
<p>​	&ldquo;<code>defer</code>&ldquo;语句调用一个函数，该函数的执行被推迟到外层函数返回的那一刻，或者是因为外层函数执行了 <a href="#return-statements-return">return 语句</a>，达到了其<a href="../DeclarationsAndScope#function-declarations">函数体</a>的末端，或者是因为相应的goroutine正在<a href="../Built-inFunctions#handling-panics">恐慌</a>。</p>
<pre tabindex="0"><code>DeferStmt = &#34;defer&#34; Expression .
</code></pre><p>这个表达式必须是一个函数或方法的调用；它不能是被圆括号括起来的。对内置函数的调用与<a href="#expression-statements">表达式语句</a>一样受到限制。</p>
<p>​	每次执行 &ldquo;<code>defer</code> &ldquo;语句时，函数值和调用的参数<a href="../Expressions#order-of-evaluation">像往常一样被求值</a>并重新保存，但实际的函数不会被调用。相反，<code>被延迟函数</code>在外层的函数返回之前立即被调用，<code>其顺序与它们被延迟的顺序相反</code>。也就是说，如果外层的函数通过一个明确的 <a href="#return-statements-return">return 语句</a>返回，<code>被延迟函数</code>在任何结果参数被该 <code>reurn 语句</code>设置后执行，<code>但在外层函数返回给其调用者之前</code>。如果<code>被延迟函数</code>值被求值为<code>nil</code>，那么在调用该被延迟函数时会出现执行<a href="">恐慌</a>（而不是当 &ldquo;<code>defer</code> &ldquo;语句被执行时）。</p>
<p>​	例如，如果<code>被延迟函数</code>是一个<a href="../Expressions#function-literals">函数字面量</a>，并且外层的函数有在该字面量的作用域内的<a href="../Types#function-types">命名结果参数</a>，那么该<code>被延迟函数</code>可以在这些结果参数被返回之前访问和修改它们。如果<code>被延迟函数</code>有任何返回值，这些返回值将在函数完成时被丢弃。(参见<a href="../Built-inFunctions#handling-panics">处理恐慌</a>一节)。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#61afef;font-weight:bold">lock</span>(<span style="color:#e06c75">l</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">defer</span> <span style="color:#61afef;font-weight:bold">unlock</span>(<span style="color:#e06c75">l</span>)  <span style="color:#7f848e">// unlocking happens before surrounding function returns =&gt; unlock 发生在外层函数返回之前
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// prints 3 2 1 0 before surrounding function returns
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// =&gt; 在外层函数返回之前，打印 3 2 1 0
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#d19a66">0</span>; <span style="color:#e06c75">i</span> <span style="color:#56b6c2">&lt;=</span> <span style="color:#d19a66">3</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">defer</span> <span style="color:#e06c75">fmt</span>.<span style="color:#61afef;font-weight:bold">Print</span>(<span style="color:#e06c75">i</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// f returns 42
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">f</span>() (<span style="color:#e06c75">result</span> <span style="color:#e5c07b">int</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">defer</span> <span style="color:#c678dd">func</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#7f848e">// result is accessed after it was set to 6 by the return statement =&gt; 结果会在它被 return 语句设为 6 之后再被访问
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		<span style="color:#e06c75">result</span> <span style="color:#56b6c2">*=</span> <span style="color:#d19a66">7</span>
</span></span><span style="display:flex;"><span>	}()
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#d19a66">6</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-fad60f56493e437988bc0a6c0f8f24b3">13 - 内置函数</h1>
    
	<h2 id="built-in-functions-内置函数">Built-in functions 内置函数</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Built-in_functions" target="_blank" rel="noopener">https://go.dev/ref/spec#Built-in_functions</a></p>
</blockquote>
<p>​	内置函数是<a href="../DeclarationsAndScope#predeclared-identifiers">预先声明的</a>。它们像其他函数一样被调用，但其中一些函数接受一个类型而非表达式作为其第一个实参。</p>
<p>​	内置函数没有标准的Go类型，所以它们只能出现在<a href="../Expressions#calls">调用表达式</a>中；它们不能作为函数值使用。</p>
<h3 id="close">Close</h3>
<p>​	对于一个<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a>为<a href="../Types#channel-types">通道</a>的参数<code>ch</code>，内置函数<code>close</code>记录了通道上将不再有任何值被发送。如果<code>ch</code>是一个仅接收的通道，那么（关闭它）是一个错误。发送到或关闭一个已关闭的通道会导致<a href="../Run-timePanics">运行时恐慌</a>。关闭<code>nil</code>通道也会引起<a href="../Run-timePanics">运行时恐慌</a>。在调用<code>close</code>后，并且在任何先前发送的值被接收后，接收操作将返回通道类型的<code>零值</code>而不阻塞。多值<a href="../Expressions#receive-operator">接收操作</a>会返回一个接收值以及通道是否被关闭的指示。</p>
<h3 id="length-and-capacity-长度和容量">Length and capacity 长度和容量</h3>
<p>​	内置函数<code>len</code>和<code>cap</code>接受各种类型的实参并返回<code>int</code>类型的结果。该实现保证结果总是适合于一个<code>int</code>。</p>
<pre tabindex="0"><code>Call      Argument type    Result
调用        实参类型          结果

len(s)    string type      string length in bytes
          [n]T, *[n]T      array length (== n)
          []T              slice length
          map[K]T          map length (number of defined keys)
          chan T           number of elements queued in channel buffer
          type parameter   see below

cap(s)    [n]T, *[n]T      array length (== n)
          []T              slice capacity
          chan T           channel buffer capacity
          type parameter   see below
</code></pre><p>​	如果参数类型是一个<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a><code>P</code>，调用<code>len(e)</code>（或<code>cap(e)</code>）必须对<code>P</code>的类型集中的每个类型有效。其结果是（类型对应<code>P</code>被<a href="../Expressions#instantiations">实例化</a>时使用的类型实参的）实参的长度（或容量）。</p>
<p>​	切片的容量是底层数组中分配到的元素的数量。在任何时候，以下关系都是成立的：</p>
<pre tabindex="0"><code>0 &lt;= len(s) &lt;= cap(s)
</code></pre><p>​	<code>nil</code>切片、<code>nil</code>映射或<code>nil</code>通道的长度是<code>0</code>。<code>nil</code>切片或<code>nil</code>通道的容量是0。</p>
<p>​	如果<code>s</code>是一个字符串<a href="../Constants">常量</a>，那么表达式<code>len(s)</code>就是常量。如果<code>s</code>的类型是一个数组或指向数组的指针，并且表达式<code>s</code>不包含<a href="../Expressions#receive-operator">通道接收</a>或（非常量）<a href="../Expressions#calls">函数调用</a>，那么表达式<code>len(s)</code>和<code>cap(s)</code>是常量；在这种情况下，<code>s</code>不被求值。否则，<code>len</code>和<code>cap</code>的调用不是常量，<code>s</code>被求值。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">const</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">c1</span> = <span style="color:#e5c07b">imag</span>(<span style="color:#d19a66">2i</span>)                    <span style="color:#7f848e">// imag(2i) = 2.0 is a constant
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">c2</span> = <span style="color:#e5c07b">len</span>([<span style="color:#d19a66">10</span>]<span style="color:#e5c07b">float64</span>{<span style="color:#d19a66">2</span>})         <span style="color:#7f848e">// [10]float64{2} contains no function calls
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">c3</span> = <span style="color:#e5c07b">len</span>([<span style="color:#d19a66">10</span>]<span style="color:#e5c07b">float64</span>{<span style="color:#e06c75">c1</span>})        <span style="color:#7f848e">// [10]float64{c1} contains no function calls
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">c4</span> = <span style="color:#e5c07b">len</span>([<span style="color:#d19a66">10</span>]<span style="color:#e5c07b">float64</span>{<span style="color:#e5c07b">imag</span>(<span style="color:#d19a66">2i</span>)})  <span style="color:#7f848e">// imag(2i) is a constant and no function call is issued
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">c5</span> = <span style="color:#e5c07b">len</span>([<span style="color:#d19a66">10</span>]<span style="color:#e5c07b">float64</span>{<span style="color:#e5c07b">imag</span>(<span style="color:#e06c75">z</span>)})   <span style="color:#7f848e">// invalid: imag(z) is a (non-constant) function call
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">z</span> <span style="color:#e5c07b">complex128</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="allocation-分配">Allocation 分配</h3>
<p>​	内置函数<code>new</code>接收一个类型<code>T</code>，在运行时为该类型的<a href="../Variables">变量</a>分配存储空间，并返回一个<a href="../Types#pointer-types">指向</a>它的<code>*T</code>类型的值。该变量被初始化，如<a href="../ProgramInitializationAndExecution#the-zero-value">初始值</a>一节中所述。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">new</span>(<span style="color:#e06c75">T</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>举例来说</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">S</span> <span style="color:#c678dd">struct</span> { <span style="color:#e06c75">a</span> <span style="color:#e5c07b">int</span>; <span style="color:#e06c75">b</span> <span style="color:#e5c07b">float64</span> }
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">new</span>(<span style="color:#e06c75">S</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>为一个<code>S</code>类型的变量分配存储空间，初始化它（<code>a=0</code>， <code>b=0.0</code>），并返回一个包含该位置地址的<code>*S</code>类型的值。</p>
<h3 id="making-slices-maps-and-channels-制作切片映射和通道">Making slices, maps and channels 制作切片、映射和通道</h3>
<p>​	内置函数<code>make</code>接收一个类型<code>T</code>，后面可以选择一个特定类型的表达式列表。<code>T</code>的<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a><code>必须是一个切片、映射或通道</code>。它返回一个类型为<code>T</code>（不是<code>*T</code>）的值。内存被初始化，如<a href="../ProgramInitializationAndExecution#the-zero-value">初始值</a>一节中所述。</p>
<pre tabindex="0"><code>Call             Core type    Result

make(T, n)       slice        slice of type T with length n and capacity n
make(T, n, m)    slice        slice of type T with length n and capacity m

make(T)          map          map of type T
make(T, n)       map          map of type T with initial space for approximately n elements

make(T)          channel      unbuffered channel of type T
make(T, n)       channel      buffered channel of type T, buffer size n
</code></pre><p>​	每个大小实参<code>n</code>和<code>m</code>必须是<a href="../Types#numeric-types">整型</a>，或者是一个只包含整型的类型集，或者是一个无类型的<a href="../Constants">常量</a>。一个常量大小参数必须是非负数，并且可以用<code>int</code>类型的值<a href="../PropertiesOfTypesAndValues#representability">表示</a>；如果它是一个无类型的常量，它被赋予<code>int</code>类型。如果<code>n</code>和<code>m</code>都被提供并且是常量，那么<code>n</code>必须<strong>不大于</strong><code>m</code>。对于切片和通道，如果<code>n</code>在运行时是负数或者大于<code>m</code>，就会发生<a href="../Run-timePanics">运行时恐慌</a>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">make</span>([]<span style="color:#e5c07b">int</span>, <span style="color:#d19a66">10</span>, <span style="color:#d19a66">100</span>)       <span style="color:#7f848e">// slice with len(s) == 10, cap(s) == 100
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">make</span>([]<span style="color:#e5c07b">int</span>, <span style="color:#d19a66">1e3</span>)           <span style="color:#7f848e">// slice with len(s) == cap(s) == 1000
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">make</span>([]<span style="color:#e5c07b">int</span>, <span style="color:#d19a66">1</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#d19a66">63</span>)         <span style="color:#7f848e">// illegal: len(s) is not representable by a value of type int =&gt; 非法的: len(s) 不能被 int 类型的值表示
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">s</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">make</span>([]<span style="color:#e5c07b">int</span>, <span style="color:#d19a66">10</span>, <span style="color:#d19a66">0</span>)         <span style="color:#7f848e">// illegal: len(s) &gt; cap(s) =&gt; 非法的: len(s) &gt; cap(s)
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">c</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">make</span>(<span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>, <span style="color:#d19a66">10</span>)         <span style="color:#7f848e">// channel with a buffer size of 10
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">m</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">make</span>(<span style="color:#c678dd">map</span>[<span style="color:#e5c07b">string</span>]<span style="color:#e5c07b">int</span>, <span style="color:#d19a66">100</span>)  <span style="color:#7f848e">// map with initial space for approximately 100 elements
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	调用<code>map</code>类型和大小提示<code>n</code>的<code>make</code>将创建一个初始空间可容纳<code>n</code>个map元素的<code>map</code>。<code>具体的行为是依赖于实现的</code>。</p>
<h3 id="appending-to-and-copying-slices-追加和复制切片">Appending to and copying slices 追加和复制切片</h3>
<p>​	内置函数<code>append</code>和<code>copy</code>可以帮助进行常见的切片操作。对于这两个函数，其结果与实参所引用的内存是否重叠无关。</p>
<p>The <a href="https://go.dev/ref/spec#Function_types" target="_blank" rel="noopener">variadic</a> function <code>append</code> appends zero or more values <code>x</code> to a slice <code>s</code> and returns the resulting slice of the same type as <code>s</code>. The <a href="https://go.dev/ref/spec#Core_types" target="_blank" rel="noopener">core type</a> of <code>s</code> must be a slice of type <code>[]E</code>. The values <code>x</code> are passed to a parameter of type <code>...E</code> and the respective <a href="https://go.dev/ref/spec#Passing_arguments_to_..._parameters" target="_blank" rel="noopener">parameter passing rules</a> apply. As a special case, if the core type of <code>s</code> is <code>[]byte</code>, <code>append</code> also accepts a second argument with core type <a href="https://go.dev/ref/spec#Core_types" target="_blank" rel="noopener"><code>bytestring</code></a> followed by <code>...</code>. This form appends the bytes of the byte slice or string.</p>
<p>​	<a href="../Types#function-types">可变参数</a>函数<code>append</code>将<strong>零个或多个值</strong><code>x</code>追加到一个切片<code>s</code>，并返回与<code>s</code>相同类型的结果切片。值<code>x</code>被传递给一个类型为<code>...E</code>的参数，各自的<a href="../Expressions#passing-arguments-to-parameters">参数传递规则</a>适用。<strong>作为一个特例</strong>，如果<code>s</code>的<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a>是<code>[]byte</code>，<code>append</code>也接受第二个参数，其核心类型是<a href="../PropertiesOfTypesAndValues#core-types">bytestring</a>，后面是<code>...</code> 。这种形式追加了字节切片或字符串的字节。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">append</span>(<span style="color:#e06c75">s</span> <span style="color:#e06c75">S</span>, <span style="color:#e06c75">x</span> <span style="color:#56b6c2">...</span><span style="color:#e06c75">E</span>) <span style="color:#e06c75">S</span>  <span style="color:#7f848e">// core type of S is []E
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	如果<code>s</code>的容量不足以容纳额外的值，<code>append</code>会分配一个新的、足够大的底层数组，同时容纳现有的切片元素和额外的值。否则，<code>append</code>复用原来的底层数组。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">s0</span> <span style="color:#56b6c2">:=</span> []<span style="color:#e5c07b">int</span>{<span style="color:#d19a66">0</span>, <span style="color:#d19a66">0</span>}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">s1</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">append</span>(<span style="color:#e06c75">s0</span>, <span style="color:#d19a66">2</span>)                <span style="color:#7f848e">// append a single element     s1 == []int{0, 0, 2}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">s2</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">append</span>(<span style="color:#e06c75">s1</span>, <span style="color:#d19a66">3</span>, <span style="color:#d19a66">5</span>, <span style="color:#d19a66">7</span>)          <span style="color:#7f848e">// append multiple elements    s2 == []int{0, 0, 2, 3, 5, 7}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">s3</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">append</span>(<span style="color:#e06c75">s2</span>, <span style="color:#e06c75">s0</span><span style="color:#56b6c2">...</span>)            <span style="color:#7f848e">// append a slice              s3 == []int{0, 0, 2, 3, 5, 7, 0, 0}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">s4</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">append</span>(<span style="color:#e06c75">s3</span>[<span style="color:#d19a66">3</span>:<span style="color:#d19a66">6</span>], <span style="color:#e06c75">s3</span>[<span style="color:#d19a66">2</span>:]<span style="color:#56b6c2">...</span>)   <span style="color:#7f848e">// append overlapping slice    s4 == []int{3, 5, 7, 2, 3, 5, 7, 0, 0}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">t</span> []<span style="color:#c678dd">interface</span>{}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">t</span> = <span style="color:#e5c07b">append</span>(<span style="color:#e06c75">t</span>, <span style="color:#d19a66">42</span>, <span style="color:#d19a66">3.1415</span>, <span style="color:#98c379">&#34;foo&#34;</span>)   <span style="color:#7f848e">//                             t == []interface{}{42, 3.1415, &#34;foo&#34;}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">b</span> []<span style="color:#e5c07b">byte</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">b</span> = <span style="color:#e5c07b">append</span>(<span style="color:#e06c75">b</span>, <span style="color:#98c379">&#34;bar&#34;</span><span style="color:#56b6c2">...</span>)            <span style="color:#7f848e">// append string contents      b == []byte{&#39;b&#39;, &#39;a&#39;, &#39;r&#39; }
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	函数<code>copy</code>将切片元素从源<code>src</code>复制到目标<code>dst</code>，<code>并返回复制的元素数量</code>。两个参数的核心类型必须是具有<a href="../PropertiesOfTypesAndValues#type-identity">一致的</a>元素类型的切片。复制的元素数是<code>len(src)</code>和<code>len(dst)</code>中的最小值。<strong>作为一种特殊情况</strong>，如果目标的<a href="../PropertiesOfTypesAndValues#core-types">核心类型</a>是<code>[]byte</code>，<code>copy</code>也接受一个核心类型为<a href="../PropertiesOfTypesAndValues#core-types">bytestring</a>的源参数。这种形式将字节切片或字符串中的字节复制到字节切片中。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">copy</span>(<span style="color:#e06c75">dst</span>, <span style="color:#e06c75">src</span> []<span style="color:#e06c75">T</span>) <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">copy</span>(<span style="color:#e06c75">dst</span> []<span style="color:#e5c07b">byte</span>, <span style="color:#e06c75">src</span> <span style="color:#e5c07b">string</span>) <span style="color:#e5c07b">int</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>例子：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">a</span> = [<span style="color:#56b6c2">...</span>]<span style="color:#e5c07b">int</span>{<span style="color:#d19a66">0</span>, <span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span>, <span style="color:#d19a66">3</span>, <span style="color:#d19a66">4</span>, <span style="color:#d19a66">5</span>, <span style="color:#d19a66">6</span>, <span style="color:#d19a66">7</span>}
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">s</span> = <span style="color:#e5c07b">make</span>([]<span style="color:#e5c07b">int</span>, <span style="color:#d19a66">6</span>)
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">b</span> = <span style="color:#e5c07b">make</span>([]<span style="color:#e5c07b">byte</span>, <span style="color:#d19a66">5</span>)
</span></span><span style="display:flex;"><span><span style="color:#e06c75">n1</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">copy</span>(<span style="color:#e06c75">s</span>, <span style="color:#e06c75">a</span>[<span style="color:#d19a66">0</span>:])            <span style="color:#7f848e">// n1 == 6, s == []int{0, 1, 2, 3, 4, 5}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">n2</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">copy</span>(<span style="color:#e06c75">s</span>, <span style="color:#e06c75">s</span>[<span style="color:#d19a66">2</span>:])            <span style="color:#7f848e">// n2 == 4, s == []int{2, 3, 4, 5, 4, 5}
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">n3</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">copy</span>(<span style="color:#e06c75">b</span>, <span style="color:#98c379">&#34;Hello, World!&#34;</span>)  <span style="color:#7f848e">// n3 == 5, b == []byte(&#34;Hello&#34;)
</span></span></span></code></pre></td></tr></table>
</div>
</div><h3 id="deletion-of-map-elements-删除映射元素">Deletion of map elements 删除映射元素</h3>
<p>​	内置函数<code>delete</code>可以从<a href="../Types#map-types">映射</a><code>m</code>中删除<code>键值</code>为<code>k</code>的元素，值<code>k</code>必须可以<a href="../PropertiesOfTypesAndValues#assignability">分配</a>给<code>m</code>的键类型。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">delete</span>(<span style="color:#e06c75">m</span>, <span style="color:#e06c75">k</span>)  <span style="color:#7f848e">// remove element m[k] from map m
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>​	如果<code>m</code>的类型是<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a>，那么该类型集合中的所有类型必须是映射，并且它们必须都有相同的<code>键类型</code>。</p>
<p>​	如果映射<code>m</code>是<code>nil</code>或者元素<code>m[k]</code>不存在，delete就是一个空操作。</p>
<h3 id="manipulating-complex-numbers-操纵复数">Manipulating complex numbers 操纵复数</h3>
<p>​	有三个函数<code>组装</code>和<code>分解</code>复数。内置函数 <code>complex</code> 从浮点实部和虚部构造一个复数值，而 <code>real</code> 和 <code>imag</code> 则提取复数值的实部和虚部。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">complex</span>(<span style="color:#e06c75">realPart</span>, <span style="color:#e06c75">imaginaryPart</span> <span style="color:#e06c75">floatT</span>) <span style="color:#e06c75">complexT</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">real</span>(<span style="color:#e06c75">complexT</span>) <span style="color:#e06c75">floatT</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">imag</span>(<span style="color:#e06c75">complexT</span>) <span style="color:#e06c75">floatT</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	实参的类型和返回值相对应。对于<code>complex</code>函数，两个实参必须是相同的<a href="../Types#numeric-types">浮点类型</a>，返回类型是具有对应浮点成分的<a href="../Types#numeric-types">复数类型</a>：<code>float32</code>类型的实参对应<code>comple64</code>复数类型，而<code>float64</code>类型的实参对应<code>comple128</code>复数类型。如果其中一个实参的值是一个无类型常量，那么它首先会被隐式<a href="../Expressions#conversions">转换</a>为另一个实参的类型。如果两个参数都求值为无类型常量，那么它们必须是<code>非复数</code>，或者它们的虚数部分必须为零，这样函数的返回值就是一个无类型的复数常量。</p>
<p>​	对于<code>real</code>和<code>imag</code>，实参必须是复数类型，返回类型是相应的浮点类型：<code>float32</code>对应<code>complex64</code>，<code>float64</code>对应<code>complex128</code>。如果实参的值是一个无类型的常量，它必须是一个数字，这样函数的返回值就是一个无类型的浮点常量。</p>
<p>​	<code>real</code>和<code>imag</code>函数一起构成了复数的逆运算，所以对于一个复数类型<code>Z</code>的值<code>z</code>来说，<code>z == Z(complex(real(z), imag(z)))</code>。</p>
<p>​	如果这些函数的操作数都是常量，返回值就是一个常量。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">a</span> = <span style="color:#e5c07b">complex</span>(<span style="color:#d19a66">2</span>, <span style="color:#56b6c2">-</span><span style="color:#d19a66">2</span>)             <span style="color:#7f848e">// complex128 &lt;=仍有疑问？？怎么推导出来是 complex128 ？
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">b</span> = <span style="color:#e5c07b">complex</span>(<span style="color:#d19a66">1.0</span>, <span style="color:#56b6c2">-</span><span style="color:#d19a66">1.4</span>)       <span style="color:#7f848e">// untyped complex constant 1 - 1.4i
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">x</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">float32</span>(<span style="color:#e06c75">math</span>.<span style="color:#61afef;font-weight:bold">Cos</span>(<span style="color:#e06c75">math</span>.<span style="color:#e06c75">Pi</span><span style="color:#56b6c2">/</span><span style="color:#d19a66">2</span>))  <span style="color:#7f848e">// float32
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">c64</span> = <span style="color:#e5c07b">complex</span>(<span style="color:#d19a66">5</span>, <span style="color:#56b6c2">-</span><span style="color:#e06c75">x</span>)           <span style="color:#7f848e">// complex64
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">s</span> <span style="color:#e5c07b">int</span> = <span style="color:#e5c07b">complex</span>(<span style="color:#d19a66">1</span>, <span style="color:#d19a66">0</span>)          <span style="color:#7f848e">// untyped complex constant 1 + 0i can be converted to int
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">_</span> = <span style="color:#e5c07b">complex</span>(<span style="color:#d19a66">1</span>, <span style="color:#d19a66">2</span><span style="color:#56b6c2">&lt;&lt;</span><span style="color:#e06c75">s</span>)               <span style="color:#7f848e">// illegal: 2 assumes floating-point type, cannot shift =&gt; 非法的：2 被认为是 浮点类型，不能移位 &lt;=仍有疑问？？2为什么是浮点类型？怎么推导出来的
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">rl</span> = <span style="color:#e5c07b">real</span>(<span style="color:#e06c75">c64</span>)                 <span style="color:#7f848e">// float32
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">im</span> = <span style="color:#e5c07b">imag</span>(<span style="color:#e06c75">a</span>)                   <span style="color:#7f848e">// float64
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">const</span> <span style="color:#e06c75">c</span> = <span style="color:#e5c07b">imag</span>(<span style="color:#e06c75">b</span>)                  <span style="color:#7f848e">// untyped constant -1.4
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">_</span> = <span style="color:#e5c07b">imag</span>(<span style="color:#d19a66">3</span> <span style="color:#56b6c2">&lt;&lt;</span> <span style="color:#e06c75">s</span>)                   <span style="color:#7f848e">// illegal: 3 assumes complex type, cannot shift =&gt; 非法的：3 被认为是复数类型，不能移位 &lt;=仍有疑问？？3为什么是浮点类型？怎么推导出来的
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Arguments of type parameter type are not permitted.</p>
<p>不允许使用参数类型的实参。</p>
<h3 id="handling-panics-处理恐慌">Handling panics 处理恐慌</h3>
<p>​	两个内置函数，<code>panic</code>和<code>recover</code>，协助报告和处理<a href="../Run-timePanics">运行时恐慌</a>和程序定义的错误情况。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#e5c07b">panic</span>(<span style="color:#c678dd">interface</span>{})
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#e5c07b">recover</span>() <span style="color:#c678dd">interface</span>{}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	在执行函数<code>F</code>时，对<code>panic</code>的显式调用或<a href="../Run-timePanics">运行时恐慌</a>终止了<code>F</code>的执行，然后被<code>F</code>延迟的任何函数会照常执行。接下来，任何被<code>F</code>的调用者<a href="../Statements#defer-statements">延迟</a>的函数都会被运行，以此类推，直到被执行中的goroutine中的顶级函数所延迟的任何函数。此时，程序被终止，错误情况被报告，包括<code>panic</code>的实参值。这个终止过程被称为<code>panicking</code>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">panic</span>(<span style="color:#d19a66">42</span>)
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">panic</span>(<span style="color:#98c379">&#34;unreachable&#34;</span>)
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">panic</span>(<span style="color:#61afef;font-weight:bold">Error</span>(<span style="color:#98c379">&#34;cannot parse&#34;</span>))
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	<code>recover</code>函数允许程序管理 panicking goroutine 的行为。假设函数<code>G</code>延迟了一个调用<code>recover</code>的函数<code>D</code>，并且在<code>G</code>执行的同一个goroutine上的一个函数发生了恐慌。当被延迟函数的运行到达<code>D</code>时，<code>D</code>调用<code>recover</code>的返回值将是传递给调用<code>panic</code>的值。如果<code>D</code>正常返回，没有启动新的<code>panic</code>，则 panicking goroutine 停止。在这种情况下，<code>G</code>和对<code>panic</code>的调用之间调用的函数的状态被丢弃，并恢复正常执行。<code>G</code>在<code>D</code>之前被延迟的任何函数随后被运行，<code>G</code>的执行通过返回给它的调用者而终止。</p>
<p>​	如果以下任何一个条件成立，<code>recover</code>的返回值为<code>nil</code>：</p>
<ul>
<li><code>panic</code>的参数是空的。</li>
<li>goroutine没有陷入panicking。</li>
<li><code>recover</code>不是由被延迟函数直接调用的。</li>
</ul>
<p>下面的例子中的<code>protect</code>函数调用了函数实参<code>g</code>，并保护调用者免受<code>g</code>引发的运行时恐慌。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">protect</span>(<span style="color:#e06c75">g</span> <span style="color:#c678dd">func</span>()) {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">defer</span> <span style="color:#c678dd">func</span>() {
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">log</span>.<span style="color:#61afef;font-weight:bold">Println</span>(<span style="color:#98c379">&#34;done&#34;</span>)  <span style="color:#7f848e">// Println executes normally even if there is a panic
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		<span style="color:#c678dd">if</span> <span style="color:#e06c75">x</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">recover</span>(); <span style="color:#e06c75">x</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">nil</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#e06c75">log</span>.<span style="color:#61afef;font-weight:bold">Printf</span>(<span style="color:#98c379">&#34;run time panic: %v&#34;</span>, <span style="color:#e06c75">x</span>)
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}()
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">log</span>.<span style="color:#61afef;font-weight:bold">Println</span>(<span style="color:#98c379">&#34;start&#34;</span>)
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">g</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="bootstrapping-引导">Bootstrapping 引导</h3>
<p>​	目前的实现提供了几个在引导（bootstrapping）过程中有用的内置函数。为了完整起见，这些函数被记录下来，但不保证会留在语言中。它们并不返回结果。</p>
<pre tabindex="0"><code>Function   Behavior

print      prints all arguments; formatting of arguments is implementation-specific =&gt; 打印所有实参；实参的格式化和实现有关
println    like print but prints spaces between arguments and a newline at the end =&gt; 和 print 类似，但是会在每个实参间打印空格，在结尾打印新行
</code></pre><p>实现限制：<code>print</code>和<code>println</code>不一定需要接受任意的实参类型，但必须支持布尔型、数字型和字符串型的打印。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-91fab36fce22022fbcd4eb43d0566dc4">14 - 包</h1>
    
	<h2 id="packages-包">Packages 包</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Packages" target="_blank" rel="noopener">https://go.dev/ref/spec#Packages </a></p>
</blockquote>
<p>​	Go程序是通过链接包来构建的。一个包是由一个或多个源文件构成的，这些文件共同声明了属于该包的常量、类型、变量和函数，并且可以在同一包的所有文件中访问。这些元素可以<a href="../DeclarationsAndScope#exported-identifiers">导出</a>并在另一个包中使用。</p>
<h3 id="source-file-organization-源文件组织">Source file organization 源文件组织</h3>
<p>​	每个源文件都由一个 package 子句（package clause）组成，该子句定义了它所属的包，然后是一组可能为空的导入声明，这些导入声明声明了它希望使用的包的内容，然后是一组可能为空的函数、类型、变量和常量的声明。</p>
<pre tabindex="0"><code>SourceFile       = PackageClause &#34;;&#34; { ImportDecl &#34;;&#34; } { TopLevelDecl &#34;;&#34; } .
</code></pre><h3 id="package-clause-包子句">Package clause 包子句</h3>
<p>每个源文件的开头都有一个包子句，定义了该文件所属的包。</p>
<pre tabindex="0"><code>PackageClause  = &#34;package&#34; PackageName .
PackageName    = identifier .
</code></pre><p><code>PackageName（包名）</code>不能是<a href="../DeclarationsAndScope#blank-identifier">空白标识符（即<code>_</code>）</a>。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">math</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	共享相同<code>PackageName（包名）</code>的一组文件构成了一个包的实现。实现可能会要求一个包的所有源文件存放在同一个目录中。</p>
<h3 id="import-declarations-导入声明">Import declarations 导入声明</h3>
<p>​	导入声明指出，包含该声明的源文件依赖于导入包的功能（<a href="../ProgramInitializationAndExecution">§程序初始化和执行</a>），并且能够访问这些被导入的包的<a href="../DeclarationsAndScope#exported-identifiers">导出</a>标识符。该导入命名了一个用于访问的标识符（PackageName 包名）和一个指定要导入的包的ImportPath（导入路径）。</p>
<pre tabindex="0"><code>ImportDecl       = &#34;import&#34; ( ImportSpec | &#34;(&#34; { ImportSpec &#34;;&#34; } &#34;)&#34; ) .
ImportSpec       = [ &#34;.&#34; | PackageName ] ImportPath .
ImportPath       = string_lit .
</code></pre><p>​	PackageName （包名）用于<a href="../Expressions#qualified-identifiers">限定标识符</a>，以访问导入源文件中包的导出标识符。它被声明在<a href="../Blocks">文件块</a>中。如果（导入声明中）PackageName（包名）被省略，则它默认为在导入包的<a href="#package-clause">包子句</a>中指定的标识符。如果出现一个明确的句号（<code>.</code>）而不是名字，那么在该包的<a href="../Blocks">包块</a>中声明的所有包的导出标识符将在导入源文件的文件块中声明，并且必须在没有限定符的情况下进行访问。</p>
<p>​	对ImportPath（导入路径）的解释是依赖于实现的，但它通常是已编译包的完整文件名的子字符串，并且可能是相对于已安装包的存储库的。</p>
<p>实现限制：编译器可以将ImportPaths（导入路径）限制为非空字符串，只使用属于<a href="https://www.unicode.org/versions/Unicode6.3.0/" target="_blank" rel="noopener">Unicode的</a>L、M、N、P和S一般类别的字符（不含空格的图形字符），也可能排除字符<code>!&quot;#$%&amp;'()*,:;&lt;=&gt;?[\]^‘{|}</code>和Unicode替换字符U+FFFD。</p>
<p>​	考虑一个包含包子句<code>package math</code>的编译包，它导出了函数<code>Sin</code>，并将编译包安装在由 &ldquo;<code>lib/math</code>&ldquo;标识的文件中。下表说明了在各种类型的导入声明之后，在导入包的文件中如何访问Sin。</p>
<pre tabindex="0"><code>Import declaration          Local name of Sin
导入声明                       本地 Sin 名

import   &#34;lib/math&#34;         math.Sin
import m &#34;lib/math&#34;         m.Sin
import . &#34;lib/math&#34;         Sin
</code></pre><p>​	导入声明声明了导入包和被导入包之间的依赖关系。如果一个包直接或间接地导入自身，或者直接导入一个包而不引用其任何导出的标识符，都是非法的。要导入一个包只为了它的副作用（初始化），可以使用<a href="../DeclarationsAndScope#blank-identifier">空白标识符（即<code>_</code>）</a>作为显式的包名：</p>
<pre tabindex="0"><code>import _ &#34;lib/math&#34;
</code></pre><h3 id="an-example-package-一个包的例子">An example package 一个包的例子</h3>
<p>下面是一个完整的Go包，它实现了一个并发素数筛选。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">37
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">main</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#98c379">&#34;fmt&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// Send the sequence 2, 3, 4, … to channel &#39;ch&#39;.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">generate</span>(<span style="color:#e06c75">ch</span> <span style="color:#c678dd">chan</span><span style="color:#56b6c2">&lt;-</span> <span style="color:#e5c07b">int</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#d19a66">2</span>; ; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">ch</span> <span style="color:#56b6c2">&lt;-</span> <span style="color:#e06c75">i</span>  <span style="color:#7f848e">// Send &#39;i&#39; to channel &#39;ch&#39;.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// Copy the values from channel &#39;src&#39; to channel &#39;dst&#39;,
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">// removing those divisible by &#39;prime&#39;.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">filter</span>(<span style="color:#e06c75">src</span> <span style="color:#56b6c2">&lt;-</span><span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">dst</span> <span style="color:#c678dd">chan</span><span style="color:#56b6c2">&lt;-</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">prime</span> <span style="color:#e5c07b">int</span>) {
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">for</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">:=</span> <span style="color:#c678dd">range</span> <span style="color:#e06c75">src</span> {  <span style="color:#7f848e">// Loop over values received from &#39;src&#39;.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		<span style="color:#c678dd">if</span> <span style="color:#e06c75">i</span><span style="color:#56b6c2">%</span><span style="color:#e06c75">prime</span> <span style="color:#56b6c2">!=</span> <span style="color:#d19a66">0</span> {
</span></span><span style="display:flex;"><span>			<span style="color:#e06c75">dst</span> <span style="color:#56b6c2">&lt;-</span> <span style="color:#e06c75">i</span>  <span style="color:#7f848e">// Send &#39;i&#39; to channel &#39;dst&#39;.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// The prime sieve: Daisy-chain filter processes together.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">sieve</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">ch</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">make</span>(<span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>)  <span style="color:#7f848e">// Create a new channel.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#c678dd">go</span> <span style="color:#61afef;font-weight:bold">generate</span>(<span style="color:#e06c75">ch</span>)       <span style="color:#7f848e">// Start generate() as a subprocess.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#c678dd">for</span> {
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">prime</span> <span style="color:#56b6c2">:=</span> <span style="color:#56b6c2">&lt;-</span><span style="color:#e06c75">ch</span>
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">fmt</span>.<span style="color:#61afef;font-weight:bold">Print</span>(<span style="color:#e06c75">prime</span>, <span style="color:#98c379">&#34;\n&#34;</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">ch1</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">make</span>(<span style="color:#c678dd">chan</span> <span style="color:#e5c07b">int</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#c678dd">go</span> <span style="color:#61afef;font-weight:bold">filter</span>(<span style="color:#e06c75">ch</span>, <span style="color:#e06c75">ch1</span>, <span style="color:#e06c75">prime</span>)
</span></span><span style="display:flex;"><span>		<span style="color:#e06c75">ch</span> = <span style="color:#e06c75">ch1</span>
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">main</span>() {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">sieve</span>()
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-b31a0bd56b925b9d410a1060b018ac83">15 - 程序初始化和执行</h1>
    
	<h2 id="program-initialization-and-execution-程序初始化和执行">Program initialization and execution 程序初始化和执行</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Program_initialization_and_execution" target="_blank" rel="noopener">https://go.dev/ref/spec#Program_initialization_and_execution</a></p>
</blockquote>
<h3 id="the-zero-value-零值">The zero value 零值</h3>
<p>​	当通过声明或调用<code>new</code>为一个<a href="../Variables">变量</a>分配存储空间时，或者通过复合字面量或调用<code>make</code>创建一个新的值时，如果没有提供明确的初始化，该变量或值将被赋予一个默认值。这种变量或值的每个元素都被设置为其类型的零值：布尔类型为<code>false</code>，数值型为<code>0</code>，字符串为<code>&quot;&quot;</code>，指针、函数、接口、切片、通道和映射为<code>nil</code>。<code>这种初始化是递归进行的</code>，因此，举例来说，如果没有指定值，结构体数组的每个元素字段都将被设为零值。</p>
<p>这两个简单的声明是等同的：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">i</span> <span style="color:#e5c07b">int</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">i</span> <span style="color:#e5c07b">int</span> = <span style="color:#d19a66">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>在</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span> <span style="color:#c678dd">struct</span> { <span style="color:#e06c75">i</span> <span style="color:#e5c07b">int</span>; <span style="color:#e06c75">f</span> <span style="color:#e5c07b">float64</span>; <span style="color:#e06c75">next</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">T</span> }
</span></span><span style="display:flex;"><span><span style="color:#e06c75">t</span> <span style="color:#56b6c2">:=</span> <span style="color:#e5c07b">new</span>(<span style="color:#e06c75">T</span>)
</span></span></code></pre></td></tr></table>
</div>
</div><p>之后，以下情况成立：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e06c75">t</span>.<span style="color:#e06c75">i</span> <span style="color:#56b6c2">==</span> <span style="color:#d19a66">0</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">t</span>.<span style="color:#e06c75">f</span> <span style="color:#56b6c2">==</span> <span style="color:#d19a66">0.0</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">t</span>.<span style="color:#e06c75">next</span> <span style="color:#56b6c2">==</span> <span style="color:#e5c07b">nil</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>同样的情况，在以下情况下也会成立</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">t</span> <span style="color:#e06c75">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="package-initialization-包的初始化">Package initialization 包的初始化</h3>
<p>​	在包内，包级别变量的初始化是逐步进行的，每一步都会选择声明顺序中最早的变量，该变量与未初始化的变量没有依赖关系。</p>
<p>​	更确切地说，如果包级别变量还没有被初始化，并且没有初始化表达式，或者它的<a href="../DeclarationsAndScope#variable-declarations">初始化表达式</a>与未初始化的变量没有依赖关系，那么这个包级别变量就被认为可以被初始化。初始化的过程是重复初始化在声明顺序中最早的、准备好初始化的下一个包级别变量，直到没有准备好初始化的变量。</p>
<p>​	如果在这个过程结束时，仍有任何变量未被初始化，那么这些变量就是一个或多个初始化循环的一部分，程序是无效的。</p>
<p>​	变量声明左侧的多个变量（由右侧的单个（多值）表达式来初始化）是一起被初始化的：如果左侧的任何一个变量被初始化，那么所有这些变量都在同一步骤中被初始化。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span> = <span style="color:#e06c75">a</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">a</span>, <span style="color:#e06c75">b</span> = <span style="color:#61afef;font-weight:bold">f</span>() <span style="color:#7f848e">// a and b are initialized together, before x is initialized =&gt; a 和 b 是在 x 被初始化之前一起被初始化的
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>为了实现包的初始化，<a href="../DeclarationsAndScope#blank-identifier">空白</a>变量与声明中的其他变量一样被处理。</p>
<p>​	在多个文件中声明的变量的声明顺序是由文件呈现给编译器的顺序决定的。在第一个文件中声明的变量要在第二个文件中声明的任何变量之前声明，以此类推。</p>
<p>​	依赖性分析不依赖于变量的实际值，只依赖于源文件中对它们的词法引用，并进行传递性分析。例如，如果一个变量<code>x</code>的初始化表达式引用了一个函数，该函数的主体引用了变量<code>y</code>，那么<code>x</code>就依赖于<code>y</code>：</p>
<ul>
<li>对变量或函数的引用是表示该变量或函数的标识符。</li>
<li>对一个方法<code>m</code>的引用是一个<a href="../Expressions#method-values">方法值</a>或者形式为<code>t.m</code>的<a href="../Expressions#method-expressions">方法表达式</a>，其中<code>t</code>的（静态）类型不是一个接口类型，并且方法<code>m</code>在<code>t</code>的<a href="../PropertiesOfTypesAndValues#method-sets">方法集</a>中。是否调用结果函数值 <code>t.m</code> 并不重要。</li>
<li>如果<code>x</code>的初始化表达式或主体（对于函数和方法）包含对<code>y</code>的引用，或者对依赖于<code>y</code>的函数或方法的引用，那么变量、函数或方法<code>x</code>就依赖于变量<code>y</code>。</li>
</ul>
<p>例如，给定的声明有</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> (
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">a</span> = <span style="color:#e06c75">c</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">b</span>  <span style="color:#7f848e">// == 9
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">b</span> = <span style="color:#61afef;font-weight:bold">f</span>()    <span style="color:#7f848e">// == 4
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">c</span> = <span style="color:#61afef;font-weight:bold">f</span>()    <span style="color:#7f848e">// == 5
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>	<span style="color:#e06c75">d</span> = <span style="color:#d19a66">3</span>      <span style="color:#7f848e">// == 5 after initialization has finished
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>)
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">f</span>() <span style="color:#e5c07b">int</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">d</span><span style="color:#56b6c2">++</span>
</span></span><span style="display:flex;"><span>	<span style="color:#c678dd">return</span> <span style="color:#e06c75">d</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>初始化顺序是 <code>d</code>，<code>b</code>，<code>c</code>，<code>a</code>。注意初始化表达式中子表达式的顺序是不相关的：在这个例子中<code>a = c + b</code>和<code>a = b + c</code>的初始化顺序是一样的。</p>
<p>​	依赖性分析是按包进行的；只考虑引用当前包中声明的变量、函数和（非接口）方法。如果变量之间存在其他隐藏的数据依赖关系，那么这些变量之间的初始化顺序是未指定的。</p>
<p>例如，给定的声明有</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">x</span> = <span style="color:#61afef;font-weight:bold">I</span>(<span style="color:#e06c75">T</span>{}).<span style="color:#61afef;font-weight:bold">ab</span>()   <span style="color:#7f848e">// x has an undetected, hidden dependency on a and b =&gt; x 存在 在 a 和 b 上的未被发现的隐藏依赖
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">_</span> = <span style="color:#61afef;font-weight:bold">sideEffect</span>()  <span style="color:#7f848e">// unrelated to x, a, or b =&gt; 与 x, a, 或 b 无关
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">var</span> <span style="color:#e06c75">a</span> = <span style="color:#e06c75">b</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">b</span> = <span style="color:#d19a66">42</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">I</span> <span style="color:#c678dd">interface</span>      { <span style="color:#61afef;font-weight:bold">ab</span>() []<span style="color:#e5c07b">int</span> }
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">T</span> <span style="color:#c678dd">struct</span>{}
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> (<span style="color:#e06c75">T</span>) <span style="color:#61afef;font-weight:bold">ab</span>() []<span style="color:#e5c07b">int</span>   { <span style="color:#c678dd">return</span> []<span style="color:#e5c07b">int</span>{<span style="color:#e06c75">a</span>, <span style="color:#e06c75">b</span>} }
</span></span></code></pre></td></tr></table>
</div>
</div><p>变量<code>a</code>将在<code>b</code>之后被初始化，但<code>x</code>是在<code>b</code>之前、<code>b</code>和<code>a</code>之间还是在<code>a</code>之后被初始化，以及<code>sideEffect()</code>被调用的时刻（在<code>x</code>被初始化之前或之后）都是未指定的。</p>
<p>​	变量也可以使用在包块中声明的（不带实参，也没有结果参数）的名为<code>init</code>的函数来初始化。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">init</span>() { … }
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	每个包<code>可以定义多个这样的（init）函数</code>，<code>甚至在一个源文件中也可以（有多个init函数）</code>。在包块中，<code>init</code>标识符只能用于声明<code>init</code>函数，但标识符本身并没有被<a href="../DeclarationsAndScope">声明</a>。因此，<code>init</code>函数不能在程序中的任何地方被引用。</p>
<p>​	一个没有导入的包（即没有使用导入声明的包）的初始化方法是给它所有的包级别变量分配初始值，然后按照它们在源文件中出现的顺序调用所有的<code>init</code>函数，可能是在多个文件中出现，就像提交给编译器一样。如果一个包有导入（即使用了导入声明），那么在初始化包本身之前，被导入的包会先被初始化。如果多个包导入了一个包，那么被导入的包将只被初始化一次。 by construction，导入包可以保证不存在循环初始化依赖。</p>
<p>​	包的初始化 —— 变量的初始化和<code>init</code>函数的调用 —— 发生在单一goroutine中，按顺序，一次一个包。<code>init</code>函数可以启动其他goroutines，这些goroutines 可以与初始化代码同时运行。不过，初始化过程总是对<code>init</code>函数进行排序：在前一个函数返回之前，它不会调用下一个函数。</p>
<p>​	为了保证初始化行为的可重复性，我们鼓励构建系统以词法文件名的顺序向编译器提交属于同一包的多个文件。</p>
<h3 id="program-execution-程序执行">Program execution 程序执行</h3>
<p>​	一个完整的程序是通过将一个名为（单个非导入包）<code>main</code>包与它所导入的所有包链接起来而创建的。主包必须有包名<code>main</code>，并声明一个不接受实参且不返回值的<code>main</code>函数。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">main</span>() { … }
</span></span></code></pre></td></tr></table>
</div>
</div><p>程序的执行从初始化<code>main</code>包开始，然后调用函数<code>main</code>。当该函数调用返回时，程序退出。它<code>不会等待</code>其他（非<code>main</code>）goroutine完成。</p>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-4faf1953294b7aeab992d40decf46920">16 - 错误</h1>
    
	<h2 id="errors-错误">Errors 错误</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Errors" target="_blank" rel="noopener">https://go.dev/ref/spec#Errors</a></p>
</blockquote>
<p>预先声明的<code>error</code>类型被定义为</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e5c07b">error</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#61afef;font-weight:bold">Error</span>() <span style="color:#e5c07b">string</span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	它是代表错误条件的常规接口，<code>nil</code>值代表没有错误。例如，可以定义一个从文件中读取数据的函数：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Read</span>(<span style="color:#e06c75">f</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">File</span>, <span style="color:#e06c75">b</span> []<span style="color:#e5c07b">byte</span>) (<span style="color:#e06c75">n</span> <span style="color:#e5c07b">int</span>, <span style="color:#e06c75">err</span> <span style="color:#e5c07b">error</span>)
</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-2947293a8dda2e53c1de22489337087a">17 - 运行时恐慌</h1>
    
	<h2 id="run-time-panics-运行时恐慌">Run-time panics 运行时恐慌</h2>
<blockquote>
<p>原文：<a href="https://go.dev/ref/spec#Run-time_panics" target="_blank" rel="noopener">https://go.dev/ref/spec#Run-time_panics</a></p>
</blockquote>
<p>​	执行错误，如试图对一个数组进行超界索引，会触发运行时恐慌，它等同于带由实现所定义的接口类型 <code>runtime.Error</code> 的值来对内置函数 <a href="../Built-inFunctions#handling-panics">panic</a> 的调用。这个类型满足预先声明的接口类型<a href="../Errors">error</a>。表示不同的运行时错误条件的确切的错误值是未指定的。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">runtime</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Error</span> <span style="color:#c678dd">interface</span> {
</span></span><span style="display:flex;"><span>	<span style="color:#e5c07b">error</span>
</span></span><span style="display:flex;"><span>	<span style="color:#7f848e">// and perhaps other methods
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>}
</span></span></code></pre></td></tr></table>
</div>
</div>
</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-f0a31af7fbe657440ae83c353159d207">18 - 系统考虑</h1>
    
	<h2 id="system-considerations-系统考虑">System considerations 系统考虑</h2>
<blockquote>
<p>原文：[https://go.dev/ref/spec#System considerations](<a href="https://go.dev/ref/spec#System" target="_blank" rel="noopener">https://go.dev/ref/spec#System</a> considerations)</p>
</blockquote>
<h3 id="package-unsafe----unsafe-包">Package <code>unsafe </code> - unsafe 包</h3>
<p>​	编译器知道的内置包<code>unsafe</code>，可以通过<a href="../Packages#import-declarations">导入路径</a> &ldquo;<code>unsafe</code> &ldquo;访问，它为低级编程提供了便利，包括违反（violate）类型系统的操作。使用<code>unsafe</code>的包必须手动审查其类型安全，并且可能无法移植。该包提供以下接口：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">unsafe</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">ArbitraryType</span> <span style="color:#e5c07b">int</span>  <span style="color:#7f848e">// shorthand for an arbitrary Go type; it is not a real type
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">type</span> <span style="color:#e06c75">Pointer</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">ArbitraryType</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Alignof</span>(<span style="color:#e06c75">variable</span> <span style="color:#e06c75">ArbitraryType</span>) <span style="color:#e5c07b">uintptr</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Offsetof</span>(<span style="color:#e06c75">selector</span> <span style="color:#e06c75">ArbitraryType</span>) <span style="color:#e5c07b">uintptr</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Sizeof</span>(<span style="color:#e06c75">variable</span> <span style="color:#e06c75">ArbitraryType</span>) <span style="color:#e5c07b">uintptr</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">IntegerType</span> <span style="color:#e5c07b">int</span>  <span style="color:#7f848e">// shorthand for an integer type; it is not a real type
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Add</span>(<span style="color:#e06c75">ptr</span> <span style="color:#e06c75">Pointer</span>, <span style="color:#e06c75">len</span> <span style="color:#e06c75">IntegerType</span>) <span style="color:#e06c75">Pointer</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">func</span> <span style="color:#61afef;font-weight:bold">Slice</span>(<span style="color:#e06c75">ptr</span> <span style="color:#56b6c2">*</span><span style="color:#e06c75">ArbitraryType</span>, <span style="color:#e06c75">len</span> <span style="color:#e06c75">IntegerType</span>) []<span style="color:#e06c75">ArbitraryType</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	<code>Pointer</code>是一个<a href="../Types#pointer-types">指针类型</a>，但是<code>Pointer</code>的值不能被<a href="../Expressions#address-operators">解除引用</a>。任何<a href="../Types">底层类型</a>为<code>uintptr</code>的指针或值都可以被<a href="../Expressions#conversions">转换</a>为底层类型<code>Pointer</code>的类型，反之亦然。在<code>Pointer</code>和<code>uintptr</code>之间转换的效果是由实现定义的。</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">f</span> <span style="color:#e5c07b">float64</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">bits</span> = <span style="color:#56b6c2">*</span>(<span style="color:#56b6c2">*</span><span style="color:#e5c07b">uint64</span>)(<span style="color:#e06c75">unsafe</span>.<span style="color:#61afef;font-weight:bold">Pointer</span>(<span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">f</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">type</span> <span style="color:#e06c75">ptr</span> <span style="color:#e06c75">unsafe</span>.<span style="color:#e06c75">Pointer</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">bits</span> = <span style="color:#56b6c2">*</span>(<span style="color:#56b6c2">*</span><span style="color:#e5c07b">uint64</span>)(<span style="color:#61afef;font-weight:bold">ptr</span>(<span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">f</span>))
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">var</span> <span style="color:#e06c75">p</span> <span style="color:#e06c75">ptr</span> = <span style="color:#e5c07b">nil</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​		<code>Alignof</code>和<code>Sizeof</code>函数接收任意类型的表达式<code>x</code>，并分别返回假设变量<code>v</code>的对齐方式或大小，就像<code>v</code>通过<code>var v = x</code>声明一样。</p>
<p>​	<code>Offsetof</code>函数接收一个（可能是括号内的）<a href="../Expressions#selectors">选择器</a><code>s.f</code>，表示由<code>s</code>或<code>*s</code>表示的结构体中的字段<code>f</code>，并返回相对于该结构体地址的字段偏移量（字节）。如果<code>f</code>是一个<a href="../Types#struct-types">嵌入字段</a>，它必须可以通过结构体的字段在没有指针间接的情况下访问。对于带有字段<code>f</code>的结构体<code>s</code>：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">uintptr</span>(<span style="color:#e06c75">unsafe</span>.<span style="color:#61afef;font-weight:bold">Pointer</span>(<span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">s</span>)) <span style="color:#56b6c2">+</span> <span style="color:#e06c75">unsafe</span>.<span style="color:#61afef;font-weight:bold">Offsetof</span>(<span style="color:#e06c75">s</span>.<span style="color:#e06c75">f</span>) <span style="color:#56b6c2">==</span> <span style="color:#e5c07b">uintptr</span>(<span style="color:#e06c75">unsafe</span>.<span style="color:#61afef;font-weight:bold">Pointer</span>(<span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">s</span>.<span style="color:#e06c75">f</span>))
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	计算机体系结构可能要求内存地址被对齐；也就是说，变量的地址必须是一个因子的倍数，即变量类型的对齐方式。函数<code>Alignof</code>接收一个表示任何类型的变量的表达式，并返回（该类型的）变量的对齐方式，单位为字节。对于变量<code>x</code>：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#e5c07b">uintptr</span>(<span style="color:#e06c75">unsafe</span>.<span style="color:#61afef;font-weight:bold">Pointer</span>(<span style="color:#56b6c2">&amp;</span><span style="color:#e06c75">x</span>)) <span style="color:#56b6c2">%</span> <span style="color:#e06c75">unsafe</span>.<span style="color:#61afef;font-weight:bold">Alignof</span>(<span style="color:#e06c75">x</span>) <span style="color:#56b6c2">==</span> <span style="color:#d19a66">0</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>​	如果<code>T</code>是一个<a href="../DeclarationsAndScope#type-parameter-declarations">类型参数</a>，或者它是一个包含可变大小的元素或字段的数组或结构体类型，则<code>T</code>类型的（变量）具有可变大小。否则，大小是常量。如果对 <code>Alignof</code>、<code>Offsetof</code> 和 <code>Sizeof</code> 的调用的实参（或 <code>Offsetof</code> 的选择器表达式 <code>s.f</code> 中的结构体 <code>s</code>）是恒定大小的类型，则它们是 <code>uintptr</code> 类型的编译时<a href="../Expressions#constant-expressions">常量表达式</a>。</p>
<p>​	 <code>Add</code> 函数将 <code>len</code> 添加到 <code>ptr</code> 并返回更新后的指针 <code>unsafe.Pointer(uintptr(ptr) + uintptr(len))</code> 。<code>len</code>实参必须是<a href="../Types#numeric-types">整数类型</a>或无类型的<a href="../Constants">常量</a>。一个常量<code>len</code>实参必须可以用<code>int</code>类型的值<a href="../PropertiesOfTypesAndValues#representability">表示</a>；如果它是一个无类型的常量，则它会被赋予<code>int</code>类型。Pointer的<a href="https://go.dev/pkg/unsafe#Pointer" target="_blank" rel="noopener">有效使用</a>规则仍然适用。</p>
<p>​	<code>Slice</code> 函数返回一个切片，其底层数组从 <code>ptr</code> 开始，其长度和容量为 <code>len</code>。<code>Slice(ptr, len)</code> 等于</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span>(<span style="color:#56b6c2">*</span>[<span style="color:#e06c75">len</span>]<span style="color:#e06c75">ArbitraryType</span>)(<span style="color:#e06c75">unsafe</span>.<span style="color:#61afef;font-weight:bold">Pointer</span>(<span style="color:#e06c75">ptr</span>))[:]
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>除了这样，还有一种特殊情况</strong>，如果 <code>ptr</code> 是 <code>nil</code> 并且 <code>len</code> 是零，<code>Slice</code> 返回 <code>nil</code>。</p>
<p>​	<code>len</code>实参必须是<a href="../Types#numeric-types">整数类型</a>或无类型的<a href="../Constants">常量</a>。一个常量<code>len</code>实参必须是非负的，并且可以用<code>int</code>类型的值<a href="../PropertiesOfTypesAndValues#representability">表示</a>；如果它是一个无类型的常量，则它会被赋予<code>int</code>类型。在运行时，如果<code>len</code>是负的，或者如果<code>ptr</code>是<code>nil</code>而<code>len</code>不是0，会发生<a href="../Run-timePanics">运行时恐慌</a>。</p>
<h3 id="size-and-alignment-guarantees-大小和对齐保证">Size and alignment guarantees 大小和对齐保证</h3>
<p>对于数值型，以下大小是有保证的：</p>
<div class="highlight"><div style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#55595f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-go" data-lang="go"><span style="display:flex;"><span><span style="color:#c678dd">type</span>                                 <span style="color:#e06c75">size</span> <span style="color:#e06c75">in</span> <span style="color:#e06c75">bytes</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">byte</span>, <span style="color:#e5c07b">uint8</span>, <span style="color:#e5c07b">int8</span>                     <span style="color:#d19a66">1</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">uint16</span>, <span style="color:#e5c07b">int16</span>                         <span style="color:#d19a66">2</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">uint32</span>, <span style="color:#e5c07b">int32</span>, <span style="color:#e5c07b">float32</span>                <span style="color:#d19a66">4</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">uint64</span>, <span style="color:#e5c07b">int64</span>, <span style="color:#e5c07b">float64</span>, <span style="color:#e5c07b">complex64</span>     <span style="color:#d19a66">8</span>
</span></span><span style="display:flex;"><span><span style="color:#e5c07b">complex128</span>                           <span style="color:#d19a66">16</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>以下最小对齐特性得到了保证：</p>
<ol>
<li>对于任何类型的变量<code>x</code>：<code>unsafe.Alignof(x)</code>至少是1。</li>
<li>对于结构体类型的变量<code>x</code>：<code>unsafe.Alignof(x)</code>是<code>x</code>的每个字段<code>f</code>的所有值<code>unsafe.Alignof(x.f)</code>中最大的一个，但至少是1。</li>
<li>对于数组类型的变量<code>x</code>：<code>unsafe.Alignof(x)</code>与数组元素类型的变量的对齐方式相同。</li>
</ol>
<p>​	如果结构体或数组类型不包含大小大于0的字段（或元素），那么它的大小就是零。两个不同的zero-size变量在内存中可能有相同的地址。</p>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User mailing list" aria-label="User mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/twitter" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/stack" aria-label="Stack Overflow">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/google/docsy" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/slack" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer mailing list" aria-label="Developer mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="Developer mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 The Docsy Authors </small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener"></a></small>
	
		
	
      </div>
    </div>
  </div>
</footer>


    </div>
    
  <script src="/js/main.min.9069af235eb4d4956fc4dc29e5ca46caef0cdcae593856be4e33c99075bc5ea2.js" integrity="sha256-kGmvI1601JVvxNwp5cpGyu8M3K5ZOFa&#43;TjPJkHW8XqI=" crossorigin="anonymous"></script>
<script src='/js/tabpane-persist.js'></script>
<script src='/js/deal-zero-width-space.js'></script>
  </body>
</html>
