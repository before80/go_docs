<!doctype html><html itemscope itemtype=http://schema.org/WebPage lang=zh-cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><link rel=alternate type=application/rss+xml href=https://before80.github.io/go_docs/thirdPkg/viper/index.xml><meta name=robots content="index, follow"><link rel="shortcut icon" href=/go_docs/favicons/favicon.ico><link rel=apple-touch-icon href=/go_docs/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/go_docs/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/go_docs/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/go_docs/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/go_docs/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/go_docs/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/go_docs/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/go_docs/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/go_docs/favicons/android-192x192.png sizes=192x192><title>viper | Go 中文档集</title><meta name=description content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><meta property="og:title" content="viper"><meta property="og:description" content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><meta property="og:type" content="website"><meta property="og:url" content="https://before80.github.io/go_docs/thirdPkg/viper/"><meta itemprop=name content="viper"><meta itemprop=description content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><meta name=twitter:card content="summary"><meta name=twitter:title content="viper"><meta name=twitter:description content="Powerful, extensible, and feature-packed frontend toolkit. Build and customize with Sass, utilize prebuilt grid system and components, and bring projects to life with powerful JavaScript plugins."><link rel=preload href=/go_docs/scss/main.min.2412d9ce8d59c0bc460230f66fb6de2f724f349b5e83810ed8155cc1ecc54c1e.css as=style><link href=/go_docs/scss/main.min.2412d9ce8d59c0bc460230f66fb6de2f724f349b5e83810ed8155cc1ecc54c1e.css rel=stylesheet integrity><link href=/go_docs/css/extra.css rel=stylesheet><link href=/go_docs/css/tocbot.css rel=stylesheet><script src=https://code.jquery.com/jquery-3.7.1.min.js integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin=anonymous></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/@docsearch/css@3.6.0 integrity="sha512-AyDFDkYyALC5qoao077IqAOV7UC4oKCBTp+mJfjIt306AIRoBxoEZYDo0kAx/R7RbT+3EYEky1po/F1w1eQt7g==" crossorigin=anonymous></head><body class=td-section><header><nav class="td-navbar navbar-dark js-navbar-scroll" data-bs-theme=dark><div class="container-fluid flex-column flex-md-row"><a class=navbar-brand href=/go_docs/><span class="navbar-brand__logo navbar-logo"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 500" style="enable-background:new 0 0 500 500"><g><path style="fill:#fff" d="M116.8525 421.9722c-5.7041.0-10.3442-4.3127-10.3442-9.6129V88.183c0-5.3002 4.6401-9.6117 10.3442-9.6117H320.858c3.0347.0 9.3959.5498 11.7506 2.6302l.3545.3442 58.905 63.2912c2.3101 2.491 2.9202 8.4928 2.9202 11.3184v256.2039c0 5.3002-4.6407 9.6129-10.3436 9.6129H116.8525z"/><g><g><g><path style="fill:#767676" d="M384.4445 423.2066H116.852c-6.3839.0-11.5786-4.8658-11.5786-10.8474V88.1831c0-5.9804 5.1947-10.8461 11.5786-10.8461h204.0062c.377.0 9.2786.0329 12.568 2.9389l.3947.3833 58.9508 63.337c3.2135 3.4652 3.2514 11.7924 3.2514 12.1593v256.2036C396.0231 418.3408 390.8284 423.2066 384.4445 423.2066zM116.5079 411.9189c.0848.0278.1999.0531.3441.0531h267.5925c.1442.0.2581-.0253.3441-.0531V156.1556c-.0076-.9033-.3593-3.7347-.7034-5.0037l-57.6527-61.9416c-1.4651-.3176-4.4533-.6389-5.5742-.6389H116.852c-.143.0-.2594.024-.3441.0531V411.9189zm267.4533-261.149zM327.0321 89.371v.0013V89.371z"/></g></g></g><g><g><path style="fill:#5b7fc0" d="M189.0874 210.1754l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4473C177.5953 212.627 183.0601 210.1742 189.0874 210.1754zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 234.1722 197.0804 232.033z"/><path style="opacity:.3;fill:#fff" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/><g><defs><path id="SVGID_1_" d="M194.7376 237.6875c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 234.2399 196.1861 236.239 194.7376 237.6875z"/></defs><clipPath id="SVGID_2_"><use xlink:href="#SVGID_1_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_2_);fill:#fff" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/><path style="opacity:.13;clip-path:url(#SVGID_2_);fill:#020202" d="M190.0704 225.0237c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 225.7247 191.9774 225.0237 190.0704 225.0237z"/></g><g><defs><path id="SVGID_3_" d="M189.0898 210.176c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 212.6276 183.0612 210.176 189.0898 210.176zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 236.239 197.0839 234.2399 197.0839 232.0372z"/></defs><clipPath id="SVGID_4_"><use xlink:href="#SVGID_3_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_4_);fill:#5b7fc0" d="M172.6595 215.6045c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8475-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 209.1953 176.6171 211.647 172.6595 215.6045z"/></g></g><rect x="198.8952" y="225.1043" style="fill:#5b7fc0" width="122.6266" height="13.8671"/></g><g><path style="fill:#d95140" d="M189.0874 155.7611l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.0249 2.454-11.4897 6.4116-15.4473C177.5953 158.2128 183.0601 155.7599 189.0874 155.7611zm7.993 21.8577c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.2508 181.7667 197.0816 179.758 197.0804 177.6188z"/><path style="opacity:.3;fill:#fff" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/><g><defs><path id="SVGID_5_" d="M194.7376 183.2733c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 179.8256 196.1861 181.8248 194.7376 183.2733z"/></defs><clipPath id="SVGID_6_"><use xlink:href="#SVGID_5_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_6_);fill:#fff" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/><path style="opacity:.13;clip-path:url(#SVGID_6_);fill:#020202" d="M190.0704 170.6095c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9546.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.663-2.8588-6.116.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C193.7885 171.3104 191.9774 170.6095 190.0704 170.6095z"/></g><g><defs><path id="SVGID_7_" d="M189.0898 155.7617c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8066-21.8612-21.8613.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 158.2134 183.0612 155.7617 189.0898 155.7617zm7.9941 21.8613c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 181.8248 197.0839 179.8256 197.0839 177.623z"/></defs><clipPath id="SVGID_8_"><use xlink:href="#SVGID_7_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_8_);fill:#d95140" d="M172.6595 161.1903c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 154.7811 176.6171 157.2327 172.6595 161.1903z"/></g><rect x="198.8952" y="170.69" style="fill:#d95140" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#56a55c" d="M189.5379 264.6147l.0012-.0012c7.7751.0012 15.0294 4.1862 18.932 10.9235 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3304-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032-5.8394.0-11.3281-2.2733-15.458-6.4032-4.13-4.13-6.4032-9.6186-6.4056-15.4628.0012-6.0249 2.454-11.4897 6.4116-15.4472C178.0458 267.0663 183.5105 264.6135 189.5379 264.6147zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6538 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403C196.7013 290.6202 197.5321 288.6115 197.5309 286.4723z"/><path style="opacity:.3;fill:#fff" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/><g><defs><path id="SVGID_9_" d="M195.1881 292.1268c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.9989 7.9942-7.9941 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.5344 288.6792 196.6366 290.6783 195.1881 292.1268z"/></defs><clipPath id="SVGID_10_"><use xlink:href="#SVGID_9_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_10_);fill:#fff" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/><path style="opacity:.13;clip-path:url(#SVGID_10_);fill:#020202" d="M190.5209 279.463c-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7446-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9941 2.3802-1e-4 4.616 1.0833 6.1218 2.8788C194.239 280.164 192.4279 279.463 190.5209 279.463z"/></g><g><defs><path id="SVGID_11_" d="M189.5403 264.6153c7.7763.0 15.0283 4.1826 18.926 10.9151 1.9201 3.3135 2.9377 7.0987 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8613-12.0547.0024-21.8636-9.8065-21.8612-21.8613.0-6.0285 2.4516-11.492 6.4116-15.452C178.0482 267.0669 183.5117 264.6153 189.5403 264.6153zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9941.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.6366 290.6783 197.5344 288.6792 197.5344 286.4765z"/></defs><clipPath id="SVGID_12_"><use xlink:href="#SVGID_11_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_12_);fill:#56a55c" d="M173.11 270.0439c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8613 12.0547.0024 21.8636-9.797 21.8613-21.8613.0024-3.8474-1.0151-7.6326-2.9353-10.9462-3.8977-6.7325-11.1497-10.9151-18.926-10.9151C182.5311 263.6346 177.0676 266.0863 173.11 270.0439z"/></g></g><rect x="199.3456" y="279.5436" style="fill:#56a55c" width="122.6266" height="13.8671"/></g><g><g><path style="fill:#f1bc42" d="M189.0874 318.7208l.0012-.0012c7.7751.0012 15.0295 4.1862 18.932 10.9234 1.9177 3.3159 2.9305 7.1011 2.9293 10.9378.0 5.8394-2.2733 11.3305-6.4032 15.4604-4.1288 4.1288-9.6186 6.4032-15.458 6.4032s-11.328-2.2733-15.458-6.4032-6.4032-9.6186-6.4056-15.4628c.0012-6.025 2.454-11.4897 6.4116-15.4472C177.5953 321.1724 183.0601 318.7196 189.0874 318.7208zm7.993 21.8576c.0012-1.4042-.3687-2.7868-1.063-3.9887-1.4293-2.4684-4.0833-3.9995-6.9299-4.0019-4.4077.0024-7.993 3.5877-7.993 7.993.0 2.1356.832 4.1431 2.3427 5.6539 1.5083 1.5083 3.5159 2.3403 5.6503 2.3415 2.1356.0 4.1443-.8308 5.6539-2.3403S197.0816 342.7176 197.0804 340.5784z"/><path style="opacity:.3;fill:#fff" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/><g><defs><path id="SVGID_13_" d="M194.7376 346.2329c-1.4461 1.4461-3.4452 2.3439-5.6479 2.3439-4.4077-.0024-7.9918-3.5865-7.9942-7.9942.0024-4.4125 3.5937-7.999 7.9942-7.9942 2.8443.0 5.497 1.5323 6.924 3.9983.6991 1.2067 1.0702 2.5881 1.0702 3.9959C197.0839 342.7853 196.1861 344.7844 194.7376 346.2329z"/></defs><clipPath id="SVGID_14_"><use xlink:href="#SVGID_13_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_14_);fill:#fff" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/><path style="opacity:.13;clip-path:url(#SVGID_14_);fill:#020202" d="M190.0704 333.5691c-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0011 1.9547.7088 3.7452 1.8782 5.1354-1.7447-1.4674-2.8575-3.6631-2.8588-6.1161.0024-4.4125 3.5936-7.999 7.9942-7.9942 2.3802-1e-4 4.616 1.0834 6.1218 2.8788C193.7885 334.2701 191.9774 333.5691 190.0704 333.5691z"/></g><g><defs><path id="SVGID_15_" d="M189.0898 318.7214c7.7763.0 15.0283 4.1826 18.926 10.915 1.9201 3.3136 2.9377 7.0988 2.9353 10.9462.0024 12.0643-9.8065 21.8636-21.8613 21.8612-12.0547.0024-21.8636-9.8065-21.8612-21.8612.0-6.0285 2.4516-11.4921 6.4116-15.452C177.5977 321.173 183.0612 318.7214 189.0898 318.7214zm7.9941 21.8612c0-1.4078-.3711-2.7892-1.0702-3.9959-1.4269-2.466-4.0797-3.9983-6.924-3.9983-4.4005-.0048-7.9918 3.5817-7.9942 7.9942.0024 4.4077 3.5865 7.9918 7.9942 7.9942 2.2027.0 4.2018-.8978 5.6479-2.3439C196.1861 344.7844 197.0839 342.7853 197.0839 340.5826z"/></defs><clipPath id="SVGID_16_"><use xlink:href="#SVGID_15_" style="overflow:visible"/></clipPath><path style="clip-path:url(#SVGID_16_);fill:#f1bc42" d="M172.6595 324.15c-3.96 3.96-6.4116 9.4235-6.4116 15.452-.0024 12.0547 9.8066 21.8636 21.8613 21.8612 12.0547.0024 21.8636-9.797 21.8613-21.8612.0024-3.8474-1.0151-7.6327-2.9353-10.9462-3.8977-6.7324-11.1497-10.9151-18.926-10.9151C182.0806 317.7407 176.6171 320.1924 172.6595 324.15z"/></g></g><rect x="198.8952" y="333.6497" style="fill:#f1bc42" width="122.6266" height="13.8671"/></g></g></svg></span><span class=navbar-brand__name>Go 中文档集</span></a><div class="td-navbar-nav-scroll ms-md-auto" id=main_navbar><ul class=navbar-nav><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=javascript:; id=show-timer style=color:#fe4512f5!important></a></li><li class=nav-item><a class=nav-link href=/go_docs/refs/><span>参考</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/comm/><span>对比</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/tools/><span>工具</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/langSpec/><span>语规</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/styleGuide/><span>编规</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/example/><span>示例</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/asu/><span>汇总</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/fx/><span>分析</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/docs/><span>文档</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/cmd/><span>go命令</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/stdLib/><span>标准库</span></a></li><li class=nav-item><a class="nav-link active" href=/go_docs/thirdPkg/><span>第三方包</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/delve/><span>delve</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/rod/><span>rod</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/goframe/><span>goframe</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/gorm/><span>gorm</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/echo/><span>echo</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/fiber/><span>fiber</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/buffalo/><span>buffalo</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/beego/><span>beego</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/goBlog/><span>官博</span></a></li><li class=nav-item><a class=nav-link href=/go_docs/proposal/><span>提案</span></a></li><li class="td-light-dark-menu nav-item dropdown"><svg xmlns="http://www.w3.org/2000/svg" class="d-none"><symbol id="check2" viewBox="0 0 16 16"><path d="M13.854 3.646a.5.5.0 010 .708l-7 7a.5.5.0 01-.708.0l-3.5-3.5a.5.5.0 11.708-.708L6.5 10.293l6.646-6.647a.5.5.0 01.708.0z"/></symbol><symbol id="circle-half" viewBox="0 0 16 16"><path d="M8 15A7 7 0 108 1v14zm0 1A8 8 0 118 0a8 8 0 010 16z"/></symbol><symbol id="moon-stars-fill" viewBox="0 0 16 16"><path d="M6 .278a.768.768.0 01.08.858 7.208 7.208.0 00-.878 3.46c0 4.021 3.278 7.277 7.318 7.277.527.0 1.04-.055 1.533-.16a.787.787.0 01.81.316.733.733.0 01-.031.893A8.349 8.349.0 018.344 16C3.734 16 0 12.286.0 7.71.0 4.266 2.114 1.312 5.124.06A.752.752.0 016 .278z"/><path d="M10.794 3.148a.217.217.0 01.412.0l.387 1.162c.173.518.579.924 1.097 1.097l1.162.387a.217.217.0 010 .412l-1.162.387A1.734 1.734.0 0011.593 7.69l-.387 1.162a.217.217.0 01-.412.0l-.387-1.162A1.734 1.734.0 009.31 6.593l-1.162-.387a.217.217.0 010-.412l1.162-.387a1.734 1.734.0 001.097-1.097l.387-1.162zM13.863.099a.145.145.0 01.274.0l.258.774c.115.346.386.617.732.732l.774.258a.145.145.0 010 .274l-.774.258a1.156 1.156.0 00-.732.732l-.258.774a.145.145.0 01-.274.0l-.258-.774a1.156 1.156.0 00-.732-.732l-.774-.258a.145.145.0 010-.274l.774-.258c.346-.115.617-.386.732-.732L13.863.1z"/></symbol><symbol id="sun-fill" viewBox="0 0 16 16"><path d="M8 12a4 4 0 100-8 4 4 0 000 8zM8 0a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 0zm0 13a.5.5.0 01.5.5v2a.5.5.0 01-1 0v-2A.5.5.0 018 13zm8-5a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2a.5.5.0 01.5.5zM3 8a.5.5.0 01-.5.5h-2a.5.5.0 010-1h2A.5.5.0 013 8zm10.657-5.657a.5.5.0 010 .707l-1.414 1.415a.5.5.0 11-.707-.708l1.414-1.414a.5.5.0 01.707.0zm-9.193 9.193a.5.5.0 010 .707L3.05 13.657a.5.5.0 01-.707-.707l1.414-1.414a.5.5.0 01.707.0zm9.193 2.121a.5.5.0 01-.707.0l-1.414-1.414a.5.5.0 01.707-.707l1.414 1.414a.5.5.0 010 .707zM4.464 4.465a.5.5.0 01-.707.0L2.343 3.05a.5.5.0 11.707-.707l1.414 1.414a.5.5.0 010 .708z"/></symbol></svg><button class="btn btn-link nav-link dropdown-toggle d-flex align-items-center" id=bd-theme type=button aria-expanded=false data-bs-toggle=dropdown data-bs-display=static aria-label="Toggle theme (auto)"><svg class="bi my-1 theme-icon-active"><use href="#circle-half"/></svg></button><ul class="dropdown-menu dropdown-menu-end" aria-labelledby=bd-theme-text><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=light aria-pressed=false><svg class="bi me-2 opacity-50"><use href="#sun-fill"/></svg>
Light<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center" data-bs-theme-value=dark aria-pressed=false><svg class="bi me-2 opacity-50"><use href="#moon-stars-fill"/></svg>
Dark<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li><li><button type=button class="dropdown-item d-flex align-items-center active" data-bs-theme-value=auto aria-pressed=true><svg class="bi me-2 opacity-50"><use href="#circle-half"/></svg>
Auto<svg class="bi ms-auto d-none"><use href="#check2"/></svg></button></li></ul></li></ul></div><div class="d-none d-lg-block"><div class=td-search><div class=td-search--algolia id=docsearch-1></div></div></div></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><form class="td-sidebar__search d-flex align-items-center"><div class=td-search><div class=td-search--algolia id=docsearch-0></div></div><button class="btn btn-link td-sidebar__toggle d-md-none p-0 ms-3 fas fa-bars" type=button data-bs-toggle=collapse data-bs-target=#td-section-nav aria-controls=td-section-nav aria-expanded=false aria-label="Toggle section navigation"></button></form><nav class="td-sidebar-nav collapse foldable-nav" id=td-section-nav><ul class="td-sidebar-nav__section pe-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-go_docsthirdpkg-li><a href=/go_docs/thirdPkg/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-go_docsthirdpkg><span>第三方包</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkggods-li><input type=checkbox id=m-go_docsthirdpkggods-check>
<label for=m-go_docsthirdpkggods-check><a href=/go_docs/thirdPkg/gods/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkggods><span>GoDS (Go Data Structures)</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsutils-li><input type=checkbox id=m-go_docsthirdpkggodsutils-check>
<label for=m-go_docsthirdpkggodsutils-check><a href=/go_docs/thirdPkg/gods/utils/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsutils><span>utils</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodstestutils-li><input type=checkbox id=m-go_docsthirdpkggodstestutils-check>
<label for=m-go_docsthirdpkggodstestutils-check><a href=/go_docs/thirdPkg/gods/testutils/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodstestutils><span>testutils</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodscontainers-li><input type=checkbox id=m-go_docsthirdpkggodscontainers-check>
<label for=m-go_docsthirdpkggodscontainers-check><a href=/go_docs/thirdPkg/gods/containers/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodscontainers><span>containers</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkggodslists-li><input type=checkbox id=m-go_docsthirdpkggodslists-check>
<label for=m-go_docsthirdpkggodslists-check><a href=/go_docs/thirdPkg/gods/lists/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkggodslists><span>lists</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodslistsarraylist-li><input type=checkbox id=m-go_docsthirdpkggodslistsarraylist-check>
<label for=m-go_docsthirdpkggodslistsarraylist-check><a href=/go_docs/thirdPkg/gods/lists/arraylist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodslistsarraylist><span>arraylist</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodslistsdoublylinkedlist-li><input type=checkbox id=m-go_docsthirdpkggodslistsdoublylinkedlist-check>
<label for=m-go_docsthirdpkggodslistsdoublylinkedlist-check><a href=/go_docs/thirdPkg/gods/lists/doublylinkedlist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodslistsdoublylinkedlist><span>doublylinkedlist</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodslistssinglylinkedlist-li><input type=checkbox id=m-go_docsthirdpkggodslistssinglylinkedlist-check>
<label for=m-go_docsthirdpkggodslistssinglylinkedlist-check><a href=/go_docs/thirdPkg/gods/lists/singlylinkedlist/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodslistssinglylinkedlist><span>singlylinkedlist</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkggodsmaps-li><input type=checkbox id=m-go_docsthirdpkggodsmaps-check>
<label for=m-go_docsthirdpkggodsmaps-check><a href=/go_docs/thirdPkg/gods/maps/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkggodsmaps><span>maps</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsmapshashbidimap-li><input type=checkbox id=m-go_docsthirdpkggodsmapshashbidimap-check>
<label for=m-go_docsthirdpkggodsmapshashbidimap-check><a href=/go_docs/thirdPkg/gods/maps/hashbidimap/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsmapshashbidimap><span>hashbidimap</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsmapshashmap-li><input type=checkbox id=m-go_docsthirdpkggodsmapshashmap-check>
<label for=m-go_docsthirdpkggodsmapshashmap-check><a href=/go_docs/thirdPkg/gods/maps/hashmap/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsmapshashmap><span>hashmap</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsmapslinkedhashmap-li><input type=checkbox id=m-go_docsthirdpkggodsmapslinkedhashmap-check>
<label for=m-go_docsthirdpkggodsmapslinkedhashmap-check><a href=/go_docs/thirdPkg/gods/maps/linkedhashmap/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsmapslinkedhashmap><span>linkedhashmap</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsmapstreebidimap-li><input type=checkbox id=m-go_docsthirdpkggodsmapstreebidimap-check>
<label for=m-go_docsthirdpkggodsmapstreebidimap-check><a href=/go_docs/thirdPkg/gods/maps/treebidimap/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsmapstreebidimap><span>treebidimap</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsmapstreemap-li><input type=checkbox id=m-go_docsthirdpkggodsmapstreemap-check>
<label for=m-go_docsthirdpkggodsmapstreemap-check><a href=/go_docs/thirdPkg/gods/maps/treemap/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsmapstreemap><span>treemap</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkggodsqueues-li><input type=checkbox id=m-go_docsthirdpkggodsqueues-check>
<label for=m-go_docsthirdpkggodsqueues-check><a href=/go_docs/thirdPkg/gods/queues/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkggodsqueues><span>queues</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsqueuesarrayqueue-li><input type=checkbox id=m-go_docsthirdpkggodsqueuesarrayqueue-check>
<label for=m-go_docsthirdpkggodsqueuesarrayqueue-check><a href=/go_docs/thirdPkg/gods/queues/arrayqueue/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsqueuesarrayqueue><span>arrayqueue</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsqueuescircularbuffer-li><input type=checkbox id=m-go_docsthirdpkggodsqueuescircularbuffer-check>
<label for=m-go_docsthirdpkggodsqueuescircularbuffer-check><a href=/go_docs/thirdPkg/gods/queues/circularbuffer/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsqueuescircularbuffer><span>circularbuffer</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsqueueslinkedlistqueue-li><input type=checkbox id=m-go_docsthirdpkggodsqueueslinkedlistqueue-check>
<label for=m-go_docsthirdpkggodsqueueslinkedlistqueue-check><a href=/go_docs/thirdPkg/gods/queues/linkedlistqueue/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsqueueslinkedlistqueue><span>linkedlistqueue</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsqueuespriorityqueue-li><input type=checkbox id=m-go_docsthirdpkggodsqueuespriorityqueue-check>
<label for=m-go_docsthirdpkggodsqueuespriorityqueue-check><a href=/go_docs/thirdPkg/gods/queues/priorityqueue/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsqueuespriorityqueue><span>priorityqueue</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkggodssets-li><input type=checkbox id=m-go_docsthirdpkggodssets-check>
<label for=m-go_docsthirdpkggodssets-check><a href=/go_docs/thirdPkg/gods/sets/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkggodssets><span>sets</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodssetshashset-li><input type=checkbox id=m-go_docsthirdpkggodssetshashset-check>
<label for=m-go_docsthirdpkggodssetshashset-check><a href=/go_docs/thirdPkg/gods/sets/hashset/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodssetshashset><span>hashset</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodssetslinkedhashset-li><input type=checkbox id=m-go_docsthirdpkggodssetslinkedhashset-check>
<label for=m-go_docsthirdpkggodssetslinkedhashset-check><a href=/go_docs/thirdPkg/gods/sets/linkedhashset/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodssetslinkedhashset><span>linkedhashset</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodssetstreeset-li><input type=checkbox id=m-go_docsthirdpkggodssetstreeset-check>
<label for=m-go_docsthirdpkggodssetstreeset-check><a href=/go_docs/thirdPkg/gods/sets/treeset/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodssetstreeset><span>treeset</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkggodsstacks-li><input type=checkbox id=m-go_docsthirdpkggodsstacks-check>
<label for=m-go_docsthirdpkggodsstacks-check><a href=/go_docs/thirdPkg/gods/stacks/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkggodsstacks><span>stacks</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsstacksarraystack-li><input type=checkbox id=m-go_docsthirdpkggodsstacksarraystack-check>
<label for=m-go_docsthirdpkggodsstacksarraystack-check><a href=/go_docs/thirdPkg/gods/stacks/arraystack/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsstacksarraystack><span>arraystack</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodsstackslinkedliststack-li><input type=checkbox id=m-go_docsthirdpkggodsstackslinkedliststack-check>
<label for=m-go_docsthirdpkggodsstackslinkedliststack-check><a href=/go_docs/thirdPkg/gods/stacks/linkedliststack/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodsstackslinkedliststack><span>linkedliststack</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkggodstrees-li><input type=checkbox id=m-go_docsthirdpkggodstrees-check>
<label for=m-go_docsthirdpkggodstrees-check><a href=/go_docs/thirdPkg/gods/trees/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkggodstrees><span>trees</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodstreesavltree-li><input type=checkbox id=m-go_docsthirdpkggodstreesavltree-check>
<label for=m-go_docsthirdpkggodstreesavltree-check><a href=/go_docs/thirdPkg/gods/trees/avltree/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodstreesavltree><span>avltree</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodstreesbinaryheap-li><input type=checkbox id=m-go_docsthirdpkggodstreesbinaryheap-check>
<label for=m-go_docsthirdpkggodstreesbinaryheap-check><a href=/go_docs/thirdPkg/gods/trees/binaryheap/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodstreesbinaryheap><span>binaryheap</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodstreesbtree-li><input type=checkbox id=m-go_docsthirdpkggodstreesbtree-check>
<label for=m-go_docsthirdpkggodstreesbtree-check><a href=/go_docs/thirdPkg/gods/trees/btree/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodstreesbtree><span>btree</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggodstreesredblacktree-li><input type=checkbox id=m-go_docsthirdpkggodstreesredblacktree-check>
<label for=m-go_docsthirdpkggodstreesredblacktree-check><a href=/go_docs/thirdPkg/gods/trees/redblacktree/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggodstreesredblacktree><span>redblacktree</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkgotel-trace-li><input type=checkbox id=m-go_docsthirdpkgotel-trace-check>
<label for=m-go_docsthirdpkgotel-trace-check><a href=/go_docs/thirdPkg/otel-trace/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkgotel-trace><span>otel/trace</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgotel-tracetrace_docs-li><input type=checkbox id=m-go_docsthirdpkgotel-tracetrace_docs-check>
<label for=m-go_docsthirdpkgotel-tracetrace_docs-check><a href=/go_docs/thirdPkg/otel-trace/trace_docs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgotel-tracetrace_docs><span>trace文档</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkgiris-li><input type=checkbox id=m-go_docsthirdpkgiris-check>
<label for=m-go_docsthirdpkgiris-check><a href=/go_docs/thirdPkg/iris/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkgiris><span>Iris</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgirisgetstarted-li><input type=checkbox id=m-go_docsthirdpkgirisgetstarted-check>
<label for=m-go_docsthirdpkgirisgetstarted-check><a href=/go_docs/thirdPkg/iris/getStarted/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgirisgetstarted><span>开始入门</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgirisiris-li><input type=checkbox id=m-go_docsthirdpkgirisiris-check>
<label for=m-go_docsthirdpkgirisiris-check><a href=/go_docs/thirdPkg/iris/iris/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgirisiris><span>Iris在pkg.go.dev上的文档</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkgchi-li><input type=checkbox id=m-go_docsthirdpkgchi-check>
<label for=m-go_docsthirdpkgchi-check><a href=/go_docs/thirdPkg/chi/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkgchi><span>chi</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkgchiexamples-li><input type=checkbox id=m-go_docsthirdpkgchiexamples-check>
<label for=m-go_docsthirdpkgchiexamples-check><a href=/go_docs/thirdPkg/chi/examples/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkgchiexamples><span>示例</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiexamplescustomhandler-li><input type=checkbox id=m-go_docsthirdpkgchiexamplescustomhandler-check>
<label for=m-go_docsthirdpkgchiexamplescustomhandler-check><a href=/go_docs/thirdPkg/chi/examples/customHandler/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiexamplescustomhandler><span>custom handler</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiexamplescustommethod-li><input type=checkbox id=m-go_docsthirdpkgchiexamplescustommethod-check>
<label for=m-go_docsthirdpkgchiexamplescustommethod-check><a href=/go_docs/thirdPkg/chi/examples/customMethod/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiexamplescustommethod><span>custom method</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiexamplesfileserver-li><input type=checkbox id=m-go_docsthirdpkgchiexamplesfileserver-check>
<label for=m-go_docsthirdpkgchiexamplesfileserver-check><a href=/go_docs/thirdPkg/chi/examples/fileServer/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiexamplesfileserver><span>file server</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiexamplesgraceful-li><input type=checkbox id=m-go_docsthirdpkgchiexamplesgraceful-check>
<label for=m-go_docsthirdpkgchiexamplesgraceful-check><a href=/go_docs/thirdPkg/chi/examples/graceful/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiexamplesgraceful><span>graceful</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiexampleshelloworld-li><input type=checkbox id=m-go_docsthirdpkgchiexampleshelloworld-check>
<label for=m-go_docsthirdpkgchiexampleshelloworld-check><a href=/go_docs/thirdPkg/chi/examples/helloWorld/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiexampleshelloworld><span>hello world</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiexampleslimits-li><input type=checkbox id=m-go_docsthirdpkgchiexampleslimits-check>
<label for=m-go_docsthirdpkgchiexampleslimits-check><a href=/go_docs/thirdPkg/chi/examples/limits/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiexampleslimits><span>limits</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiexampleslogging-li><input type=checkbox id=m-go_docsthirdpkgchiexampleslogging-check>
<label for=m-go_docsthirdpkgchiexampleslogging-check><a href=/go_docs/thirdPkg/chi/examples/logging/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiexampleslogging><span>logging</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiexamplesrest-li><input type=checkbox id=m-go_docsthirdpkgchiexamplesrest-check>
<label for=m-go_docsthirdpkgchiexamplesrest-check><a href=/go_docs/thirdPkg/chi/examples/rest/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiexamplesrest><span>rest</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiexamplesrouterwalk-li><input type=checkbox id=m-go_docsthirdpkgchiexamplesrouterwalk-check>
<label for=m-go_docsthirdpkgchiexamplesrouterwalk-check><a href=/go_docs/thirdPkg/chi/examples/routerWalk/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiexamplesrouterwalk><span>router walk</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiexamplestodosresource-li><input type=checkbox id=m-go_docsthirdpkgchiexamplestodosresource-check>
<label for=m-go_docsthirdpkgchiexamplestodosresource-check><a href=/go_docs/thirdPkg/chi/examples/todosResource/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiexamplestodosresource><span>todos resource</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiexamplesversions-li><input type=checkbox id=m-go_docsthirdpkgchiexamplesversions-check>
<label for=m-go_docsthirdpkgchiexamplesversions-check><a href=/go_docs/thirdPkg/chi/examples/versions/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiexamplesversions><span>versions</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchitesting-li><input type=checkbox id=m-go_docsthirdpkgchitesting-check>
<label for=m-go_docsthirdpkgchitesting-check><a href=/go_docs/thirdPkg/chi/testing/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchitesting><span>测试</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchimiddleware-li><input type=checkbox id=m-go_docsthirdpkgchimiddleware-check>
<label for=m-go_docsthirdpkgchimiddleware-check><a href=/go_docs/thirdPkg/chi/middleware/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchimiddleware><span>中间件</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchiintroduction-li><input type=checkbox id=m-go_docsthirdpkgchiintroduction-check>
<label for=m-go_docsthirdpkgchiintroduction-check><a href=/go_docs/thirdPkg/chi/introduction/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchiintroduction><span>简介</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchigetstarted-li><input type=checkbox id=m-go_docsthirdpkgchigetstarted-check>
<label for=m-go_docsthirdpkgchigetstarted-check><a href=/go_docs/thirdPkg/chi/getStarted/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchigetstarted><span>开始入门</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgchirouting-li><input type=checkbox id=m-go_docsthirdpkgchirouting-check>
<label for=m-go_docsthirdpkgchirouting-check><a href=/go_docs/thirdPkg/chi/routing/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgchirouting><span>routing</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkgcobra-li><input type=checkbox id=m-go_docsthirdpkgcobra-check>
<label for=m-go_docsthirdpkgcobra-check><a href=/go_docs/thirdPkg/Cobra/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkgcobra><span>Cobra</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgcobracobra-cli-li><input type=checkbox id=m-go_docsthirdpkgcobracobra-cli-check>
<label for=m-go_docsthirdpkgcobracobra-cli-check><a href=/go_docs/thirdPkg/Cobra/cobra-cli/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgcobracobra-cli><span>cobra-cli 之 Cobra Generator</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgcobracobradoc-li><input type=checkbox id=m-go_docsthirdpkgcobracobradoc-check>
<label for=m-go_docsthirdpkgcobracobradoc-check><a href=/go_docs/thirdPkg/Cobra/CobraDoc/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgcobracobradoc><span>Cobra 在pkg.go.dev上的文档</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgpflag-li><input type=checkbox id=m-go_docsthirdpkgpflag-check>
<label for=m-go_docsthirdpkgpflag-check><a href=/go_docs/thirdPkg/pflag/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkgpflag><span>pflag</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkglua-li><input type=checkbox id=m-go_docsthirdpkglua-check>
<label for=m-go_docsthirdpkglua-check><a href=/go_docs/thirdPkg/lua/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkglua><span>lua</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkgluanotes-li><input type=checkbox id=m-go_docsthirdpkgluanotes-check>
<label for=m-go_docsthirdpkgluanotes-check><a href=/go_docs/thirdPkg/lua/notes/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkgluanotes><span>技术说明</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes0-li><input type=checkbox id=m-go_docsthirdpkgluanotes0-check>
<label for=m-go_docsthirdpkgluanotes0-check><a href=/go_docs/thirdPkg/lua/notes/0/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes0><span>技术说明 0</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes1-li><input type=checkbox id=m-go_docsthirdpkgluanotes1-check>
<label for=m-go_docsthirdpkgluanotes1-check><a href=/go_docs/thirdPkg/lua/notes/1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes1><span>技术说明 1</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes2-li><input type=checkbox id=m-go_docsthirdpkgluanotes2-check>
<label for=m-go_docsthirdpkgluanotes2-check><a href=/go_docs/thirdPkg/lua/notes/2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes2><span>技术说明 2</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes3-li><input type=checkbox id=m-go_docsthirdpkgluanotes3-check>
<label for=m-go_docsthirdpkgluanotes3-check><a href=/go_docs/thirdPkg/lua/notes/3/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes3><span>技术说明 3</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes4-li><input type=checkbox id=m-go_docsthirdpkgluanotes4-check>
<label for=m-go_docsthirdpkgluanotes4-check><a href=/go_docs/thirdPkg/lua/notes/4/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes4><span>技术说明 4</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes5-li><input type=checkbox id=m-go_docsthirdpkgluanotes5-check>
<label for=m-go_docsthirdpkgluanotes5-check><a href=/go_docs/thirdPkg/lua/notes/5/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes5><span>技术说明 5</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes6-li><input type=checkbox id=m-go_docsthirdpkgluanotes6-check>
<label for=m-go_docsthirdpkgluanotes6-check><a href=/go_docs/thirdPkg/lua/notes/6/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes6><span>技术说明 6</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes7-li><input type=checkbox id=m-go_docsthirdpkgluanotes7-check>
<label for=m-go_docsthirdpkgluanotes7-check><a href=/go_docs/thirdPkg/lua/notes/7/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes7><span>技术说明 7</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes8-li><input type=checkbox id=m-go_docsthirdpkgluanotes8-check>
<label for=m-go_docsthirdpkgluanotes8-check><a href=/go_docs/thirdPkg/lua/notes/8/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes8><span>技术说明 8</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes9-li><input type=checkbox id=m-go_docsthirdpkgluanotes9-check>
<label for=m-go_docsthirdpkgluanotes9-check><a href=/go_docs/thirdPkg/lua/notes/9/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes9><span>技术说明 9</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes10-li><input type=checkbox id=m-go_docsthirdpkgluanotes10-check>
<label for=m-go_docsthirdpkgluanotes10-check><a href=/go_docs/thirdPkg/lua/notes/10/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes10><span>技术说明 10</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanotes11-li><input type=checkbox id=m-go_docsthirdpkgluanotes11-check>
<label for=m-go_docsthirdpkgluanotes11-check><a href=/go_docs/thirdPkg/lua/notes/11/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanotes11><span>技术说明 11</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluafaq-li><input type=checkbox id=m-go_docsthirdpkgluafaq-check>
<label for=m-go_docsthirdpkgluafaq-check><a href=/go_docs/thirdPkg/lua/faq/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluafaq><span>常见问题</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluadownload-li><input type=checkbox id=m-go_docsthirdpkgluadownload-check>
<label for=m-go_docsthirdpkgluadownload-check><a href=/go_docs/thirdPkg/lua/download/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluadownload><span>下载</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluacommunity-li><input type=checkbox id=m-go_docsthirdpkgluacommunity-check>
<label for=m-go_docsthirdpkgluacommunity-check><a href=/go_docs/thirdPkg/lua/community/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluacommunity><span>社区</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluanews-li><input type=checkbox id=m-go_docsthirdpkgluanews-check>
<label for=m-go_docsthirdpkgluanews-check><a href=/go_docs/thirdPkg/lua/news/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluanews><span>新闻</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluaabout-li><input type=checkbox id=m-go_docsthirdpkgluaabout-check>
<label for=m-go_docsthirdpkgluaabout-check><a href=/go_docs/thirdPkg/lua/about/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluaabout><span>关于</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluarefs-li><input type=checkbox id=m-go_docsthirdpkgluarefs-check>
<label for=m-go_docsthirdpkgluarefs-check><a href=/go_docs/thirdPkg/lua/refs/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluarefs><span>相关参考</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgluagettingstarted-li><input type=checkbox id=m-go_docsthirdpkgluagettingstarted-check>
<label for=m-go_docsthirdpkgluagettingstarted-check><a href=/go_docs/thirdPkg/lua/GettingStarted/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgluagettingstarted><span>开始入门</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkglualua54referencemanual-li><input type=checkbox id=m-go_docsthirdpkglualua54referencemanual-check>
<label for=m-go_docsthirdpkglualua54referencemanual-check><a href=/go_docs/thirdPkg/lua/Lua54ReferenceManual/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkglualua54referencemanual><span>Lua 5.4 参考手册</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglualua54referencemanual1-li><input type=checkbox id=m-go_docsthirdpkglualua54referencemanual1-check>
<label for=m-go_docsthirdpkglualua54referencemanual1-check><a href=/go_docs/thirdPkg/lua/Lua54ReferenceManual/1/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglualua54referencemanual1><span>1 – 简介</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglualua54referencemanual2-li><input type=checkbox id=m-go_docsthirdpkglualua54referencemanual2-check>
<label for=m-go_docsthirdpkglualua54referencemanual2-check><a href=/go_docs/thirdPkg/lua/Lua54ReferenceManual/2/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglualua54referencemanual2><span>2 – 基本概念</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglualua54referencemanual3-li><input type=checkbox id=m-go_docsthirdpkglualua54referencemanual3-check>
<label for=m-go_docsthirdpkglualua54referencemanual3-check><a href=/go_docs/thirdPkg/lua/Lua54ReferenceManual/3/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglualua54referencemanual3><span>3 – 语言</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglualua54referencemanual4-li><input type=checkbox id=m-go_docsthirdpkglualua54referencemanual4-check>
<label for=m-go_docsthirdpkglualua54referencemanual4-check><a href=/go_docs/thirdPkg/lua/Lua54ReferenceManual/4/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglualua54referencemanual4><span>4 – 应用程序接口</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglualua54referencemanual5-li><input type=checkbox id=m-go_docsthirdpkglualua54referencemanual5-check>
<label for=m-go_docsthirdpkglualua54referencemanual5-check><a href=/go_docs/thirdPkg/lua/Lua54ReferenceManual/5/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglualua54referencemanual5><span>5 – 辅助库</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglualua54referencemanual6-li><input type=checkbox id=m-go_docsthirdpkglualua54referencemanual6-check>
<label for=m-go_docsthirdpkglualua54referencemanual6-check><a href=/go_docs/thirdPkg/lua/Lua54ReferenceManual/6/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglualua54referencemanual6><span>6 – 标准库</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglualua54referencemanual7-li><input type=checkbox id=m-go_docsthirdpkglualua54referencemanual7-check>
<label for=m-go_docsthirdpkglualua54referencemanual7-check><a href=/go_docs/thirdPkg/lua/Lua54ReferenceManual/7/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglualua54referencemanual7><span>7 – Lua独立</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglualua54referencemanual8-li><input type=checkbox id=m-go_docsthirdpkglualua54referencemanual8-check>
<label for=m-go_docsthirdpkglualua54referencemanual8-check><a href=/go_docs/thirdPkg/lua/Lua54ReferenceManual/8/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglualua54referencemanual8><span>8 – 与前一版本的兼容性</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglualua54referencemanual9-li><input type=checkbox id=m-go_docsthirdpkglualua54referencemanual9-check>
<label for=m-go_docsthirdpkglualua54referencemanual9-check><a href=/go_docs/thirdPkg/lua/Lua54ReferenceManual/9/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglualua54referencemanual9><span>9 – Lua 的完整语法</span></a></label></li></ul></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggo_sql_driver_mysql-li><input type=checkbox id=m-go_docsthirdpkggo_sql_driver_mysql-check>
<label for=m-go_docsthirdpkggo_sql_driver_mysql-check><a href=/go_docs/thirdPkg/go_sql_driver_mysql/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkggo_sql_driver_mysql><span>go-sql-driver/mysql</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkglogrus-li><input type=checkbox id=m-go_docsthirdpkglogrus-check>
<label for=m-go_docsthirdpkglogrus-check><a href=/go_docs/thirdPkg/logrus/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkglogrus><span>logrus</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkglogruswiki-li><input type=checkbox id=m-go_docsthirdpkglogruswiki-check>
<label for=m-go_docsthirdpkglogruswiki-check><a href=/go_docs/thirdPkg/logrus/wiki/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkglogruswiki><span>wiki</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglogruswikitips-li><input type=checkbox id=m-go_docsthirdpkglogruswikitips-check>
<label for=m-go_docsthirdpkglogruswikitips-check><a href=/go_docs/thirdPkg/logrus/wiki/tips/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglogruswikitips><span>tips</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglogruswikihooks-li><input type=checkbox id=m-go_docsthirdpkglogruswikihooks-check>
<label for=m-go_docsthirdpkglogruswikihooks-check><a href=/go_docs/thirdPkg/logrus/wiki/hooks/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglogruswikihooks><span>hooks</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkglogrushook-li><input type=checkbox id=m-go_docsthirdpkglogrushook-check>
<label for=m-go_docsthirdpkglogrushook-check><a href=/go_docs/thirdPkg/logrus/hook/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkglogrushook><span>hook</span></a></label><ul class="ul-3 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglogrushooksyslog-li><input type=checkbox id=m-go_docsthirdpkglogrushooksyslog-check>
<label for=m-go_docsthirdpkglogrushooksyslog-check><a href=/go_docs/thirdPkg/logrus/hook/syslog/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglogrushooksyslog><span>Logrus 的 Syslog 钩子</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglogrushookwriter-li><input type=checkbox id=m-go_docsthirdpkglogrushookwriter-check>
<label for=m-go_docsthirdpkglogrushookwriter-check><a href=/go_docs/thirdPkg/logrus/hook/writer/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglogrushookwriter><span>Logrus 的 Writer 钩子</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkglogruslogrus-li><input type=checkbox id=m-go_docsthirdpkglogruslogrus-check>
<label for=m-go_docsthirdpkglogruslogrus-check><a href=/go_docs/thirdPkg/logrus/logrus/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkglogruslogrus><span>logrus文档</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkghttprouter-li><input type=checkbox id=m-go_docsthirdpkghttprouter-check>
<label for=m-go_docsthirdpkghttprouter-check><a href=/go_docs/thirdPkg/httprouter/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkghttprouter><span>httprouter</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkghttprouterhttprouter-li><input type=checkbox id=m-go_docsthirdpkghttprouterhttprouter-check>
<label for=m-go_docsthirdpkghttprouterhttprouter-check><a href=/go_docs/thirdPkg/httprouter/httprouter/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkghttprouterhttprouter><span>httprouter文档</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-go_docsthirdpkggin-li><input type=checkbox id=m-go_docsthirdpkggin-check>
<label for=m-go_docsthirdpkggin-check><a href=/go_docs/thirdPkg/gin/ class="align-left ps-0 td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkggin><span>gin</span></a></label><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkggingin-li><input type=checkbox id=m-go_docsthirdpkggingin-check>
<label for=m-go_docsthirdpkggingin-check><a href=/go_docs/thirdPkg/gin/gin/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkggingin><span>gin文档</span></a></label></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-go_docsthirdpkgginginquickstart-li><input type=checkbox id=m-go_docsthirdpkgginginquickstart-check>
<label for=m-go_docsthirdpkgginginquickstart-check><a href=/go_docs/thirdPkg/gin/ginQuickStart/ class="align-left ps-0 td-sidebar-link td-sidebar-link__page" id=m-go_docsthirdpkgginginquickstart><span>gin快速入门</span></a></label></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-go_docsthirdpkgviper-li><input type=checkbox id=m-go_docsthirdpkgviper-check checked>
<label for=m-go_docsthirdpkgviper-check><a href=/go_docs/thirdPkg/viper/ class="align-left ps-0 active td-sidebar-link td-sidebar-link__section" id=m-go_docsthirdpkgviper><span class=td-sidebar-nav-active-item>viper</span></a></label></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ms-2 pb-1 pt-2 mb-0"><a href=https://before80.github.io/go_docs/comm/coffee class="td-page-meta--view td-page-meta__view" style=color:#2bf518!important target=_blank rel=noopener><i class="fa-solid fa-mug-hot fa-fw"></i> 请作者喝杯咖啡吧</a>
<a href=https://github.com/before80/go_docs/tree/main/content/thirdPkg/viper/_index.md class="td-page-meta--view td-page-meta__view" target=_blank rel=noopener><i class="fa-solid fa-file-lines fa-fw"></i> 查看页面源码</a>
<a href=https://github.com/before80/go_docs/edit/main/content/thirdPkg/viper/_index.md class="td-page-meta--edit td-page-meta__edit" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> 编辑此页</a>
<a href="https://github.com/before80/go_docs/new/main/content/thirdPkg/viper?filename=change-me.md&amp;value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" class="td-page-meta--child td-page-meta__child" target=_blank rel=noopener><i class="fa-solid fa-pen-to-square fa-fw"></i> 添加子页面</a>
<a href="https://github.com/before80/go_docs/issues/new?title=viper" class="td-page-meta--issue td-page-meta__issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> 提交文档问题</a>
<a href=https://github.com/before80/go_docs/issues/new class="td-page-meta--project td-page-meta__project-issue" target=_blank rel=noopener><i class="fa-solid fa-list-check fa-fw"></i> 提交项目问题</a></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#viper>viper</a><ul><li><ul><li><a href=#viper-v2-反馈>Viper v2 反馈</a></li></ul></li><li><a href=#安装>安装</a></li><li><a href=#viper-是什么>Viper 是什么？</a></li><li><a href=#为什么选择-viper>为什么选择 Viper？</a></li><li><a href=#向-viper-中添加值>向 Viper 中添加值</a><ul><li><a href=#设置默认值>设置默认值</a></li><li><a href=#读取配置文件>读取配置文件</a></li><li><a href=#写入配置文件>写入配置文件</a></li><li><a href=#监听和重新读取配置文件>监听和重新读取配置文件</a></li><li><a href=#从-ioreader-读取配置>从 io.Reader 读取配置</a></li><li><a href=#设置覆盖值>设置覆盖值</a></li><li><a href=#注册和使用别名>注册和使用别名</a></li><li><a href=#使用环境变量>使用环境变量</a><ul><li><a href=#环境变量示例>环境变量示例</a></li></ul></li><li><a href=#使用标志flags>使用标志（Flags）</a><ul><li><a href=#flag-接口>Flag 接口</a></li></ul></li><li><a href=#远程键值存储支持>远程键/值存储支持</a></li><li><a href=#远程键值存储示例---未加密>远程键/值存储示例 - 未加密</a><ul><li><a href=#etcd>etcd</a></li><li><a href=#etcd3>etcd3</a></li><li><a href=#consul>Consul</a></li><li><a href=#firestore>Firestore</a></li></ul></li><li><a href=#远程键值存储示例---加密>远程键/值存储示例 - 加密</a></li><li><a href=#监听etcd中的更改---未加密>监听etcd中的更改 - 未加密</a></li></ul></li><li><a href=#从viper获取值>从Viper获取值</a><ul><li><a href=#访问嵌套键>访问嵌套键</a></li><li><a href=#提取子树sub-tree>提取子树（sub-tree）</a></li><li><a href=#反序列化>反序列化</a></li><li><a href=#解码自定义格式>解码自定义格式</a></li><li><a href=#序列化为字符串>序列化为字符串</a></li></ul></li><li><a href=#viper还是vipers>Viper还是Vipers？</a><ul><li><ul><li><a href=#使用多个viper>使用多个viper</a></li></ul></li></ul></li><li><a href=#q--a>Q & A</a><ul><li><a href=#为什么它被称为viper>为什么它被称为"Viper"？</a></li><li><a href=#为什么它被称为cobra>为什么它被称为"Cobra"？</a></li><li><a href=#viper支持区分大小写的键吗>Viper支持区分大小写的键吗？</a></li><li><a href=#并发读写viper是否安全>并发读写Viper是否安全？</a></li></ul></li><li><a href=#故障排除>故障排除</a></li><li><a href=#文档>文档</a><ul><li><a href=#常量>常量</a></li><li><a href=#变量>变量</a></li><li><a href=#函数>函数</a><ul><li><a href=#func-addconfigpath>func AddConfigPath</a></li><li><a href=#func-addremoteprovider>func AddRemoteProvider</a></li><li><a href=#func-addsecureremoteprovider>func AddSecureRemoteProvider</a></li><li><a href=#func-allkeys>func AllKeys</a></li><li><a href=#func-allsettings>func AllSettings</a></li><li><a href=#func-allowemptyenv---130>func AllowEmptyEnv &lt;- 1.3.0</a></li><li><a href=#func-automaticenv>func AutomaticEnv</a></li><li><a href=#func-bindenv>func BindEnv</a></li><li><a href=#func-bindflagvalue>func BindFlagValue</a></li><li><a href=#func-bindflagvalues>func BindFlagValues</a></li><li><a href=#func-bindpflag>func BindPFlag</a></li><li><a href=#func-bindpflags>func BindPFlags</a></li><li><a href=#func-configfileused>func ConfigFileUsed</a></li><li><a href=#func-debug>func Debug</a></li><li><a href=#func-debugto---1130>func DebugTo &lt;- 1.13.0</a></li><li><a href=#func-get>func Get</a></li><li><a href=#func-getbool>func GetBool</a></li><li><a href=#func-getduration>func GetDuration</a></li><li><a href=#func-getfloat64>func GetFloat64</a></li><li><a href=#func-getint>func GetInt</a></li><li><a href=#func-getint32---110>func GetInt32 &lt;- 1.1.0</a></li><li><a href=#func-getint64>func GetInt64</a></li><li><a href=#func-getintslice---150>func GetIntSlice &lt;- 1.5.0</a></li><li><a href=#func-getsizeinbytes>func GetSizeInBytes</a></li><li><a href=#func-getstring>func GetString</a></li><li><a href=#func-getstringmap>func GetStringMap</a></li><li><a href=#func-getstringmapstring>func GetStringMapString</a></li><li><a href=#func-getstringmapstringslice>func GetStringMapStringSlice</a></li><li><a href=#func-getstringslice>func GetStringSlice</a></li><li><a href=#func-gettime>func GetTime</a></li><li><a href=#func-getuint---140>func GetUint &lt;- 1.4.0</a></li><li><a href=#func-getuint16---1130>func GetUint16 &lt;- 1.13.0</a></li><li><a href=#func-getuint32---140>func GetUint32 &lt;- 1.4.0</a></li><li><a href=#func-getuint64---140>func GetUint64 &lt;- 1.4.0</a></li><li><a href=#func-inconfig>func InConfig</a></li><li><a href=#func-isset>func IsSet</a></li><li><a href=#func-mergeconfig>func MergeConfig</a></li><li><a href=#func-mergeconfigmap---130>func MergeConfigMap &lt;- 1.3.0</a></li><li><a href=#func-mergeinconfig>func MergeInConfig</a></li><li><a href=#func-mustbindenv---1120>func MustBindEnv &lt;- 1.12.0</a></li><li><a href=#func-onconfigchange>func OnConfigChange</a></li><li><a href=#func-readconfig>func ReadConfig</a></li><li><a href=#func-readinconfig>func ReadInConfig</a></li><li><a href=#func-readremoteconfig>func ReadRemoteConfig</a></li><li><a href=#func-registeralias>func RegisterAlias</a></li><li><a href=#func-reset>func Reset</a></li><li><a href=#func-safewriteconfig---101>func SafeWriteConfig &lt;- 1.0.1</a></li><li><a href=#func-safewriteconfigas---101>func SafeWriteConfigAs &lt;- 1.0.1</a></li><li><a href=#func-set>func Set</a></li><li><a href=#func-setconfigfile>func SetConfigFile</a></li><li><a href=#func-setconfigname>func SetConfigName</a></li><li><a href=#func-setconfigpermissions---140>func SetConfigPermissions &lt;- 1.4.0</a></li><li><a href=#func-setconfigtype>func SetConfigType</a></li><li><a href=#func-setdefault>func SetDefault</a></li><li><a href=#func-setenvkeyreplacer>func SetEnvKeyReplacer</a></li><li><a href=#func-setenvprefix>func SetEnvPrefix</a></li><li><a href=#func-setfs>func SetFs</a></li><li><a href=#func-settypebydefaultvalue>func SetTypeByDefaultValue</a></li><li><a href=#func-unmarshal>func Unmarshal</a></li><li><a href=#func-unmarshalexact---160>func UnmarshalExact &lt;- 1.6.0</a></li><li><a href=#func-unmarshalkey>func UnmarshalKey</a></li><li><a href=#func-watchconfig>func WatchConfig</a></li><li><a href=#func-watchremoteconfig>func WatchRemoteConfig</a></li><li><a href=#func-writeconfig---101>func WriteConfig &lt;- 1.0.1</a></li><li><a href=#func-writeconfigas---101>func WriteConfigAs &lt;- 1.0.1</a></li></ul></li><li><a href=#类型>类型</a><ul><li><a href=#type-configfilealreadyexistserror---160>type ConfigFileAlreadyExistsError &lt;- 1.6.0</a><ul><li><a href=#configfilealreadyexistserror-error---160>(ConfigFileAlreadyExistsError) Error &lt;- 1.6.0</a></li></ul></li><li><a href=#type-configfilenotfounderror>type ConfigFileNotFoundError</a><ul><li><a href=#configfilenotfounderror-error>(ConfigFileNotFoundError) Error</a></li></ul></li><li><a href=#type-configmarshalerror---101>type ConfigMarshalError &lt;- 1.0.1</a><ul><li><a href=#configmarshalerror-error---101>(ConfigMarshalError) Error &lt;- 1.0.1</a></li></ul></li><li><a href=#type-configparseerror>type ConfigParseError</a><ul><li><a href=#configparseerror-error>(ConfigParseError) Error</a></li><li><a href=#configparseerror-unwrap---1160>(ConfigParseError) Unwrap &lt;- 1.16.0</a></li></ul></li><li><a href=#type-decoderconfigoption---110>type DecoderConfigOption &lt;- 1.1.0</a><ul><li><a href=#func-decodehook---110>func DecodeHook &lt;- 1.1.0</a></li></ul></li><li><a href=#type-flagvalue>type FlagValue</a></li><li><a href=#type-flagvalueset>type FlagValueSet</a></li><li><a href=#type-logger---1100>type Logger &lt;- 1.10.0</a></li><li><a href=#type-option---160>type Option &lt;- 1.6.0</a><ul><li><a href=#func-envkeyreplacer---160>func EnvKeyReplacer &lt;- 1.6.0</a></li><li><a href=#func-iniloadoptions---180>func IniLoadOptions &lt;- 1.8.0</a></li><li><a href=#func-keydelimiter---160>func KeyDelimiter &lt;- 1.6.0</a></li></ul></li><li><a href=#type-remoteconfigerror>type RemoteConfigError</a><ul><li><a href=#remoteconfigerror-error>(RemoteConfigError) Error</a></li></ul></li><li><a href=#type-remoteprovider>type RemoteProvider</a></li><li><a href=#type-remoteresponse>type RemoteResponse</a></li><li><a href=#type-stringreplacer---160>type StringReplacer &lt;- 1.6.0</a></li><li><a href=#type-unsupportedconfigerror>type UnsupportedConfigError</a><ul><li><a href=#unsupportedconfigerror-error>(UnsupportedConfigError) Error</a></li></ul></li><li><a href=#type-unsupportedremoteprovidererror>type UnsupportedRemoteProviderError</a><ul><li><a href=#unsupportedremoteprovidererror-error>(UnsupportedRemoteProviderError) Error</a></li></ul></li><li><a href=#type-viper>type Viper</a><ul><li><a href=#func-getviper>func GetViper</a></li><li><a href=#func-new>func New</a></li><li><a href=#func-newwithoptions---160>func NewWithOptions &lt;- 1.6.0</a></li><li><a href=#func-sub>func Sub</a></li><li><a href=#viper-addconfigpath>(*Viper) AddConfigPath</a></li><li><a href=#viper-addremoteprovider>(*Viper) AddRemoteProvider</a></li><li><a href=#viper-addsecureremoteprovider>(*Viper) AddSecureRemoteProvider</a></li><li><a href=#viper-allkeys>(*Viper) AllKeys</a></li><li><a href=#viper-allsettings>(*Viper) AllSettings</a></li><li><a href=#viper-allowemptyenv---130>(*Viper) AllowEmptyEnv &lt;- 1.3.0</a></li><li><a href=#viper-automaticenv>(*Viper) AutomaticEnv</a></li><li><a href=#viper-bindenv>(*Viper) BindEnv</a></li><li><a href=#viper-bindflagvalue>(*Viper) BindFlagValue</a></li><li><a href=#viper-bindflagvalues>(*Viper) BindFlagValues</a></li><li><a href=#viper-bindpflag>(*Viper) BindPFlag</a></li><li><a href=#viper-bindpflags>(*Viper) BindPFlags</a></li><li><a href=#viper-configfileused>(*Viper) ConfigFileUsed</a></li><li><a href=#viper-debug>(*Viper) Debug</a></li><li><a href=#viper-debugto---1130>(*Viper) DebugTo &lt;- 1.13.0</a></li><li><a href=#viper-get>(*Viper) Get</a></li><li><a href=#viper-getbool>(*Viper) GetBool</a></li><li><a href=#viper-getduration>(*Viper) GetDuration</a></li><li><a href=#viper-getfloat64>(*Viper) GetFloat64</a></li><li><a href=#viper-getint>(*Viper) GetInt</a></li><li><a href=#viper-getint32---110>(*Viper) GetInt32 &lt;- 1.1.0</a></li><li><a href=#viper-getint64>(*Viper) GetInt64</a></li><li><a href=#viper-getintslice---150>(*Viper) GetIntSlice &lt;- 1.5.0</a></li><li><a href=#viper-getsizeinbytes>(*Viper) GetSizeInBytes</a></li><li><a href=#viper-getstring>(*Viper) GetString</a></li><li><a href=#viper-getstringmap>(*Viper) GetStringMap</a></li><li><a href=#viper-getstringmapstring>(*Viper) GetStringMapString</a></li><li><a href=#viper-getstringmapstringslice>(*Viper) GetStringMapStringSlice</a></li><li><a href=#viper-getstringslice>(*Viper) GetStringSlice</a></li><li><a href=#viper-gettime>(*Viper) GetTime</a></li><li><a href=#viper-getuint---140>(*Viper) GetUint &lt;- 1.4.0</a></li><li><a href=#viper-getuint16---1130>(*Viper) GetUint16 &lt;- 1.13.0</a></li><li><a href=#viper-getuint32---140>(*Viper) GetUint32 &lt;- 1.4.0</a></li><li><a href=#viper-getuint64---140>(*Viper) GetUint64 &lt;- 1.4.0</a></li><li><a href=#viper-inconfig>(*Viper) InConfig</a></li><li><a href=#viper-isset>(*Viper) IsSet</a></li><li><a href=#viper-mergeconfig>(*Viper) MergeConfig</a></li><li><a href=#viper-mergeconfigmap---130>(*Viper) MergeConfigMap &lt;- 1.3.0</a></li><li><a href=#viper-mergeinconfig>(*Viper) MergeInConfig</a></li><li><a href=#viper-mustbindenv---1120>(*Viper) MustBindEnv &lt;- 1.12.0</a></li><li><a href=#viper-onconfigchange>(*Viper) OnConfigChange</a></li><li><a href=#viper-readconfig>(*Viper) ReadConfig</a></li><li><a href=#viper-readinconfig>(*Viper) ReadInConfig</a></li><li><a href=#viper-readremoteconfig>(*Viper) ReadRemoteConfig</a></li><li><a href=#viper-registeralias>(*Viper) RegisterAlias</a></li><li><a href=#viper-safewriteconfig---101>(*Viper) SafeWriteConfig &lt;- 1.0.1</a></li><li><a href=#viper-safewriteconfigas---101>(*Viper) SafeWriteConfigAs &lt;- 1.0.1</a></li><li><a href=#viper-set>(*Viper) Set</a></li><li><a href=#viper-setconfigfile>(*Viper) SetConfigFile</a></li><li><a href=#viper-setconfigname>(*Viper) SetConfigName</a></li><li><a href=#viper-setconfigpermissions---140>(*Viper) SetConfigPermissions &lt;- 1.4.0</a></li><li><a href=#viper-setconfigtype>(*Viper) SetConfigType</a></li><li><a href=#viper-setdefault>(*Viper) SetDefault</a></li><li><a href=#viper-setenvkeyreplacer>(*Viper) SetEnvKeyReplacer</a></li><li><a href=#viper-setenvprefix>(*Viper) SetEnvPrefix</a></li><li><a href=#viper-setfs>(*Viper) SetFs</a></li><li><a href=#viper-settypebydefaultvalue>(*Viper) SetTypeByDefaultValue</a></li><li><a href=#viper-sub>(*Viper) Sub</a></li><li><a href=#viper-unmarshal>(*Viper) Unmarshal</a></li><li><a href=#viper-unmarshalexact>(*Viper) UnmarshalExact</a></li><li><a href=#viper-unmarshalkey>(*Viper) UnmarshalKey</a></li><li><a href=#viper-watchconfig>(*Viper) WatchConfig</a></li><li><a href=#viper-watchremoteconfig>(*Viper) WatchRemoteConfig</a></li><li><a href=#viper-watchremoteconfigonchannel>(*Viper) WatchRemoteConfigOnChannel</a></li><li><a href=#viper-writeconfig---101>(*Viper) WriteConfig &lt;- 1.0.1</a></li><li><a href=#viper-writeconfigas---101>(*Viper) WriteConfigAs &lt;- 1.0.1</a></li></ul></li></ul></li></ul></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 ps-md-5" role=main><nav aria-label=breadcrumb class=td-breadcrumbs><ol class=breadcrumb><li class=breadcrumb-item><a href=/go_docs/thirdPkg/>第三方包</a></li><li class="breadcrumb-item active" aria-current=page>viper</li></ol></nav><div class=td-content><h1>viper</h1><header class=article-meta><p class=reading-time><i class="fa-solid fa-clock" style=color:#e90 aria-hidden=true></i>&nbsp; <span style=font-size:3rem;color:#006400 id=advice-reading-time>35 </span>分钟阅读 &nbsp;</p></header><h1 id=viper>viper</h1><blockquote><p>原文：<a href=https://pkg.go.dev/github.com/spf13/viper>https://pkg.go.dev/github.com/spf13/viper</a></p><p>版本：v1.16.0</p><p>发布日期：2023.5.30</p><p>github网址：<a href=https://github.com/spf13/viper>https://github.com/spf13/viper</a></p></blockquote><blockquote><h3 id=viper-v2-反馈>Viper v2 反馈</h3><p>​ Viper 正朝着 v2 的方向发展，我们非常愿意听到您对于 v2 的期望。请在此处分享您的想法：<a href=https://forms.gle/R6faU74qPRPAzchZ9>https://forms.gle/R6faU74qPRPAzchZ9</a></p><p><strong>Thank you!</strong></p></blockquote><p><img src=/go_docs/thirdPkg/viper/_index_img/logo.png alt=Viper data-cur-dir=thirdPkg/viper data-rg=/_index_img/logo.png data-rg1=_index_img/logo.png data-rel=/go_docs/_index_img/logo.png data-c4my=/go_docs></p><p><img src=/go_docs/thirdPkg/viper/_index_img/image-20230522084952536.png alt=image-20230522084952536 data-cur-dir=thirdPkg/viper data-rg=/_index_img/image-20230522084952536.png data-rg1=_index_img/image-20230522084952536.png data-rel=/go_docs/_index_img/image-20230522084952536.png data-c4my=/go_docs></p><p><strong>带有尖牙的 Go 配置 - Go configuration with fangs!</strong></p><p>​ 许多 Go 项目都使用 Viper 构建，包括：</p><ul><li><a href=http://gohugo.io/>Hugo</a></li><li><a href=http://rexray.readthedocs.org/en/stable/>EMC RexRay</a></li><li><a href=https://github.com/Imgur/incus>Imgur’s Incus</a></li><li><a href=https://github.com/nanobox-io/nanobox>Nanobox</a>/<a href=https://github.com/nanopack>Nanopack</a></li><li><a href=https://github.com/docker/Notary>Docker Notary</a></li><li><a href=https://www.bloomapi.com/>BloomApi</a></li><li><a href=https://github.com/digitalocean/doctl>doctl</a></li><li><a href=https://github.com/jgsqware/clairctl>Clairctl</a></li><li><a href=https://mercure.rocks/>Mercure</a></li></ul><h2 id=安装>安装</h2><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>go get github.com/spf13/viper
</span></span></code></pre></td></tr></table></div></div><p><strong>注意：</strong> Viper 使用 <a href=https://github.com/golang/go/wiki/Modules>Go 模块</a> 来管理依赖项。</p><h2 id=viper-是什么>Viper 是什么？</h2><p>​ Viper 是 Go 应用程序的完整配置解决方案，包括<a href=https://12factor.net/zh_cn/#12factors>12-Factor 应用程序</a>。它被设计用于在应用程序中工作，并可以处理各种类型的配置需求和格式。它支持：</p><ul><li>设置默认值</li><li>从 JSON、TOML、YAML、HCL、envfile 和 Java properties 配置文件中读取配置</li><li>实时监视和重新读取配置文件（可选）</li><li>从环境变量中读取配置</li><li>从远程配置系统（etcd 或 Consul）中读取配置并监视更改</li><li>从命令行标志中读取配置</li><li>从缓冲区中读取配置</li><li>设置显式值</li></ul><p>​ 可以将 Viper 视为您的应用程序所有配置需求的注册表。</p><h2 id=为什么选择-viper>为什么选择 Viper？</h2><p>​ 在构建现代应用程序时，您不希望担心配置文件格式，而是专注于构建出色的软件。Viper 就是为此而存在的。</p><p>​ Viper 为您提供以下功能：</p><ol><li>查找、加载和解析 JSON、TOML、YAML、HCL、INI、envfile 或 Java properties 格式的配置文件。</li><li>提供一种机制（mechanism）来为不同的配置选项设置默认值。</li><li>提供一种机制（mechanism）来为通过命令行标志指定的选项设置覆盖值。</li><li>提供别名系统，以便轻松重命名参数而不会破坏现有代码。</li><li>简化判断用户是提供了与默认值相同的命令行参数还是配置文件的区别。</li></ol><p>​ Viper 使用以下优先顺序。每个条目的优先级高于它下面的条目：</p><ul><li>显式调用 <code>Set</code></li><li>flag</li><li>env</li><li>config</li><li>key/value存储</li><li>默认值</li></ul><p><strong>重要提示：</strong> Viper 的配置键不区分大小写。关于是否可选地进行区分大小写，目前正在进行讨论。</p><h2 id=向-viper-中添加值>向 Viper 中添加值</h2><h3 id=设置默认值>设置默认值</h3><p>​ 一个良好的配置系统将支持默认值。对于一个键来说，默认值不是必需的，但在没有通过配置文件、环境变量、远程配置或命令行标志设置键时非常有用。</p><p>示例：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetDefault</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;ContentDir&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;content&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetDefault</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;LayoutDir&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;layouts&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetDefault</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;Taxonomies&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>{</span><span style=color:#98c379>&#34;tag&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#98c379>&#34;tags&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;category&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#98c379>&#34;categories&#34;</span><span style=color:#abb2bf>})</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=读取配置文件>读取配置文件</h3><p>​ Viper需要进行最小配置，以便知道在哪里查找配置文件。Viper 支持 JSON、TOML、YAML、HCL、INI、envfile 和 Java Properties 文件。Viper 可以搜索多个路径，但是当前每个 Viper 实例只支持一个配置文件。Viper 不会默认设置任何配置文件搜索路径，而是将默认的决策留给应用程序。</p><p>​ 以下是如何使用 Viper 搜索并读取配置文件的示例。具体路径都不是必需的，但至少应提供一个期望找到配置文件的路径。</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigName</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;config&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>//配置文件的名称（无扩展名）
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;yaml&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 如果配置文件名称中不包含扩展名，则必需(REQUIRED)
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AddConfigPath</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;/etc/appname/&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>//配置文件的搜索路径
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AddConfigPath</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;$HOME/.appname&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>//可多次调用以添加多个搜索路径
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AddConfigPath</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;.&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 可选地在工作目录中查找配置文件
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadInConfig</span><span style=color:#abb2bf>()</span> <span style=color:#8a93a5;font-style:italic>// 查找并读取配置文件
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span> <span style=color:#8a93a5;font-style:italic>// 处理读取配置文件时的错误
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#e5c07b>panic</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Errorf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;fatal error config file: %w&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 您可以像这样处理未找到配置文件的特殊情况：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadInConfig</span><span style=color:#abb2bf>();</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>_</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>ok</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>.(</span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>ConfigFileNotFoundError</span><span style=color:#abb2bf>);</span> <span style=color:#aa89ea>ok</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#8a93a5;font-style:italic>// 未找到配置文件；如果需要，可以忽略错误
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#abb2bf>}</span> <span style=color:#76a9f9>else</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#8a93a5;font-style:italic>// 找到配置文件，但产生了其他错误
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// 找到配置文件并且已成功解析
</span></span></span></code></pre></td></tr></table></div></div><blockquote><p><em>注意 [自版本 1.6 起]：</em> 您还可以拥有没有扩展名的文件，并以编程方式指定格式。对于那些位于用户主目录下且没有任何扩展名的配置文件，例如 <code>.bashrc</code>。</p></blockquote><h3 id=写入配置文件>写入配置文件</h3><p>​ 从配置文件中读取很有用，但有时您希望存储运行时所做的所有修改。为此，有一系列可用的命令，每个命令都有其特定的目的：</p><ul><li>WriteConfig： 将当前的 Viper 配置写入预定义的路径（如果存在）。如果没有预定义的路径，则报错。如果配置文件已存在，则<strong>会</strong>覆盖当前的配置文件。</li><li>SafeWriteConfig：将当前的 Viper 配置写入预定义的路径。如果没有预定义的路径，则报错。如果配置文件已存在，则<strong>不会</strong>覆盖当前的配置文件。</li><li>WriteConfigAs：将当前的 Viper 配置写入指定的文件路径。如果给定的文件已存在，则<strong>会</strong>覆盖该文件。</li><li>SafeWriteConfigAs：将当前的 Viper 配置写入指定的文件路径。如果给定的文件已存在，则<strong>不会</strong>覆盖该文件。</li></ul><p>​ 根据经验，标记为 safe 的所有操作都不会覆盖任何文件，只会在文件不存在时创建，而默认行为是创建或截断（truncate）文件。</p><p>​ 以下是一个小的示例部分：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>WriteConfig</span><span style=color:#abb2bf>()</span> <span style=color:#8a93a5;font-style:italic>// 将当前配置写入由 &#39;viper.AddConfigPath()&#39; 和 &#39;viper.SetConfigName&#39; 设置的预定义路径
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SafeWriteConfig</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SafeWriteConfig</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>WriteConfigAs</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;/path/to/my/.config&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SafeWriteConfigAs</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;/path/to/my/.config&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 会报错，因为已经写入过
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SafeWriteConfigAs</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;/path/to/my/.other_config&#34;</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=监听和重新读取配置文件>监听和重新读取配置文件</h3><p>​ Viper支持在应用程序运行时实时读取配置文件的能力。</p><p>​ 不再需要重新启动服务器以使配置生效，使用Viper的应用程序可以在运行过程中读取配置文件的更新，而无需中断。</p><p>​ 只需告诉 Viper 实例执行 <code>WatchConfig()</code>。可选地，您还可以为 Viper 提供一个在每次更改发生时运行的函数。</p><blockquote><p>​ <strong>确保在调用 <code>WatchConfig()</code> 之前添加所有的配置路径。</strong></p></blockquote><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>OnConfigChange</span><span style=color:#abb2bf>(</span><span style=color:#76a9f9>func</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>e</span> <span style=color:#aa89ea>fsnotify</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Event</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Println</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;Config file changed:&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>e</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Name</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>WatchConfig</span><span style=color:#abb2bf>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=从-ioreader-读取配置>从 io.Reader 读取配置</h3><p>​ Viper 预定义了许多配置源，如文件、环境变量、标志和远程键值存储，但您并不受限于此。您还可以实现自己所需的配置源，并将其提供给 Viper。</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;yaml&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 或 viper.SetConfigType(&#34;YAML&#34;)
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// 通过任何方式将此配置内容引入你的程序中。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#76a9f9>var</span> <span style=color:#aa89ea>yamlExample</span> <span style=color:#abb2bf>=</span> <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>byte</span><span style=color:#abb2bf>(</span><span style=color:#98c379>`
</span></span></span><span style=display:flex><span><span style=color:#98c379>Hacker: true
</span></span></span><span style=display:flex><span><span style=color:#98c379>name: steve
</span></span></span><span style=display:flex><span><span style=color:#98c379>hobbies:
</span></span></span><span style=display:flex><span><span style=color:#98c379>- skateboarding
</span></span></span><span style=display:flex><span><span style=color:#98c379>- snowboarding
</span></span></span><span style=display:flex><span><span style=color:#98c379>- go
</span></span></span><span style=display:flex><span><span style=color:#98c379>clothing:
</span></span></span><span style=display:flex><span><span style=color:#98c379>  jacket: leather
</span></span></span><span style=display:flex><span><span style=color:#98c379>  trousers: denim
</span></span></span><span style=display:flex><span><span style=color:#98c379>age: 35
</span></span></span><span style=display:flex><span><span style=color:#98c379>eyes : brown
</span></span></span><span style=display:flex><span><span style=color:#98c379>beard: true
</span></span></span><span style=display:flex><span><span style=color:#98c379>`</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>bytes</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>NewBuffer</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>yamlExample</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Get</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;name&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 这将返回 &#34;steve&#34;
</span></span></span></code></pre></td></tr></table></div></div><h3 id=设置覆盖值>设置覆盖值</h3><p>​ 这些可以来自命令行标志，或者来自您自己的应用程序逻辑。</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Set</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;Verbose&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#e5c07b>true</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Set</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;LogFile&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>LogFile</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=注册和使用别名>注册和使用别名</h3><p>​ 别名允许多个键引用同一个值。</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>RegisterAlias</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;loud&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;Verbose&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Set</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;verbose&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#e5c07b>true</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 与下一行代码的结果相同
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Set</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;loud&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#e5c07b>true</span><span style=color:#abb2bf>)</span>   <span style=color:#8a93a5;font-style:italic>// 与上一行代码的结果相同
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>GetBool</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;loud&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 返回 true
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>GetBool</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;verbose&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 返回 true
</span></span></span></code></pre></td></tr></table></div></div><h3 id=使用环境变量>使用环境变量</h3><p>​ Viper完全支持环境变量。这使得12因子应用程序能够立即使用。有五个方法可用于处理环境变量：</p><ul><li><code>AutomaticEnv()</code></li><li><code>BindEnv(string...) : error</code></li><li><code>SetEnvPrefix(string)</code></li><li><code>SetEnvKeyReplacer(string...) *strings.Replacer</code></li><li><code>AllowEmptyEnv(bool)</code></li></ul><blockquote><p>​ 在处理环境变量时，重要的是要认识到Viper将环境变量视为区分大小写。</p></blockquote><p>​ Viper提供了一种机制来确保ENV变量的唯一性。通过使用<code>SetEnvPrefix</code>，您可以告诉Viper在读取环境变量时使用前缀。<code>BindEnv</code>和<code>AutomaticEnv</code>都将使用此前缀。</p><p>​ <code>BindEnv</code>接受一个或多个参数。第一个参数是键名，其余参数是要绑定到此键的环境变量的名称。如果提供了多个参数，它们将按指定的顺序优先。环境变量的名称区分大小写。如果未提供ENV变量名，则Viper将自动假设ENV变量与以下格式匹配：前缀 + &ldquo;_&rdquo; +键名（全部大写）。当您显式提供ENV变量名（第二个参数）时，它<strong>不会</strong>自动添加前缀。例如，如果第二个参数是"id"，Viper将查找ENV变量 &ldquo;ID&rdquo;。</p><p>​ 在处理环境变量时，需要注意的一点是每次访问时都会读取其值。在调用<code>BindEnv</code>时，Viper不会固定该值。</p><p>​ <code>AutomaticEnv</code>是一个强大的辅助功能，特别是与<code>SetEnvPrefix</code>结合使用时。当（<code>AutomaticEnv</code>）被调用时，每次进行<code>viper.Get</code>请求时，Viper都会检查是否存在相应的环境变量。它将应用以下规则：如果设置了<code>EnvPrefix</code>，它将检查是否存在一个与键名相匹配的以大写形式和前缀（如果设置）作为前缀的环境变量名称。</p><p>​ <code>SetEnvKeyReplacer</code>允许您使用<code>strings.Replacer</code>对象来在一定程度上重写Env键。这在您希望在<code>Get()</code>调用中使用<code>-</code>或其他字符，但希望您的环境变量使用<code>_</code>作为分隔符时非常有用。在<code>viper_test.go</code>中可以找到使用它的示例。</p><p>​ 或者，您可以使用带有<code>NewWithOptions</code>工厂函数的<code>EnvKeyReplacer</code>。与<code>SetEnvKeyReplacer</code>不同，它接受<code>StringReplacer</code>接口，允许您编写自定义字符串替换逻辑。</p><p>​ 默认情况下，空环境变量被视为未设置，并将回退到下一个配置源。要将空环境变量视为已设置，请使用<code>AllowEmptyEnv</code>方法。</p><h4 id=环境变量示例>环境变量示例</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00b1f7>SetEnvPrefix</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;spf&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 将自动转为大写
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#00b1f7>BindEnv</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;id&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>os</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Setenv</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;SPF_ID&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;13&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 通常在应用程序外部进行
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>id</span> <span style=color:#54b1c7>:=</span> <span style=color:#00b1f7>Get</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;id&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 13
</span></span></span></code></pre></td></tr></table></div></div><h3 id=使用标志flags>使用标志（Flags）</h3><p>​ Viper具有与标志（flags）绑定的功能。具体而言，Viper支持<a href=https://before80.github.io/go_docs/thirdPkg/Cobra/>Cobra</a>库中使用的<code>Pflags</code>。</p><p>​ 与<code>BindEnv</code>类似，当调用绑定方法时，并不会立即设置值，而是在访问时才设置。这意味着您可以在任何时候进行绑定，甚至在<code>init()</code>函数中进行绑定。</p><p>​ 对于单个标志，<code>BindPFlag()</code>方法提供了此功能。</p><p>示例：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>serverCmd</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Flags</span><span style=color:#abb2bf>().</span><span style=color:#00b1f7>Int</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;port&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#d19a66>1138</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;Port to run Application server on&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>BindPFlag</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;port&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>serverCmd</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Flags</span><span style=color:#abb2bf>().</span><span style=color:#00b1f7>Lookup</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;port&#34;</span><span style=color:#abb2bf>))</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 您还可以绑定一组现有的pflags（pflag.FlagSet）：</p><p>示例：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>pflag</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Int</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;flagname&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#d19a66>1234</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;help message for flagname&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>pflag</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Parse</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>BindPFlags</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>pflag</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>CommandLine</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>i</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>GetInt</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;flagname&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 从viper中检索值，而不是从pflag中
</span></span></span></code></pre></td></tr></table></div></div><p>​ 在Viper中使用<a href=https://github.com/spf13/pflag/>pflag</a>并不妨碍使用标准库中的<a href=https://golang.org/pkg/flag/>flag</a>包。pflag包可以通过导入这些标志来处理使用flag包定义的标志。为了实现这一点，pflag包提供了一个方便的函数<code>AddGoFlagSet()</code>。</p><p>示例：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>package</span> <span style=color:#aa89ea>main</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>import</span> <span style=color:#abb2bf>(</span>
</span></span><span style=display:flex><span>	<span style=color:#98c379>&#34;flag&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#98c379>&#34;github.com/spf13/pflag&#34;</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>main</span><span style=color:#abb2bf>()</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#8a93a5;font-style:italic>// 使用标准库中的 &#34;flag&#34; 包
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#aa89ea>flag</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Int</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;flagname&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#d19a66>1234</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;help message for flagname&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>pflag</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>CommandLine</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AddGoFlagSet</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>flag</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>CommandLine</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>pflag</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Parse</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>BindPFlags</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>pflag</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>CommandLine</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>i</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>GetInt</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;flagname&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 从viper中检索值
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>
</span></span><span style=display:flex><span>	<span style=color:#8a93a5;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=flag-接口>Flag 接口</h4><p>​ Viper提供了两个Go接口，用于绑定其他标志系统（如果您不使用<code>Pflags</code>）。</p><p>​ <code>FlagValue</code>表示一个单独的标志。以下是一个实现该接口的简单示例：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>myFlag</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>f</span> <span style=color:#aa89ea>myFlag</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>HasChanged</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>bool</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>return</span> <span style=color:#e5c07b>false</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>f</span> <span style=color:#aa89ea>myFlag</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Name</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>return</span> <span style=color:#98c379>&#34;my-flag-name&#34;</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>f</span> <span style=color:#aa89ea>myFlag</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>ValueString</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>return</span> <span style=color:#98c379>&#34;my-flag-value&#34;</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>f</span> <span style=color:#aa89ea>myFlag</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>ValueType</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>return</span> <span style=color:#98c379>&#34;string&#34;</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 一旦您的标志实现了该接口，您可以简单地告诉Viper绑定它：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>BindFlagValue</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;my-flag-name&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>myFlag</span><span style=color:#abb2bf>{})</span>
</span></span></code></pre></td></tr></table></div></div><p>​ <code>FlagValueSet</code>表示一组标志。以下是一个实现该接口的简单示例：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>myFlagSet</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>flags</span> <span style=color:#abb2bf>[]</span><span style=color:#aa89ea>myFlag</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>f</span> <span style=color:#aa89ea>myFlagSet</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>VisitAll</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fn</span> <span style=color:#76a9f9>func</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>FlagValue</span><span style=color:#abb2bf>))</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>for</span> <span style=color:#aa89ea>_</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>flag</span> <span style=color:#54b1c7>:=</span> <span style=color:#76a9f9>range</span> <span style=color:#aa89ea>flags</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#00b1f7>fn</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>flag</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 一旦您的标志集实现了该接口，您可以简单地告诉Viper绑定它：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>fSet</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>myFlagSet</span><span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>flags</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>[]</span><span style=color:#aa89ea>myFlag</span><span style=color:#abb2bf>{</span><span style=color:#aa89ea>myFlag</span><span style=color:#abb2bf>{},</span> <span style=color:#aa89ea>myFlag</span><span style=color:#abb2bf>{}},</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>BindFlagValues</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;my-flags&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>fSet</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=远程键值存储支持>远程键/值存储支持</h3><p>​ 要在Viper中启用远程支持，请使用 <code>viper/remote</code> 包进行空白导入：</p><pre tabindex=0><code>import _ &#34;github.com/spf13/viper/remote&#34;
</code></pre><p>​ Viper将从键/值存储（如etcd或Consul）中检索到的路径中读取配置字符串（as JSON、TOML、YAML、HCL或envfile格式）。这些值优先于默认值，但会被从磁盘、命令行标志或环境变量中检索到的配置值所覆盖。</p><p>​ Viper 使用 <a href=https://github.com/bketelsen/crypt>crypt</a> 从键/值存储中检索配置，这意味着您可以将配置值加密存储，并在具有正确的 gpg 密钥环时自动解密它们。加密是可选的。</p><p>​ 您可以将远程配置与本地配置一起使用，也可以独立使用。</p><p>​ <code>crypt</code>有一个命令行助手，可以用来将配置放入键/值存储中。<code>crypt</code>默认使用位于http://127.0.0.1:4001的etcd。</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ go get github.com/bketelsen/crypt/bin/crypt
</span></span><span style=display:flex><span>$ crypt <span style=color:#e5c07b>set</span> -plaintext /config/hugo.json /Users/hugo/settings/config.json
</span></span></code></pre></td></tr></table></div></div><p>​ 确认您的值是否已设置：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ crypt get -plaintext /config/hugo.json
</span></span></code></pre></td></tr></table></div></div><p>​ 有关如何设置加密值或使用Consul的示例，请参阅<a href=https://bketelsen.github.io/crypt/>crypt</a>文档。</p><h3 id=远程键值存储示例---未加密>远程键/值存储示例 - 未加密</h3><h4 id=etcd>etcd</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AddRemoteProvider</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;etcd&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;http://127.0.0.1:4001&#34;</span><span style=color:#abb2bf>,</span><span style=color:#98c379>&#34;/config/hugo.json&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;json&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 因为在字节流中没有文件扩展名，支持的扩展名有 &#34;json&#34;、&#34;toml&#34;、&#34;yaml&#34;、&#34;yml&#34;、&#34;properties&#34;、&#34;props&#34;、&#34;prop&#34;、&#34;env&#34;、&#34;dotenv&#34;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadRemoteConfig</span><span style=color:#abb2bf>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=etcd3>etcd3</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AddRemoteProvider</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;etcd3&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;http://127.0.0.1:4001&#34;</span><span style=color:#abb2bf>,</span><span style=color:#98c379>&#34;/config/hugo.json&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;json&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 因为在字节流中没有文件扩展名，支持的扩展名有 &#34;json&#34;、&#34;toml&#34;、&#34;yaml&#34;、&#34;yml&#34;、&#34;properties&#34;、&#34;props&#34;、&#34;prop&#34;、&#34;env&#34;、&#34;dotenv&#34;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadRemoteConfig</span><span style=color:#abb2bf>()</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=consul>Consul</h4><p>You need to set a key to Consul key/value storage with JSON value containing your desired config. For example, create a Consul key/value store key <code>MY_CONSUL_KEY</code> with value:</p><p>​ 您需要将一个包含所需配置的JSON值的键设置到Consul键/值存储中。例如，使用值创建Consul键/值存储键<code>MY_CONSUL_KEY</code>：</p><p>​ 您需要在Consul键值存储中设置一个键，其对应的JSON值包含所需的配置。例如，创建一个Consul键值存储键<code>MY_CONSUL_KEY</code>，其值为：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>&#34;port&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>8080</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>&#34;hostname&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;myhostname.com&#34;</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AddRemoteProvider</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;consul&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;localhost:8500&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;MY_CONSUL_KEY&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;json&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 需要显式设置为json
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadRemoteConfig</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Println</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Get</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;port&#34;</span><span style=color:#abb2bf>))</span> <span style=color:#8a93a5;font-style:italic>// 8080
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Println</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Get</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;hostname&#34;</span><span style=color:#abb2bf>))</span> <span style=color:#8a93a5;font-style:italic>// myhostname.com
</span></span></span></code></pre></td></tr></table></div></div><h4 id=firestore>Firestore</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AddRemoteProvider</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;firestore&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;google-cloud-project-id&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;collection/document&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;json&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 配置的格式: &#34;json&#34;、&#34;toml&#34;、&#34;yaml&#34;、&#34;yml&#34;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadRemoteConfig</span><span style=color:#abb2bf>()</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 当然，您也可以使用<code>SecureRemoteProvider</code>。</p><h3 id=远程键值存储示例---加密>远程键/值存储示例 - 加密</h3><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AddSecureRemoteProvider</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;etcd&#34;</span><span style=color:#abb2bf>,</span><span style=color:#98c379>&#34;http://127.0.0.1:4001&#34;</span><span style=color:#abb2bf>,</span><span style=color:#98c379>&#34;/config/hugo.json&#34;</span><span style=color:#abb2bf>,</span><span style=color:#98c379>&#34;/etc/secrets/mykeyring.gpg&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;json&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 因为在字节流中没有文件扩展名，支持的扩展名有 &#34;json&#34;、&#34;toml&#34;、&#34;yaml&#34;、&#34;yml&#34;、&#34;properties&#34;、&#34;props&#34;、&#34;prop&#34;、&#34;env&#34;、&#34;dotenv&#34;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadRemoteConfig</span><span style=color:#abb2bf>()</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=监听etcd中的更改---未加密>监听etcd中的更改 - 未加密</h3><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// 或者，您可以创建一个新的viper实例。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#76a9f9>var</span> <span style=color:#aa89ea>runtime_viper</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>New</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>runtime_viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AddRemoteProvider</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;etcd&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;http://127.0.0.1:4001&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;/config/hugo.yml&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>runtime_viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;yaml&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 因为在字节流中没有文件扩展名，支持的扩展名有 &#34;json&#34;、&#34;toml&#34;、&#34;yaml&#34;、&#34;yml&#34;、&#34;properties&#34;、&#34;props&#34;、&#34;prop&#34;、&#34;env&#34;、&#34;dotenv&#34;
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// 第一次从远程配置中读取。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>runtime_viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadRemoteConfig</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// 反序列化配置
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#aa89ea>runtime_viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Unmarshal</span><span style=color:#abb2bf>(</span><span style=color:#54b1c7>&amp;</span><span style=color:#aa89ea>runtime_conf</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// 打开一个goroutine无限期地监听远程更改
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#76a9f9>go</span> <span style=color:#76a9f9>func</span><span style=color:#abb2bf>(){</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>for</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>time</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sleep</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>time</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Second</span> <span style=color:#54b1c7>*</span> <span style=color:#d19a66>5</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 每个请求之后的延迟
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>
</span></span><span style=display:flex><span>		<span style=color:#8a93a5;font-style:italic>// 目前仅已测试etcd支持
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>		<span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>runtime_viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>WatchRemoteConfig</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>			<span style=color:#aa89ea>log</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Errorf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;unable to read remote config: %v&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>			<span style=color:#76a9f9>continue</span>
</span></span><span style=display:flex><span>		<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>         <span style=color:#8a93a5;font-style:italic>// 反序列化新配置到我们的运行时配置结构。您还可以使用通道实现一个信号，以通知系统发生了更改
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>		<span style=color:#aa89ea>runtime_viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Unmarshal</span><span style=color:#abb2bf>(</span><span style=color:#54b1c7>&amp;</span><span style=color:#aa89ea>runtime_conf</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}()</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=从viper获取值>从Viper获取值</h2><p>​ 在Viper中，根据值的类型，有几种获取值的方法和函数可用：</p><ul><li><code>Get(key string) : interface{}</code></li><li><code>GetBool(key string) : bool</code></li><li><code>GetFloat64(key string) : float64</code></li><li><code>GetInt(key string) : int</code></li><li><code>GetIntSlice(key string) : []int</code></li><li><code>GetString(key string) : string</code></li><li><code>GetStringMap(key string) : map[string]interface{}</code></li><li><code>GetStringMapString(key string) : map[string]string</code></li><li><code>GetStringSlice(key string) : []string</code></li><li><code>GetTime(key string) : time.Time</code></li><li><code>GetDuration(key string) : time.Duration</code></li><li><code>IsSet(key string) : bool</code></li><li><code>AllSettings() : map[string]interface{}</code></li></ul><p>​ 需要注意的一点是，如果找不到给定的键，每个Get函数都会返回一个零值。要检查给定键是否存在，可以使用<code>IsSet()</code>方法。</p><p>示例：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>GetString</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;logfile&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 不区分大小写的设置和获取
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#76a9f9>if</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>GetBool</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;verbose&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Println</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;verbose enabled&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=访问嵌套键>访问嵌套键</h3><p>​ accessor（访问器）方法还接受格式化路径来获取深层嵌套的键。例如，如果加载了以下 JSON 文件：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>&#34;host&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;address&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;localhost&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;port&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>5799</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>&#34;datastore&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;metric&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;host&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;127.0.0.1&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;port&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>3099</span>
</span></span><span style=display:flex><span>        <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;warehouse&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;host&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;198.0.0.1&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;port&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>2112</span>
</span></span><span style=display:flex><span>        <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Viper可以通过传递一个由<code>.</code>分隔的键路径来访问嵌套字段：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00b1f7>GetString</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;datastore.metric.host&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 返回 &#34;127.0.0.1&#34;
</span></span></span></code></pre></td></tr></table></div></div><p>​ 这遵循了上述建立的优先级规则；在剩余的配置注册表中，路径的搜索将会逐级进行，直到找到为止。</p><p>​ 例如，给定这个配置文件，<code>datastore.metric.host</code>和<code>datastore.metric.port</code>已经定义（并且可能被覆盖）。如果另外还在默认配置中定义了<code>datastore.metric.protocol</code>，Viper也会找到它。</p><p>​ 然而，如果<code>datastore.metric</code>被立即值（immediate value）（通过标志、环境变量、<code>Set()</code>方法等）覆盖，那么<code>datastore.metric</code>的所有子键都变为未定义，它们被高优先级的配置级别"遮蔽（shadowed）"。</p><p>​ Viper可以通过在路径中使用数字来访问数组索引。例如：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>&#34;host&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;address&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;localhost&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;ports&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>[</span>
</span></span><span style=display:flex><span>            <span style=color:#d19a66>5799</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>            <span style=color:#d19a66>6029</span>
</span></span><span style=display:flex><span>        <span style=color:#abb2bf>]</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>&#34;datastore&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;metric&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;host&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;127.0.0.1&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;port&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>3099</span>
</span></span><span style=display:flex><span>        <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;warehouse&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;host&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;198.0.0.1&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;port&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>2112</span>
</span></span><span style=display:flex><span>        <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00b1f7>GetInt</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;host.ports.1&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 返回 6029
</span></span></span></code></pre></td></tr></table></div></div><p>​ 最后，如果存在与分隔键路径匹配的键，则返回该键的值。例如：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>&#34;datastore.metric.host&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;0.0.0.0&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#8a93a5;font-style:italic>// &lt;----
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>    
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>&#34;host&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;address&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;localhost&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;port&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>5799</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>&#34;datastore&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;metric&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;host&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;127.0.0.1&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;port&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>3099</span>
</span></span><span style=display:flex><span>        <span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span>        <span style=color:#76a9f9>&#34;warehouse&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;host&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;198.0.0.1&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>            <span style=color:#76a9f9>&#34;port&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>2112</span>
</span></span><span style=display:flex><span>        <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>    <span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#00b1f7>GetString</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;datastore.metric.host&#34;</span><span style=color:#abb2bf>)</span> <span style=color:#8a93a5;font-style:italic>// 返回 &#34;0.0.0.0&#34;
</span></span></span></code></pre></td></tr></table></div></div><h3 id=提取子树sub-tree>提取子树（sub-tree）</h3><p>​ 在开发可重用模块时，将配置的子集提取出来并传递给一个模块通常很有用。这样，可以实例化多个模块，并为每个模块使用不同的配置。</p><p>​ 例如，一个应用程序可能针对不同的用途使用多个不同的缓存存储：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#76a9f9>cache</span><span style=color:#abb2bf>:</span>
</span></span><span style=display:flex><span>  <span style=color:#76a9f9>cache1</span><span style=color:#abb2bf>:</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>max-items</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>100</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>item-size</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>64</span>
</span></span><span style=display:flex><span>  <span style=color:#76a9f9>cache2</span><span style=color:#abb2bf>:</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>max-items</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>200</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>item-size</span><span style=color:#abb2bf>:</span> <span style=color:#d19a66>80</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 我们可以将缓存名称传递给一个模块（例如<code>NewCache("cache1")</code>），但这将需要奇怪的拼接来访问配置键，并且与全局配置的分离性较差。</p><p>​ 因此，我们不这样做，而是将表示配置子集的Viper实例传递给构造函数：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>cache1Config</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sub</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;cache.cache1&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>if</span> <span style=color:#aa89ea>cache1Config</span> <span style=color:#54b1c7>==</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span> <span style=color:#8a93a5;font-style:italic>// 如果找不到键，则 Sub 方法将返回 nil。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#e5c07b>panic</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;cache configuration not found&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>cache1</span> <span style=color:#54b1c7>:=</span> <span style=color:#00b1f7>NewCache</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>cache1Config</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><blockquote><p>**注意：**始终检查<code>Sub</code>的返回值。如果找不到键，它将返回<code>nil</code>。</p></blockquote><p>​ 在内部，<code>NewCache</code>函数可以直接访问<code>max-items</code>和<code>item-size</code>键。</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>NewCache</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Cache</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#54b1c7>&amp;</span><span style=color:#aa89ea>Cache</span><span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>MaxItems</span><span style=color:#abb2bf>:</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>GetInt</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;max-items&#34;</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>ItemSize</span><span style=color:#abb2bf>:</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>GetInt</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;item-size&#34;</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 由于与主配置结构解耦，生成的代码易于测试，并且（由于同样的原因）更易于重用。</p><h3 id=反序列化>反序列化</h3><p>​ 您还可以选择将全部或特定值反序列化为结构体、映射等。</p><p>​ 有两种方法可以实现这一点：</p><ul><li><code>Unmarshal(rawVal interface{}) : error</code></li><li><code>UnmarshalKey(key string, rawVal interface{}) : error</code></li></ul><p>示例：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>config</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>Port</span> <span style=color:#e5c07b>int</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>Name</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>PathMap</span> <span style=color:#e5c07b>string</span> <span style=color:#98c379>`mapstructure:&#34;path_map&#34;`</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>var</span> <span style=color:#aa89ea>C</span> <span style=color:#aa89ea>config</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Unmarshal</span><span style=color:#abb2bf>(</span><span style=color:#54b1c7>&amp;</span><span style=color:#aa89ea>C</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>t</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Fatalf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;unable to decode into struct, %v&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 如果要对包含点符号（默认键分隔符）的键进行配置反序列化，您需要更改分隔符：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>NewWithOptions</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>KeyDelimiter</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;::&#34;</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetDefault</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;chart::values&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}{</span>
</span></span><span style=display:flex><span>	<span style=color:#98c379>&#34;ingress&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}{</span>
</span></span><span style=display:flex><span>		<span style=color:#98c379>&#34;annotations&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}{</span>
</span></span><span style=display:flex><span>			<span style=color:#98c379>&#34;traefik.frontend.rule.type&#34;</span><span style=color:#abb2bf>:</span>                 <span style=color:#98c379>&#34;PathPrefix&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>			<span style=color:#98c379>&#34;traefik.ingress.kubernetes.io/ssl-redirect&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#98c379>&#34;true&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>		<span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>},</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>config</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>Chart</span> <span style=color:#76a9f9>struct</span><span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>Values</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>var</span> <span style=color:#aa89ea>C</span> <span style=color:#aa89ea>config</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Unmarshal</span><span style=color:#abb2bf>(</span><span style=color:#54b1c7>&amp;</span><span style=color:#aa89ea>C</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Viper还支持将值反序列化到嵌套结构体中：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>/*
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>示例配置：
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>module:
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>    enabled: true
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>    token: 89h3f98hbwf987h3f98wenf89ehf
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>*/</span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>config</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>Module</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>Enabled</span> <span style=color:#e5c07b>bool</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>moduleConfig</span> <span style=color:#98c379>`mapstructure:&#34;,squash&#34;`</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// moduleConfig 可以在特定于模块的包中
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>moduleConfig</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>Token</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>var</span> <span style=color:#aa89ea>C</span> <span style=color:#aa89ea>config</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Unmarshal</span><span style=color:#abb2bf>(</span><span style=color:#54b1c7>&amp;</span><span style=color:#aa89ea>C</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>t</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Fatalf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;unable to decode into struct, %v&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Viper在内部使用<a href=https://github.com/mitchellh/mapstructure>github.com/mitchellh/mapstructure</a>进行值的反序列化，它默认使用<code>mapstructure</code>标签。</p><h3 id=解码自定义格式>解码自定义格式</h3><p>​ Viper经常被要求添加更多的值格式和解码器。例如，将以字符（点号、逗号、分号等）分隔的字符串解析为切片。</p><p>​ 在Viper中，可以使用<code>mapstructure</code>解码钩子来实现这一点。</p><p>​ 详细信息请参阅<a href=https://sagikazarmark.hu/blog/decoding-custom-formats-with-viper/>此博客文章</a>。</p><h3 id=序列化为字符串>序列化为字符串</h3><p>​ 您可能需要将Viper中保存的所有设置序列化为字符串，而不是将它们写入文件。您可以使用您喜欢的格式的编组器（marshaller）带上<code>AllSettings()</code>返回的配置。</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>import</span> <span style=color:#abb2bf>(</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>yaml</span> <span style=color:#98c379>&#34;gopkg.in/yaml.v2&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#8a93a5;font-style:italic>// ...
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>yamlStringSettings</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>c</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AllSettings</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>bs</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>yaml</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Marshal</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>c</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>log</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Fatalf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;unable to marshal config to YAML: %v&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>bs</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=viper还是vipers>Viper还是Vipers？</h2><p>​ Viper可以直接使用，无需任何配置或初始化即可开始使用。由于大多数应用程序希望使用单个中央存储库来管理其配置，因此viper包提供了这样的功能。它类似于单例模式（singleton）。</p><p>​ 在上面的所有示例中，它们演示了如何以单例模式的方式使用viper。</p><h4 id=使用多个viper>使用多个viper</h4><p>​ 您还可以创建多个不同的viper实例，以供应用程序使用。每个viper实例都有自己独特的配置和数值集合。每个实例可以从不同的配置文件、键值存储等读取配置。viper包支持的所有函数也作为viper实例的方法进行了镜像。</p><p>示例：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>x</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>New</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>y</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>New</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>x</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetDefault</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;ContentDir&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;content&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>y</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetDefault</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;ContentDir&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;foobar&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>//...
</span></span></span></code></pre></td></tr></table></div></div><p>​ 在使用多个viper实例时，用户需要自行跟踪管理这些不同的viper实例。</p><h2 id=q--a>Q & A</h2><h3 id=为什么它被称为viper>为什么它被称为"Viper"？</h3><p>A: Viper被设计为<a href=https://before80.github.io/go_docs/thirdPkg/Cobra/>Cobra</a>的<a href=http://en.wikipedia.org/wiki/Viper_(G.I._Joe)>companion（伴侣）</a>。虽然它们可以完全独立运作，但是它们一起组合起来可以强大地满足你的应用程序基础需求。</p><h3 id=为什么它被称为cobra>为什么它被称为"Cobra"？</h3><p>​ 还有比一个<a href=http://en.wikipedia.org/wiki/Cobra_Commander>commander</a>更好的名字吗？</p><h3 id=viper支持区分大小写的键吗>Viper支持区分大小写的键吗？</h3><p><strong>tl;dr:</strong> No.</p><p><strong>简短回答：</strong> 不支持。</p><p>​ Viper从多个源中合并配置，其中许多源要么不区分大小写，要么使用与其他源（例如环境变量）不同的大小写。为了在使用多个源时提供最佳体验，决定将所有键都设置为不区分大小写。</p><p>​ 已经有几次尝试实现区分大小写的功能，但不幸的是，它并不那么简单。我们可能会在<a href=https://github.com/spf13/viper/issues/772>Viper v2</a>中尝试实现它，但尽管最初有些声音，但似乎并没有那么多人提出这个要求。</p><p>​ 您可以通过填写这个反馈表格来表达对区分大小写功能的需求：<a href=https://forms.gle/R6faU74qPRPAzchZ9>https://forms.gle/R6faU74qPRPAzchZ9</a></p><h3 id=并发读写viper是否安全>并发读写Viper是否安全？</h3><p>​ 不安全，您需要自己同步对Viper的访问（例如使用<code>sync</code>包）。并发的读写操作可能会导致恐慌（panic）。</p><h2 id=故障排除>故障排除</h2><p>​ 请参阅 <a href=https://github.com/spf13/viper/blob/v1.16.0/TROUBLESHOOTING.md>TROUBLESHOOTING.md</a>。</p><h2 id=文档>文档</h2><p><a href=https://go.dev/about#build-context>Rendered for</a> linux/amd64</p><h3 id=常量>常量</h3><p>This section is empty.</p><h3 id=变量>变量</h3><p><a href=https://github.com/spf13/viper/blob/v1.16.0/viper.go#L80>View Source</a></p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>var</span> <span style=color:#aa89ea>RemoteConfig</span> <span style=color:#aa89ea>remoteConfigFactory</span>
</span></span></code></pre></td></tr></table></div></div><p>​ RemoteConfig变量是可选的，参见remote包</p><p><a href=https://github.com/spf13/viper/blob/v1.16.0/viper.go#L420>View Source</a></p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>var</span> <span style=color:#aa89ea>SupportedExts</span> <span style=color:#abb2bf>=</span> <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>{</span><span style=color:#98c379>&#34;json&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;toml&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;yaml&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;yml&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;properties&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;props&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;prop&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;hcl&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;tfvars&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;dotenv&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;env&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;ini&#34;</span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ SupportedExts变量是通用支持的文件扩展名。</p><p><a href=https://github.com/spf13/viper/blob/v1.16.0/viper.go#L423>View Source</a></p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>var</span> <span style=color:#aa89ea>SupportedRemoteProviders</span> <span style=color:#abb2bf>=</span> <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>{</span><span style=color:#98c379>&#34;etcd&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;etcd3&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;consul&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;firestore&#34;</span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ SupportedRemoteProviders变量是通用支持的远程提供者（remote providers）。</p><h3 id=函数>函数</h3><h4 id=func-addconfigpath>func AddConfigPath</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>AddConfigPath</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><p>​ AddConfigPath函数添加要在其中搜索配置文件的路径。可以多次调用以定义多个搜索路径。</p><h4 id=func-addremoteprovider>func AddRemoteProvider</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>AddRemoteProvider</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>provider</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>endpoint</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>path</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>​ AddRemoteProvider函数添加远程配置源。远程提供者按添加顺序进行搜索。</p><ul><li><p>provider是一个字符串值：&ldquo;etcd&rdquo;、&ldquo;etcd3&rdquo;、&ldquo;consul"或"firestore"目前受支持。</p></li><li><p>endpoint是URL。etcd需要<code>http://ip:port</code> 。consul需要<code>ip:port</code> 。</p></li><li><p>path是在k/v存储中检索配置的路径。</p></li></ul><p>​ 要从<code>/configs/myapp.json</code>检索名为<code>myapp.json</code>的配置文件，应将<code>path</code>设置为<code>/configs</code>，并设置配置名（<code>SetConfigName()</code>）为&rdquo;<code>myapp</code>"。</p><h4 id=func-addsecureremoteprovider>func AddSecureRemoteProvider</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>AddSecureRemoteProvider</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>provider</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>endpoint</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>path</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>secretkeyring</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>​ AddSecureRemoteProvider函数添加远程安全配置源（remote configuration source.）。安全远程提供者（Secure Remote Providers）按添加顺序进行搜索。</p><ul><li><p>provider是一个字符串值：&ldquo;etcd&rdquo;、&ldquo;etcd3&rdquo;、&ldquo;consul"或"firestore"目前受支持。</p></li><li><p>endpoint是URL。etcd需要<code>http://ip:port</code>， consul需要<code>ip:port</code></p></li><li><p>secretkeyring是您的openpgp密钥环的文件路径。例如，<code>/etc/secrets/myring.gpg</code></p></li><li><p>path是在k/v存储中检索配置的路径。</p></li></ul><p>​ 要从<code>/configs/myapp.json</code>检索名为<code>myapp.json</code>的配置文件，应将路径设置为<code>/configs</code>，并设置配置名（<code>SetConfigName()</code>）为&rdquo;<code>myapp</code>"。Secure Remote Providers 是使用<code>github.com/bketelsen/crypt</code>实现的。</p><h4 id=func-allkeys>func AllKeys</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>AllKeys</span><span style=color:#abb2bf>()</span> <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>​ AllKeys函数返回所有具有值的键，无论它们在何处设置。嵌套的键使用<code>v.keyDelim</code>分隔符返回。</p><h4 id=func-allsettings>func AllSettings</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>AllSettings</span><span style=color:#abb2bf>()</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ AllSettings函数合并所有设置并将它们作为一个<code>map[string]interface{}</code>返回。</p><h4 id=func-allowemptyenv---130>func AllowEmptyEnv &lt;- 1.3.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>AllowEmptyEnv</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>allowEmptyEnv</span> <span style=color:#e5c07b>bool</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><p>AllowEmptyEnv tells Viper to consider set, but empty environment variables as valid values instead of falling back. For backward compatibility reasons this is false by default.</p><p>​ AllowEmptyEnv函数告诉Viper将设置但为空的环境变量视为有效值，而不是返回默认值。出于向后兼容性的原因，默认值为false。（falling back 该怎么翻译？？）</p><h4 id=func-automaticenv>func AutomaticEnv</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>AutomaticEnv</span><span style=color:#abb2bf>()</span>
</span></span></code></pre></td></tr></table></div></div><p>AutomaticEnv makes Viper check if environment variables match any of the existing keys (config, default or flags). If matching env vars are found, they are loaded into Viper.</p><p>​ AutomaticEnv函数使Viper检查环境变量是否与任何现有键（配置、默认或标志）匹配。如果找到匹配的环境变量，则将它们加载到Viper中。</p><h4 id=func-bindenv>func BindEnv</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>BindEnv</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>input</span> <span style=color:#54b1c7>...</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>BindEnv binds a Viper key to a ENV variable. ENV variables are case sensitive. If only a key is provided, it will use the env key matching the key, uppercased. If more arguments are provided, they will represent the env variable names that should bind to this key and will be taken in the specified order. EnvPrefix will be used when set when env name is not provided.</p><p>​ BindEnv函数将 Viper 键绑定到环境变量。环境变量对大小写敏感。如果只提供键名，则它将使用与键名匹配且大写的环境变量键。如果提供更多参数，它们将表示应绑定到该键的环境变量名称，并按指定顺序进行处理。如果设置了 EnvPrefix，当未提供环境变量名称时将使用该前缀。</p><h4 id=func-bindflagvalue>func BindFlagValue</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>BindFlagValue</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>flag</span> <span style=color:#aa89ea>FlagValue</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>​ BindFlagValue函数将特定的key 绑定到FlagValue。</p><h4 id=func-bindflagvalues>func BindFlagValues</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>BindFlagValues</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>flags</span> <span style=color:#aa89ea>FlagValueSet</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>BindFlagValues binds a full FlagValue set to the configuration, using each flag&rsquo;s long name as the config key.</p><p>​ BindFlagValues函数将完整的FlagValue集合绑定到配置，使用每个标志的长名称作为配置键。</p><h4 id=func-bindpflag>func BindPFlag</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>BindPFlag</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>flag</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>pflag</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Flag</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>BindPFlag binds a specific key to a pflag (as used by cobra). Example (where serverCmd is a Cobra instance):</p><p>​ BindPFlag函数将特定的键绑定到pflag（由cobra使用）。示例（其中<code>serverCmd</code>是Cobra实例）：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#aa89ea>serverCmd</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Flags</span><span style=color:#abb2bf>().</span><span style=color:#00b1f7>Int</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;port&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#d19a66>1138</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;Port to run Application server on&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>BindPFlag</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;port&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>serverCmd</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Flags</span><span style=color:#abb2bf>().</span><span style=color:#00b1f7>Lookup</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;port&#34;</span><span style=color:#abb2bf>))</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=func-bindpflags>func BindPFlags</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>BindPFlags</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>flags</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>pflag</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>FlagSet</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>BindPFlags binds a full flag set to the configuration, using each flag&rsquo;s long name as the config key.</p><p>​ BindPFlags函数将完整的标志集合绑定到配置，使用每个标志的长名称作为配置键。</p><h4 id=func-configfileused>func ConfigFileUsed</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>ConfigFileUsed</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>ConfigFileUsed returns the file used to populate the config registry.</p><p>​ ConfigFileUsed函数返回用于填充配置注册表的文件。</p><h4 id=func-debug>func Debug</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>Debug</span><span style=color:#abb2bf>()</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Debug函数打印所有配置注册表以进行调试目的。</p><h4 id=func-debugto---1130>func DebugTo &lt;- 1.13.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>DebugTo</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>w</span> <span style=color:#aa89ea>io</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Writer</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=func-get>func Get</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>Get</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Get函数可以通过使用键来检索任何值。对于键，Get不区分大小写。Get的行为是返回与它设置的第一个位置关联的值。Viper将按照以下顺序进行检查：覆盖（override）、标志（flag）、环境变量（env）、配置文件（config ）、键/值存储（key/value store）、默认值（default）。</p><p>​ Get函数返回一个interface{}类型的值。要获取特定的值，请使用<code>Get____</code>方法之一。</p><h4 id=func-getbool>func GetBool</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetBool</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>bool</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetBool 函数将与键关联的值转换为<code>bool</code>后返回。</p><h4 id=func-getduration>func GetDuration</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetDuration</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#aa89ea>time</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Duration</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetDuration函数将与键关联的值转换为time.Duration后返回。</p><h4 id=func-getfloat64>func GetFloat64</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetFloat64</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>float64</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetFloat64函数将与键关联的值转换为float64后返回。</p><h4 id=func-getint>func GetInt</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetInt</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>int</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetInt函数将与键关联的值转换为int后返回。</p><h4 id=func-getint32---110>func GetInt32 &lt;- 1.1.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetInt32</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>int32</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetInt32函数将与键关联的值转换为int32后返回。</p><h4 id=func-getint64>func GetInt64</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetInt64</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>int64</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetInt64函数将与键关联的值转换为int64后返回。</p><h4 id=func-getintslice---150>func GetIntSlice &lt;- 1.5.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetIntSlice</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>int</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetIntSlice函数将与键关联的值转换为<code>[]int</code>后返回。</p><h4 id=func-getsizeinbytes>func GetSizeInBytes</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetSizeInBytes</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>uint</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetSizeInBytes函数将与键关联的值转换为<code>uint</code>后返回。</p><h4 id=func-getstring>func GetString</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetString</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetString函数将与键关联的值转换为<code>string</code>后返回。</p><h4 id=func-getstringmap>func GetStringMap</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetStringMap</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetStringMap函数将与键关联的值转换为<code>map[string]interface{}</code>后返回。</p><h4 id=func-getstringmapstring>func GetStringMapString</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetStringMapString</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetStringMapString函数将与键关联的值转换为<code>map[string]string</code>后返回。</p><h4 id=func-getstringmapstringslice>func GetStringMapStringSlice</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetStringMapStringSlice</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>][]</span><span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetStringMapStringSlice函数将与键关联的值转换为<code>map[string][]string</code>后返回。</p><h4 id=func-getstringslice>func GetStringSlice</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetStringSlice</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetStringSlice函数将与键关联的值转换为<code>[]string</code>后返回。</p><h4 id=func-gettime>func GetTime</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetTime</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#aa89ea>time</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Time</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetTime函数将与键关联的值转换为<code>time.Time</code>后返回。</p><h4 id=func-getuint---140>func GetUint &lt;- 1.4.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetUint</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>uint</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetUint函数将与键关联的值转换为<code>uint</code>后返回。</p><h4 id=func-getuint16---1130>func GetUint16 &lt;- 1.13.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetUint16</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>uint16</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetUint16函数将与键关联的值转换为<code>uint16</code>后返回。</p><h4 id=func-getuint32---140>func GetUint32 &lt;- 1.4.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetUint32</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>uint32</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetUint32函数将与键关联的值转换为<code>uint32</code>后返回。</p><h4 id=func-getuint64---140>func GetUint64 &lt;- 1.4.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetUint64</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>uint64</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetUint64函数将与键关联的值转换为<code>uint64</code>后返回。</p><h4 id=func-inconfig>func InConfig</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>InConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>bool</span>
</span></span></code></pre></td></tr></table></div></div><p>​ InConfig函数检查给定的键（或别名）是否在配置文件中。</p><h4 id=func-isset>func IsSet</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>IsSet</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>bool</span>
</span></span></code></pre></td></tr></table></div></div><p>​ IsSet 检查键是否在任何数据位置被设置。对于键而言，IsSet函数不区分大小写。</p><h4 id=func-mergeconfig>func MergeConfig</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>MergeConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#aa89ea>io</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Reader</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>​ MergeConfig函数将新配置与现有配置合并。</p><h4 id=func-mergeconfigmap---130>func MergeConfigMap &lt;- 1.3.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>MergeConfigMap</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>cfg</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>​ MergeConfigMap函数将给定的映射中的配置与现有配置合并。<strong>请注意，给定的映射可能会被修改。</strong></p><h4 id=func-mergeinconfig>func MergeInConfig</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>MergeInConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>​ MergeInConfig 函数将新的配置与现有配置合并。</p><h4 id=func-mustbindenv---1120>func MustBindEnv &lt;- 1.12.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>MustBindEnv</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>input</span> <span style=color:#54b1c7>...</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>MustBindEnv</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>input</span><span style=color:#54b1c7>...</span><span style=color:#abb2bf>)</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>var</span> <span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>init</span><span style=color:#abb2bf>()</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>v</span> <span style=color:#abb2bf>=</span> <span style=color:#00b1f7>New</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>MustBindEnv</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>input</span> <span style=color:#54b1c7>...</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>BindEnv</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>input</span><span style=color:#54b1c7>...</span><span style=color:#abb2bf>);</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#e5c07b>panic</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sprintf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;error while binding environment variable: %v&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ MustBindEnv 函数将 BindEnv 方法包装在 panic 中（如上函数的定义所示）。如果绑定环境变量时出现错误，MustBindEnv函数将引发 panic。</p><h4 id=func-onconfigchange>func OnConfigChange</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>OnConfigChange</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>run</span> <span style=color:#76a9f9>func</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#aa89ea>fsnotify</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Event</span><span style=color:#abb2bf>))</span>
</span></span></code></pre></td></tr></table></div></div><p>​ OnConfigChange 函数设置（在配置文件发生更改时调用的）事件处理程序。</p><h4 id=func-readconfig>func ReadConfig</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>ReadConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#aa89ea>io</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Reader</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>​ ReadConfig 函数会读取一个配置文件，并将不存在于该文件中的键设置为 nil。</p><h4 id=func-readinconfig>func ReadInConfig</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">31
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>ReadInConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>return</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadInConfig</span><span style=color:#abb2bf>()</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>ReadInConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>logger</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Info</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;attempting to read in config file&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>filename</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>getConfigFile</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>err</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#abb2bf>!</span><span style=color:#00b1f7>stringInSlice</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>getConfigType</span><span style=color:#abb2bf>(),</span> <span style=color:#aa89ea>SupportedExts</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>return</span> <span style=color:#00b1f7>UnsupportedConfigError</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>getConfigType</span><span style=color:#abb2bf>())</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>logger</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Debug</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;reading file&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;file&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>filename</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>file</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>afero</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadFile</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>fs</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>filename</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>err</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>config</span> <span style=color:#54b1c7>:=</span> <span style=color:#e5c07b>make</span><span style=color:#abb2bf>(</span><span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>err</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>unmarshalReader</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>bytes</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>NewReader</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>file</span><span style=color:#abb2bf>),</span> <span style=color:#aa89ea>config</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>err</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>config</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>config</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#e5c07b>nil</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>ReadInConfig will discover and load the configuration file from disk and key/value stores, searching in one of the defined paths.</p><p>​ ReadInConfig 函数会从磁盘和键值存储中查找和加载（在已定义的路径中搜索）配置文件。</p><h4 id=func-readremoteconfig>func ReadRemoteConfig</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>ReadRemoteConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>ReadRemoteConfig attempts to get configuration from a remote source and read it in the remote configuration registry.</p><p>​ ReadRemoteConfig 函数试图从远程源获取配置并在远程配置注册表中读取。</p><h4 id=func-registeralias>func RegisterAlias</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>RegisterAlias</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>alias</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><p>​ RegisterAlias 函数创建一个别名，为同一个键提供另一个访问器。这允许更改名称而不会破坏应用程序。</p><h4 id=func-reset>func Reset</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>Reset</span><span style=color:#abb2bf>()</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Reset 函数用于测试，将所有设置重置为默认设置。它在 viper 包的公共接口中，因此应用程序也可以在测试中使用它。</p><h4 id=func-safewriteconfig---101>func SafeWriteConfig &lt;- 1.0.1</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>SafeWriteConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>​ SafeWriteConfig 函数仅在文件不存在时将当前配置写入文件。</p><h4 id=func-safewriteconfigas---101>func SafeWriteConfigAs &lt;- 1.0.1</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>SafeWriteConfigAs</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><p>​ SafeWriteConfigAs 函数将当前配置写入给定的文件名（如果该文件不存在）。</p><h4 id=func-set>func Set</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>Set</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>value</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Set 函数在覆盖注册表中设置键的值。Set函数对于键不区分大小写。将用于替代通过标志、配置文件、环境变量、默认值或键值存储获取的值。</p><p>​ Set 函数在<strong>覆盖注册（override register）<strong>中</strong>设置</strong>键的值。对于键，Set 函数不区分大小写。它将替代通过标志、配置文件、环境变量、默认值或键值存储获取的值。</p><h4 id=func-setconfigfile>func SetConfigFile</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>SetConfigFile</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigFile</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span><span style=color:#abb2bf>)</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetConfigFile</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>in</span> <span style=color:#54b1c7>!=</span> <span style=color:#98c379>&#34;&#34;</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>configFile</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>in</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>SetConfigFile explicitly defines the path, name and extension of the config file. Viper will use this and not check any of the config paths.</p><p>​ SetConfigFile 函数显式定义配置文件的路径、名称和扩展名。Viper 将使用此配置，并且不会检查任何配置路径。</p><h4 id=func-setconfigname>func SetConfigName</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>SetConfigName</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigName</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span><span style=color:#abb2bf>)</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetConfigName</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>in</span> <span style=color:#54b1c7>!=</span> <span style=color:#98c379>&#34;&#34;</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>configName</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>in</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>configFile</span> <span style=color:#abb2bf>=</span> <span style=color:#98c379>&#34;&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ SetConfigName 函数设置配置文件的名称。不包括扩展名。</p><h4 id=func-setconfigpermissions---140>func SetConfigPermissions &lt;- 1.4.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>SetConfigPermissions</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>perm</span> <span style=color:#aa89ea>os</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>FileMode</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigPermissions</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>perm</span><span style=color:#abb2bf>)</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetConfigPermissions</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>perm</span> <span style=color:#aa89ea>os</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>FileMode</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>configPermissions</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>perm</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Perm</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ SetConfigPermissions 函数设置配置文件的权限。</p><h4 id=func-setconfigtype>func SetConfigType</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span><span style=color:#abb2bf>)</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>in</span> <span style=color:#54b1c7>!=</span> <span style=color:#98c379>&#34;&#34;</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>configType</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>in</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ SetConfigType 函数设置从远程源返回的配置的类型，例如 &ldquo;<code>json</code>"。</p><h4 id=func-setdefault>func SetDefault</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>SetDefault</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>value</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetDefault</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>value</span><span style=color:#abb2bf>)</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetDefault</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>value</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// 如果传入了别名，则设置适当的默认值。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#aa89ea>key</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>realKey</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>strings</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ToLower</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>value</span> <span style=color:#abb2bf>=</span> <span style=color:#00b1f7>toCaseInsensitiveValue</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>value</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>path</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>strings</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Split</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>keyDelim</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>lastKey</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>strings</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ToLower</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>path</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>len</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>path</span><span style=color:#abb2bf>)</span><span style=color:#54b1c7>-</span><span style=color:#d19a66>1</span><span style=color:#abb2bf>])</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>deepestMap</span> <span style=color:#54b1c7>:=</span> <span style=color:#00b1f7>deepSearch</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>defaults</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>path</span><span style=color:#abb2bf>[</span><span style=color:#d19a66>0</span><span style=color:#abb2bf>:</span><span style=color:#e5c07b>len</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>path</span><span style=color:#abb2bf>)</span><span style=color:#54b1c7>-</span><span style=color:#d19a66>1</span><span style=color:#abb2bf>])</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// 设置最内层的值
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#aa89ea>deepestMap</span><span style=color:#abb2bf>[</span><span style=color:#aa89ea>lastKey</span><span style=color:#abb2bf>]</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>value</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ SetDefault函数为此键设置默认值。对于键来说，SetDefault函数是不区分大小写的。仅当用户未通过标志（flag）、配置（config）或环境变量（ENV）提供值时才使用默认值。</p><h4 id=func-setenvkeyreplacer>func SetEnvKeyReplacer</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>SetEnvKeyReplacer</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>r</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>strings</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Replacer</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetEnvKeyReplacer</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>r</span><span style=color:#abb2bf>)</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetEnvKeyReplacer</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>r</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>strings</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Replacer</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>envKeyReplacer</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>r</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ SetEnvKeyReplacer函数在viper对象上设置strings.Replacer。这对于将环境变量映射到与其不匹配的键非常有用。</p><h4 id=func-setenvprefix>func SetEnvPrefix</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>SetEnvPrefix</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetEnvPrefix</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span><span style=color:#abb2bf>)</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetEnvPrefix</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>in</span> <span style=color:#54b1c7>!=</span> <span style=color:#98c379>&#34;&#34;</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>envPrefix</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>in</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ SetEnvPrefix 函数定义环境变量将使用的前缀。例如，如果前缀为 &ldquo;spf&rdquo;，则环境变量注册表将查找以 &ldquo;SPF_&rdquo; 开头的环境变量。</p><h4 id=func-setfs>func SetFs</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>SetFs</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fs</span> <span style=color:#aa89ea>afero</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Fs</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetFs</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fs</span><span style=color:#abb2bf>)</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetFs</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fs</span> <span style=color:#aa89ea>afero</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Fs</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>fs</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>fs</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ SetFs函数设置要用于读取配置的文件系统。</p><h4 id=func-settypebydefaultvalue>func SetTypeByDefaultValue</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>SetTypeByDefaultValue</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>enable</span> <span style=color:#e5c07b>bool</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>SetTypeByDefaultValue</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>enable</span><span style=color:#abb2bf>)</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetTypeByDefaultValue</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>enable</span> <span style=color:#e5c07b>bool</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>typeByDefValue</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>enable</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>SetTypeByDefaultValue enables or disables the inference of a key value&rsquo;s type when the Get function is used based upon a key&rsquo;s default value as opposed to the value returned based on the normal fetch logic.</p><p>​ SetTypeByDefaultValue 函数用于在使用 Get 函数时基于键的默认值来推断键值类型，而不是基于常规获取逻辑返回的值。该函数可以启用或禁用此行为。</p><p>​ 例如，如果一个键的默认值为 <code>[]string{}</code>，并且通过环境变量将相同的键设置为 <code>"a b c"</code>，当使用 Get 函数调用该键时，如果键的类型是通过默认值推断的，则会返回一个字符串切片。因此，Get 函数将返回：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#abb2bf>[]</span><span style=color:#e5c07b>string</span> <span style=color:#abb2bf>{</span><span style=color:#98c379>&#34;a&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;b&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#98c379>&#34;c&#34;</span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 否则，Get 函数将返回：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#98c379>&#34;a b c&#34;</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=func-unmarshal>func Unmarshal</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>Unmarshal</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rawVal</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{},</span> <span style=color:#aa89ea>opts</span> <span style=color:#54b1c7>...</span><span style=color:#aa89ea>DecoderConfigOption</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Unmarshal</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rawVal</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>opts</span><span style=color:#54b1c7>...</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Unmarshal</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rawVal</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{},</span> <span style=color:#aa89ea>opts</span> <span style=color:#54b1c7>...</span><span style=color:#aa89ea>DecoderConfigOption</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#00b1f7>decode</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AllSettings</span><span style=color:#abb2bf>(),</span> <span style=color:#00b1f7>defaultDecoderConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rawVal</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>opts</span><span style=color:#54b1c7>...</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Unmarshal 函数将配置反序列化为一个结构体。请确保该结构体字段上的标签设置正确。</p><h4 id=func-unmarshalexact---160>func UnmarshalExact &lt;- 1.6.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>UnmarshalExact</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rawVal</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{},</span> <span style=color:#aa89ea>opts</span> <span style=color:#54b1c7>...</span><span style=color:#aa89ea>DecoderConfigOption</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>UnmarshalExact</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rawVal</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>opts</span><span style=color:#54b1c7>...</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>UnmarshalExact</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rawVal</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{},</span> <span style=color:#aa89ea>opts</span> <span style=color:#54b1c7>...</span><span style=color:#aa89ea>DecoderConfigOption</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>config</span> <span style=color:#54b1c7>:=</span> <span style=color:#00b1f7>defaultDecoderConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rawVal</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>opts</span><span style=color:#54b1c7>...</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>config</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>ErrorUnused</span> <span style=color:#abb2bf>=</span> <span style=color:#e5c07b>true</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#00b1f7>decode</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>AllSettings</span><span style=color:#abb2bf>(),</span> <span style=color:#aa89ea>config</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>UnmarshalExact unmarshals the config into a Struct, erroring if a field is nonexistent in the destination struct.</p><p>​ UnmarshalExact 函数将配置反序列化为一个结构体，如果字段不存在于目标结构体中，则会产生错误。</p><h4 id=func-unmarshalkey>func UnmarshalKey</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>UnmarshalKey</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>rawVal</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{},</span> <span style=color:#aa89ea>opts</span> <span style=color:#54b1c7>...</span><span style=color:#aa89ea>DecoderConfigOption</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>UnmarshalKey</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>rawVal</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>opts</span><span style=color:#54b1c7>...</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>UnmarshalKey</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>rawVal</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{},</span> <span style=color:#aa89ea>opts</span> <span style=color:#54b1c7>...</span><span style=color:#aa89ea>DecoderConfigOption</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#00b1f7>decode</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Get</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span><span style=color:#abb2bf>),</span> <span style=color:#00b1f7>defaultDecoderConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rawVal</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>opts</span><span style=color:#54b1c7>...</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>UnmarshalKey takes a single key and unmarshals it into a Struct.</p><p>​ UnmarshalKey 函数接受一个键，并将其反序列化为一个结构体。</p><h4 id=func-watchconfig>func WatchConfig</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">45
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">46
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">47
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">48
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">49
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">50
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">51
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">52
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">53
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">54
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">55
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">56
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">57
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">58
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">59
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">60
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">61
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">62
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">63
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">64
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">65
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">66
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">67
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">68
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">69
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">70
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">71
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">72
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">73
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">74
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">75
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>WatchConfig</span><span style=color:#abb2bf>()</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>WatchConfig</span><span style=color:#abb2bf>()</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// WatchConfig starts watching a config file for changes.
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// WatchConfig 开始监视配置文件的变化。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>WatchConfig</span><span style=color:#abb2bf>()</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>initWG</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>sync</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>WaitGroup</span><span style=color:#abb2bf>{}</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>initWG</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Add</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>1</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>go</span> <span style=color:#76a9f9>func</span><span style=color:#abb2bf>()</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>watcher</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#00b1f7>newWatcher</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>			<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>logger</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Error</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sprintf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;failed to create watcher: %s&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span>			<span style=color:#aa89ea>os</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Exit</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>1</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>		<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>defer</span> <span style=color:#aa89ea>watcher</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Close</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=color:#8a93a5;font-style:italic>// 我们必须监视整个目录，以便跨平台捕捉重命名/原子保存
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>		<span style=color:#aa89ea>filename</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>getConfigFile</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>			<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>logger</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Error</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sprintf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;get config file: %s&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span>			<span style=color:#aa89ea>initWG</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Done</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>			<span style=color:#76a9f9>return</span>
</span></span><span style=display:flex><span>		<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>configFile</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>filepath</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Clean</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>configDir</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>_</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>filepath</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Split</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>configFile</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>realConfigFile</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>_</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>filepath</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>EvalSymlinks</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>eventsWG</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>sync</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>WaitGroup</span><span style=color:#abb2bf>{}</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>eventsWG</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Add</span><span style=color:#abb2bf>(</span><span style=color:#d19a66>1</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>go</span> <span style=color:#76a9f9>func</span><span style=color:#abb2bf>()</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>			<span style=color:#76a9f9>for</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>				<span style=color:#76a9f9>select</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>				<span style=color:#76a9f9>case</span> <span style=color:#aa89ea>event</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>ok</span> <span style=color:#54b1c7>:=</span> <span style=color:#54b1c7>&lt;-</span><span style=color:#aa89ea>watcher</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Events</span><span style=color:#abb2bf>:</span>
</span></span><span style=display:flex><span>					<span style=color:#76a9f9>if</span> <span style=color:#abb2bf>!</span><span style=color:#aa89ea>ok</span> <span style=color:#abb2bf>{</span> <span style=color:#8a93a5;font-style:italic>// &#39;Events&#39; 通道已关闭
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>						<span style=color:#aa89ea>eventsWG</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Done</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>						<span style=color:#76a9f9>return</span>
</span></span><span style=display:flex><span>					<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>					<span style=color:#aa89ea>currentConfigFile</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>_</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>filepath</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>EvalSymlinks</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                    <span style=color:#8a93a5;font-style:italic>// 我们只关心以下情况的配置文件：
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>					<span style=color:#8a93a5;font-style:italic>// 1 - 配置文件被修改或创建
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>					<span style=color:#8a93a5;font-style:italic>// 2 - 配置文件的真实路径发生变化（例如：k8s ConfigMap 替换）
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>					<span style=color:#76a9f9>if</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>filepath</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Clean</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>event</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Name</span><span style=color:#abb2bf>)</span> <span style=color:#54b1c7>==</span> <span style=color:#aa89ea>configFile</span> <span style=color:#54b1c7>&amp;&amp;</span>
</span></span><span style=display:flex><span>						<span style=color:#abb2bf>(</span><span style=color:#aa89ea>event</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Has</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fsnotify</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Write</span><span style=color:#abb2bf>)</span> <span style=color:#54b1c7>||</span> <span style=color:#aa89ea>event</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Has</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fsnotify</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Create</span><span style=color:#abb2bf>)))</span> <span style=color:#54b1c7>||</span>
</span></span><span style=display:flex><span>						<span style=color:#abb2bf>(</span><span style=color:#aa89ea>currentConfigFile</span> <span style=color:#54b1c7>!=</span> <span style=color:#98c379>&#34;&#34;</span> <span style=color:#54b1c7>&amp;&amp;</span> <span style=color:#aa89ea>currentConfigFile</span> <span style=color:#54b1c7>!=</span> <span style=color:#aa89ea>realConfigFile</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>						<span style=color:#aa89ea>realConfigFile</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>currentConfigFile</span>
</span></span><span style=display:flex><span>						<span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ReadInConfig</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>						<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>							<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>logger</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Error</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sprintf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;read config file: %s&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span>						<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>						<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>onConfigChange</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>							<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>onConfigChange</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>event</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>						<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>					<span style=color:#abb2bf>}</span> <span style=color:#76a9f9>else</span> <span style=color:#76a9f9>if</span> <span style=color:#aa89ea>filepath</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Clean</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>event</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Name</span><span style=color:#abb2bf>)</span> <span style=color:#54b1c7>==</span> <span style=color:#aa89ea>configFile</span> <span style=color:#54b1c7>&amp;&amp;</span> <span style=color:#aa89ea>event</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Has</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fsnotify</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Remove</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>						<span style=color:#aa89ea>eventsWG</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Done</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>						<span style=color:#76a9f9>return</span>
</span></span><span style=display:flex><span>					<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>				<span style=color:#76a9f9>case</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>ok</span> <span style=color:#54b1c7>:=</span> <span style=color:#54b1c7>&lt;-</span><span style=color:#aa89ea>watcher</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Errors</span><span style=color:#abb2bf>:</span>
</span></span><span style=display:flex><span>					<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>ok</span> <span style=color:#abb2bf>{</span> <span style=color:#8a93a5;font-style:italic>// &#39;Errors&#39; 通道未关闭
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>						<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>logger</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Error</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sprintf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;watcher error: %s&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span>					<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>					<span style=color:#aa89ea>eventsWG</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Done</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>					<span style=color:#76a9f9>return</span>
</span></span><span style=display:flex><span>				<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>			<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>		<span style=color:#abb2bf>}()</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>watcher</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Add</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>configDir</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>initWG</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Done</span><span style=color:#abb2bf>()</span>   <span style=color:#8a93a5;font-style:italic>// 此 go 协程中的监视初始化完成，所以父协程可以继续执行...
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>		<span style=color:#aa89ea>eventsWG</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Wait</span><span style=color:#abb2bf>()</span> <span style=color:#8a93a5;font-style:italic>// 现在，等待此 go 协程中的事件循环结束...
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#abb2bf>}()</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>initWG</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Wait</span><span style=color:#abb2bf>()</span> <span style=color:#8a93a5;font-style:italic>// 确保上述 go 协程完全结束后再返回
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>WatchConfig starts watching a config file for changes.</p><p>​ WatchConfig 函数开始监视配置文件的更改。</p><h4 id=func-watchremoteconfig>func WatchRemoteConfig</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>WatchRemoteConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>return</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>WatchRemoteConfig</span><span style=color:#abb2bf>()</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>WatchRemoteConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>watchKeyValueConfig</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic>// 检索第一个找到的远程配置。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>watchKeyValueConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#e5c07b>len</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>remoteProviders</span><span style=color:#abb2bf>)</span> <span style=color:#54b1c7>==</span> <span style=color:#d19a66>0</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>return</span> <span style=color:#00b1f7>RemoteConfigError</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;No Remote Providers&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>for</span> <span style=color:#aa89ea>_</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>rp</span> <span style=color:#54b1c7>:=</span> <span style=color:#76a9f9>range</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>remoteProviders</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>val</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>watchRemoteConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rp</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>			<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>logger</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Error</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Errorf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;watch remote config: %w&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span><span style=color:#abb2bf>).</span><span style=color:#00b1f7>Error</span><span style=color:#abb2bf>())</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>			<span style=color:#76a9f9>continue</span>
</span></span><span style=display:flex><span>		<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>kvstore</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>val</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>return</span> <span style=color:#e5c07b>nil</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#00b1f7>RemoteConfigError</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;No Files Found&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=func-writeconfig---101>func WriteConfig &lt;- 1.0.1</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>WriteConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>return</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>WriteConfig</span><span style=color:#abb2bf>()</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>WriteConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>filename</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>getConfigFile</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>err</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>writeConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span><span style=color:#abb2bf>,</span> <span style=color:#e5c07b>true</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ WriteConfig 函数将当前配置写入一个文件。</p><h4 id=func-writeconfigas---101>func WriteConfigAs &lt;- 1.0.1</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">45
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>WriteConfigAs</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span> 
</span></span><span style=display:flex><span>    <span style=color:#76a9f9>return</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>WriteConfigAs</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span><span style=color:#abb2bf>)</span> 
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>WriteConfigAs</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>writeConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span><span style=color:#abb2bf>,</span> <span style=color:#e5c07b>true</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>writeConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>force</span> <span style=color:#e5c07b>bool</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>logger</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Info</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;attempting to write configuration to file&#34;</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>var</span> <span style=color:#aa89ea>configType</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>ext</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>filepath</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Ext</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>ext</span> <span style=color:#54b1c7>!=</span> <span style=color:#98c379>&#34;&#34;</span> <span style=color:#54b1c7>&amp;&amp;</span> <span style=color:#aa89ea>ext</span> <span style=color:#54b1c7>!=</span> <span style=color:#aa89ea>filepath</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Base</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>configType</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>ext</span><span style=color:#abb2bf>[</span><span style=color:#d19a66>1</span><span style=color:#abb2bf>:]</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span> <span style=color:#76a9f9>else</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>configType</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>configType</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>configType</span> <span style=color:#54b1c7>==</span> <span style=color:#98c379>&#34;&#34;</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Errorf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;config type could not be determined for %s&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>filename</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#abb2bf>!</span><span style=color:#00b1f7>stringInSlice</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>configType</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>SupportedExts</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>return</span> <span style=color:#00b1f7>UnsupportedConfigError</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>configType</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>config</span> <span style=color:#54b1c7>==</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>config</span> <span style=color:#abb2bf>=</span> <span style=color:#e5c07b>make</span><span style=color:#abb2bf>(</span><span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>flags</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>os</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>O_CREATE</span> <span style=color:#abb2bf>|</span> <span style=color:#aa89ea>os</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>O_TRUNC</span> <span style=color:#abb2bf>|</span> <span style=color:#aa89ea>os</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>O_WRONLY</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#abb2bf>!</span><span style=color:#aa89ea>force</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>flags</span> <span style=color:#54b1c7>|=</span> <span style=color:#aa89ea>os</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>O_EXCL</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>f</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>fs</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>OpenFile</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>flags</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>configPermissions</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>err</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>defer</span> <span style=color:#aa89ea>f</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Close</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>if</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>:=</span> <span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>marshalWriter</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>f</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>configType</span><span style=color:#abb2bf>);</span> <span style=color:#aa89ea>err</span> <span style=color:#54b1c7>!=</span> <span style=color:#e5c07b>nil</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>err</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>f</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sync</span><span style=color:#abb2bf>()</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ WriteConfigAs函数将当前配置写入一个给定的文件名中。</p><h3 id=类型>类型</h3><h4 id=type-configfilealreadyexistserror---160>type ConfigFileAlreadyExistsError &lt;- 1.6.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>ConfigFileAlreadyExistsError</span> <span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>​ ConfigFileAlreadyExistsError类型表示写入新配置文件失败。</p><h5 id=configfilealreadyexistserror-error---160>(ConfigFileAlreadyExistsError) Error &lt;- 1.6.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>faee</span> <span style=color:#aa89ea>ConfigFileAlreadyExistsError</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Error</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sprintf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;Config File %q Already Exists&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>faee</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Error returns the formatted error when configuration already exists.</p><p>​ Error方法返回配置已存在时的格式化错误信息。（？？不是配置文件已存在的错误？？）</p><h4 id=type-configfilenotfounderror>type ConfigFileNotFoundError</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>ConfigFileNotFoundError</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>name</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>locations</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ ConfigFileNotFoundError结构体表示无法找到配置文件。</p><h5 id=configfilenotfounderror-error>(ConfigFileNotFoundError) Error</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>fnfe</span> <span style=color:#aa89ea>ConfigFileNotFoundError</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Error</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sprintf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;Config File %q Not Found in %q&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>fnfe</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>name</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>fnfe</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>locations</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Error方法返回格式化的配置错误信息。</p><h4 id=type-configmarshalerror---101>type ConfigMarshalError &lt;- 1.0.1</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>ConfigMarshalError</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>err</span> <span style=color:#e5c07b>error</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ ConfigMarshalError结构体表示无法将配置进行系列化（Marshal）时发生错误。</p><h5 id=configmarshalerror-error---101>(ConfigMarshalError) Error &lt;- 1.0.1</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>e</span> <span style=color:#aa89ea>ConfigMarshalError</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Error</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sprintf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;While marshaling config: %s&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>e</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>err</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Error</span><span style=color:#abb2bf>())</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Error方法返回格式化的配置错误信息。</p><h4 id=type-configparseerror>type ConfigParseError</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>ConfigParseError</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>err</span> <span style=color:#e5c07b>error</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ ConfigParseError结构体表示解析配置文件失败。</p><h5 id=configparseerror-error>(ConfigParseError) Error</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>pe</span> <span style=color:#aa89ea>ConfigParseError</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Error</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sprintf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;While parsing config: %s&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>pe</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>err</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Error</span><span style=color:#abb2bf>())</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Error方法返回格式化的配置错误信息。</p><h5 id=configparseerror-unwrap---1160>(ConfigParseError) Unwrap &lt;- 1.16.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>pe</span> <span style=color:#aa89ea>ConfigParseError</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Unwrap</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>pe</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>err</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Unwrap方法返回包装的错误。</p><h4 id=type-decoderconfigoption---110>type DecoderConfigOption &lt;- 1.1.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>DecoderConfigOption</span> <span style=color:#76a9f9>func</span><span style=color:#abb2bf>(</span><span style=color:#54b1c7>*</span><span style=color:#aa89ea>mapstructure</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>DecoderConfig</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 可以将DecoderConfigOption传递给viper.Unmarshal，以配置mapstructure.DecoderConfig选项。</p><h5 id=func-decodehook---110>func DecodeHook &lt;- 1.1.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>DecodeHook</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>hook</span> <span style=color:#aa89ea>mapstructure</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>DecodeHookFunc</span><span style=color:#abb2bf>)</span> <span style=color:#aa89ea>DecoderConfigOption</span>
</span></span></code></pre></td></tr></table></div></div><p>​ DecodeHook函数返回一个DecoderConfigOption，用于覆盖默认的DecoderConfig.DecodeHook值，其默认值为：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span> <span style=color:#aa89ea>mapstructure</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>ComposeDecodeHookFunc</span><span style=color:#abb2bf>(</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>mapstructure</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>StringToTimeDurationHookFunc</span><span style=color:#abb2bf>(),</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>mapstructure</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>StringToSliceHookFunc</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;,&#34;</span><span style=color:#abb2bf>),</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=type-flagvalue>type FlagValue</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>FlagValue</span> <span style=color:#76a9f9>interface</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#00b1f7>HasChanged</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>bool</span>
</span></span><span style=display:flex><span>	<span style=color:#00b1f7>Name</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#00b1f7>ValueString</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#00b1f7>ValueType</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ FlagValue是一个接口，用户可以实现该接口来将不同的标志（flag）绑定到viper上。</p><h4 id=type-flagvalueset>type FlagValueSet</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>FlagValueSet</span> <span style=color:#76a9f9>interface</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#00b1f7>VisitAll</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fn</span> <span style=color:#76a9f9>func</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>FlagValue</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ FlagValueSet是一个接口，用户可以实现该接口来将一组标志（flag）绑定到viper上。</p><h4 id=type-logger---1100>type Logger &lt;- 1.10.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">30
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>Logger</span> <span style=color:#76a9f9>interface</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// Trace方法记录Trace事件。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>//
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>// 比Debug事件提供更细粒度的信息。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>// 不支持此级别的日志记录器应该回退到Debug。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#00b1f7>Trace</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>msg</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>keyvals</span> <span style=color:#54b1c7>...</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// Debug方法记录Debug事件。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>//
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>// 一系列详细信息事件。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>// 在调试系统时很有用。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#00b1f7>Debug</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>msg</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>keyvals</span> <span style=color:#54b1c7>...</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span>
</span></span><span style=display:flex><span>	
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// Info方法记录Info事件。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>//
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>// 关于系统内部发生的一般信息。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#00b1f7>Info</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>msg</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>keyvals</span> <span style=color:#54b1c7>...</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// Warn方法记录Warn(ing)事件。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>//
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>    <span style=color:#8a93a5;font-style:italic>// 应该查看的非致命（non-critical）事件。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#00b1f7>Warn</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>msg</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>keyvals</span> <span style=color:#54b1c7>...</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// Error方法记录Error事件。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>//
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>    <span style=color:#8a93a5;font-style:italic>// 需要立即注意的致命事件（critical events）。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>// 日志记录器通常在Error级别以上提供Fatal和Panic级别，
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#8a93a5;font-style:italic>// 但退出和恐慌超出了日志记录库的范围。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#00b1f7>Error</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>msg</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>keyvals</span> <span style=color:#54b1c7>...</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Logger接口是各种日志记录用例和实践的统一接口，包括：</p><ul><li>分级日志记录</li><li>结构化日志记录</li></ul><h4 id=type-option---160>type Option &lt;- 1.6.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>Option</span> <span style=color:#76a9f9>interface</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#00b1f7>apply</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Option接口使用Rob Pike和Dave Cheney提倡的功能选项范式（functional options paradigm）配置Viper。如果您对此风格不熟悉，请参阅<a href=https://commandcenter.blogspot.com/2014/01/self-referential-functions-and-design.html>https://commandcenter.blogspot.com/2014/01/self-referential-functions-and-design.html</a>和<a href=https://dave.cheney.net/2014/10/17/functional-options-for-friendly-apis>https://dave.cheney.net/2014/10/17/functional-options-for-friendly-apis</a>。</p><h5 id=func-envkeyreplacer---160>func EnvKeyReplacer &lt;- 1.6.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>EnvKeyReplacer</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>r</span> <span style=color:#aa89ea>StringReplacer</span><span style=color:#abb2bf>)</span> <span style=color:#aa89ea>Option</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#00b1f7>optionFunc</span><span style=color:#abb2bf>(</span><span style=color:#76a9f9>func</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>		<span style=color:#aa89ea>v</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>envKeyReplacer</span> <span style=color:#abb2bf>=</span> <span style=color:#aa89ea>r</span>
</span></span><span style=display:flex><span>	<span style=color:#abb2bf>})</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>optionFunc</span> <span style=color:#76a9f9>func</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><p>EnvKeyReplacer sets a replacer used for mapping environment variables to internal keys.</p><p>​ EnvKeyReplacer函数设置用于将环境变量映射到内部键的替换器。</p><h5 id=func-iniloadoptions---180>func IniLoadOptions &lt;- 1.8.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>IniLoadOptions</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#aa89ea>ini</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>LoadOptions</span><span style=color:#abb2bf>)</span> <span style=color:#aa89ea>Option</span>
</span></span></code></pre></td></tr></table></div></div><p>​ IniLoadOptions函数设置ini解析的加载选项。</p><h5 id=func-keydelimiter---160>func KeyDelimiter &lt;- 1.6.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>KeyDelimiter</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>d</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#aa89ea>Option</span>
</span></span></code></pre></td></tr></table></div></div><p>KeyDelimiter sets the delimiter used for determining key parts. By default it&rsquo;s value is &ldquo;.&rdquo;.</p><p>​ KeyDelimiter函数设置用于确定键部分的分隔符。默认值为&rdquo;."。</p><h4 id=type-remoteconfigerror>type RemoteConfigError</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>RemoteConfigError</span> <span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>RemoteConfigError denotes encountering an error while trying to pull the configuration from the remote provider.</p><p>​ RemoteConfigError类型表示在尝试从远程提供者获取配置时遇到错误。</p><h5 id=remoteconfigerror-error>(RemoteConfigError) Error</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>rce</span> <span style=color:#aa89ea>RemoteConfigError</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Error</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Error方法返回格式化的远程提供者错误。</p><h4 id=type-remoteprovider>type RemoteProvider</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>RemoteProvider</span> <span style=color:#76a9f9>interface</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#00b1f7>Provider</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#00b1f7>Endpoint</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#00b1f7>Path</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#00b1f7>SecretKeyring</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ RemoteProvider接口存储连接到远程键/值存储所需的配置。可提供secretKeyring以解密加密的值。</p><h4 id=type-remoteresponse>type RemoteResponse</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>RemoteResponse</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>Value</span> <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>byte</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>Error</span> <span style=color:#e5c07b>error</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><h4 id=type-stringreplacer---160>type StringReplacer &lt;- 1.6.0</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>StringReplacer</span> <span style=color:#76a9f9>interface</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#8a93a5;font-style:italic>// Replace 返回执行所有替换操作后的 s 的副本。
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#00b1f7>Replace</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>s</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ StringReplacer 接口对字符串应用一组替换。</p><h4 id=type-unsupportedconfigerror>type UnsupportedConfigError</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>UnsupportedConfigError</span> <span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>​ UnsupportedConfigError 类型表示遇到不支持的配置文件类型。</p><h5 id=unsupportedconfigerror-error>(UnsupportedConfigError) Error</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>str</span> <span style=color:#aa89ea>UnsupportedConfigError</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Error</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span> <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>return</span> <span style=color:#aa89ea>fmt</span><span style=color:#abb2bf>.</span><span style=color:#00b1f7>Sprintf</span><span style=color:#abb2bf>(</span><span style=color:#98c379>&#34;Unsupported Config Type %q&#34;</span><span style=color:#abb2bf>,</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>str</span><span style=color:#abb2bf>))</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Error 方法返回格式化的配置错误。</p><h4 id=type-unsupportedremoteprovidererror>type UnsupportedRemoteProviderError</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>UnsupportedRemoteProviderError</span> <span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>​ UnsupportedRemoteProviderError 类型表示遇到不支持的远程提供者。目前只支持 etcd 和 Consul。</p><h5 id=unsupportedremoteprovidererror-error>(UnsupportedRemoteProviderError) Error</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>str</span> <span style=color:#aa89ea>UnsupportedRemoteProviderError</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Error</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><p>​ Error 方法返回格式化的远程提供者错误。</p><h4 id=type-viper>type Viper</h4><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">13
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">14
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">15
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">16
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">17
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">18
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">19
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">20
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">21
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">22
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">23
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">24
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">25
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">26
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">27
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">28
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">29
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">30
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">31
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">32
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">33
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">34
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">35
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">36
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">37
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">38
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">39
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">40
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">41
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">42
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">43
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">44
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">45
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>type</span> <span style=color:#aa89ea>Viper</span> <span style=color:#76a9f9>struct</span> <span style=color:#abb2bf>{</span>    
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// 分隔符，用于一次性访问嵌套值的键列表
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#aa89ea>keyDelim</span> <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// 用于查找配置文件的路径集合
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#aa89ea>configPaths</span> <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// 用于读取配置的文件系统
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#aa89ea>fs</span> <span style=color:#aa89ea>afero</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Fs</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// 用于搜索配置的远程提供者集合
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#aa89ea>remoteProviders</span> <span style=color:#abb2bf>[]</span><span style=color:#54b1c7>*</span><span style=color:#aa89ea>defaultRemoteProvider</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// 在路径中查找的文件的名称
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#aa89ea>configName</span>        <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>configFile</span>        <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>configType</span>        <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>configPermissions</span> <span style=color:#aa89ea>os</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>FileMode</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>envPrefix</span>         <span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// ini 解析的特定命令
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#aa89ea>iniLoadOptions</span> <span style=color:#aa89ea>ini</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>LoadOptions</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>automaticEnvApplied</span> <span style=color:#e5c07b>bool</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>envKeyReplacer</span>      <span style=color:#aa89ea>StringReplacer</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>allowEmptyEnv</span>       <span style=color:#e5c07b>bool</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>parents</span>        <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>config</span>         <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>override</span>       <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>defaults</span>       <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>kvstore</span>        <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>pflags</span>         <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#aa89ea>FlagValue</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>env</span>            <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>][]</span><span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>aliases</span>        <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#e5c07b>string</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>typeByDefValue</span> <span style=color:#e5c07b>bool</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>onConfigChange</span> <span style=color:#76a9f9>func</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fsnotify</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Event</span><span style=color:#abb2bf>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>logger</span> <span style=color:#aa89ea>Logger</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#8a93a5;font-style:italic>// TODO: 应该使用互斥锁（mutex）进行保护
</span></span></span><span style=display:flex><span><span style=color:#8a93a5;font-style:italic></span>	<span style=color:#aa89ea>encoderRegistry</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>encoding</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>EncoderRegistry</span>
</span></span><span style=display:flex><span>	<span style=color:#aa89ea>decoderRegistry</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>encoding</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>DecoderRegistry</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Viper is a prioritized configuration registry. It maintains a set of configuration sources, fetches values to populate those, and provides them according to the source&rsquo;s priority. The priority of the sources is the following: 1. overrides 2. flags 3. env. variables 4. config file 5. key/value store 6. defaults</p><p>​ Viper结构体是一个优先级配置注册表。它维护一组配置源，获取值以填充这些源，并根据源的优先级提供值。源的优先级如下：</p><ol><li>覆盖</li><li>标志</li><li>境变量 ‘</li><li>配置文件</li><li>键/值存储</li><li>默认值</li></ol><p>​ 例如，如果从以下源加载了值：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 5
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 6
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 7
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 8
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f"> 9
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">10
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">11
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>Defaults : <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>&#34;secret&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>&#34;user&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;default&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>&#34;endpoint&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;https://localhost&#34;</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>Config : <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>&#34;user&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;root&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#63c381>&#34;secret&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;defaultsecret&#34;</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span><span style=display:flex><span>Env : <span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>&#34;secret&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;somesecretkey&#34;</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 结果配置将具有以下值：</p><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">2
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">3
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">4
</span><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span><span style=color:#abb2bf>{</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>&#34;secret&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;somesecretkey&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>&#34;user&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;root&#34;</span><span style=color:#abb2bf>,</span>
</span></span><span style=display:flex><span>	<span style=color:#76a9f9>&#34;endpoint&#34;</span><span style=color:#abb2bf>:</span> <span style=color:#63c381>&#34;https://localhost&#34;</span>
</span></span><span style=display:flex><span><span style=color:#abb2bf>}</span>
</span></span></code></pre></td></tr></table></div></div><p>​ 注意：Vipers（对象）在并发的Get()和Set()操作中不是线程安全的。</p><h5 id=func-getviper>func GetViper</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>GetViper</span><span style=color:#abb2bf>()</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span>
</span></span></code></pre></td></tr></table></div></div><p>​ GetViper函数获取全局 Viper 实例。</p><h5 id=func-new>func New</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>New</span><span style=color:#abb2bf>()</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span>
</span></span></code></pre></td></tr></table></div></div><p>​ New 函数返回一个初始化后的 Viper 实例。</p><h5 id=func-newwithoptions---160>func NewWithOptions &lt;- 1.6.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>NewWithOptions</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>opts</span> <span style=color:#54b1c7>...</span><span style=color:#aa89ea>Option</span><span style=color:#abb2bf>)</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span>
</span></span></code></pre></td></tr></table></div></div><p>​ NewWithOptions函数创建一个新的 Viper 实例。</p><h5 id=func-sub>func Sub</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#00b1f7>Sub</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span>
</span></span></code></pre></td></tr></table></div></div><p>Sub returns new Viper instance representing a sub tree of this instance. Sub is case-insensitive for a key.</p><p>​ Sub 函数返回一个表示当前实例子树的新Viper实例。Sub函数对于键是不区分大小写的。</p><h5 id=viper-addconfigpath>(*Viper) AddConfigPath</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>AddConfigPath</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-addremoteprovider>(*Viper) AddRemoteProvider</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>AddRemoteProvider</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>provider</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>endpoint</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>path</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-addsecureremoteprovider>(*Viper) AddSecureRemoteProvider</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>AddSecureRemoteProvider</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>provider</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>endpoint</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>path</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>secretkeyring</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-allkeys>(*Viper) AllKeys</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>AllKeys</span><span style=color:#abb2bf>()</span> <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-allsettings>(*Viper) AllSettings</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>AllSettings</span><span style=color:#abb2bf>()</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-allowemptyenv---130>(*Viper) AllowEmptyEnv &lt;- 1.3.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>AllowEmptyEnv</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>allowEmptyEnv</span> <span style=color:#e5c07b>bool</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-automaticenv>(*Viper) AutomaticEnv</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>AutomaticEnv</span><span style=color:#abb2bf>()</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-bindenv>(*Viper) BindEnv</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>BindEnv</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>input</span> <span style=color:#54b1c7>...</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-bindflagvalue>(*Viper) BindFlagValue</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>BindFlagValue</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>flag</span> <span style=color:#aa89ea>FlagValue</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-bindflagvalues>(*Viper) BindFlagValues</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>BindFlagValues</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>flags</span> <span style=color:#aa89ea>FlagValueSet</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>err</span> <span style=color:#e5c07b>error</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-bindpflag>(*Viper) BindPFlag</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>BindPFlag</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>flag</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>pflag</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Flag</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-bindpflags>(*Viper) BindPFlags</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>BindPFlags</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>flags</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>pflag</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>FlagSet</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-configfileused>(*Viper) ConfigFileUsed</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>ConfigFileUsed</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-debug>(*Viper) Debug</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Debug</span><span style=color:#abb2bf>()</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-debugto---1130>(*Viper) DebugTo &lt;- 1.13.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>DebugTo</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>w</span> <span style=color:#aa89ea>io</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Writer</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-get>(*Viper) Get</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Get</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getbool>(*Viper) GetBool</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetBool</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>bool</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getduration>(*Viper) GetDuration</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetDuration</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#aa89ea>time</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Duration</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getfloat64>(*Viper) GetFloat64</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetFloat64</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>float64</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getint>(*Viper) GetInt</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetInt</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>int</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getint32---110>(*Viper) GetInt32 &lt;- 1.1.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetInt32</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>int32</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getint64>(*Viper) GetInt64</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetInt64</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>int64</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getintslice---150>(*Viper) GetIntSlice &lt;- 1.5.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetIntSlice</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>int</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getsizeinbytes>(*Viper) GetSizeInBytes</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetSizeInBytes</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>uint</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getstring>(*Viper) GetString</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetString</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getstringmap>(*Viper) GetStringMap</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetStringMap</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{}</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getstringmapstring>(*Viper) GetStringMapString</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetStringMapString</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getstringmapstringslice>(*Viper) GetStringMapStringSlice</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetStringMapStringSlice</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>][]</span><span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getstringslice>(*Viper) GetStringSlice</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetStringSlice</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#abb2bf>[]</span><span style=color:#e5c07b>string</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-gettime>(*Viper) GetTime</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetTime</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#aa89ea>time</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Time</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getuint---140>(*Viper) GetUint &lt;- 1.4.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetUint</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>uint</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getuint16---1130>(*Viper) GetUint16 &lt;- 1.13.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetUint16</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>uint16</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getuint32---140>(*Viper) GetUint32 &lt;- 1.4.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetUint32</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>uint32</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-getuint64---140>(*Viper) GetUint64 &lt;- 1.4.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>GetUint64</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>uint64</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-inconfig>(*Viper) InConfig</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>InConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>bool</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-isset>(*Viper) IsSet</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>IsSet</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>bool</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-mergeconfig>(*Viper) MergeConfig</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>MergeConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#aa89ea>io</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Reader</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-mergeconfigmap---130>(*Viper) MergeConfigMap &lt;- 1.3.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>MergeConfigMap</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>cfg</span> <span style=color:#76a9f9>map</span><span style=color:#abb2bf>[</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>]</span><span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-mergeinconfig>(*Viper) MergeInConfig</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>MergeInConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-mustbindenv---1120>(*Viper) MustBindEnv &lt;- 1.12.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>MustBindEnv</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>input</span> <span style=color:#54b1c7>...</span><span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-onconfigchange>(*Viper) OnConfigChange</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>OnConfigChange</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>run</span> <span style=color:#76a9f9>func</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#aa89ea>fsnotify</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Event</span><span style=color:#abb2bf>))</span>
</span></span></code></pre></td></tr></table></div></div><p>OnConfigChange sets the event handler that is called when a config file changes.</p><p>​ OnConfigChange 方法设置在配置文件更改时调用的事件处理程序。</p><h5 id=viper-readconfig>(*Viper) ReadConfig</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>ReadConfig</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#aa89ea>io</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Reader</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-readinconfig>(*Viper) ReadInConfig</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>ReadInConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-readremoteconfig>(*Viper) ReadRemoteConfig</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>ReadRemoteConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-registeralias>(*Viper) RegisterAlias</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>RegisterAlias</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>alias</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-safewriteconfig---101>(*Viper) SafeWriteConfig &lt;- 1.0.1</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SafeWriteConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-safewriteconfigas---101>(*Viper) SafeWriteConfigAs &lt;- 1.0.1</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SafeWriteConfigAs</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-set>(*Viper) Set</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Set</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>value</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-setconfigfile>(*Viper) SetConfigFile</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetConfigFile</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-setconfigname>(*Viper) SetConfigName</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetConfigName</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-setconfigpermissions---140>(*Viper) SetConfigPermissions &lt;- 1.4.0</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetConfigPermissions</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>perm</span> <span style=color:#aa89ea>os</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>FileMode</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-setconfigtype>(*Viper) SetConfigType</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetConfigType</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-setdefault>(*Viper) SetDefault</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetDefault</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>value</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{})</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-setenvkeyreplacer>(*Viper) SetEnvKeyReplacer</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetEnvKeyReplacer</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>r</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>strings</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Replacer</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-setenvprefix>(*Viper) SetEnvPrefix</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetEnvPrefix</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>in</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-setfs>(*Viper) SetFs</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetFs</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>fs</span> <span style=color:#aa89ea>afero</span><span style=color:#abb2bf>.</span><span style=color:#aa89ea>Fs</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-settypebydefaultvalue>(*Viper) SetTypeByDefaultValue</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>SetTypeByDefaultValue</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>enable</span> <span style=color:#e5c07b>bool</span><span style=color:#abb2bf>)</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-sub>(*Viper) Sub</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Sub</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-unmarshal>(*Viper) Unmarshal</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>Unmarshal</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rawVal</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{},</span> <span style=color:#aa89ea>opts</span> <span style=color:#54b1c7>...</span><span style=color:#aa89ea>DecoderConfigOption</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-unmarshalexact>(*Viper) UnmarshalExact</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>UnmarshalExact</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>rawVal</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{},</span> <span style=color:#aa89ea>opts</span> <span style=color:#54b1c7>...</span><span style=color:#aa89ea>DecoderConfigOption</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-unmarshalkey>(*Viper) UnmarshalKey</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>UnmarshalKey</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>key</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>,</span> <span style=color:#aa89ea>rawVal</span> <span style=color:#76a9f9>interface</span><span style=color:#abb2bf>{},</span> <span style=color:#aa89ea>opts</span> <span style=color:#54b1c7>...</span><span style=color:#aa89ea>DecoderConfigOption</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-watchconfig>(*Viper) WatchConfig</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>WatchConfig</span><span style=color:#abb2bf>()</span>
</span></span></code></pre></td></tr></table></div></div><p>WatchConfig starts watching a config file for changes.</p><p>​ WatchConfig 方法开始监视配置文件的更改。</p><h5 id=viper-watchremoteconfig>(*Viper) WatchRemoteConfig</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>WatchRemoteConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-watchremoteconfigonchannel>(*Viper) WatchRemoteConfigOnChannel</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>WatchRemoteConfigOnChannel</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-writeconfig---101>(*Viper) WriteConfig &lt;- 1.0.1</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>WriteConfig</span><span style=color:#abb2bf>()</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><h5 id=viper-writeconfigas---101>(*Viper) WriteConfigAs &lt;- 1.0.1</h5><div class=highlight><div style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#58626f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go><span style=display:flex><span><span style=color:#76a9f9>func</span> <span style=color:#abb2bf>(</span><span style=color:#aa89ea>v</span> <span style=color:#54b1c7>*</span><span style=color:#aa89ea>Viper</span><span style=color:#abb2bf>)</span> <span style=color:#00b1f7>WriteConfigAs</span><span style=color:#abb2bf>(</span><span style=color:#aa89ea>filename</span> <span style=color:#e5c07b>string</span><span style=color:#abb2bf>)</span> <span style=color:#e5c07b>error</span>
</span></span></code></pre></td></tr></table></div></div><div class=section-index></div><div class=td-page-meta__lastmod>最后修改 October 10, 2024: <a href=https://github.com/before80/go_docs/commit/a4b8f854f736d720ad19943e1274acc7bb0e3264>更新 (a4b8f85)</a></div></div></main></div></div><footer class="td-footer row d-print-none"><div class=container-fluid><div class="row mx-md-2"><div class="td-footer__left col-6 col-sm-4 order-sm-1"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title="User mailing list" aria-label="User mailing list"><a target=_blank rel=noopener href=https://example.org/mail aria-label="User mailing list"><i class="fa fa-envelope"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Twitter aria-label=Twitter><a target=_blank rel=noopener href=https://example.org/twitter aria-label=Twitter><i class="fab fa-twitter"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Stack Overflow" aria-label="Stack Overflow"><a target=_blank rel=noopener href=https://example.org/stack aria-label="Stack Overflow"><i class="fab fa-stack-overflow"></i></a></li></ul></div><div class="td-footer__right col-6 col-sm-4 order-sm-3"><ul class=td-footer__links-list><li class=td-footer__links-item data-bs-toggle=tooltip title=GitHub aria-label=GitHub><a target=_blank rel=noopener href=https://github.com/before80/go_docs aria-label=GitHub><i class="fab fa-github"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title=Slack aria-label=Slack><a target=_blank rel=noopener href=https://example.org/slack aria-label=Slack><i class="fab fa-slack"></i></a></li><li class=td-footer__links-item data-bs-toggle=tooltip title="Developer mailing list" aria-label="Developer mailing list"><a target=_blank rel=noopener href=https://example.org/mail aria-label="Developer mailing list"><i class="fa fa-envelope"></i></a></li></ul></div><div class="td-footer__center col-12 col-sm-4 py-2 order-sm-2"><span class=td-footer__copyright>&copy;
2025
<span class=td-footer__authors>作者zlongx</span></span><span class=td-footer__all_rights_reserved>保留所有权利</span><span class=ms-2><a href=https://policies.google.com/privacy target=_blank rel=noopener>隐私政策</a></span><p class="td-footer__about mt-2"><a href=/go_docs/thirdPkg/lua/about/>关于</a></p></div></div></div></footer></div><style>.markmap>svg{width:100%;height:300px}</style><script>window.markmap={autoLoader:{manual:!0,onReady(){const{autoLoader:e,builtInPlugins:t}=window.markmap;e.transformPlugins=t.filter(e=>e.name!=="prism")}}}</script><script src=https://cdn.jsdelivr.net/npm/markmap-autoloader></script>
<script src=/go_docs/js/main.min.4fb55790d81bdab4cd314586e186d385cad5508994c45abe27c6daee34d84160.js integrity="sha256-T7VXkNgb2rTNMUWG4YbThcrVUImUxFq+J8ba7jTYQWA=" crossorigin=anonymous></script>
<script defer src=/go_docs/js/click-to-copy.min.14c7dd84004258325d147b971421f1d4dfd3f28500954f32ef71d1cfd0938f51.js integrity="sha256-FMfdhABCWDJdFHuXFCHx1N/T8oUAlU8y73HRz9CTj1E=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/@docsearch/js@3.6.0 integrity="sha512-FtDaTWf3IS29TLuYzTPlytjGqcXkwrzG9ivq7xXElnOZeiYTbcIy/hwXAgrrRNnI0+PfN+WFz4/+4phhJmuS8Q==" crossorigin=anonymous></script>
<script type=text/javascript>const containers=["#docsearch-0","#docsearch-1"];for(let e of containers)docsearch({container:e,appId:"DV76UK9EIH",apiKey:"227dec0ac6cbc8dfad748f27b2974507",indexName:"go-"})</script><script src=/go_docs/js/tabpane-persist.js></script>
<script src=/go_docs/js/tocbot.min.js></script>
<script src=/go_docs/js/markmap-autoloader.js></script>
<script type=text/javascript>window.addEventListener("load",function(){tocbot.init({tocSelector:".td-toc",contentSelector:".td-content",headingSelector:"h2, h3, h4, h5, h6",ignoreHiddenElements:!0,collapseDepth:6});let t=0,e=0,n=document.getElementById("show-timer"),s=document.getElementById("advice-reading-time"),o=s.textContent.trim();function i(){e++,e>=60&&(e=0,t++);let i=e<10?"0"+e:e;s!==null?n.textContent=t+":"+i+" <- "+o:n.textContent=t+":"+i}setInterval(i,1e3)})</script><script src=/go_docs/js/jquery-3.6.3.min.js></script>
<script src=/go_docs/js/deal-zero-width-space.js></script>
<script src=/go_docs/js/tabpane-persist.js></script></body></html>